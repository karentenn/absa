var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.accounts=absa.gadgets.accounts||{};absa.gadgets.accounts.init=function(a){a.balanceSet=false;if(absa.FEATURESTOREICONFORCURRENTACCOUNTONLY=="false"){if(absa.CLIENTTYPE!="B"&&absa.ENABLEFEATURESTORE=="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-shoppingCartFS",absa.index.onSwitchToFeatureStore,"Portfolio/ViewAccountBalance/Tooltip/FeatureStore")}}else{var b=false;var d=a.getPreference("account");if(d!=null){var c=JSONRequest.parse(d);if(c!=null){var e=c.accountType.name;if(e=="currentAccount"){b=true}}}if(b&&absa.CLIENTTYPE!="B"&&absa.ENABLEFEATURESTORE=="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-shoppingCartFS",absa.index.onSwitchToFeatureStore,"Portfolio/ViewAccountBalance/Tooltip/FeatureStore")}}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");absa.gadgets.accounts.setBar(a)};absa.gadgets.accounts.goTo=function(a){gadgets.pubsub.subscribe("goTo:unitTrust",function(b){absa.gadgets.accounts.onRestore(a)})};absa.gadgets.accounts.onRestore=function(g){if(g.loading){return false}var e=bb.selector.query(g.body,".ap-account-gadget-content");var l=g.getPreference("account");var f=JSONRequest.parse(l);var k=f.accountType.name;if(!e){var d=g.getPreference("balanceAvailable")||"true";var m=f.accountNo;var b=f.accessBits;var j=f.powerOfAttorney;var p=f.options.viewAccountInformation;var n=f.options.pricingOption;var o=f.accountType.options.eStatements;var c=f.accountType.options.notifyMe;var h=g.getPreference("gadgetIndex");var a;if(k=="onlineShareTrading"){a="proxy?pipe=genericEmptyResponse&xslFile=OnlineShareTrading/onlineShareTradingTableHead&accountType="+k+"&accountNo="+m+"&accountGroup=OST&index="+h}else{if(k=="passiveInvest"){a="proxy?pipe=genericEmptyResponse&xslFile=abcap/viewRAAccount/accountPassiveInvestment&mainTab=saveInvest&accountType="+k+"&accountNo="+m+"&accountGroup=AIMS&index="+h}else{if(k=="aims"){a="proxy?pipe=genericEmptyResponse&xslFile=aims&mainTab=accounts&accountType="+k+"&accountNo="+m+"&accountGroup=AIMS&index="+h}else{if(k=="unitTrustAccount"){a="proxy?pipe=genericEmptyResponse&xslFile=unitTrust"}else{if(k=="wim"){a="proxy?pipe=genericEmptyResponse&xslFile=aims/viewpolicy/accountTaxFreeInvestment&mainTab=saveInvest&accountType="+k+"&accountNo="+m+"&accountGroup=AIMS&index="+h}else{a="proxy?pipe=genericEmptyResponse&xslFile=accountsBalanceOverview&bShowBalance="+d+"&index="+h+"&accountNo="+m+"&accountType="+k+"&accountBits="+b+"&powerOfAttorney="+j+"&optionAccountName="+p+"&optionPricing="+n+"&optioneStatements="+o+"&optionNotifyMe="+c}}}}}phe.common.setAttribute(bb.selector.query(g.body,".ap-gadget-lazyContent"),"proxyurl",a);absa.gadgets.loadLazyContent(g,false,function(){if(k=="unitTrustAccount"){absa.gadgets.accounts.openGadget(g)}else{absa.gadgets.accounts.selectTab(g)}})}else{if(k=="unitTrustAccount"){absa.gadgets.accounts.openGadget(g)}else{absa.gadgets.accounts.selectTab(g)}}};absa.gadgets.accounts.openGadget=function(a){var b=function(){absa.gadgets.accounts.selectTab(a)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.accounts.lastTop=-1;absa.gadgets.accounts.lastAccNo=-1;absa.gadgets.accounts.wasAccountGadgetMoved=function(d){var c;if(bb.browser.ie){c=d.srcElement}else{c=d.target}if(c!=null){var b=bb.selector.queryAncestor(c,".p-gadget");var a=b.getAttribute("accountno");if((b.style.top!=absa.gadgets.accounts.lastTop)&&(a==absa.gadgets.accounts.lastAccNo)){absa.gadgets.accounts.saveAccountSequence()}absa.gadgets.accounts.lastTop=b.style.top;absa.gadgets.accounts.lastAccNo=a}};absa.gadgets.accounts.saveAccountSequence=function(){var b=[];var e=[];var k=bb.selector.query(document.body,".ap-container-content.ap-accounts-container");var j=bb.selector.queryAll(k,".p-gadget.ap-accountbar");for(var d=0;d<j.length;d++){if(j[d].getAttribute("accountno")){var g=""+j[d].style.top;var l=g.indexOf("px");var a=j[d].getAttribute("accountno");b.push(new Array(2));b[(b.length-1)][0]=Number(g.substring(0,l));b[(b.length-1)][1]=a}}if(b.length>0){b.sort(function(n,m){if(n[0]===m[0]){return 0}else{return(n[0]<m[0])?-1:1}});for(var f=0;f<b.length;f++){e.push(b[f][1])}if(e.length>0){var h={accounts:e};var c={};c[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;c[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(h);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=PortfolioWebService&action=updateAccountSequence",function(m){if(!m.errors.length){}},c)}}};absa.gadgets.accounts.setBar=function(k){k.setPreference("selectedTab",k.preferences.selectedTab["default"]);var c=k.getPreference("account");var g=JSONRequest.parse(c);var t=bb.selector.queryAncestor(k.body,".ap-accountbar");var l=g.accountType.name;var w=k.getPreference("balanceAvailable")||"true";t.setAttribute("accountNo",g.accountNo);t.addEventListener?t.addEventListener("mousedown",absa.gadgets.accounts.wasAccountGadgetMoved,false):t.attachEvent("onmousedown",absa.gadgets.accounts.wasAccountGadgetMoved);t.addEventListener?t.addEventListener("mouseup",absa.gadgets.accounts.wasAccountGadgetMoved,false):t.attachEvent("onmouseup",absa.gadgets.accounts.wasAccountGadgetMoved);bb.html.addClass(t,"ap-accountBalances");t.setAttribute("balance","false");switch(l){case"onlineShareTrading":bb.html.addClass(t,"ap-ostAccount");break;case"aims":bb.html.addClass(t,"ap-aimsAccount");break;case"unitTrustAccount":bb.html.addClass(t,"ap-unitTrustAccount");break;case"absaReward":bb.html.addClass(t,"ap-absaReward");break;case"cia":bb.html.addClass(t,"ap-currencyInvestmentAccount");break;case"corporatePropertyFinance":bb.html.addClass(t,"ap-retailAccount corporatePropertyFinance");break;case"passiveInvest":bb.html.addClass(t,"ap-retailAccount passiveInvest");break;case"creditCard":bb.html.addClass(t,"ap-retailAccount creditCard");break;case"noticeDeposit":bb.html.addClass(t,"ap-retailAccount noticeDeposit");break;case"termDeposit":bb.html.addClass(t,"ap-retailAccount termDeposit");break;case"currentAccount":bb.html.addClass(t,"ap-retailAccount current");break;default:bb.html.addClass(t,"ap-retailAccount current");break}if(l=="onlineShareTrading"|l=="onlineShareTradingPrivate"|l=="unitTrustAccount"|l=="aims"|l=="insurance"){k.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+g.displayName+"</div></div>");switch(l){case"onlineShareTrading":absa.gadgets.setSubtitle(k,absa.locale["Common/General/GadgetSubTitle/Label/OnlineShareTrading"]);break;case"unitTrustAccount":absa.gadgets.setSubtitle(k,absa.locale["Common/General/GadgetSubTitle/Label/UnitTrustAccount"]);break;case"aims":absa.gadgets.setSubtitle(k,absa.locale["Common/General/GadgetSubTitle/Label/Aims"]);break;case"insurance":absa.gadgets.setSubtitle(k,absa.locale["Common/General/GadgetSubTitle/Label/InsuranceAccount"]);break}}else{k.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+g.displayName+"</div></div>");if(absa.VI=="true"){}else{if(l=="cia"){var f=g.accountNo;var o=f.split("-");if(o!=null&&o.length>1){var d=o[0];var a=o[1].split("-");var s=a[0];absa.gadgets.setSubtitle(k,g.accountNo+"<img src='static/style/resources/"+s+".png' alt='Loading' width='15' height='13' style='padding-left:5px'/>")}else{absa.gadgets.setSubtitle(k,g.accountNo)}}else{absa.gadgets.setSubtitle(k,g.accountNo)}}}if(w=="true"){absa.util.observer.subscribe("balances",function(y){if(y[0]){var z=absa.locale["Portfolio/ViewAccountBalance/Label/Balance"];var K=absa.locale["Portfolio/ViewAccountBalance/Label/Available"];var E=absa.locale["Portfolio/ViewAccountBalance/Label/Uncleared"];var J=Math.floor(Math.random()*1000001);for(var H=0;H<y.length;H++){var F=y[H];if(F.accountNo==g.accountNo){if(typeof(k._window)!="undefined"&k._window!=null){var D=bb.selector.query(k._window.viewNode,".ap-balances");if(D){if(F.accountType!="aims"&&F.accountType!="absaReward"&&F.accountType!="unitTrustAccount"&&F.accountType!="onlineShareTrading"&&F.accountType!="insurance"&&F.accountType!="cia"&&F.accountType!="mccp"){var C=bb.selector.query(k._window.viewNode,".available-field");C.innerHTML='<label class="vi-hidden" for="'+J+'1">'+K+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'1">'+F.displayAvailable+"</span>";var M=bb.selector.query(k._window.viewNode,".uncleared-field");M.innerHTML='<label class="vi-hidden" for="'+J+'3">'+E+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'3">'+F.displayUncleared+"</span>"}var B=bb.selector.query(k._window.viewNode,".balance-field");var C=bb.selector.query(k._window.viewNode,".available-field");if(F.accountType=="cia"){var x=g.accountNo;var G=x.split("-");if(G!=null&&G.length>1){var I=G[0];var A=G[1].split("-");var L=A[0];C.innerHTML='<label class="vi-hidden" for="'+J+'1">'+K+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'1">'+L+""+F.displayAvailable+"</span>";B.innerHTML='<label class="vi-hidden" for="'+J+'2">'+z+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'2">'+F.displayBalance+"</span>"}else{C.innerHTML='<label class="vi-hidden" for="'+J+'1">'+K+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'1">'+F.displayAvailable+"</span>";B.innerHTML='<label class="vi-hidden" for="'+J+'2">'+z+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'2">'+F.displayBalance+"</span>"}}else{B.innerHTML='<label class="vi-hidden" for="'+J+'2">'+z+':</label><span tabindex="0" class="ap-balances-account-values" id="'+J+'2">'+F.displayBalance+"</span>"}k.balanceSet=true}}}}}});absa.util.observer.subscribe("load-balances",function(){if(typeof(k._window)!="undefined"&k._window!=null){var A=bb.selector.query(k._window.viewNode,".ap-balances");if(A){var z=bb.selector.query(A,".available-field");if(typeof(z)!="undefined"&z!=null){z.innerHTML=""}var x=bb.selector.query(A,".uncleared-field");if(typeof(x)!="undefined"&x!=null){x.innerHTML=""}var y=bb.selector.query(A,".balance-field");if(typeof(y)!="undefined"&y!=null){y.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />"}setTimeout(function(){absa.gadgets.accounts.isBalanceFound(k)},absa.TIMEOUT_BALANCE)}}})}var m="";var j;var e;var q;if(w=="false"){m=absa.locale["Portfolio/ViewAccountBalance/Label/NotAuthorised"];j=bb.html.createElementFromString('<div style="width: 490px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field">'+m+"</div>")}else{if(l=="mccp"){j=bb.html.createElementFromString('<div style="width: 165px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m "></div>');e=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m "></div>');q=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m "></div>')}else{j=bb.html.createElementFromString('<div style="width: 165px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>');e=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m available-field"></div>');q=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m uncleared-field"></div>')}}if(l=="onlineShareTrading"||l=="aims"||l=="unitTrustAccount"||l=="insurance"){e.style.width="50px";q.style.width="50px"}var p;var u=absa.locale["Portfolio/ViewAccountBalance/Tooltip/InActiveLink"];if(g.options){p=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');if(l=="currentAccount"&&absa.CLIENTTYPE!="B"&&absa.ENABLEFEATURESTORE=="true"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-shoppingCart","absa.index.onSwitchToFeatureStore(this)",absa.locale["Portfolio/ViewAccountBalance/Tooltip/FeatureStore"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/FeatureStore"]))}if(g.options.eStatements&&g.clientType!="B"&absa.VI!="true"&l!="cia"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-statement","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/Estatements"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/Estatements"]))}else{if(g.accountType.options.eStatements&&g.clientType!="B"&absa.VI!="true"&l!="cia"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-statement-inactivated","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/EstatementsManage"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/EstatementsManage"]))}}if(g.options.pricingOption&absa.VI!="true"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-price","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/PricingOption"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/PricingOption"]))}if(g.options.notifyMe&&g.powerOfAttorney=="false"&&absa.VI!="true"&&absa.TRANSACTIONALUSER=="true"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-mobile","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/NotifyMe"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/NotifyMe"]))}else{if(l!="cia"&&g.accountType.options.notifyMe&&g.powerOfAttorney=="false"&&absa.VI!="true"&&absa.TRANSACTIONALUSER=="true"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-mobile-inactivated","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/NotifyMeManage"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/NotifyMeManage"]))}}if(l!="onlineShareTrading"&l!="aims"&l!="absaReward"&l!="unitTrustAccount"&absa.VI!="true"&l!="insurance"&l!="cia"){p.appendChild(absa.gadgets.accounts.createButton("ap-icon-configure","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountName"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountName"]))}}else{if(absa.VI!="true"){var r=bb.html.createElementFromString('<div style="line-height: 33px; width: 141px; text-align:right" class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons"></div>');r.appendChild(absa.gadgets.accounts.createButton("ap-icon-configure","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountName"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountName"]));p.appendChild(r)}}if(l=="onlineShareTrading"|l=="onlineShareTradingPrivate"){var h=absa.locale["Portfolio/ViewAccountBalance/Tooltip/LogonTo"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/OST"];var n=absa.locale["Portfolio/ViewAccountBalance/Tooltip/RegisterFor"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/OST"];p.appendChild(absa.gadgets.accounts.createButton("ap-icon-logOn","absa.index.onLogonOSTButtonClick(this)",h,h));p.appendChild(absa.gadgets.accounts.createButton("ap-icon-arrowRight","absa.index.RegisterOST(this)",n,n))}if(l=="aims"){var h=absa.locale["Portfolio/ViewAccountBalance/Tooltip/LogonTo"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];var n=absa.locale["Portfolio/ViewAccountBalance/Tooltip/RegisterFor"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];p.appendChild(absa.gadgets.accounts.createButton("ap-icon-logOn","absa.index.onLogonAIMSButtonClick(this)",h,h));p.appendChild(absa.gadgets.accounts.createButton("ap-icon-arrowRight","absa.index.RegisterAIMS(this)",n,n))}var v=bb.html.createElementFromString("<div class='ap-balances'></div>");if(w=="true"){v.appendChild(q);v.appendChild(e)}v.appendChild(j);v.appendChild(p);var b=bb.selector.query(k._window.viewNode,".p-gadget-header");b.appendChild(v);if(l=="unitTrustAccount"){absa.gadgets.accounts.goTo(k)}};absa.gadgets.accounts.createButton=function(d,b,c,f){var a=[];a[a.length]="<button ";if(b){if(b!=""){a[a.length]='onclick="'+b+'" '}}a[a.length]='type="button" tooltip="'+c+'" ';a[a.length]='class="ui-button '+d+'">';a[a.length]='<div class="ui-button-left">';a[a.length]='<div class="ui-button-right">';a[a.length]='<div class="ui-button-center">';a[a.length]='<span class="vi-screenreader-line ">'+f+". </span>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</button>";var e=bb.html.createElementFromString(a.join(""));return e};absa.gadgets.accounts.isBalanceFound=function(a){if(a!=null&&!a.balanceSet){var b=bb.selector.query(a._window.viewNode,".balance-field");if(b!=null){b.innerHTML=absa.locale["Portfolio/ViewAccountBalance/Label/BalanceUnavailable"]}}};absa.gadgets.accounts.selectTab=function(a){var b=a.getPreference("selectedTab");var c;if(b&&b!="first"){c=bb.selector.query(a.body,".ap-option2Tab-"+b)}else{if(b=="first"){c=bb.selector.query(a.body,".ui-tabBox .ui-tabHeads li")}}if(c&&!a._dragging){phe.tabBox.selectTab(c)}a.setPreference("selectedTab","first")};absa.gadgets.accounts.openPdfFromCms=function(a){window.open("assets"+escape(a),"pdf","top=0,left=0,width=800,height=600")};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.applyForCreditCard=absa.gadgets.applyForCreditCard||{};var isAbsaCLIOffers="";var nCreditCardNumber="";var nBureauValue="";var nRiskLimit="";var nExistingLimit="";var nPreQualLimit="";var nAdditionalLimit="";absa.gadgets.applyForCreditCard.init=function(a){this.gadget=a;gadgets.pubsub.subscribe("goTo:applyForCreditCard/applyForCreditCard",function(b){absa.gadgets.applyForCreditCard.goTo(a);isAbsaCLIOffers="cliOffers";nCreditCardNumber=b.creditCardNumber;bIsCamsBureauDataFresh=b.isCamsBureauDataFresh;nTotalGrossMonthlyIncome=b.totalGrossMonthlyIncome;nExistingLimit=b.existingLimit;nTotalNetMonthlyIncome=b.totalNetMonthlyIncome;nAdditionalLimit=b.additionalLimit;nTotalMonhtlyLivingExpenses=b.totalMonhtlyLivingExpenses;nTotalMonthlyFixedDebtInstallment=b.totalMonthlyFixedDebtInstallment;nTelephoneExpense=b.telephoneExpense;nInsuranceExpense=b.insuranceExpense;nSecurityExpense=b.securityExpense;nBureauCategory=b.bureauCategory;nBureauCategoryAmount=b.bureauCategoryAmount})};absa.gadgets.applyForCreditCard.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.applyForCreditCard.onRestore(a);a._window.restore()}};absa.gadgets.applyForCreditCard.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.gadgets.loadLazyContent(a,true,function(){if(isAbsaCLIOffers=="cliOffers"){absa.gadgets.applyForCreditCard.expandCLI(a)}else{phe.loadingMessage.hideLoadingMessage(c)}})}isAbsaCLIOffers=""};absa.gadgets.applyForCreditCard.expandCLI=function(){var a=bb.selector.query(document.body,".ap-applyForCreditCard-tableBodyRowCLIExpand");phe.tableBodyRow.expandRow(a,"proxy?pipe=genericEmptyResponse&xslFile=Apply/creditCard/applyForCreditCardCLIDebtCounselling&creditCardNumberFromVCL="+nCreditCardNumber+"&existingLimitFromVCL="+nExistingLimit+"&cliLimitFromVCL="+nAdditionalLimit+"&isCamsBureauDataFresh="+bIsCamsBureauDataFresh+"&totalGrossMonthlyIncome="+nTotalGrossMonthlyIncome+"&totalNetMonthlyIncome="+nTotalNetMonthlyIncome+"&totalMonhtlyLivingExpenses="+nTotalMonhtlyLivingExpenses+"&totalMonthlyFixedDebtInstallment="+nTotalMonthlyFixedDebtInstallment+"&telephoneExpense="+nTelephoneExpense+"&insuranceExpense="+nInsuranceExpense+"&securityExpense="+nSecurityExpense+"&bureauCategory="+nBureauCategory+"&bureauCategoryAmount="+nBureauCategoryAmount)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.applyForRewards=absa.gadgets.applyForRewards||{};absa.gadgets.applyForRewards.init=function(a){if(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:applyForRewards/applyForRewards",function(b){absa.gadgets.applyForRewards.goTo(a)})}};absa.gadgets.applyForRewards.goTo=function(a){if(a){if(a!=null&&a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.applyForRewards.onRestore(a,true);a._window.restore()}}};absa.gadgets.applyForRewards.onRestore=function(a,b){if(a){var c=bb.selector.query(a.body,".ap-gadget-lazyContent");c.innerHTML='<div class="ap-loading-message"></div>';var d=bb.selector.query(c,".ap-loading-message");phe.loadingMessage.showLoadingMessage(d);if(b){absa.index.ficController.check("Apply",function(e){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(d);if(!e){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.internationalProducts=absa.gadgets.internationalProducts||{};absa.gadgets.internationalProducts.init=function(a){if(a!=null){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:internationalProducts/internationalProducts",function(b){absa.gadgets.internationalProducts.goTo(a);absa.gadgets.loadLazyContent(a,true,absa.gadgets.internationalProducts.navToOpenCIAacc(a))})}};absa.gadgets.internationalProducts.navToOpenCIAacc=function(a){return function(){var b=bb.selector.query(document.body,".ap-openAcc-CIA");absa.apps.internationalProducts.loadTab(phe.tableBodyRow.getRowExpandableExtension(b));phe.tableBodyRow.expandRow(b,"")}};absa.gadgets.internationalProducts.goTo=function(a){if(a!=null&&a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.internationalProducts.onRestore(a,false);a._window.restore()}};absa.gadgets.internationalProducts.onRestore=function(a){if(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){if(!d){var e=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,true)};if(e){e()}}else{a.minimize()}})}};var absa=absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.businessBanking=absa.gadgets.businessBanking||{};absa.gadgets.businessBanking.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:businessBanking/businessBankingStart",function(b){absa.gadgets.businessBanking.goTo(a)});if(absa.GIDTOSHOW=="g3010142"){absa.gadgets.businessBanking.goTo(a)}};absa.gadgets.businessBanking.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.businessBanking.onRestore(a);a._window.restore()}};absa.gadgets.businessBanking.onRestore=function(a){absa.gadgets.loadLazyContent(a,true)};absa.gadgets.businessBanking.onRestoreNOTUSED=function(a){var b=a.$onRestore||function(){};oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");if(!oLazyContent._isLoaded){absa.gadgets.loadLazyContent(a,true)}else{b()}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.creditLimits=absa.gadgets.creditLimits||{};absa.gadgets.creditLimits.termsAmountsValue=[];absa.gadgets.creditLimits.init=function(a){absa.gadgets.creditLimits.setBar(a);var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{if(absa.index.hideGadgetOnApplyClick!=0){if(absa.CLENABLE==="true"){if(absa.SBU=="E"){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&mode=getPersonalInfo&cifKey="+absa.CIFKEY,function(d){if(d!=null){if(!d.errors.length){if(d.text!=null){var f=bb.html.createElementFromString(d.text);if(f){var e=bb.selector.query(f,".ap-personalDetails-data");if(e){var c=e.getAttribute("bankingSector");if(Number(c)>=4&Number(c)<=5){}else{absa.gadgets.creditLimits.doIt(a)}}else{absa.gadgets.creditLimits.doIt(a)}}}}else{absa.gadgets.creditLimits.doIt(a)}}})}else{absa.gadgets.creditLimits.doIt(a)}}}}};absa.gadgets.creditLimits.doIt=function(a){absa.gadgets.creditLimits.subscribeToEvents(a);if(absa.CLIENTTYPE==="B"){setTimeout(function(){absa.gadgets.creditLimits.displayBbTermLoanGadget(a)},2000)}else{setTimeout(function(){absa.creditLimit.creditLimitCheck()},2000)}};absa.gadgets.creditLimits.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.creditLimits.subscribeToEvents=function(a){gadgets.pubsub.subscribe("goTo:creditLimits/viewCreditLimits",function(b){absa.gadgets.creditLimits.onRestore(a)});absa.util.observer.subscribe("load-creditLimits-maxLimit",function(b){if(b!=null){if(typeof(a._window)!="undefined"&a._window!=null){var d=bb.selector.query(a._window.viewNode,".available-field");var e=absa.util.formatCurrency(b);e=e.toString().replace(/R /g,"");d.innerHTML=e;var c=bb.selector.query(a._window.viewNode,".balance-field");c.innerHTML="0.00"}}})};absa.gadgets.creditLimits.setBar=function(d){var b=bb.selector.queryAncestor(d.body,".ap-accountbar");bb.html.addClass(b,"ap-accountBalances");bb.html.addClass(b,"ap-vcl");b.setAttribute("balance","false");var e=null;if(absa.CLIENTTYPE=="B"){d.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersBBTermLoan"]+"</div></div>");absa.gadgets.setSubtitle(d,absa.locale["Common/General/GadgetSubTitle/Label/OffersBBTermLoan"]);e="bbTermLoan"}else{e="creditLimits";absa.gadgets.setSubtitle(d,absa.locale["Common/General/GadgetSubTitle/Label/CreditLimits"])}var g=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');g.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps."+e+".onUnsubscribeClick(this,'OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));g.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps."+e+".onUnsubscribeClick(this,'OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));g.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps."+e+".onUnsubscribeClick(this,'OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var j=bb.html.createElementFromString('<div style="width: 170px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>');var a=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m available-field"></div>');var c=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m uncleared-field"></div>');var h=bb.html.createElementFromString("<div class='ap-balances'></div>");h.appendChild(a);h.appendChild(j);h.appendChild(g);var f=bb.selector.query(d._window.viewNode,".p-gadget-header");f.appendChild(h)};absa.gadgets.creditLimits.displayBbTermLoanGadget=function(a){var b=null;var c=null;var f;var e;var d="proxy?pipe=genericWebservice&ws=OffersBBTermLoanWebService&action=displayBBTermLoanGadget";absa.io.makeRequest(d,function(k){if(k!=null){if(!k.errors.length){e="NONE";try{if(k.text!=null){f=JSONRequest.parse(absa.util.stripTag(k.text));e=f[0].bbTermLoanDisplayDecision}}catch(m){e="NONE"}if(e=="ELIGIBLE"){if(f!=null&&f.length>1){var j=parseInt(f[1].bbTermLoanMaxLimit);for(var h=0;h<5;h++){absa.gadgets.creditLimits.termsAmountsValue[h]=f[2][h].bbTermsAmounts}absa.creditLimit.updateBalancesAndLimits(j);absa.index.plInitialised=1;var g=bb.selector.query(a.body,".ap-gadget-lazyContent");var l="proxy?pipe=genericEmptyResponse&xslFile=Offers/BbTermLoanOffers/bbTermLoanMain&maxLimit="+j;phe.common.setAttribute(g,"proxyurl",l);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010136"))}}}}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.exchangeTradedProducts=absa.gadgets.exchangeTradedProducts||{};absa.gadgets.exchangeTradedProducts.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:exchangeTradedProducts/discretionaryIvestments",function(b){absa.gadgets.exchangeTradedProducts.goTo(a,"discretionaryIvestments",b)});gadgets.pubsub.subscribe("goTo:exchangeTradedProducts/retirementAnnuity",function(b){absa.gadgets.exchangeTradedProducts.goTo(a,"retirementAnnuity",b)})};absa.gadgets.exchangeTradedProducts.goTo=function(a,c,d){var b=function(){if(d){if(d.productType=="RAProduct"||d.productType=="Investment"||d.productType=="INVACC"||d.productType=="TAXFREESAV"){if(d.status=="PEND"){var f=bb.selector.query(a.body,".ap-tabBody-"+c);var e=phe.tabBody.getAttribute(f,"proxyurl");var g="proxy?pipe=genericEmptyResponse&amp;xslFile=ExchangeTradedProducts/tradedProductsHomePage";if(d.productType=="TAXFREESAV"){g="proxy?pipe=genericEmptyResponse&xslFile=aims/apply/applyAimsProduct&callProxy=true&referenceNumber="+d.referenceNumber}else{if(d.productType=="RAProduct"){g="proxy?pipe=genericEmptyResponse&xslFile=abcap/ApplyNewBusinessForRA/newBusinessForRA&callProxy=true&referenceNumber="+d.referenceNumber}else{g="proxy?pipe=genericEmptyResponse&xslFile=abcap/NewBusinessINV/applyNewBusinessForINV&callProxy=true&referenceNumber="+d.referenceNumber}}phe.tabBody.setAttribute(f,"proxyurl",g);absa.gadgets.exchangeTradedProducts.loadTab(a,c,function(h){phe.tabBody.setAttribute(h,"proxyurl",e)})}}}};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.exchangeTradedProducts.onRestore=function(a,e,f){var c=a.$onRestore||function(){absa.gadgets.exchangeTradedProducts.loadTab(a,e)};var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var d=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(d);absa.index.ficController.check("Apply",function(g){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(d);if(!g){absa.gadgets.loadLazyContent(a,true,c)}else{a.minimize()}})}};absa.gadgets.exchangeTradedProducts.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.applyForInsurance=absa.gadgets.applyForInsurance||{};absa.gadgets.applyForInsurance.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:insurance/applyInsurance",function(b){absa.gadgets.applyForInsurance.goTo(a,"applyInsurance",b||{})})};absa.gadgets.applyForInsurance.goTo=function(a,d,e){var c="";var b=function(){if(d=="applyInsurance"){c="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew";if(e.productType=="ClassicLife"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/classiclife/classicLifePlan&mode=coverAmountSelection&callProxy=true&referenceNumber="+e.referenceNumber}else{if(e.productType=="FuneralPlan"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/funeralPlan/familyFuneralPlan&callProxy=true&referenceNumber="+e.referenceNumber}else{if(e.productType=="MotorVehicle"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermMotorYourDetails&callProxy=true&referenceNumber="+e.referenceNumber}else{if(e.productType=="HomeOwners"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermHomeOwnerYourDetails&callProxy=true&referenceNumber="+e.referenceNumber}else{if(e.productType=="HouseholdContents"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyHouseholdContents/applyHouseholdContentsAboutYou&callProxy=true&referenceNumber="+e.referenceNumber}else{if(e.productType=="StandardLifeApply"){c="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew"}else{if(e=="StandardLifeApply"){c="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew"}else{if(e.productType=="StandardShortTermApply"){c="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew"}else{if(e.productType=="Life"||e.productType=="applyClassicLife"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/classiclife/classicLifePlan&mode=coverAmountSelection&callProxy=false"}else{if(e.productType=="Funeral"||e.productType=="applyFuneralPlan"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/funeralPlan/familyFuneralPlan&callProxy=false&sliderValue="+e.getSliderSelection+"&sourceOfFund="+e.sourceOfFund}else{if(e.productType=="MO"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermMotorYourDetails&mode=step1&callProxy=false"}else{if(e.productType=="HO"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermHomeOwnerYourDetails&callProxy=false"}else{if(e.productType=="HH"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyHouseholdContents/applyHouseholdContentsAboutYou&callProxy=false"}else{if(e.productType=="Free"||e.productType=="applyFreeCover"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/freeCover/freeCoverDetails&mode=coverAmountSelection&callProxy=false"}else{if(e.productType=="MotorVCL"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermMotorYourDetails&mode=step1&callProxy=false&manufactureYear="+e.vehicleYear+"&makeDesc="+e.vehicleModel+"&modelDesc="+e.vehicleMake+"&retailValue="+e.vehicleRetailValue+"&productType="+e.productType}else{if(e.productType=="applyAffinity"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/Affinity/affinityCover&mode=coverAmountSelection&callProxy=false&sliderValue="+e.getSliderSelection+"&productType="+e.productType}else{if(e.productType=="AffinityPlan"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/Affinity/affinityCover&mode=coverAmountSelection&callProxy=true&sliderValue="+e.getSliderSelection+"&referenceNumber="+e.referenceNumber}else{if(e.productType=="LawForYou"){c="proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/ShortTerm/applyShortTermLawForYou&callProxy=true&referenceNumber="+e.referenceNumber+"&sliderValue="+e.getSliderSelection+"&productType="+e.productType+"&sourceOfFund="+e.sourceOfFund}else{if(e.productType=="UL"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/ultimateProtector/ultimateHealth&callProxy=false&sliderValue="+e.getSliderSelection+"&productType="+e.productType+"&sourceOfFund="+e.sourceOfFund}else{if(e.productType=="UltimateProtector"){c="proxy?pipe=genericEmptyResponse&xslFile=Apply/ultimateProtector/ultimateHealth&callProxy=true&referenceNumber="+e.referenceNumber}}}}}}}}}}}}}}}}}}}}var g=bb.selector.query(a.body,".ap-gadget-lazyContent");var f="proxy?pipe=genericEmptyResponse&xslFile=Apply/insureForApplyTab";f=f+"&productType="+e.productType;phe.common.setAttribute(g,"proxyurl",f);if((e.productType=="StandardLifeApply")||(e=="StandardLifeApply")||(e.productType=="StandardShortTermApply")){f="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew";phe.common.setAttribute(g,"proxyurl",f);absa.gadgets.loadLazyContent(a,true)}else{absa.gadgets.loadLazyContent(a,true,function(h){var l=bb.selector.query(g,".ap-insureTab-mainDiv");var k=bb.selector.query(g,".ap-tabHead-applyInsurance");var j=bb.selector.query(g,".ap-tabBody-applyInsurance");if(j!=null){phe.tabBody.setAttribute(j,"proxyurl",c);phe.tabBody.reload(j)}})}}};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.applyForInsurance.loadTab=function(a,d,c){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");var e=bb.selector.query(b,".ap-tabHead-"+d);phe.tabBox.selectTab(e,false,c)};absa.gadgets.applyForInsurance.onRestore=function(a){var d="proxy?pipe=genericEmptyResponse&xslFile=insuranceForApplyNew";var b="proxy?pipe=genericEmptyResponse&xslFile=Apply/insureForApplyTab";var c=bb.selector.query(a.body,".ap-gadget-lazyContent");var e=a.$onRestore||function(){phe.common.setAttribute(c,"proxyurl",d);absa.gadgets.loadLazyContent(a,true,function(){});phe.common.setAttribute(c,"proxyurl",b)};a.$onRestore=null;if(!c._isLoaded){e()}else{e()}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.investmentAccountOsf=absa.gadgets.investmentAccountOsf||{};absa.gadgets.investmentAccountOsf.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:investmentAccountOsf/investmentAccountOsfStart",function(b){absa.gadgets.investmentAccountOsf.goTo(a)})};absa.gadgets.investmentAccountOsf.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.investmentAccountOsf.onRestore(a);a._window.restore()}};absa.gadgets.investmentAccountOsf.onRestore=function(a){absa.gadgets.loadLazyContent(a,true)};absa.gadgets.investmentAccountOsf.onRestoreNOTUSED=function(a){var b=a.$onRestore||function(){};oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");if(!oLazyContent._isLoaded){absa.gadgets.loadLazyContent(a,true)}else{b()}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.loanAndAssetFinance=absa.gadgets.loanAndAssetFinance||{};absa.gadgets.loanAndAssetFinance.init=function(a){if(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");if(absa.APBINDICATOR=="true"){a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["APB/General/Label/LendingSolutions"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["APB/General/Label/LendingSolutionSubtitle"])}else{if((absa.SBU!="E")&&(absa.CLIENTTYPE=="S")||(absa.CLIENTTYPE=="I")){a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["APB/General/Label/LendingSolutions"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["APB/General/Label/LendingSolutionSubtitle"])}else{absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/LoansAndAssetFinance"])}}gadgets.pubsub.subscribe("goTo:loanAndAssetFinance/loanAndAssetFinance",function(b){absa.gadgets.loanAndAssetFinance.goTo(a)});gadgets.pubsub.subscribe("goTo:loanAndAssetFinance/loanAndAssetFinance/personalLoan",function(b){absa.gadgets.loanAndAssetFinance.goToPersonalLoan(a,b)})}};absa.gadgets.loanAndAssetFinance.goTo=function(a){if(a!=null&&a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.loanAndAssetFinance.onRestore(a);a._window.restore()}};absa.gadgets.loanAndAssetFinance.goToPersonalLoan=function(a,b){if(a){absa.gadgets.loanAndAssetFinance.vclData=b;if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.loanAndAssetFinance.showPersonalLoanRow;a._window.restore()}setTimeout(function(){absa.gadgets.loanAndAssetFinance.showPersonalLoanRow(a)},2000)}};absa.gadgets.loanAndAssetFinance.onRestore=function(a){if(a){if(absa.ENABLETAGGING=="true"){absa.analytics.trackAccordion("ISF | Apply | Accordion | Lending Solutions")}var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){var e=a.$onRestore;a.$onRestore=null;if(e){absa.gadgets.loadLazyContent(a,true,e)}else{absa.gadgets.loadLazyContent(a,true)}}else{a.minimize()}})}};absa.gadgets.loanAndAssetFinance.showPersonalLoanRow=function(a){if(a){try{var h=bb.selector.query(a.body,".ui-table");var d=bb.selector.query(h,".ap-tableRow-applyPersonalLoan");if(d==null){h=bb.selector.query(a.body,".ap-loans-Table");if(h!=null){d=bb.selector.query(h,".ap-tableRow-applyPersonalLoan")}}if(d==null){h=bb.selector.query(a.body,".ap-loansAndAssetFinance-tbl-pc");var g=bb.selector.query(h,".ap-icon-personalLoan-expandDetails-btn");g.click()}else{phe.tableBodyRow.expandRow(d,null);var c=bb.selector.query(h,".ap-inner-personalloan-tableBodyrow-expansion");var b=bb.selector.query(h,".ap-tableRow-applyPersonalLoan-inner");phe.tableBodyRow.expandRow(b,phe.tableBodyRowExpandableExtention.getAttribute(c,"dataFileView"))}}catch(f){}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.otherProducts=absa.gadgets.otherProducts||{};absa.gadgets.otherProducts.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:otherProducts/otherProducts",function(b){absa.gadgets.otherProducts.goTo(a)})};absa.gadgets.otherProducts.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.otherProducts.onRestore(a);a._window.restore()}};absa.gadgets.otherProducts.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.taxFreeInvestmentAccount=absa.gadgets.taxFreeInvestmentAccount||{};absa.gadgets.taxFreeInvestmentAccount.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:taxFreeInvestmentAccount/aimsRR",function(b){absa.gadgets.taxFreeInvestmentAccount.goTo(a,"aimsRR",b)});if(absa.CLIENTTYPE=="B"){tabBodyUrl="taxFreeInvestmentOSFHomePage";a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/TaxFreeInvestmentAccount"]+"</div></div>")}else{tabBodyUrl="taxFreeInvestmentHomePage";a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/Investments"]+"</div></div>")}absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/TaxFreeInvestmentAccount"])};absa.gadgets.taxFreeInvestmentAccount.goTo=function(a,c,d){var b=function(){if(d){if(d.productType=="TAXFREESAV"||d.productType=="INVACC"||d.productType=="RAProduct"){if(d.status=="PEND"){var g=a.getPreference("initialProxyUrl");var e=bb.selector.query(a.body,".ap-gadget-lazyContent");var h=phe.common.getAttribute(e,"proxyurl");var f="proxy?pipe=genericEmptyResponse&xslFile="+g+"taxFreeInvestmentHomePageResume&referenceNumber="+d.referenceNumber+"&productType="+d.productType;phe.common.setAttribute(e,"proxyurl",f);absa.gadgets.loadLazyContent(a,true,function(){phe.common.setAttribute(e,"proxyurl",h)})}}}};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore();b()}else{b()}};absa.gadgets.taxFreeInvestmentAccount.goToBROKEN=function(a,f,g){if(a._window.getProperty("minimized")){if(g){if(g.productType=="TAXFREESAV"){if(g.status=="PEND"){var d=a.getPreference("initialProxyUrl");var b=bb.selector.query(a.body,".ap-gadget-lazyContent");var e=phe.common.getAttribute(b,"proxyurl");var c="proxy?pipe=genericEmptyResponse&xslFile="+d+"taxFreeInvestmentHomePageResume&referenceNumber="+g.referenceNumber;phe.common.setAttribute(b,"proxyurl",c);absa.gadgets.loadLazyContent(a,true,function(){phe.common.setAttribute(b,"proxyurl",e)})}}}else{a.$onRestore=absa.gadgets.taxFreeInvestmentAccount.onRestore(a);a._window.restore()}}else{a.$onRestore=absa.gadgets.taxFreeInvestmentAccount.onRestore(a);a._window.restore()}};absa.gadgets.taxFreeInvestmentAccount.onRestore=function(a){absa.gadgets.loadLazyContent(a,true,function(){})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.transactionalSolutions=absa.gadgets.transactionalSolutions||{};absa.gadgets.transactionalSolutions.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:transactionalSolutions/overdraftOffers",function(b){absa.gadgets.transactionalSolutions.goTo(a,b)});gadgets.pubsub.subscribe("goTo:transactionalSolutions/dsp",function(b){if(b.qualifyForUpgrade=="Y"){absa.gadgets.transactionalSolutions.upgradeGoTo(a,b)}else{absa.gadgets.transactionalSolutions.goTo(a,b)}})};absa.gadgets.transactionalSolutions.goTo=function(a,d){if(d!=null){if(d=="cheqflexi"|d=="cheqgold"|d=="cheqplatinum"|d=="cheqstudentsilver"|d=="cheqislamicflexi"|d=="cheqislamicgold"|d=="cheqislamicplatinum"|d=="exceller"|d=="marhaba"){if(a._window.getProperty("minimized")){var b="proxy?pipe=genericEmptyResponse&xslFile=Apply/applyForTransactionalSolutions&dsp=true&dspproduct="+d;var c="";if(d=="exceller"|d=="private banking account"){c="11003"}if(d=="marhaba"|d=="islamic private banking account"){c="11047"}phe.common.setAttribute(bb.selector.query(a.body,".ap-gadget-lazyContent"),"proxyurl",b);a.$onRestore=absa.gadgets.loadLazyContent(a,true,function(e){var f=bb.selector.query(e,".ap-transactionalSolutions-iconApply-"+c);if(f){absa.apps.transactionalSolutions.applyIconClicked(f)}});a._window.restore()}}else{if(d.productType=="new_od"){if(a._window.getProperty("minimized")){var b="proxy?pipe=genericEmptyResponse&xslFile=Apply/applyForTransactionalSolutions&isVclProduct=true";oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");phe.common.setAttribute(oLazyContent,"proxyurl",b);a.$onRestore=absa.gadgets.loadLazyContent(a,true);a._window.restore()}}else{a._window.restore()}}}};absa.gadgets.transactionalSolutions.upgradeGoTo=function(a,d){if(d!=null){if(d.qualifyForUpgrade=="Y"){if(a._window.getProperty("minimized")|d.upgradeAction=="upgradeConfirm"){var b="proxy?pipe=genericEmptyResponse&xslFile=Apply/applyForTransactionalSolutions&dsp=true&dspproduct="+d.productName+"&qualifyForUpgrade="+d.qualifyForUpgrade+"&productCode="+d.productCode+"&upgradeAction="+d.upgradeAction;var c="";if(d=="cheqislamicplatinum"){c="11029"}if(d=="cheqplatinum"){c="11032"}phe.common.setAttribute(bb.selector.query(a.body,".ap-gadget-lazyContent"),"proxyurl",b);a.$onRestore=absa.gadgets.loadLazyContent(a,true,function(e){var f=bb.selector.query(e,".ap-transactionalSolutions-iconApply-"+c);if(f){absa.apps.transactionalSolutions.applyIconClicked(f)}});if(d.upgradeAction!="upgradeConfirm"){a._window.restore()}}}else{if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.loadLazyContent(a,true,function(e){if(e!=null){absa.gadgets.transactionalSolutions.expandOD()}});a._window.restore()}}}};absa.gadgets.transactionalSolutions.expandOD=function(){var a=bb.selector.query(document.body,".ap-transactionalSolutions-overdraft-tableBodyRow");phe.tableBodyRow.expandRow(a)};absa.gadgets.transactionalSolutions.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.unitTrustAccount=absa.gadgets.unitTrustAccount||{};absa.gadgets.unitTrustAccount.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");if(absa.APBINDICATOR=="true"){absa.gadgets.setSubtitle(a,absa.locale["APB/General/Label/AbsaUnitTrustSubtitle"])}else{absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/UnitTrustAccountApply"])}gadgets.pubsub.subscribe("goTo:applyForUnitTrust/applyForUnitTrust",function(b){absa.gadgets.unitTrustAccount.goTo(a)})};absa.gadgets.unitTrustAccount.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.unitTrustAccount.onRestore(a);a._window.restore()}};absa.gadgets.unitTrustAccount.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.createAccount=absa.gadgets.createAccount||{};absa.gadgets.createAccount.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");if(absa.APBINDICATOR=="true"){a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["APB/General/Label/APBSavingandinvestmentaccount"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/SavingInvetmentsSubtitle"])}else{absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/CreateAccount"])}gadgets.pubsub.subscribe("goTo:createAccount/createAccount",function(b){absa.gadgets.createAccount.goTo(a,b)})};absa.gadgets.createAccount.goTo=function(a,b){if(a._window.getProperty("minimized")){a._window.restore();if(b.sLink=="HELPMECHOOSE"){absa.gadgets.loadLazyContent(a,true,function(){absa.gadgets.createAccount.onHelpMeChooseLinkClick()})}else{if(b.fundName=="Money Market Fund"){absa.gadgets.loadLazyContent(a,true,function(){absa.gadgets.createAccount.openProductListing(b)})}else{absa.gadgets.createAccount.fOnrestoreUT(a,b)}}}else{absa.gadgets.createAccount.fOnrestoreUT(a,b)}};absa.gadgets.createAccount.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})};absa.gadgets.createAccount.fOnrestoreUT=function(a,b){oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");var c="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=buildProductSelection&mode=start&resume=true&fundCode="+b.productCode+"&fundName="+encodeURIComponent(b.fundName);phe.common.setAttribute(oLazyContent,"proxyurl",c)};absa.gadgets.createAccount.onHelpMeChooseLinkClick=function(){var a="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=getAllQuestions";var b=bb.selector.query(document.body,".ap-applySaveInvest-helpMeChoose-tableRow");phe.tableBodyRow.expandRow(b,a)};absa.gadgets.createAccount.openProductListing=function(a){var c="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=buildProductSelection&moneyMarketFlag=true&fundName="+a.fundName;var b=bb.selector.query(document.body,".ap-applySaveInvest-productListing-tableRow");phe.tableBodyRow.expandRow(b,c)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.futureDatedTransactions=absa.gadgets.futureDatedTransactions||{};absa.gadgets.futureDatedTransactions.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-viewHistory",function(){absa.gadgets.futureDatedTransactions.goTo(a,"futureDatedTransactionBeneficiary")},"Common/General/GadgetIcons/Tooltip/ViewManageFutureTransactions")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:futureDatedTransactions/futureDatedTransactionBeneficiary",function(b){absa.gadgets.futureDatedTransactions.goTo(a,"futureDatedTransactionBeneficiary",b)});gadgets.pubsub.subscribe("goTo:futureDatedTransactions/futureDatedTransactionOnceOff",function(b){absa.gadgets.futureDatedTransactions.goTo(a,"futureDatedTransactionOnceOff",b)});gadgets.pubsub.subscribe("goTo:futureDatedTransactions/futureDatedTransactionInterAccount",function(b){absa.gadgets.futureDatedTransactions.goTo(a,"futureDatedTransactionInterAccount",b)})};absa.gadgets.futureDatedTransactions.goTo=function(a,c,d){var b=function(){absa.gadgets.futureDatedTransactions.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.futureDatedTransactions.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.futureDatedTransactions.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.futureDatedTransactions.loadTab(a,"futureDatedTransactionBeneficiary")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.genericGadget=absa.gadgets.genericGadget||{};absa.gadgets.genericGadget.init=function(a){this.gadget=a;var c=a.getPreference("mainTitle");var f=a.getPreference("subTitle");a.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale[c]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale[f]);oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");var e=a.getPreference("initialProxyUrl");var d="proxy?pipe=genericEmptyResponse&xslFile="+e;phe.common.setAttribute(oLazyContent,"proxyurl",d);absa.gadgets.loadLazyContent(a,true,function(){var h=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(h){h.style.display=""}var g=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"})});var b=a._window.getProperty("templateId");if(b.indexOf("3010152")>-1){gadgets.pubsub.subscribe("goTo:ficDocHandler",function(g){absa.gadgets.genericGadget.onRestore(a)})}};absa.gadgets.genericGadget.onRestore=function(a){var b=function(){absa.gadgets.loadLazyContent(a,true,function(){var c=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(c){c.style.display=""}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.insurance=absa.gadgets.insurance||{};absa.gadgets.insurance.init=function(a){a.balanceSet=false;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");absa.gadgets.insurance.setBar(a);var c=bb.selector.queryAncestor(a.body,".ap-insurancebar");var b=c.getAttribute("policyNo");gadgets.pubsub.subscribe("goTo:insurancelandingpage/"+b,function(d){absa.gadgets.insurance.goTo(a,"insurancelandingpage",d)})};absa.gadgets.insurance.goTo=function(a,c,d){var b=function(){absa.gadgets.insurance.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.insurance.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-option2Tab-icon-managePolicy");phe.tabBox.selectTab(d,false,b)};absa.gadgets.insurance.onRestore=function(p){if(p.loading){return false}var h=bb.selector.query(p.body,".ap-insurance-gadget-content");if(!h){var g=p.getPreference("insurance");var q=JSONRequest.parse(g);var y=q.insuranceProductType;var v=q.policyCoverAmt;var s=q.policyDesc;var z=q.insuranceProductCode;var d=q.policyPremiumAmt;var n=q.policyStatus;var j=q.policyNumber;var b=q.policyType;var k=q.statusDescription;var f=absa.locale[k];var a=q.processingType;var e=q.businessSourceIndicator;var c=q.renewDate;var r=q.iBenefitBonus;var x=q.payoutDate;var m=false;var u=false;var o=false;var w=false;var l=false;if(q.insurancePolicyHeaderOptions){m=q.insurancePolicyHeaderOptions.managePolicy;u=q.insurancePolicyHeaderOptions.manageClaims;o=q.insurancePolicyHeaderOptions.payArrears;w=q.insurancePolicyHeaderOptions.activatePolicy;l=q.insurancePolicyHeaderOptions.managePolicyQuicklink}var t=p.getPreference("gadgetIndex");sUrl="proxy?pipe=genericEmptyResponse&xslFile=insuranceBalanceOverview&insuranceType="+y+"&policyCoverAmt="+v+"&policyPremiumAmt="+d+"&processingType="+a+"&managePolicy="+m+"&payArrears="+o+"&activatePolicy="+w+"&manageClaims="+u+"&insuranceStatus="+n+"&policyNumber="+j+"&statusDescription="+f+"&policyType="+b+"&policyDesc="+s+"&insuranceProductCode="+z+"&index="+t+"&renewDate="+c+"&iBenefitBonus="+r+"&payoutDate="+x;phe.common.setAttribute(bb.selector.query(p.body,".ap-gadget-lazyContent"),"proxyurl",sUrl);absa.gadgets.loadLazyContent(p,false,function(){absa.gadgets.insurance.selectTab(p)})}else{absa.gadgets.insurance.selectTab(p)}};absa.gadgets.insurance.selectTab=function(a){var b=a.getPreference("selectedTab");var c;if(b&&b!="first"){c=bb.selector.query(a.body,".ap-option2Tab-"+b)}else{if(b=="first"){c=bb.selector.query(a.body,".ui-tabBox .ui-tabHeads li")}}if(c&&!a._dragging){phe.tabBox.selectTab(c)}a.setPreference("selectedTab","first")};absa.gadgets.insurance.setBar=function(r){r.setPreference("selectedTab",r.preferences.selectedTab["default"]);var j=r.getPreference("insurance");var g=JSONRequest.parse(j);var E=bb.selector.queryAncestor(r.body,".ap-insurancebar");var v=g.insuranceProductType;var c=g.policyType;var x=g.policyDesc;var k=g.statusDescription;var h=absa.locale[k];var A=g.policyCoverAmt;var e=g.policyPremiumAmt;var G=g.businessSourceIndicator;var y=g.insuranceProductCode;var d=g.renewDate;var u=g.iBenefitBonus;var D=g.payoutDate;var q=false;var n=false;var m=false;var z=false;var C=false;if(g.insurancePolicyHeaderOptions){q=g.insurancePolicyHeaderOptions.payArrears;n=g.insurancePolicyHeaderOptions.managePolicy;m=g.insurancePolicyHeaderOptions.managePolicyQuicklink;z=g.insurancePolicyHeaderOptions.manageClaims;C=g.insurancePolicyHeaderOptions.activatePolicy}E.setAttribute("policyNo",g.policyNumber);bb.html.addClass(E,"ap-insurance-premium");E.setAttribute("balance","false");var I=r.getPreference("balanceAvailable")||"true";r.setTitle("<div style='width:333px;line-height:17px;' class='ap-bar-section-insurance' aria-labelledby='ap-bar-section-insurance'><div class='p-gadget-title-view'>"+x+"</div></div>");absa.gadgets.setSubtitle(r,g.policyNumber);if(I=="true"){absa.util.observer.subscribe("insurancebalances",function(S){if(S[0]){var P=absa.locale["AFS/General/Label/Status"];var K=absa.locale["AFS/General/Label/CoverAmount"];var O=absa.locale["AFS/General/Label/Premium"];var N=Math.floor(Math.random()*1000001);for(var L=0;L<S.length;L++){var M=S[L];if(M.policyNumber==g.policyNumber){if(typeof(r._window)!="undefined"&r._window!=null){var R=bb.selector.query(r._window.viewNode,".ap-coverAmount");if(R){var J=bb.selector.query(r._window.viewNode,".status-field");J.innerHTML='<label class="vi-hidden" for="'+N+'1">'+P+':</label><span tabindex="0" class="ap-balances-account-values" id="'+N+'1">'+absa.locale[M.status]+"</span>";var T=bb.selector.query(r._window.viewNode,".coverAmont-field");T.innerHTML='<label class="vi-hidden" for="'+N+'3">'+K+':</label><span tabindex="0" class="ap-balances-account-values" id="'+N+'3">'+absa.gadgets.insurance.currencyFormat(M.coverAmount)+"</span>";var Q=bb.selector.query(r._window.viewNode,".premiumAmount-field");Q.innerHTML='<label class="vi-hidden" for="'+N+'2">'+O+':</label><span tabindex="0" class="ap-balances-account-values" id="'+N+'2">'+absa.gadgets.insurance.currencyFormat(M.premiumAmount)+"</span>";r.balanceSet=true}}}}}});absa.util.observer.subscribe("load-insurance-balances",function(){if(typeof(r._window)!="undefined"&r._window!=null){var L=bb.selector.query(r._window.viewNode,".ap-coverAmount");if(L){var J=bb.selector.query(L,".status-field");J.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />";var M=bb.selector.query(L,".coverAmont-field");M.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />";var K=bb.selector.query(L,".premiumAmount-field");K.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />";setTimeout(function(){absa.gadgets.insurance.isBalanceFound(r)},absa.TIMEOUT_BALANCE)}}})}var F=bb.html.createElementFromString("<div class='ap-coverAmount'></div>");var s="";var p;var l;var H;var t;if(h=="Lapsed"||h=="Verval"||h=="In arrears"||h=="Agterstallig"||h=="Cancelled"||h=="Gekanselleer"){l=bb.html.createElementFromString('<div style="color:#AF154B; width:100px; padding:20px 0px 10px 10px; margin:0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m status-field"></div>')}else{if(h=="Active"||h=="Aktief"){l=bb.html.createElementFromString('<div style="color:green; width:100px; padding:20px 0px 10px 10px; margin:0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m status-field"></div>')}else{l=bb.html.createElementFromString('<div style="width:100px; padding:20px 0px 10px 10px; margin:0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m status-field"></div>')}}H=bb.html.createElementFromString('<div style="width:135px; padding:20px 0px 10px 10px; margin:0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m coverAmont-field"></div>');t=bb.html.createElementFromString('<div style="width:135px; padding:20px 0px 10px 10px; margin:0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m premiumAmount-field"></div>');var w;var w=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-insurance-options" style="padding-top:11px; margin-left:0px; align:right; width:186px;">');if(m==true){w.appendChild(absa.gadgets.insurance.createButton("ap-icon-managePolicy","",absa.locale["AFS/General/Label/ManagePolicyToolTip"],absa.locale["AFS/General/Label/ManagePolicyToolTip"]))}if(z==true&y!="UL01"){w.appendChild(absa.gadgets.insurance.createButton("ap-icon-submitClaim","",absa.locale["AFS/General/Label/RegisterClaimToolTip"],absa.locale["AFS/General/Label/RegisterClaimToolTip"]))}if(q==true&y!="UL01"){var B=g.policyNumber;var o=absa.locale["AFS/CollectArrear/Label/MakeArrearsPayment"];var f="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=hasAllMandatoryCIFDetails";absa.io.makeRequest(f,function(M){if(!M.errors.length){var N=bb.html.createElementFromString(M.text);if(bb.html.hasClass(N,"ap-applyButtonCheck-hasAllMandatoryCIFDetailDiv")){var K=bb.selector.query(N,".ap-applyButtonCheck-hasAllMandatoryCIFDetailId");var J=phe.hiddenField.getValue(K);var L="";if(J=="true"){if(c=="ST"){L="absa.modal.loadModal('proxy?pipe=genericWebservice&amp;ws=ViewPolicyInformationWebService&amp;action=viewPolicyDetails&amp;view=payArrearsShortTerm&amp;policyNumber="+B+"&amp;policyStatus=Inarrears&amp;','"+o+"');"}else{if(c=="Exergy"){L="absa.modal.loadModal('proxy?pipe=genericWebservice&amp;ws=ViewPolicyInformationWebService&amp;action=viewPolicyDetails&amp;view=payArrearsExergy&amp;policyNumber="+B+"&amp;policyStatus=Inarrears&amp;','"+o+"');"}else{L="absa.modal.loadModal('proxy?pipe=genericWebservice&amp;ws=ViewPolicyInformationWebService&amp;action=viewPolicyDetails&amp;view=payArrearsLife&amp;policyNumber="+B+"&amp;policyStatus=Inarrears&amp;','"+o+"');"}}w.appendChild(absa.gadgets.insurance.createButton("ap-icon-payArrears",L,absa.locale["AFS/General/Label/PayArrearsToolTip"],absa.locale["AFS/General/Label/PayArrearsToolTip"]))}else{absa.index.oCIFAlertModal=bb.selector.query(document.body,".modalCIFAlertWarning");var L="phe.modal.showModal(0.5, absa.index.oCIFAlertModal, document.body, true)";w.appendChild(absa.gadgets.insurance.createButton("ap-icon-payArrears",L,absa.locale["AFS/General/Label/PayArrearsToolTip"],absa.locale["AFS/General/Label/PayArrearsToolTip"]))}}}})}if(C==true&y!="UL01"){var B=g.policyNumber;var a=absa.locale["AFS/General/Label/ReactivateLapsedPolicy"];var f="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=hasAllMandatoryCIFDetails";absa.io.makeRequest(f,function(L){if(!L.errors.length){var N=bb.html.createElementFromString(L.text);if(bb.html.hasClass(N,"ap-applyButtonCheck-hasAllMandatoryCIFDetailDiv")){var K=bb.selector.query(N,".ap-applyButtonCheck-hasAllMandatoryCIFDetailId");var J=phe.hiddenField.getValue(K);if(J=="true"){if(h=="Lapsed"||h=="Verval"){var M="absa.modal.loadModal('proxy?pipe=genericWebservice&amp;ws=ViewPolicyInformationWebService&amp;action=viewPolicyDetails&amp;view=activatePolicyLife&amp;policyNumber="+B+"&amp;policyStatus=Lapsed&amp;','"+a+"');";w.appendChild(absa.gadgets.insurance.createButton("ap-icon-reactivatePolicy",M,absa.locale["AFS/General/Label/ReactivatePolicyToolTip"],absa.locale["AFS/General/Label/ReactivatePolicyToolTip"]))}else{if(h=="Cancelled"||h=="Gekanselleer"){var M="absa.modal.loadModal('proxy?pipe=genericWebservice&amp;ws=ViewPolicyInformationWebService&amp;action=viewPolicyDetails&amp;view=activatePolicyLife&amp;policyNumber="+B+"&amp;policyStatus=Cancelled&amp;','"+a+"');";w.appendChild(absa.gadgets.insurance.createButton("ap-icon-reactivatePolicy",M,absa.locale["AFS/General/Label/ReactivatePolicyToolTip"],absa.locale["AFS/General/Label/ReactivatePolicyToolTip"]))}}}else{absa.index.oCIFAlertModal=bb.selector.query(document.body,".modalCIFAlertWarning");var M="phe.modal.showModal(0.5, absa.index.oCIFAlertModal, document.body, true)";w.appendChild(absa.gadgets.insurance.createButton("ap-icon-reactivatePolicy",M,absa.locale["AFS/General/Label/ReactivatePolicyToolTip"],absa.locale["AFS/General/Label/ReactivatePolicyToolTip"]))}}}})}if(I=="true"){F.appendChild(l);F.appendChild(H);F.appendChild(t)}F.appendChild(w);var b=bb.selector.query(r._window.viewNode,".p-gadget-header");b.appendChild(F)};absa.gadgets.insurance.isBalanceFound=function(a){if(!a.balanceSet){var b=bb.selector.query(a._window.viewNode,".status-field");b.innerHTML=absa.locale["AFS/InsuranceLandingPage/Label/BalanceUnavailable"];var d=bb.selector.query(a._window.viewNode,".coverAmont-field");d.innerHTML=absa.locale["AFS/InsuranceLandingPage/Label/BalanceUnavailable"];var c=bb.selector.query(a._window.viewNode,".premiumAmount-field");c.innerHTML=absa.locale["AFS/InsuranceLandingPage/Label/BalanceUnavailable"]}};absa.gadgets.insurance.currencyFormat=function(e){var j=Math.round(e*100)/100;var h=j.toString().split(".");var g=h[1];if(g==null){g="00"}else{if(g.length<2){g=g+"0"}}num=""+parseInt(h[0]);var b="";var a="";var d=0;for(var c=num.length-1;c>=0;c--){var f=num.charAt(c);if(d==3){b+=",";b+=f;d=1;continue}else{b+=f;d++}}for(var c=b.length-1;c>=0;c--){var f=b.charAt(c);a+=f}if(g=="00"){return a+"."+g}else{return a+"."+g}};absa.gadgets.insurance.createButton=function(d,b,c,f){var a=[];a[a.length]="<button ";if(b&&b!=""){a[a.length]='onclick="'+b+'" '}a[a.length]='type="button" tooltip="'+c+'" ';a[a.length]='class="ui-button '+d+'">';a[a.length]='<div class="ui-button-left">';a[a.length]='<div class="ui-button-right">';a[a.length]='<div class="ui-button-center">';a[a.length]='<span class="vi-screenreader-line ">'+f+". </span>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</button>";var e=bb.html.createElementFromString(a.join(""));return e};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.iPayrollGadget=absa.gadgets.iPayrollGadget||{};absa.gadgets.iPayrollGadget.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:iPayroll/iPayroll",function(b){absa.gadgets.iPayrollGadget.goTo(a,"iPayroll",b)})};absa.gadgets.iPayrollGadget.goTo=function(a,c,d){var b=function(){absa.gadgets.iPayrollGadget.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.iPayrollGadget.onRestore(a);a._window.restore()}else{b()}};absa.gadgets.iPayrollGadget.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.index.ficController.check("Apply",function(d){phe.helpText.hideHelptext();phe.loadingMessage.hideLoadingMessage(c);if(!d){absa.gadgets.loadLazyContent(a,true)}else{a.minimize()}})};absa.gadgets.iPayrollGadget.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.notifyMe=absa.gadgets.notifyMe||{};absa.gadgets.notifyMe.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:notifyMe/viewNotifyMeRecipients",function(b){absa.gadgets.notifyMe.goTo(a,"viewNotifyMeRecipients",b)});gadgets.pubsub.subscribe("goTo:notifyMe/addNotifyMeRecipient",function(b){absa.gadgets.notifyMe.goTo(a,"addNotifyMeRecipient",b)});gadgets.pubsub.subscribe("goTo:notifyMe/notifyMeHistory",function(b){absa.gadgets.notifyMe.goTo(a,"notifyMeHistory",b)})};absa.gadgets.notifyMe.goTo=function(a,c,d){var b=function(){absa.gadgets.notifyMe.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.notifyMe.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.notifyMe.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.notifyMe.loadTab(a,"viewNotifyMeRecipients")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.onlineBankingAlerts=absa.gadgets.onlineBankingAlerts||{};absa.gadgets.onlineBankingAlerts.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:onlineBankingAlert/onlineBankingAlertManage",function(b){absa.gadgets.onlineBankingAlerts.goTo(a,"onlineBankingAlertManage",b)});gadgets.pubsub.subscribe("goTo:onlineBankingAlert/onlineBankingAlertHistory",function(b){absa.gadgets.onlineBankingAlerts.goTo(a,"onlineBankingAlertHistory",b)})};absa.gadgets.onlineBankingAlerts.goTo=function(a,c,d){var b=function(){absa.gadgets.onlineBankingAlerts.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.onlineBankingAlerts.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.onlineBankingAlerts.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.onlineBankingAlerts.loadTab(a,"onlineBankingAlertManage")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.avafGadget=absa.gadgets.avafGadget||{};absa.gadgets.avafGadget.globals=absa.gadgets.avafGadget.globals||{};absa.gadgets.avafGadget.globals.interestRateValue="";absa.gadgets.avafGadget.init=function(a){this.gadget=a;var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/avafOffer",function(c){absa.gadgets.avafGadget.onRestore(a)});absa.gadgets.avafGadget.displayGadget(a)}};absa.gadgets.avafGadget.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.avafGadget.displayGadget=function(b){var c="";var a="";absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersAVAFWebService&action=displayAVAFGadgets",function(k){if(!k.errors.length){var t=bb.html.createElementFromString(k.text);if(t){if(bb.html.hasClass(t,"ap-avafOffers-displayAVAFGadget")){var g=bb.selector.query(t,".ap-avafOffers-displayDecision");c=phe.hiddenField.getValue(g);var x=bb.selector.query(t,".ap-avafOffers-interestRate");absa.gadgets.avafGadget.globals.interestRateValue=phe.hiddenField.getValue(x);var h=bb.selector.query(t,".ap-avafOffers-abraLimit");a=phe.hiddenField.getValue(h);var j=(absa.gadgets.avafGadget.globals.interestRateValue/100)/12;var m=1/Math.pow((1+j),72);var u=parseInt(a*((1-m)/j));var v=absa.util.formatCurrency((parseInt(u/5000))*5000);var o=v.toString().replace(/R /g,"");var f="0.00";var p=absa.util.formatCurrency(a);var s=bb.html.createElementFromString('<div style="width: 100px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m uncleared-field"></div>');var e=bb.html.createElementFromString('<div style="width: 140px; padding:10px;padding-right:30px ; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-mavailable-field">'+o+"</div>");var l=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px; " class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field">'+f+"</div>");var r=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');r.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.avafGadget.onUnsubscribeClick(this,'OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));r.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.avafGadget.onUnsubscribeClick(this,'OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));r.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.avafGadget.onUnsubscribeClick(this,'OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var w=bb.html.createElementFromString("<div class='ap-balances'></div>");w.appendChild(s);w.appendChild(e);w.appendChild(l);w.appendChild(r);var d=bb.selector.query(b._window.viewNode,".p-gadget-header");d.appendChild(w);if(c=="ELIGIBLE"){var n=bb.selector.query(b.body,".ap-gadget-lazyContent");intialProxyUrl=b.getPreference("initialProxyUrl");var q="proxy?pipe=genericEmptyResponse&xslFile="+intialProxyUrl+"&interestRate="+absa.gadgets.avafGadget.globals.interestRateValue+"&abraLimit="+a+"&financeValue="+v+"&fAbraLimit="+p;phe.common.setAttribute(n,"proxyurl",q);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010140"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010140"))}}}}})};absa.gadgets.avafGadget.computeVehicleValue=function(o){var w=bb.selector.queryAncestor(o,".ap-avafOffers-form");var v=bb.selector.query(w,".ap-avafOffers-loanTerm");var g=bb.selector.query(w,".ap-avafOffers-hiddenBalloonAmt");var m=bb.selector.query(w,".ap-avafOffers-hiddenMonthlyInstAmt");var p=bb.selector.query(w,".ap-avafOffers-hiddenBalloonAmt");var y=bb.selector.query(w,".ap-avafOffers-vehicleValue");var k=bb.selector.query(w,".ap-avafOffers-hiddenDepositAmt");var f=bb.selector.query(w,".ap-avafOffers-hiddenVehicleValue");var q=bb.selector.query(w,".ap-avafOffers-hiddenVehicleValueForBalloon");var t=phe.hiddenField.getValue(v);var s=phe.hiddenField.getValue(g);var h=phe.hiddenField.getValue(m);var d=phe.hiddenField.getValue(p);var e=phe.hiddenField.getValue(k);var l=(absa.gadgets.avafGadget.globals.interestRateValue/100)/12;var r=1/Math.pow((1+l),t);var x=h*((1-r)/l);var j=d/Math.pow((1+l),t);var n=parseInt(x+j);var z=(parseInt(n/5000))*5000;var c=absa.util.formatCurrency(z);var u=z;if(e!=""){var b=n+parseInt(e);var a=(parseInt(b/5000))*5000;c=absa.util.formatCurrency(a);u=a}phe.inputReadOnlyText.setValue(y,c);phe.hiddenField.setValue(f,u);phe.hiddenField.setValue(q,n)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.creditCardGadget=absa.gadgets.creditCardGadget||{};absa.gadgets.creditCardGadget.globals=absa.gadgets.creditCardGadget.globals||{};absa.gadgets.creditCardGadget.globals.hasInitRan=false;absa.gadgets.creditCardGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/creditCardOffer",function(c){absa.gadgets.creditCardGadget.onRestore(a)});absa.gadgets.creditCardGadget.displayCreditCardGadget(a)}};absa.gadgets.creditCardGadget.onRestore=function(a){var b=a.$onRestore||function(){if(absa.gadgets.creditCardGadget.globals.hasInitRan==false){absa.gadgets.loadLazyContent(a,true,absa.gadgets.creditCardGadget.displayCreditCardGadget(a))}else{absa.gadgets.loadLazyContent(a,true,function(){})}};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.creditCardGadget.displayCreditCardGadget=function(a){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersCreditCardWebService&action=displayCreditCardGadget",function(k){if(!k.errors.length){var r=bb.html.createElementFromString(k.text);if(r){if(bb.html.hasClass(r,"ap-offersCC-displayCreditCardGadgetResponseDiv")){var w=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-eligibilityValue"));var f=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-creditCardNewLimit"));var c=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-creditCardExistingLimit"));var u=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-offersCreditUtilizedValue"));var j=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-offersCreditUnUtilizedValue"));var b=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-offersCreditCardnumber"));var t=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-creditLimitIncreaseAmt"));var x=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-isFreshBureauDataAvailableWithCams"));var s=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-grossIncome"));var n=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-netIncome"));var p=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-livingExpense"));var d=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-debtInstalments"));var g=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-telephoneExpense"));var o=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-insuranceExpense"));var e=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-securityExpense"));var h=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-bureauCategory"));var m=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersCC-bureauCategoryAmount"));if(w=="CREDIT_CARD_ACQUISITION"||w=="CREDIT_CARD_CLI"){var v=w=="CREDIT_CARD_ACQUISITION"?f:t;absa.gadgets.creditCardGadget.setBar(a,w,(absa.util.formatCurrency(v)).toString().replace(/R /g,""));var l=bb.selector.query(a.body,".ap-gadget-lazyContent");var q="proxy?pipe=genericEmptyResponse&xslFile=Offers/CreditCardOffers/offersCreditCardMain&productQualifiedFor="+w+"&acquisitionLimit="+f+"&ccExistingLimit="+c+"&ccUtilizedLimit="+Math.abs(u)+"&ccUnUtilizedLimit="+j+"&ccCLICardNumber="+b+"&cliLimit="+t+"&isFreshBureauDataAvailableWithCams="+x+"&totalGrossMonthlyIncome="+s+"&totalNetMonthlyIncome="+n+"&totalMonhtlyLivingExpenses="+p+"&totalMonthlyFixedDebtInstallment="+d+"&telephoneExpense="+g+"&insuranceExpense="+o+"&securityExpense="+e+"&bureauCategory="+h+"&bureauCategoryAmount="+m;phe.common.setAttribute(l,"proxyurl",q);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010147"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010147"));absa.gadgets.creditCardGadget.globals.hasInitRan=true}else{phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010147"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010147"));var l=bb.selector.query(a.body,".ap-gadget-lazyContent");phe.common.setAttribute(l,"proxyurl","proxy?pipe=genericEmptyResponse&xslFile=empty");absa.gadgets.creditCardGadget.globals.hasInitRan=true}}}}})};absa.gadgets.creditCardGadget.setBar=function(e,d,g){var b=bb.selector.queryAncestor(e.body,".ap-accountbar");var c="0.00";b.setAttribute("balance","false");if(d=="CREDIT_CARD_ACQUISITION"){e.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersCreditCardAcquisition"]+"</div></div>");absa.gadgets.setSubtitle(e,absa.locale["Common/General/GadgetSubTitle/Label/OffersCreditCardAcquisition"])}else{if(d=="CREDIT_CARD_CLI"){e.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersCreditCardCLI"]+"</div></div>");absa.gadgets.setSubtitle(e,absa.locale["Common/General/GadgetSubTitle/Label/OffersCreditCardCLI"])}}var a=bb.html.createElementFromString('<div style="width: 70px; padding:10px;padding-right:30px ; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-mavailable-field">'+g+"</div>");var k=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px; " class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field">'+c+"</div>");var h=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');h.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.creditCard.onUnsubscribeClick(this,'"+d+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));h.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.creditCard.onUnsubscribeClick(this,'"+d+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));h.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.creditCard.onUnsubscribeClick(this,'"+d+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var j=bb.html.createElementFromString("<div class='ap-balances'></div>");j.appendChild(a);j.appendChild(k);j.appendChild(h);var f=bb.selector.query(e._window.viewNode,".p-gadget-header");f.appendChild(j)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.homeLoanGadget=absa.gadgets.homeLoanGadget||{};absa.gadgets.homeLoanGadget.init=function(a,c){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/homeLoanOffer",function(d){absa.gadgets.homeLoanGadget.onRestore(a)});if(absa.CLIENTTYPE!="B"){absa.gadgets.homeLoanGadget.displayHomeLoanGadget(a)}}};absa.gadgets.homeLoanGadget.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.homeLoanGadget.displayHomeLoanGadget=function(a){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersHomeLoanWebService&action=displayHomeLoanGadget",function(m){if(!m.errors.length){var s=bb.html.createElementFromString(m.text);if(s){if(bb.html.hasClass(s,"ap-offersHL-displayHomeLoanGadgetResponseDiv")){var l=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-eligibilityValue"));var b=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-homeLoanBondAccountAdditionalAmount"));var q=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-homeLoanBondAccountCurrentAmount"));var k=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-homeLoanBondAccountNumber"));var o=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-cellPhoneNumber"));var f=phe.hiddenField.getValue(bb.selector.query(s,".ap-offersHL-emailAddress"));var p=1;var d="";var x="";var c=[];var n=null;var v="";var h="";var y="";var t="";if(l=="ELIGIBLE"){var g=absa.locale["Common/General/GadgetSubTitle/Label/HomeLoanText1"];var e=absa.locale["Common/General/GadgetSubTitle/Label/HomeLoanText2"];var w="&nbsp";absa.gadgets.homeLoanGadget.setBar(a);if(k.search(" ")!=-1){var j=k.split(" ");v=j[0];p=j.length}else{var j=k;v=bb.string.trim(j);p=1}if(p>1){d=b.split(" ");for(var u=0;u<d.length;u++){c[u]=parseInt(d[u])}x=q.split(" ");h=c[0];y=x[0];t=absa.util.formatCurrency(h);absa.gadgets.setSubtitle(a,g+w+t+w+e)}else{h=parseInt(b);y=bb.string.trim(b);c[0]=bb.string.trim(b);t=absa.util.formatCurrency(h);absa.gadgets.setSubtitle(a,g+w+t+w+e)}n=bb.selector.query(a.body,".ap-gadget-lazyContent");var r="proxy?pipe=genericEmptyResponse&xslFile=Offers/HomeLoanOffers/offersHomeLoanMain&numberOfHLBondAccounts="+p+"&homeLoanBondAccountNumbers="+j+"&homeLoanBondAccountNumber="+v+"&homeLoanBondAccountAdditionalAmounts="+c+"&homeLoanBondAccountCurrentAmounts="+x+"&homeLoanBondAccountAdditionalAmount="+h+"&homeLoanBondAccountCurrentAmount="+y+"&cellPhoneNumber="+o+"&emailAddress="+f;phe.common.setAttribute(n,"proxyurl",r);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010150"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010150"))}}}}})};absa.gadgets.homeLoanGadget.setBar=function(a){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.homeLoan.onUnsubscribeClick(this,'HOME_LOANS','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.homeLoan.onUnsubscribeClick(this,'HOME_LOANS','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.homeLoan.onUnsubscribeClick(this,'HOME_LOANS','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var d=bb.html.createElementFromString("<div class='ap-balances'></div>");d.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(d)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.homeLoanFurtherAdvanceGadget=absa.gadgets.homeLoanFurtherAdvanceGadget||{};absa.gadgets.homeLoanFurtherAdvanceGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/homeLoanFurtherAdvanceOffer",function(c){absa.gadgets.homeLoanFurtherAdvanceGadget.onRestore(a)});absa.gadgets.homeLoanFurtherAdvanceGadget.displayhomeLoanFurtherAdvanceGadget(a)}};absa.gadgets.homeLoanFurtherAdvanceGadget.displayhomeLoanFurtherAdvanceGadget=function(a){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersHomeLoanFurtherAdvanceWebService&action=displayHomeLoanFurtherAdvanceGadget",function(m){if(!m.errors.length){var r=bb.html.createElementFromString(m.text);if(r){if(bb.html.hasClass(r,"ap-offersHL-displayhomeLoanFurtherAdvanceGadgetResponseDiv")){var l=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHL-eligibilityValue"));var j=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHL-homeLoanBondAccountNumber"));var b=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHL-homeLoanBondAccountFurtherAdvanceAmount"));var o=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHL-cellPhoneNumber"));var e=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHL-emailAddress"));var p="";var h="";var t="";var c="";var k=[];var v="";var d="";var n=null;if(l=="ELIGIBLE"){var g=absa.locale["Common/General/GadgetSubTitle/Label/HomeLoanText1"];var f=absa.locale["Common/General/GadgetSubTitle/Label/HomeLoanText2"];var u="&nbsp";absa.gadgets.homeLoanFurtherAdvanceGadget.setBar(a);if(j.search(" ")!=-1){var h=j.split(" ");t=h[0];p=h.length}else{h=j;t=bb.string.trim(h);p=1}if(p>1){c=b.split(" ");for(var s=0;s<c.length;s++){k[s]=parseInt(c[s])}v=k[0];d=absa.util.formatCurrency(v);absa.gadgets.setSubtitle(a,g+u+d+u+f)}else{v=parseInt(b);k[0]=bb.string.trim(b);d=absa.util.formatCurrency(v);absa.gadgets.setSubtitle(a,g+" "+d+" "+f)}n=bb.selector.query(a.body,".ap-gadget-lazyContent");var q="proxy?pipe=genericEmptyResponse&xslFile=Offers/HomeLoanFurtherAdvanceOffers/offersHomeLoanFurtherAdvanceMain&numberOfHLBondAccounts="+p+"&homeLoanBondAccountNumbers="+h+"&homeLoanBondAccountNumber="+t+"&homeLoanBondAccountFurtherAdvanceAmounts="+k+"&homeLoanBondAccountFurtherAdvanceAmount="+v+"&cellPhoneNumber="+o+"&emailAddress="+e;phe.common.setAttribute(n,"proxyurl",q);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010156"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010156"))}}}}})};absa.gadgets.homeLoanFurtherAdvanceGadget.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.homeLoanFurtherAdvanceGadget.setBar=function(a){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.homeLoanFurtherAdvance.onUnsubscribeClick(this,'HOME_LOANS_FA','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.homeLoanFurtherAdvance.onUnsubscribeClick(this,'HOME_LOANS_FA','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.homeLoanFurtherAdvance.onUnsubscribeClick(this,'HOME_LOANS_FA','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var d=bb.html.createElementFromString("<div class='ap-balances'></div>");d.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(d)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.homeLoanSwitchGadget=absa.gadgets.homeLoanSwitchGadget||{};absa.gadgets.homeLoanSwitchGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/homeLoanSwitchOffer",function(c){absa.gadgets.homeLoanSwitchGadget.onRestore(a)});absa.gadgets.homeLoanSwitchGadget.displayhomeLoanSwitchGadget(a)}};absa.gadgets.homeLoanSwitchGadget.displayhomeLoanSwitchGadget=function(a){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersHomeLoanSwitchWebService&action=displayHomeLoanSwitchGadget",function(e){if(!e.errors.length){var j=bb.html.createElementFromString(e.text);if(j){if(bb.html.hasClass(j,"ap-offersHL-displayhomeLoanSwitchGadgetResponseDiv")){var g=phe.hiddenField.getValue(bb.selector.query(j,".ap-offersHL-eligibilityValue"));var d=phe.hiddenField.getValue(bb.selector.query(j,".ap-offersHL-cellPhoneNumber"));var h=phe.hiddenField.getValue(bb.selector.query(j,".ap-offersHL-emailAddress"));var c=null;if(g=="ELIGIBLE"){var b=absa.locale["Common/General/GadgetSubTitle/Label/HomeLoanSwitchText"];absa.gadgets.homeLoanSwitchGadget.setBar(a);absa.gadgets.setSubtitle(a,b);c=bb.selector.query(a.body,".ap-gadget-lazyContent");var f="proxy?pipe=genericEmptyResponse&xslFile=Offers/HomeLoanSwitchOffers/offersHomeLoanSwitchMain&cellPhoneNumber="+d+"&emailAddress="+h;phe.common.setAttribute(c,"proxyurl",f);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010158"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010158"))}}}}})};absa.gadgets.homeLoanSwitchGadget.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.homeLoanSwitchGadget.setBar=function(a){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.homeLoanSwitch.onUnsubscribeClick(this,'HOME_LOAN_SWITCH','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.homeLoanSwitch.onUnsubscribeClick(this,'HOME_LOAN_SWITCH','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.homeLoanSwitch.onUnsubscribeClick(this,'HOME_LOAN_SWITCH','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var d=bb.html.createElementFromString("<div class='ap-balances'></div>");d.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(d)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.lifeInsuranceGadget=absa.gadgets.lifeInsuranceGadget||{};absa.gadgets.lifeInsuranceGadget.init=function(a){this.gadget=a;var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("showInsuranceProduct:offersInsuranceGadget",function(){absa.gadgets.lifeInsuranceGadget.doTheShowHide(a)});absa.gadgets.lifeInsuranceGadget.doTheShowHide(a)}};absa.gadgets.lifeInsuranceGadget.doTheShowHide=function(a){if(absa.VCL_LIFEPRODUCTS!="NONE"&&absa.VCL_LIFEPRODUCTS!=""){absa.gadgets.lifeInsuranceGadget.getLifeInsuranceProduct(a)}};absa.gadgets.lifeInsuranceGadget.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.gadgets.loadLazyContent(a,true,function(){phe.loadingMessage.hideLoadingMessage(c)})}};absa.gadgets.lifeInsuranceGadget.getLifeInsuranceProduct=function(a){absa.gadgets.lifeInsuranceGadget.setBar(a);var b=bb.selector.query(a.body,".ap-gadget-lazyContent");intialProxyUrl=a.getPreference("initialProxyUrl");var c="proxy?pipe=genericEmptyResponse&xslFile="+intialProxyUrl+"&displayProduct="+absa.VCL_LIFEPRODUCTS;phe.common.setAttribute(b,"proxyurl",c);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010138"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010138"))};absa.gadgets.lifeInsuranceGadget.setBar=function(a){var d=bb.selector.queryAncestor(a.body,".ap-accountbar");d.setAttribute("balance","false");if(absa.VCL_LIFEPRODUCTS=="FREE_COVER"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/FreeCover"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/FreeCover"])}else{if(absa.VCL_LIFEPRODUCTS=="LIFE_UPSELL_COVER"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/UpsellLifeCover"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/UpsellLifeCover"])}else{if(absa.VCL_LIFEPRODUCTS=="FUNERAL_COVER"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/FuneralCover"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/FuneralCover"])}else{if(absa.VCL_LIFEPRODUCTS=="ULTIMATE_PROTECTOR"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/LifeCover"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/LifeCover"])}}}}var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.lifeInsurance.onUnsubscribeClick(this,'"+absa.VCL_LIFEPRODUCTS+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.lifeInsurance.onUnsubscribeClick(this,'"+absa.VCL_LIFEPRODUCTS+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.lifeInsurance.onUnsubscribeClick(this,'"+absa.VCL_LIFEPRODUCTS+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var e=bb.html.createElementFromString("<div class='ap-balances'></div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.overdraftGadget=absa.gadgets.overdraftGadget||{};absa.gadgets.overdraftGadget.init=function(a){this.gadget=a;var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{if(absa.index.hideGadgetOnApplyClick!=0){if(absa.ODENABLE=="true"){if(absa.SBU=="E"){absa.gadgets.overdraftGadget.doBankingSectorCheck(a)}else{setTimeout(absa.gadgets.overdraftGadget.doIt(a),1000)}}}}};absa.gadgets.overdraftGadget.doBankingSectorCheck=function(a){if((absa.CIFKEY!=null)&&(absa.CIFKEY!=""&absa.CIFKEY!="null")){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&mode=getPersonalInfo&cifKey="+absa.CIFKEY,function(c){if(!c.errors.length){var e=bb.html.createElementFromString(c.text);var d=bb.selector.query(e,".ap-personalDetails-data");if(d){var b=d.getAttribute("bankingSector");if(Number(b)>=4&Number(b)<=5){}else{absa.gadgets.overdraftGadget.doIt(a)}}else{absa.gadgets.overdraftGadget.doIt(a)}}else{absa.gadgets.overdraftGadget.doIt(a)}})}};absa.gadgets.overdraftGadget.doIt=function(a){gadgets.pubsub.subscribe("goTo:offers/overdraftOffer",function(b){absa.gadgets.overdraftGadget.onRestore(a)});if(absa.CLIENTTYPE=="B"){absa.gadgets.overdraftGadget.getOverdraftProductBB(a)}else{absa.gadgets.overdraftGadget.getOverdraftProduct(a)}};absa.gadgets.overdraftGadget.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.loadLazyContent(a,false,b)};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.overdraftGadget.getOverdraftProduct=function(c){var e="";var h="";var g="";var f="";var b="";var a="";var d="";absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersOverdraftWebService&action=displayOverdraftGadgets",function(m){if(!m.errors.length){var r=bb.html.createElementFromString(m.text);if(r){if(bb.html.hasClass(r,"ap-Offers-displayOverdraftGadget")){var n=bb.selector.query(r,".ap-Offers-overdraftProductValue");var q=bb.selector.query(r,".ap-Offers-existingOdLimit");var k=bb.selector.query(r,".ap-Offers-newOdLimit");var l=bb.selector.query(r,".ap-Offers-existingOdLimitFormatted");var s=bb.selector.query(r,".ap-Offers-newOdLimitFormatted");e=phe.hiddenField.getValue(n);h=phe.hiddenField.getValue(q);g=phe.hiddenField.getValue(k);b=phe.hiddenField.getValue(l);a=phe.hiddenField.getValue(s)}}}absa.gadgets.overdraftGadget.setBar(e,g,h,c);d=true;if(e!=""){var t;if(e=="EXISTING_OVERDRAFT_LIMIT"){c.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersExistingOverdraft"]+"</div></div>");absa.gadgets.setSubtitle(c,absa.locale["Common/General/GadgetSubTitle/Label/OffersExistingOverdraft"]);var o=g/h;if(o<0.4){t=2}else{if(o>0.6){t=1}else{if(o>=0.4&&o<=0.6){t=0}}}}else{if(e=="NEW_OVERDRAFT_LIMIT"){c.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersNewOverdraft"]+"</div></div>");absa.gadgets.setSubtitle(c,absa.locale["Common/General/GadgetSubTitle/Label/OffersNewOverdraft"])}else{d=false}}if(d){var p=bb.selector.query(c.body,".ap-gadget-lazyContent");f=c.getPreference("ODProxyUrl");var j="proxy?pipe=genericEmptyResponse&xslFile="+f+"&displayOdProduct="+e+"&existingOdLimit="+b+"&newOdlimit="+a+"&odFractionvalue="+t+"&newOdUnformattedLimit="+g;phe.common.setAttribute(p,"proxyurl",j);absa.index.odInitialised=1;gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010139"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010139"))}}})};absa.gadgets.overdraftGadget.getOverdraftProductBB=function(a){var c;var b=null;absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersBBOverdraftWebService&action=displayBBOverdraftGadget",function(f){if(!f.errors.length){try{resp=JSONRequest.parse(absa.util.stripTag(f.text));bbODProductType=resp.bbODProductType;bbNewOdLimit=resp.bbNewOdLimit;bbExistingOdLimit=resp.bbExistingOdLimit;bbUtilizedODLimit=resp.bbUtilizedOdLimit;b=parseFloat(bbExistingOdLimit)+parseFloat(bbUtilizedODLimit);bbUtilizedODLimit=Math.abs(bbUtilizedODLimit)}catch(j){bbODProductType="NONE"}if(bbODProductType!="NONE"){absa.gadgets.overdraftGadget.setBar(bbODProductType,bbNewOdLimit,bbExistingOdLimit,a);var d=bb.selector.query(a.body,".ap-gadget-lazyContent");var h=a.getPreference("BBODProxyUrl");var g="proxy?pipe=genericEmptyResponse&xslFile="+h+"&newOdlimit="+bbNewOdLimit+"&existingOdLimit="+bbExistingOdLimit+"&odProductType="+bbODProductType+"&bbUtilizedODLimit="+bbUtilizedODLimit+"&unUtilizedODLimit="+b;phe.common.setAttribute(d,"proxyurl",g);absa.index.odInitialised=1;gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010139"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010139"))}}})};absa.gadgets.overdraftGadget.setBar=function(o,d,b,h){var e=bb.selector.queryAncestor(h.body,".ap-accountbar");bb.html.addClass(e,"ap-accountBalances");bb.html.addClass(e,"ap-offersOD");e.setAttribute("balance","false");var j=null;var f=null;f=absa.util.formatCurrency(d).toString().replace(/R /g,"");var c="0.00";if(absa.CLIENTTYPE=="B"){if(o=="NEW_OVERDRAFT_LIMIT"){h.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersBBODNew"]+"</div></div>");absa.gadgets.setSubtitle(h,absa.locale["Common/General/GadgetSubTitle/Label/OffersBBODNew"])}else{if(o=="EXISTING_OVERDRAFT_LIMIT"){h.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersBBODExisting"]+"</div></div>");absa.gadgets.setSubtitle(h,absa.locale["Common/General/GadgetSubTitle/Label/OffersBBODExisting"])}}j="bbOverdraft"}else{h.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersNewOverdraft"]+"</div></div>");j="overdraftOffers"}var l=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');l.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps."+j+".onUnsubscribeClick(this,'OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));l.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps."+j+".onUnsubscribeClick(this,'OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));l.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps."+j+".onUnsubscribeClick(this,'OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var n=bb.html.createElementFromString('<div style="width: 170px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field">'+c+"</div>");var a=bb.html.createElementFromString('<div style="width: 100px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m available-field">'+f+"</div>");var g=bb.html.createElementFromString('<div style="width: 150px; padding: 10px; margin:0; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m uncleared-field"></div>');var m=bb.html.createElementFromString("<div class='ap-balances'></div>");m.appendChild(a);m.appendChild(n);m.appendChild(l);var k=bb.selector.query(h._window.viewNode,".p-gadget-header");k.appendChild(m)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.offersSavingsAndInvestmentGadget=absa.gadgets.offersSavingsAndInvestmentGadget||{};absa.gadgets.offersSavingsAndInvestmentGadget.init=function(a,c){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("goTo:offers/savingsAndInvestmentsOffer",function(d){absa.gadgets.offersSavingsAndInvestmentGadget.onRestore(a)});absa.gadgets.offersSavingsAndInvestmentGadget.displaySavingsGadget(a)}};absa.gadgets.offersSavingsAndInvestmentGadget.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.gadgets.loadLazyContent(a,true,function(){phe.loadingMessage.hideLoadingMessage(c)})}};absa.gadgets.offersSavingsAndInvestmentGadget.displaySavingsGadget=function(a){absa.io.makeRequest("proxy?pipe=genericWebService&ws=OffersSavingsAndInvestmentsWebService&action=displaySavingsAndInvestmentsGadget",function(d){if(d!=null){if(!d.errors.length){if(d.text!=null){var f=JSONRequest.parse(absa.util.stripTag(d.text));if(f!=null){var j=f[0].eligibilityValueForSI;var b=f[1].siGadgetTitleCMSKey;var e=f[2].siGadgetSubTitleCMSKey;var c=f[3].siGadgetDescription1CMSKey;var k=f[4].siGadgetDescription2CMSKey;var g=f[5].siProductName;var h=absa.gadgets.offersSavingsAndInvestmentGadget.prependZero(f[6].siProductCode);if(j!=null&&j=="ELIGIBLE"){absa.gadgets.offersSavingsAndInvestmentGadget.setBar(b,e,a);oLazyContent=bb.selector.query(a.body,".ap-gadget-lazyContent");sUrl="proxy?pipe=genericEmptyResponse&xslFile=Offers/SavingsAndInvestmentsOffers/savingsAndInvestmentsProductsMain&savingsProductDesc1="+c+"&savingsProductDesc2="+k+"&productName="+g+"&productCode="+h;phe.common.setAttribute(oLazyContent,"proxyurl",sUrl);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010151"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010151"))}}}}}})};absa.gadgets.offersSavingsAndInvestmentGadget.setBar=function(e,d,a){a.setTitle(e);absa.gadgets.setSubtitle(a,d);var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.offersSavingsAndInvestment.onUnsubscribeClick(this,'SAVINGS_AND_INVESTMENT','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.offersSavingsAndInvestment.onUnsubscribeClick(this,'SAVINGS_AND_INVESTMENT','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.offersSavingsAndInvestment.onUnsubscribeClick(this,'SAVINGS_AND_INVESTMENT','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var f=bb.html.createElementFromString("<div class='ap-balances'></div>");f.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(f)};absa.gadgets.offersSavingsAndInvestmentGadget.prependZero=function(a){var b=a.split();if(b[0]!="0"){return("0"+a)}return a};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.shortTermInsuranceGadget=absa.gadgets.shortTermInsuranceGadget||{};absa.gadgets.shortTermInsuranceGadget.init=function(a){this.gadget=a;var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{gadgets.pubsub.subscribe("showInsuranceProduct:offersInsuranceGadget",function(){absa.gadgets.shortTermInsuranceGadget.doTheShowHide(a)});absa.gadgets.shortTermInsuranceGadget.doTheShowHide(a)}};absa.gadgets.shortTermInsuranceGadget.doTheShowHide=function(a){if(absa.VCL_SHORTTERMPRODUCTS!="NONE"&&absa.VCL_SHORTTERMPRODUCTS!=""){absa.gadgets.shortTermInsuranceGadget.getShortTermInsProduct(a)}};absa.gadgets.shortTermInsuranceGadget.onRestore=function(a){var b=bb.selector.query(a.body,".ap-gadget-lazyContent");if(b){b.innerHTML='<div class="ap-loading-message"></div>';var c=bb.selector.query(b,".ap-loading-message");phe.loadingMessage.showLoadingMessage(c);absa.gadgets.loadLazyContent(a,true,function(){phe.loadingMessage.hideLoadingMessage(c)})}};absa.gadgets.shortTermInsuranceGadget.getShortTermInsProduct=function(a){absa.gadgets.shortTermInsuranceGadget.setBar(a);var b=bb.selector.query(a.body,".ap-gadget-lazyContent");var c="proxy?pipe=genericEmptyResponse&xslFile=Offers/ShortTermInsuranceOffers/shortTermProductsMain&displayProduct="+absa.VCL_SHORTTERMPRODUCTS;phe.common.setAttribute(b,"proxyurl",c);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010144"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010144"))};absa.gadgets.shortTermInsuranceGadget.setBar=function(a){var d=bb.selector.queryAncestor(a.body,".ap-accountbar");d.setAttribute("balance","false");if(absa.VCL_SHORTTERMPRODUCTS=="HOUSEHOLD_CONTENT_INSURANCE"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersShortTermHomeContent"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/OffersShortTermHomeContent"])}else{if(absa.VCL_SHORTTERMPRODUCTS=="MOTOR_VEHICAL_INSURANCE"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersShortTermMotor"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/OffersShortTermMotor"])}else{if(absa.VCL_SHORTTERMPRODUCTS=="HOME_OWNERS_INSURANCE"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-Accounts' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/OffersShortTermHomeBuilding"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/OffersShortTermHomeBuilding"])}}}var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.shortTermInsurance.onUnsubscribeClick(this,'"+absa.VCL_SHORTTERMPRODUCTS+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.shortTermInsurance.onUnsubscribeClick(this,'"+absa.VCL_SHORTTERMPRODUCTS+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.shortTermInsurance.onUnsubscribeClick(this,'"+absa.VCL_SHORTTERMPRODUCTS+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var e=bb.html.createElementFromString("<div class='ap-balances'></div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.gadgets=absa.gadgets||{};absa.gadgets.valueAddsGadget=absa.gadgets.valueAddsGadget||{};absa.gadgets.valueAddsGadget.init=function(a,b){this.gadget=a};absa.gadgets.valueAddsGadget.onRestore=function(a){var b=a.$onRestore||function(){};if(b){b()}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio=absa.apps.otherInvestmentPortfolio||{};absa.apps.otherInvestmentPortfolio.onAddLine=function(d,e,a){var b=bb.selector.queryAncestor(d,".ap-otherinvestmentportfolio-form"+e);var g=bb.selector.query(b,".ap-otherInvestmentPortfolio-contentTable");var c=0;var l=bb.selector.queryAll(b,".ap-otherInvestmentPortfolio-description");if(l!=""){c=l.length}c++;if(a==0){a=3}oNewNodeRow=phe.tableBody.cloneRow(g,a);phe.tableBodyRow.setAttribute(oNewNodeRow,"class","ap-otherInvestmentPortfolio-newDescriptionRow");var k=bb.selector.query(oNewNodeRow,".ap-otherInvestmentPortfolio-cloneRowDescription");var j=bb.selector.query(oNewNodeRow,".ap-otherInvestmentPortfolio-cloneRowDescriptionValue");phe.textBox.setAttribute(k,"class","ap-otherInvestmentPortfolio-description ap-otherInvestmentPortfolio-newDescription ap-otherInvestmentPortfolio-width556");phe.textBox.setAttribute(j,"class","ap-otherInvestmentPortfolio-descriptionValue ap-otherInvestmentPortfolio-newDescriptionValue ap-otherInvestmentPortfolio-width192 ap-common-alignRight");phe.textBox.setAttribute(j,"id","count");phe.tableBody.insertRow(g,oNewNodeRow,phe.tableBody.getLength(g));absa.initializeNewContent(oNewNodeRow);phe.button.setAttribute(d,"class","ap-button-extra ap-common-hide");var h=bb.selector.queryAncestor(d,".ui-form");var f=bb.selector.query(b,".ap-otherInvestmentPortfolio-btnSave");phe.button.show(f);phe.form.setAttribute(h,"trackUnconfirmedChanges","true");absa.form.attachHandlers(h)};absa.apps.otherInvestmentPortfolio.onKeyUpOtherInvestments=function(d,h){var b=bb.selector.queryAncestor(d,".ap-otherinvestmentportfolio-form"+h);var g=bb.selector.query(b,".ap-button-next");var j=bb.selector.queryAll(b,".ap-otherInvestmentPortfolio-description");var f=0;var a=0;for(var c=0;c<j.length;c++){if(phe.textBox.getValue(j[c])!=""){f++}}var e=bb.selector.queryAll(b,".ap-otherInvestmentPortfolio-descriptionValue");for(var c=0;c<e.length;c++){if(phe.textBox.getValue(e[c])!=""){a++}}if((f==j.length)&&(a==e.length)){bb.html.removeClass(g,"ap-common-hide")}else{bb.html.addClass(g,"ap-common-hide")}};absa.apps.otherInvestmentPortfolio.onReset=function(a,h){var b=false;var c=bb.selector.queryAncestor(a,".ap-otherinvestmentportfolio-form"+h);var g=bb.selector.query(c,".ap-button-extra");var f=bb.selector.queryAll(c,".ap-otherInvestmentPortfolio-newDescriptionRow");for(var d=0;d<f.length;d++){var j=bb.selector.query(f[d],".ap-otherInvestmentPortfolio-newDescription");var e=bb.selector.query(f[d],".ap-otherInvestmentPortfolio-newDescriptionValue");phe.textBox.setValue(j,"");b=true}if(b==false){return}phe.button.setAttribute(g,"class","ap-button-extra ap-common-hide")};absa.apps.otherInvestmentPortfolio.onEditInvestment=function(j,c,l){var h=bb.selector.queryAncestor(j,"."+c);var b=bb.selector.queryAncestor(j,".ap-otherinvestmentportfolio-form"+l);var d=bb.selector.query(h,".ap-otherInvestmentPortfolio-capturedDescription");var f=bb.selector.query(h,".ap-otherInvestmentPortfolio-capturedDescriptionValue");var n=bb.selector.query(h,".ap-otherInvestmentPortfolio-capturedDescriptionId");var a=bb.selector.query(b,"."+c);var k=0;var o=bb.selector.queryAll(b,".ap-otherInvestmentPortfolio-description");if(o!=""){k=o.length}k++;phe.textBox.setAttribute(d,"class","ap-otherInvestmentPortfolio-capturedDescription ap-otherInvestmentPortfolio-width556 ap-otherInvestmentPortfolio-description ap-otherInvestmentPortfolio-editDescription ap-otherInvestmentPortfolio-description"+k+"01");var g=bb.selector.query(h,".ap-otherInvestmentPortfolio-capturedDescriptionDisplay");phe.label.setAttribute(g,"class","ap-otherInvestmentPortfolio-capturedDescriptionDisplay ap-common-hide");phe.textBox.setAttribute(f,"class","ap-otherInvestmentPortfolio-capturedDescriptionValue ap-otherInvestmentPortfolio-width192 ap-otherInvestmentPortfolio-descriptionValue ap-otherInvestmentPortfolio-editDescriptionValue ap-otherInvestmentPortfolio-description"+k+"02 ap-common-alignRight");var e=bb.selector.query(h,".ap-otherInvestmentPortfolio-capturedDescriptionValueDisplay");phe.label.setAttribute(e,"class","ap-otherInvestmentPortfolio-capturedDescriptionValueDisplay ap-common-hide");phe.hiddenField.setAttribute(n,"class","ap-otherInvestmentPortfolio-capturedDescriptionId ap-otherInvestmentPortfolio-descriptionId ap-otherInvestmentPortfolio-editDescriptionId");phe.tableBodyRow.setAttribute(a,"class","ap-otherInvestmentPortfolio-editCapturedRow "+c);var m=bb.selector.query(b,".ap-otherInvestmentPortfolio-btnSave");phe.button.show(m)};absa.apps.otherInvestmentPortfolio.onDeleteInvestment=function(e,b,g){var a=bb.selector.queryAncestor(e,"."+b);phe.tableBodyRow.setAttribute(a,"class","ap-otherInvestmentPortfolio-deleteCapturedRow ap-common-hide");var c=bb.selector.query(a,".ap-otherInvestmentPortfolio-capturedDescription");var d=bb.selector.query(a,".ap-otherInvestmentPortfolio-capturedDescriptionValue");var k=bb.selector.query(a,".ap-otherInvestmentPortfolio-capturedDescriptionId");phe.textBox.setAttribute(k,"class","ap-otherInvestmentPortfolio-deleteCapturedId");phe.textBox.setAttribute(d,"class","ap-otherInvestmentPortfolio-deleteCapturedValue");phe.textBox.setAttribute(c,"class","ap-otherInvestmentPortfolio-deleteCapturedDescription");var f=bb.selector.queryAncestor(e,".ap-otherinvestmentportfolio-form"+g);var j=bb.selector.query(f,".ap-otherInvestmentPortfolio-contentTable");var h=bb.selector.query(f,".ap-otherInvestmentPortfolio-btnSave");phe.button.setAttribute(h,"class","ap-button-extra ap-otherInvestmentPortfolio-btnSave");absa.apps.otherInvestmentPortfolio.onSave(h,g)};absa.apps.otherInvestmentPortfolio.onSave=function(c,n){var d=false;var m=0;var j=bb.selector.queryAncestor(c,".ap-jsp-body");var a="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=persistOtherInvestments&categoryId="+n;var k="";var h=bb.selector.queryAncestor(c,".ap-otherinvestmentportfolio-form"+n);var g=bb.selector.queryAll(h,".ap-otherInvestmentPortfolio-newDescriptionRow");var f=bb.selector.queryAll(h,".ap-otherInvestmentPortfolio-editCapturedRow");var p=bb.selector.queryAll(h,".ap-otherInvestmentPortfolio-deleteCapturedRow");var q=true;for(var e=0;e<g.length;e++){q=absa.apps.otherInvestmentPortfolio.onValidateInvestment(g[e],"new");if(!q){var b=bb.selector.query(j,".ap-otherInvestmentPortfolio-modal");phe.modal.showModal(0.5,b,document.body,true);return}}for(var e=0;e<f.length;e++){q=absa.apps.otherInvestmentPortfolio.onValidateInvestment(f[e],"edit");if(!q){var b=bb.selector.query(j,".ap-otherInvestmentPortfolio-modal");phe.modal.showModal(0.5,b,document.body,true);return}}var o=bb.selector.queryAncestor(c,"form");phe.form.setAttribute(o,"trackUnconfirmedChanges","false");absa.form.attachHandlers(o);if(absa.form.validate(o)){for(var e=0;e<g.length;e++){oNewDescription=bb.selector.query(g[e],".ap-otherInvestmentPortfolio-newDescription");oNewValue=bb.selector.query(g[e],".ap-otherInvestmentPortfolio-newDescriptionValue");if(phe.textBox.getValue(oNewDescription)==""&&phe.textBox.getValue(oNewValue)==""){g.innerHTML="";continue}k=k+"&ID="+m+"&desc"+m+"="+encodeURIComponent(phe.textBox.getValue(oNewDescription))+"&value"+m+"="+phe.textBox.getValue(oNewValue)+"&status"+m+"=insert";m++}for(var e=0;e<f.length;e++){oEditId=bb.selector.query(f[e],".ap-otherInvestmentPortfolio-editDescriptionId");oEditDescription=bb.selector.query(f[e],".ap-otherInvestmentPortfolio-editDescription");oEditValue=bb.selector.query(f[e],".ap-otherInvestmentPortfolio-editDescriptionValue");k=k+"&ID="+m+"&catId"+m+"="+phe.textBox.getValue(oEditId)+"&desc"+m+"="+encodeURIComponent(phe.textBox.getValue(oEditDescription))+"&value"+m+"="+phe.textBox.getValue(oEditValue)+"&status"+m+"=update";m++}for(var e=0;e<p.length;e++){oDeleteId=bb.selector.query(p[e],".ap-otherInvestmentPortfolio-deleteCapturedId");oDeleteDescription=bb.selector.query(p[e],".ap-otherInvestmentPortfolio-deleteCapturedDescription");oDeleteValue=bb.selector.query(p[e],".ap-otherInvestmentPortfolio-deleteCapturedValue");k=k+"&ID="+m+"&catId"+m+"="+phe.textBox.getValue(oDeleteId)+"&desc"+m+"="+phe.textBox.getValue(oDeleteDescription)+"&value"+m+"="+phe.textBox.getValue(oDeleteValue)+"&status"+m+"=delete";m++}if(k==""){return}var l={};l[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;l[gadgets.io.RequestParameters.POST_DATA]=k;phe.loadingMessage.showLoadingMessage(h);absa.io.makeRequest(a,function(s){if(!s.errors.length){a="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=otherInvestmentService&categoryid="+n;var r=s.text;absa.io.makeRequest(a,function(u){phe.loadingMessage.hideLoadingMessage(h);if(!u.errors.length){var t=u.text;var v="<div>"+t+r+"</div>";var x=bb.html.createElementFromString(v);var w=bb.selector.query(x,"form");phe.form.setAttribute(w,"trackUnconfirmedChanges","false");absa.form.attachHandlers(w);h.innerHTML="";h.parentNode.replaceChild(x,h);phe.form.displayIOErrorMessage(w,false);absa.util.observer.publish("load-otherinvestment-balances",{})}else{phe.form.displayIOErrorMessage(w,true)}})}else{phe.loadingMessage.hideLoadingMessage(h);phe.form.displayIOErrorMessage(o,true)}},l)}};absa.apps.otherInvestmentPortfolio.onValidateInvestment=function(a,d){var c=bb.selector.query(a,".ap-otherInvestmentPortfolio-"+d+"Description");var b=bb.selector.query(a,".ap-otherInvestmentPortfolio-"+d+"DescriptionValue");if(d=="edit"){if(phe.textBox.getValue(c)==""||phe.textBox.getValue(b)==""){return false}}if(phe.textBox.getValue(c)==""&&phe.textBox.getValue(b)=="0.00"){return true}if(phe.textBox.getValue(c)==""){if(phe.textBox.getValue(b)!=""){return false}}else{if(phe.textBox.getValue(b)==""){return false}}return true};absa.apps.otherInvestmentPortfolio.onOkModal=function(){phe.modal.hideModal();absa.gadgets.collapseGadgets()};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_bankAccountBalance=absa.apps.otherInvestmentPortfolio_bankAccountBalance||{};absa.apps.otherInvestmentPortfolio_bankAccountBalance.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="9"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_bankAccountBalance.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_investmentPolicies=absa.apps.otherInvestmentPortfolio_investmentPolicies||{};absa.apps.otherInvestmentPortfolio_investmentPolicies.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="7"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_investmentPolicies.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_investments=absa.apps.otherInvestmentPortfolio_investments||{};absa.apps.otherInvestmentPortfolio_investments.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="2"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_investments.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_moneyMarket=absa.apps.otherInvestmentPortfolio_moneyMarket||{};absa.apps.otherInvestmentPortfolio_moneyMarket.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="3"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_moneyMarket.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_others=absa.apps.otherInvestmentPortfolio_others||{};absa.apps.otherInvestmentPortfolio_others.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="8"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_others.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_otherCash=absa.apps.otherInvestmentPortfolio_otherCash||{};absa.apps.otherInvestmentPortfolio_otherCash.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="10"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_otherCash.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewOtherCashInvestments=absa.apps.viewOtherCashInvestments||{};absa.apps.viewOtherCashInvestments.global=absa.apps.viewOtherCashInvestments.global||{};absa.apps.viewOtherCashInvestments.global.tableRow=null;absa.apps.viewOtherCashInvestments.onSearchBoxClick=function(f){var e=bb.selector.queryAncestor(f,".ap-viewOtherCashInvestments-form");var a=bb.selector.query(e,".ap-viewOtherCashInvestments-table");var d=bb.selector.query(e,".ap-viewOtherCashInvestments-searchBox");var c=phe.searchBox.getValue(d);var b="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewOtherCashInvstOtherInst&mode=view&searchString="+c;phe.table.setAttribute(a,"dataFile",b);phe.table.reload(a)};absa.apps.viewOtherCashInvestments.onChangeButtonClick=function(g){var s=bb.selector.queryAncestor(g,".ap-viewOtherCashInvestments-form");var o=bb.selector.queryAncestor(g,".ap-viewOtherCashInvestments-table");var b=bb.selector.queryAncestor(g,".ap-viewOtherCashInvestments-tableRow");var j=bb.selector.query(b,".ap-viewOtherCashInvestments-descriptionReadOnly");var l=bb.selector.query(b,".ap-viewOtherCashInvestments-descriptionTextBox");var k=bb.selector.query(b,".ap-viewOtherCashInvestments-amountReadOnly");var e=bb.selector.query(b,".ap-viewOtherCashInvestments-amountHidden");var u=bb.selector.query(b,".ap-viewOtherCashInvestments-amountTextBox");var m=bb.selector.query(b,".ap-viewOtherCashInvestments-currencyReadOnly");var n=bb.selector.query(b,".ap-viewOtherCashInvestments-currencyDropdown");var h=bb.selector.query(b,".ap-viewOtherCashInvestments-changeButton");var p=bb.selector.query(b,".ap-viewOtherCashInvestments-removeButton");var r=bb.selector.query(b,".ap-viewOtherCashInvestments-saveButton");var c=bb.selector.query(b,".ap-viewOtherCashInvestments-cancelButton");var t=bb.selector.queryAll(o,".ap-viewOtherCashInvestments-changeButton");var d=bb.selector.queryAll(o,".ap-viewOtherCashInvestments-removeButton");var v=bb.selector.query(s,".ap-viewOtherCashInvestments-footerCancelButton");var f=bb.selector.query(b,".ap-viewOtherCashInvestments-randValue");var a=phe.inputReadOnlyText.getAttribute(m,"data-currencyCode");phe.common.hide(k);phe.common.hide(m);phe.common.hide(h);phe.common.hide(p);phe.common.hide(f);phe.textBox.setValue(l,phe.inputReadOnlyText.getValue(j));phe.textBox.setValue(u,phe.hiddenField.getValue(e));phe.select.setValue(n,a);phe.common.show(u);phe.common.show(n);phe.common.show(r);phe.common.show(c);phe.common.show(v);for(var q=0;q<t.length;q++){phe.button.setAttribute(t[q],"disabled",true);phe.button.setAttribute(d[q],"disabled",true);bb.html.replaceClass(t[q],"ap-icon-tools","ap-icon-change-disabled");bb.html.replaceClass(d[q],"ap-icon-remove","ap-icon-delete-disabled")}};absa.apps.viewOtherCashInvestments.onCancelButtonClick=function(e){var q=bb.selector.queryAncestor(e,".ap-viewOtherCashInvestments-form");var m=bb.selector.queryAncestor(e,".ap-viewOtherCashInvestments-table");var a=bb.selector.queryAncestor(e,".ap-viewOtherCashInvestments-tableRow");var g=bb.selector.query(a,".ap-viewOtherCashInvestments-descriptionReadOnly");var j=bb.selector.query(a,".ap-viewOtherCashInvestments-descriptionTextBox");var h=bb.selector.query(a,".ap-viewOtherCashInvestments-amountReadOnly");var s=bb.selector.query(a,".ap-viewOtherCashInvestments-amountTextBox");var k=bb.selector.query(a,".ap-viewOtherCashInvestments-currencyReadOnly");var l=bb.selector.query(a,".ap-viewOtherCashInvestments-currencyDropdown");var f=bb.selector.query(a,".ap-viewOtherCashInvestments-changeButton");var n=bb.selector.query(a,".ap-viewOtherCashInvestments-removeButton");var p=bb.selector.query(a,".ap-viewOtherCashInvestments-saveButton");var b=bb.selector.query(a,".ap-viewOtherCashInvestments-cancelButton");var r=bb.selector.queryAll(m,".ap-viewOtherCashInvestments-changeButton");var c=bb.selector.queryAll(m,".ap-viewOtherCashInvestments-removeButton");var t=bb.selector.query(q,".ap-viewOtherCashInvestments-footerCancelButton");var d=bb.selector.query(a,".ap-viewOtherCashInvestments-randValue");phe.common.show(h);phe.common.show(k);phe.common.show(f);phe.common.show(n);phe.common.show(d);phe.common.hide(s);phe.common.hide(l);phe.common.hide(p);phe.common.hide(b);phe.common.hide(t);for(var o=0;o<r.length;o++){phe.button.setAttribute(r[o],"disabled",false);phe.button.setAttribute(c[o],"disabled",false);bb.html.replaceClass(r[o],"ap-icon-change-disabled","ap-icon-tools");bb.html.replaceClass(c[o],"ap-icon-delete-disabled","ap-icon-remove")}phe.form.displayErrorMessage(q,false)};absa.apps.viewOtherCashInvestments.onRemoveButtonClick=function(f){var c=bb.selector.queryAncestor(f,".ap-viewOtherCashInvestments-mainContent");var h=bb.selector.queryAncestor(f,".ap-viewOtherCashInvestments-form");var b=bb.selector.queryAncestor(f,".ap-viewOtherCashInvestments-tableRow");var a=bb.selector.query(c,".ap-viewOtherCashInvestments-deleteConfirmModal");var d=bb.selector.query(b,".ap-viewOtherCashInvestments-descriptionReadOnly");var g=phe.inputReadOnlyText.getValue(d);absa.apps.viewOtherCashInvestments.global.tableRow=b;phe.modal.showModal(0.5,a,c,true);var e=bb.selector.queryAll(window.document,".ap-viewOtherCashInvestments-modalDescription");phe.inputReadOnlyText.setValue(e[1],g)};absa.apps.viewOtherCashInvestments.onRemoveConfirmButtonClick=function(g){var j=bb.selector.query(window.document,".ap-viewOtherCashInvestments-form");var a=bb.selector.queryAncestor(j,".ap-viewOtherCashInvestments-mainContent");var h=bb.selector.query(j,".ap-viewOtherCashInvestments-table");var l=bb.selector.query(h,".ui-table--scrollContainer");var n=absa.apps.viewOtherCashInvestments.global.tableRow;var f=bb.selector.query(n,".ap-viewOtherCashInvestments-id");var c=bb.selector.query(n,".ap-viewOtherCashInvestments-descriptionTextBox");var d=bb.selector.query(n,".ap-viewOtherCashInvestments-amountTextBox");var k=bb.selector.query(n,".ap-viewOtherCashInvestments-currencyDropdown");sPostData="&pos=1&id="+phe.hiddenField.getValue(f)+"&desc="+encodeURIComponent(phe.textBox.getValue(c))+"&amount="+phe.textBox.getValue(d)+"&currency="+phe.select.getValue(k)+"&operation=DELETE";var e={};e[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;e[gadgets.io.RequestParameters.POST_DATA]=sPostData;var b="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=addOtherCashInvstOtherInst";var m=bb.selector.queryAncestor(g,".ap-viewOtherCashInvestments-mainContent");phe.loadingMessage.showLoadingMessage(l);absa.io.makeRequest(b,function(q){phe.loadingMessage.hideLoadingMessage(l);if(!q.errors.length){var p=bb.html.createElementFromString(q.text);var t=bb.selector.query(p,".ap-addOtherCashInvestments-error");if(t){a.parentNode.replaceChild(p,a)}else{var s=phe.tableBody.getLength(h);var o="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewOtherCashInvstOtherInst&mode=view";phe.table.setAttribute(h,"dataFile",o);phe.table.reload(h);if(s==1){var r="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/OtherCash/viewOtherCashInvestment&mode=add";phe.common.setAttribute(a,"proxyurl",r);absa.lazyLoadNode(a,true)}absa.util.observer.publish("load-otherinvestment-balances",{})}}else{phe.form.displayIOErrorMessage(j,true)}},e);phe.modal.hideModal()};absa.apps.viewOtherCashInvestments.onSaveButtonClick=function(h){var o=bb.selector.queryAncestor(h,".ap-viewOtherCashInvestments-tableRow");var a=bb.selector.queryAncestor(h,".ap-viewOtherCashInvestments-mainContent");var k=bb.selector.queryAncestor(h,".ap-viewOtherCashInvestments-form");var j=bb.selector.query(k,".ap-viewOtherCashInvestments-table");var m=bb.selector.query(j,".ui-table--scrollContainer");var g=bb.selector.query(o,".ap-viewOtherCashInvestments-id");var d=bb.selector.query(o,".ap-viewOtherCashInvestments-sequenceId");var c=bb.selector.query(o,".ap-viewOtherCashInvestments-descriptionTextBox");var e=bb.selector.query(o,".ap-viewOtherCashInvestments-amountTextBox");var l=bb.selector.query(o,".ap-viewOtherCashInvestments-currencyDropdown");sPostData="&pos=1&id="+phe.hiddenField.getValue(g)+"&sequenceId="+phe.hiddenField.getValue(d)+"&desc="+encodeURIComponent(phe.textBox.getValue(c))+"&amount="+phe.textBox.getValue(e)+"&currency="+phe.select.getValue(l)+"&operation=UPDATE";var f={};f[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;f[gadgets.io.RequestParameters.POST_DATA]=sPostData;var b="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=addOtherCashInvstOtherInst";var n=bb.selector.queryAncestor(h,".ap-viewOtherCashInvestments-mainContent");if(absa.form.validate(k)){phe.loadingMessage.showLoadingMessage(m);absa.io.makeRequest(b,function(r){phe.loadingMessage.hideLoadingMessage(m);if(!r.errors.length){var q=bb.html.createElementFromString(r.text);var s=bb.selector.query(q,".ap-addOtherCashInvestments-error");if(s){a.parentNode.replaceChild(q,a)}else{var p="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewOtherCashInvstOtherInst&mode=view";phe.table.setAttribute(j,"dataFile",p);phe.table.reload(j);absa.util.observer.publish("load-otherinvestment-balances",{})}}else{phe.form.displayIOErrorMessage(k,true)}},f)}};absa.apps.viewOtherCashInvestments.onRefreshButtonClick=function(c){var d=bb.selector.queryAncestor(c,".ap-viewOtherCashInvestments-form");var b=bb.selector.query(d,".ap-viewOtherCashInvestments-table");var a="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewOtherCashInvstOtherInst&mode=view";phe.table.setAttribute(b,"dataFile",a);phe.table.reload(b)};absa.apps.viewOtherCashInvestments.onRearrangeButtonClick=function(c,a){var b="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/OtherCash/rearrangeOtherCashInvestments";absa.modal.loadModal(b,a)};absa.apps.viewOtherCashInvestments.onRearragngeResetButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-rearrangeOtherCashInvestments");var a=bb.selector.query(b,".ap-rearrangeOtherCashInvestments-table");phe.rearrangeTable.resetPosition(a)};absa.apps.viewOtherCashInvestments.onRearragngeSaveButtonClick=function(l){var o=bb.selector.queryAncestor(l,".ap-viewOtherCashInvestments-form");var p=bb.selector.queryAncestor(l,".ap-rearrangeOtherCashInvestments");var n=bb.selector.query(o,".ap-rearrangeOtherCashInvestments-table");var m=bb.selector.queryAll(n,".ui-tableBodyRow");var c="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=addOtherCashInvstOtherInst&mode=rearrange";var h="";var d=1;var j={};for(var f=0;f<m.length;f++){var k=bb.selector.query(m[f],".ap-rearrangeOtherCashInvestments-id");var e=bb.selector.query(m[f],".ap-rearrangeOtherCashInvestments-sequenceId");var a=bb.selector.query(m[f],".ap-rearrangeOtherCashInvestments-desc");var g=bb.selector.query(m[f],".ap-rearrangeOtherCashInvestments-amount");var b=bb.selector.query(m[f],".ap-rearrangeOtherCashInvestments-currency");h=h+"&pos="+f+"&id="+phe.hiddenField.getValue(k)+"&sequenceId="+d+"&desc="+encodeURIComponent(phe.hiddenField.getValue(a))+"&amount="+phe.hiddenField.getValue(g)+"&currency="+phe.hiddenField.getValue(b)+"&operation=UPDATE";d=d+1}j[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;j[gadgets.io.RequestParameters.POST_DATA]=h;phe.loadingMessage.showLoadingMessage(p);absa.io.makeRequest(c,function(s){phe.loadingMessage.hideLoadingMessage(p);if(!s.errors.length){phe.form.displayIOErrorMessage(o,false);var r=bb.html.createElementFromString(s.text);var v=bb.selector.query(r,".ap-addOtherCashInvestments-error");if(v){var u=bb.selector.query(p,".ui-formFoot");var t=bb.selector.query(u,".ap-rearrangeOtherCashInvestments-message");if(t){u.removeChild(t.parentNode)}u.insertBefore(r,u.firstChild)}else{phe.modal.hideModal();var q=bb.selector.query(document.body,".ap-viewOtherCashInvestments-table");phe.table.removeSorting(q);phe.table.reload(q)}}else{phe.form.displayIOErrorMessage(o,true)}},j)};absa.apps.viewOtherCashInvestments.onPrintButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-viewOtherCashInvestments-mainContent");var a=bb.selector.query(b,".ap-viewOtherCashInvestments-printOtherCashListModal");phe.modal.showModal(0.5,a,b,true)};absa.apps.viewOtherCashInvestments.onPrintLayoutSelect=function(b){var c=bb.selector.queryAncestor(b,".ap-viewOtherCashInvestments-printOtherCashListModal");var a=bb.selector.queryAll(c,".ap-viewOtherCashInvestments-printPartialAlpha");phe.row.hide(a[0]);phe.row.hide(a[1]);if(phe.select.getValue(b)=="pa"){phe.row.show(a[0]);phe.row.show(a[1])}};absa.apps.viewOtherCashInvestments.onPrintLayoutButtonClick=function(j){var c=bb.selector.queryAncestor(j,".ap-viewOtherCashInvestments-printOtherCashListModal");var d=bb.selector.query(c,".ap-viewOtherCashInvestments-printLayoutSelect");var e=bb.selector.query(c,".ap-viewOtherCashInvestments-sortOrderSelect");var a="ASC";var h="^[a-z-A-Z0-9].*";if(phe.select.getValue(d)=="pa"){var l=bb.selector.query(c,".ap-viewOtherCashInvestments-fromAlphabetSelect");var f=bb.selector.query(c,".ap-viewOtherCashInvestments-toAlphabetSelect");var b=phe.select.getValue(l);var g=phe.select.getValue(f);if(b.charCodeAt(0)>g.charCodeAt(0)){var k=b;b=g;g=k}h="^["+b+"-"+g+"-"+b.toUpperCase()+"-"+g.toUpperCase()+"].*"}if(phe.select.getValue(e)=="DESC"){a="DESC"}absa.openReport("report/saveInvestOtherCash.pdf?searchQuery="+h+"&enableRegularExpression=true&enableRange=false&searchField=desc&sortField=desc&sortOrder="+a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.addOtherCashInvestments=absa.apps.addOtherCashInvestments||{};absa.apps.addOtherCashInvestments.global=absa.apps.addOtherCashInvestments.global||{};absa.apps.addOtherCashInvestments.global.tableRow=null;absa.apps.addOtherCashInvestments.global.deletedRow=[];absa.apps.addOtherCashInvestments.onAddOtherCashButtonClick=function(b){var a=bb.selector.queryAncestor(b,".ap-viewOtherCashInvestments-mainContent");var c="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/OtherCash/viewOtherCashInvestment&mode=add";absa.apps.addOtherCashInvestments.global.deletedRow=[];phe.common.setAttribute(a,"proxyurl",c);absa.lazyLoadNode(a,true)};absa.apps.addOtherCashInvestments.onAddNewLineButtonClick=function(k){var n=bb.selector.queryAncestor(k,".ap-addOtherCashInvestments-form");var m=bb.selector.query(n,".ap-addOtherCashInvestments-table");var b=phe.tableBody.getLength(m);if(b!=0){var l=phe.tableBody.cloneRow(m,0);absa.apps.addOtherCashInvestments.global.tableRow=l}var e=bb.selector.query(absa.apps.addOtherCashInvestments.global.tableRow,".ap-addOtherCashInvestments-descriptionTextBox");var h=bb.selector.query(absa.apps.addOtherCashInvestments.global.tableRow,".ap-addOtherCashInvestments-id");var f=bb.selector.query(absa.apps.addOtherCashInvestments.global.tableRow,".ap-addOtherCashInvestments-amountTextBox");var o=bb.selector.query(absa.apps.addOtherCashInvestments.global.tableRow,".ap-addOtherCashInvestments-currencyDropdown");phe.textBox.setValue(e,"");phe.textBox.setValue(f,"");phe.hiddenField.setValue(h,"");phe.select.setSelectedText(o,"South African Rand (ZAR)");phe.textBox.setAttribute(e,"required",false);phe.textBox.setAttribute(f,"required",false);phe.tableBody.insertRow(m,absa.apps.addOtherCashInvestments.global.tableRow,b);absa.initializeNewContent(absa.apps.addOtherCashInvestments.global.tableRow);var a=bb.selector.queryAll(m,".ap-icon-remove");var j=bb.selector.queryAll(m,".ap-addOtherCashInvestments-tableRow");var d=j.length;var g=j[d-2];var c=phe.common.getAttribute(g,"data-rowIndex");c++;phe.common.setAttribute(j[d-1],"data-rowIndex",c);bb.html.addClass(j[d-1],"ap-addOtherCashInvestments-tableRow-"+c);bb.html.removeClass(j[d-1],"ap-addOtherCashInvestments-tableRow-1")};absa.apps.addOtherCashInvestments.onRemoveButtonClick=function(j){var k=bb.selector.queryAncestor(j,".ap-addOtherCashInvestments-table");var b=bb.selector.queryAncestor(j,".ap-addOtherCashInvestments-tableRow");var a=bb.selector.queryAll(k,".ap-icon-remove");if(a.length>3){var l=bb.selector.queryAncestor(j,".ui-form");var f=bb.selector.query(l,".ap-viewOtherCashInvestments-deleteRowConfirmModal");var h=phe.common.getAttribute(b,"data-rowIndex");phe.common.setAttribute(f,"data-rowIndex",h);phe.modal.showModal(0.5,f,l,true)}else{var d=bb.selector.query(b,".ap-addOtherCashInvestments-descriptionTextBox");var g=bb.selector.query(b,".ap-addOtherCashInvestments-amountTextBox");phe.textBox.setAttribute(d,"required","");phe.textBox.setAttribute(g,"required","");absa.form.validate.checkElement(d);absa.form.validate.checkElement(g);phe.textBox.setValue(d,"");phe.textBox.setValue(g,"");var g=bb.selector.query(b,".ap-addOtherCashInvestments-amountTextBox");var c=bb.selector.query(b,".ap-addOtherCashInvestments-currencyDropdown");for(var e=0;e<c.length;e++){if(c[e].value=="ZAR"){phe.select.setSelectedIndex(c,e)}}}};absa.apps.addOtherCashInvestments.onDescriptionChange=function(c){var a=bb.selector.queryAncestor(c,".ap-addOtherCashInvestments-tableRow");var b=bb.selector.query(a,".ap-addOtherCashInvestments-amountTextBox");if(phe.textBox.getValue(c)==""){if(phe.textBox.getValue(b)==""){phe.textBox.setAttribute(c,"required","");phe.textBox.setAttribute(b,"required","");absa.form.validate.checkElement(b)}}else{phe.textBox.setAttribute(b,"required","true")}};absa.apps.addOtherCashInvestments.onAmountChange=function(c){var a=bb.selector.queryAncestor(c,".ap-addOtherCashInvestments-tableRow");var b=bb.selector.query(a,".ap-addOtherCashInvestments-descriptionTextBox");if(phe.textBox.getValue(c)==""){if(phe.textBox.getValue(b)==""){phe.textBox.setAttribute(c,"required","");phe.textBox.setAttribute(b,"required","");absa.form.validate.checkElement(b)}}else{phe.textBox.setAttribute(b,"required","true")}};absa.apps.addOtherCashInvestments.onRemoveRowConfirmButtonClick=function(j){var k=bb.selector.query(window.document,".ap-addOtherCashInvestments-table");var f=bb.selector.queryAncestor(j,".ap-viewOtherCashInvestments-deleteRowConfirmModal");var h=phe.common.getAttribute(f,"data-rowIndex");var b=bb.selector.query(k,".ap-addOtherCashInvestments-tableRow-"+h);if(b==null){var b=bb.selector.queryAncestor(j,".ap-addOtherCashInvestments-newTableRow")}var e=bb.selector.query(b,".ap-addOtherCashInvestments-id");var c=phe.hiddenField.getValue(e);if(c!=""){absa.apps.addOtherCashInvestments.global.deletedRow.push(b)}var d=phe.tableBodyRow.getIndex(b);var a=phe.tableBody.getLength(k);if(a==1){var g=phe.tableBody.cloneRow(k,0);absa.apps.addOtherCashInvestments.global.tableRow=g}phe.tableBody.deleteRow(k,d);phe.modal.hideModal()};absa.apps.addOtherCashInvestments.onSaveButtonClick=function(k){var m=bb.selector.queryAncestor(k,".ui-form");var b=bb.selector.queryAncestor(k,".ap-viewOtherCashInvestments-mainContent");var l=bb.selector.query(m,".ap-addOtherCashInvestments-table");var n=bb.selector.queryAll(l,".ap-addOtherCashInvestments-tableRow");var p=bb.selector.queryAncestor(k,".ap-viewOtherCashInvestments-mainContent");var c="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=addOtherCashInvstOtherInst";var g="";var h={};var f=true;for(i=0;i<n.length;i++){var j=bb.selector.query(n[i],".ap-addOtherCashInvestments-id");var d=bb.selector.query(n[i],".ap-addOtherCashInvestments-descriptionTextBox");var e=bb.selector.query(n[i],".ap-addOtherCashInvestments-amountTextBox");var o=bb.selector.query(n[i],".ap-addOtherCashInvestments-currencyDropdown");if(phe.textBox.getValue(d)==""&&phe.textBox.getValue(e)==""){n.innerHTML="";continue}else{f=false}g=g+"&pos="+i+"&id="+phe.hiddenField.getValue(j)+"&desc="+encodeURIComponent(phe.textBox.getValue(d))+"&amount="+phe.textBox.getValue(e)+"&currency="+phe.select.getValue(o)+"&operation=INSERT"}h[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;h[gadgets.io.RequestParameters.POST_DATA]=g;if(!f){if(absa.form.validate(m)){phe.loadingMessage.showLoadingMessage(p);absa.io.makeRequest(c,function(r){if(!r.errors.length){var q=bb.html.createElementFromString(r.text);var t=bb.selector.query(q,".ap-addOtherCashInvestments-error");if(t){phe.loadingMessage.hideLoadingMessage(p);b.parentNode.replaceChild(q,b)}else{var s="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/OtherCash/viewOtherCashInvestment";phe.common.setAttribute(b,"proxyurl",s);absa.lazyLoadNode(b,true,function(){absa.util.observer.publish("load-otherinvestment-balances",{})})}}else{phe.form.displayIOErrorMessage(m,true)}},h)}}else{var a="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/OtherCash/viewOtherCashInvestment";phe.loadingMessage.showLoadingMessage(p);absa.io.makeRequest(a,function(q){phe.loadingMessage.hideLoadingMessage(p);var r=bb.html.createElementFromString(q.text);p.parentNode.replaceChild(r,p)})}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_retirementFunding=absa.apps.otherInvestmentPortfolio_retirementFunding||{};absa.apps.otherInvestmentPortfolio_retirementFunding.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="6"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_retirementFunding.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_savings=absa.apps.otherInvestmentPortfolio_savings||{};absa.apps.otherInvestmentPortfolio_savings.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="1"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_savings.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_shares=absa.apps.otherInvestmentPortfolio_shares||{};absa.apps.otherInvestmentPortfolio_shares.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="5"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_shares.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.manageSharesOtherInst=absa.apps.manageSharesOtherInst||{};absa.apps.manageSharesOtherInst.onAddShareButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-sharesOtherInst");var a="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/Shares/addSharesToSharesOtherInst";phe.common.setAttribute(b,"proxyurl",a);absa.lazyLoadNode(b,true)};absa.apps.manageSharesOtherInst.onEditShareButtonClick=function(n){var f=bb.selector.queryAncestor(n,".ap-sharesOtherInst");var o=bb.selector.query(f,".ap-sharesOtherInst-viewTable");var c=bb.selector.queryAncestor(n,".ap-sharesOtherInst-row");var k=bb.selector.query(c,".ap-sharesOtherInst-numberOfSharesTextBox");var g=bb.selector.query(c,".ap-icon-tools");var a=bb.selector.query(c,".ap-icon-remove");var q=bb.selector.query(c,".ap-sharesOtherInst-saveButton");var j=bb.selector.query(c,".ap-sharesOtherInst-cancelButton");var m=bb.selector.query(c,".ap-sharesOtherInst-numberOfShares");var p=phe.hiddenField.getValue(m);var l=bb.selector.query(c,".ap-sharesOtherInst-value");var b=bb.selector.query(c,".ap-sharesOtherInst-sharesReadOnly");phe.textBox.setValue(k,p);phe.inputReadOnlyText.hide(b);phe.textBox.show(k);k.focus();phe.common.hide(l);phe.common.hide(g);phe.common.hide(a);phe.common.show(q);phe.common.show(j);var e=bb.selector.queryAll(o,".ap-icon-tools");var d=bb.selector.queryAll(o,".ap-icon-remove");for(var h=0;h<e.length;h++){bb.html.replaceClass(e[h],"ap-icon-tools","ap-icon-change-disabled");phe.button.setAttribute(e[h],"disabled","true");bb.html.replaceClass(d[h],"ap-icon-remove","ap-icon-delete-disabled");phe.button.setAttribute(d[h],"disabled","true")}};absa.apps.manageSharesOtherInst.onSaveButtonClick=function(m){var d=bb.selector.queryAncestor(m,".ap-sharesOtherInst");var n=bb.selector.query(d,".ap-sharesOtherInst-viewTable");var p=bb.selector.query(n,".ui-table--scrollContainer");var b=bb.selector.queryAncestor(m,".ap-sharesOtherInst-row");var g=bb.selector.query(b,".ap-sharesOtherInst-numberOfSharesTextBox");var h=bb.selector.query(b,".ap-icon-change-disabled");var j=bb.selector.query(b,".ap-icon-delete-disabled");var r=bb.selector.query(b,".ap-sharesOtherInst-saveButton");var f=bb.selector.query(b,".ap-sharesOtherInst-cancelButton");var l=bb.selector.query(b,".ap-sharesOtherInst-numberOfShares");var o=phe.hiddenField.getValue(l);var q=bb.selector.query(b,".ap-sharesOtherInst-shareId");var e=phe.hiddenField.getValue(q);var k=bb.selector.query(b,".ap-sharesOtherInst-value");var a=bb.selector.query(b,".ap-sharesOtherInst-sharesReadOnly");if(absa.form.validate.checkElement(g)){var c="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=changeSharesOtherInst&shareId="+e+"&noOfShares="+phe.textBox.getValue(g);phe.textBox.setValue(l,phe.textBox.getValue(g));phe.inputReadOnlyText.setValue(a,phe.textBox.getValue(g));phe.loadingMessage.showLoadingMessage(p);absa.io.makeRequest(c,function(w){phe.loadingMessage.hideLoadingMessage(p);if(!w.errors.length){var z=bb.html.createElementFromString(w.text);var v=bb.selector.query(z,".ap-otherInvestmentPortfolio-isError");if(v){d.parentNode.replaceChild(z,d)}else{var s=bb.selector.query(z,".ap-sharesOtherInst-value");var y=phe.hiddenField.getValue(s);phe.inputReadOnlyText.setValue(k,phe.amountField.formatNumber(y));phe.textBox.hide(g);phe.inputReadOnlyText.show(a);phe.common.hide(r);phe.common.hide(f);phe.common.show(h);phe.common.show(j);phe.common.show(k);var x=bb.selector.queryAll(n,".ap-icon-change-disabled");var u=bb.selector.queryAll(n,".ap-icon-delete-disabled");for(var t=0;t<x.length;t++){bb.html.replaceClass(x[t],"ap-icon-change-disabled","ap-icon-tools");phe.button.setAttribute(x[t],"disabled","");bb.html.replaceClass(u[t],"ap-icon-delete-disabled","ap-icon-remove");phe.button.setAttribute(u[t],"disabled","")}absa.util.observer.publish("load-otherinvestment-balances",{})}}else{absa.showIOErrorMessage(d)}})}else{g.focus()}};absa.apps.manageSharesOtherInst.onCancelButtonClick=function(n){var e=bb.selector.queryAncestor(n,".ap-sharesOtherInst");var o=bb.selector.query(e,".ap-sharesOtherInst-viewTable");var b=bb.selector.queryAncestor(n,".ap-sharesOtherInst-row");var h=bb.selector.query(b,".ap-sharesOtherInst-numberOfSharesTextBox");var j=bb.selector.query(b,".ap-icon-change-disabled");var k=bb.selector.query(b,".ap-icon-delete-disabled");var q=bb.selector.query(b,".ap-sharesOtherInst-saveButton");var g=bb.selector.query(b,".ap-sharesOtherInst-cancelButton");var m=bb.selector.query(b,".ap-sharesOtherInst-numberOfShares");var p=phe.hiddenField.getValue(m);var l=bb.selector.query(b,".ap-sharesOtherInst-value");var a=bb.selector.query(b,".ap-sharesOtherInst-sharesReadOnly");phe.textBox.setValue(h,p);phe.inputReadOnlyText.setValue(a,p);absa.form.validate.checkElement(h);phe.textBox.hide(h);phe.inputReadOnlyText.show(a);phe.common.hide(q);phe.common.hide(g);phe.common.show(j);phe.common.show(k);phe.common.show(l);var d=bb.selector.queryAll(o,".ap-icon-change-disabled");var c=bb.selector.queryAll(o,".ap-icon-delete-disabled");for(var f=0;f<d.length;f++){bb.html.replaceClass(d[f],"ap-icon-change-disabled","ap-icon-tools");phe.button.setAttribute(d[f],"disabled","");bb.html.replaceClass(c[f],"ap-icon-delete-disabled","ap-icon-remove");phe.button.setAttribute(c[f],"disabled","")}};absa.apps.manageSharesOtherInst.onRearrangeSharesButtonClick=function(c,a){var b="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/Shares/rearrangeShares";absa.modal.loadModal(b,a)};absa.apps.manageSharesOtherInst.onRefreshButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-sharesOtherInst");var a=bb.selector.query(b,".ap-sharesOtherInst-viewTable");phe.table.setAttribute(a,"dataFile","proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSharesOtherInst");phe.table.reload(a)};absa.apps.manageSharesOtherInst.onLazyLoadNode=function(){var b=bb.selector.query(window.document,".ap-sharesOtherInst");var a=bb.selector.query(b,".ap-sharesOtherInst-viewTable");phe.table.setAttribute(a,"dataFile","proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=otherInvestmentService&categoryid=5")};absa.apps.manageSharesOtherInst.onDeleteButtonClick=function(m){var c=bb.selector.queryAncestor(m,".ap-sharesOtherInst");var a=bb.selector.queryAncestor(m,".ap-sharesOtherInst-row");var g=bb.selector.query(a,".ap-sharesOtherInst-shareId");var b=phe.hiddenField.getValue(g);var e=bb.selector.query(a,".ap-sharesOtherInst-jseCode");var h=phe.hiddenField.getValue(e);var d=bb.selector.query(a,".ap-sharesOtherInst-shareName");var f=phe.hiddenField.getValue(d);var l=phe.common.getAttribute(a,"data-rowIndex");var j=bb.selector.query(c,".ap-sharesOtherInst-deleteModal");phe.common.setAttribute(j,"data-shareId",b);phe.common.setAttribute(j,"data-jseCode",h);phe.common.setAttribute(j,"data-rowIndex",l);phe.modal.showModal(0.5,j,c,true);var k=bb.selector.queryAll(window.document,".ap-sharesOtherInst-jseCodeOnModal");var n=bb.selector.queryAll(window.document,".ap-sharesOtherInst-shareNameOnModal");phe.inputReadOnlyText.setValue(k[1],h);phe.inputReadOnlyText.setValue(n[1],f)};absa.apps.manageSharesOtherInst.onDeleteConfirmButtonClick=function(e){var c=bb.selector.query(document.body,".ap-sharesOtherInst");var b=bb.selector.query(c,".ap-sharesOtherInst-viewTable");var h=bb.selector.query(b,".ui-table--scrollContainer");var a=bb.selector.query(window.document,".ap-sharesOtherInst-deleteModal");var g=phe.common.getAttribute(a,"data-shareId");var f=phe.common.getAttribute(a,"data-rowIndex");var d="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=deleteSharesOtherInst&shareId="+g;phe.modal.hideModal();phe.loadingMessage.showLoadingMessage(h);absa.io.makeRequest(d,function(m){phe.loadingMessage.hideLoadingMessage(h);var p=bb.html.createElementFromString(m.text);var l=bb.selector.query(p,".ap-otherInvestmentPortfolio-isError");if(l){b.parentNode.replaceChild(p,b)}else{phe.tableBody.deleteRow(b,f);var o=phe.tableBody.getLength(b);if(o==0){var n="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/Shares/addSharesToSharesOtherInst";phe.common.setAttribute(c,"proxyurl",n);absa.lazyLoadNode(c,true)}else{oTableRows=bb.selector.queryAll(b,".ap-sharesOtherInst-row");for(var j=0;j<oTableRows.length;j++){phe.common.setAttribute(oTableRows[j],"data-rowIndex",""+j)}var k="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSharesOtherInst";phe.table.setAttribute(b,"dataFile",k);phe.table.reload(b)}absa.util.observer.publish("load-otherinvestment-balances",{})}})};absa.apps.manageSharesOtherInst.onRearrangeAccountsResetClick=function(c){var b=bb.selector.queryAncestor(c,".ap-rearrangeShares");var a=bb.selector.query(b,".ap-rearrangeShares-table");phe.rearrangeTable.resetPosition(a)};absa.apps.manageSharesOtherInst.onRearrangeSharesSaveClick=function(g){var a=[];var j=bb.selector.queryAncestor(g,".ap-rearrangeShares");var c=bb.selector.queryAll(j,".ap-rearrangeShares-id");var h=bb.selector.query(window.document,".ap-sharesOtherInst-viewTable");var b="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=updateSharesOtherInstSequence";for(var d=0;d<c.length;d++){a.push(phe.hiddenField.getValue(c[d]))}var e=gadgets.io.encodeValues({shareId:a});var f={};f[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;f[gadgets.io.RequestParameters.POST_DATA]=e;phe.loadingMessage.showLoadingMessage(j);absa.io.makeRequest(b,function(l){if(!l.errors.length){var o=bb.html.createElementFromString(l.text);var k=bb.selector.query(o,".ap-rearrangeShares-message");if(k){var n=bb.selector.query(j,".ui-formFoot");var m=bb.selector.query(n,".ap-rearrangeShares-message");if(m){n.removeChild(m.parentNode)}n.insertBefore(o,n.firstChild)}else{phe.modal.hideModal();phe.table.removeSorting(h);phe.table.reload(h)}phe.loadingMessage.hideLoadingMessage(j)}else{absa.showIOErrorMessage(j)}},f)};absa.apps.manageSharesOtherInst.onSearchBoxClick=function(b){var c=bb.selector.queryAncestor(b,".ap-sharesOtherInst");var a=bb.selector.query(c,".ap-sharesOtherInst-viewTable");var d="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSharesOtherInst&searchValue="+phe.searchBox.getValue(b);phe.table.setAttribute(a,"dataFile",d);phe.table.reload(a)};absa.apps.manageSharesOtherInst.onPrintButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-sharesOtherInst");var a=bb.selector.query(b,".ap-sharesOtherInst-printShareListModal");phe.modal.showModal(0.5,a,b,true)};absa.apps.manageSharesOtherInst.onPrintLayoutSelect=function(b){var c=bb.selector.queryAncestor(b,".ap-sharesOtherInst-printShareListModal");var a=bb.selector.queryAll(c,".ap-sharesOtherInst-printPartialAlpha");phe.row.hide(a[0]);phe.row.hide(a[1]);if(phe.select.getValue(b)=="pa"){phe.row.show(a[0]);phe.row.show(a[1])}};absa.apps.manageSharesOtherInst.onPrintLayoutButtonClick=function(j){var c=bb.selector.queryAncestor(j,".ap-sharesOtherInst-printShareListModal");var d=bb.selector.query(c,".ap-sharesOtherInst-printLayoutSelect");var e=bb.selector.query(c,".ap-sharesOtherInst-sortOrderSelect");var a="ASC";var h="^[a-z-A-Z].*";if(phe.select.getValue(d)=="pa"){var l=bb.selector.query(c,".ap-sharesOtherInst-fromAlphabetSelect");var f=bb.selector.query(c,".ap-sharesOtherInst-toAlphabetSelect");var b=phe.select.getValue(l);var g=phe.select.getValue(f);if(b.charCodeAt(0)>g.charCodeAt(0)){var k=b;b=g;g=k}h="^["+b+"-"+g+"-"+b.toUpperCase()+"-"+g.toUpperCase()+"].*"}if(phe.select.getValue(e)=="DESC"){a="DESC"}absa.openReport("report/saveInvestOtherShares.pdf?searchQuery="+h+"&enableRegularExpression=true&enableRange=false&searchField=jseCode&sortField=jseCode&sortOrder="+a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.addShareToOtherInst=absa.apps.addShareToOtherInst||{};absa.apps.addShareToOtherInst.selectDeselectAll=function(b){var a=bb.selector.queryAncestor(b,".ap-addShareToOtherInst-shareSearchResult");var e=bb.selector.queryAll(a,".ap-addShareToOtherInst-shareSearchResultRecord");var d=bb.selector.queryAll(a,".ap-addShareToOtherInst-noOfSharesValue");for(var c=0;c<e.length;c++){if(phe.checkBox.isChecked(b)){phe.checkBox.setAttribute(e[c],"checked","true");phe.common.show(d[c])}else{phe.checkBox.setAttribute(e[c],"checked","false");phe.common.hide(d[c])}}};absa.apps.addShareToOtherInst.selectDeselect=function(c){var b=bb.selector.queryAncestor(c,".ap-addShareToOtherInst-shareSearchResult");var a=bb.selector.queryAncestor(c,".ap-addShareToOtherInst-shareSearchResultRow");var e=bb.selector.query(b,".ap-addShareToOtherInst-shareSearchResultSelectAll");var d=bb.selector.query(a,".ap-addShareToOtherInst-noOfSharesValue");if(phe.checkBox.isChecked(c)){phe.checkBox.setAttribute(e,"checked","false");phe.common.show(d);d.focus()}else{phe.checkBox.setAttribute(e,"checked","false");phe.common.hide(d)}};absa.apps.addShareToOtherInst.reset=function(a){var e=bb.selector.queryAncestor(a,".ui-form");var d=bb.selector.queryAll(e,".ap-addShareToOtherInst-shareSearchResultRecord");var c=bb.selector.queryAll(e,".ap-addShareToOtherInst-noOfSharesValue");for(var b=0;b<d.length;b++){phe.common.hide(c[b])}};absa.apps.addShareToOtherInst.onTryAddingAgain=function(d,b,a){var c=bb.selector.queryAncestor(d,".ap-sharesOtherInst");phe.common.setAttribute(c,"proxyurl","proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/Shares/addSharesToSharesOtherInst");absa.lazyLoadNode(c,true)};absa.apps.addShareToOtherInst.addShares=function(g,s){var p=bb.selector.queryAncestor(g,".ui-form");var h=bb.selector.queryAncestor(g,".ap-sharesOtherInst");if(absa.form.validate(p)){var c=bb.selector.queryAll(p,".ap-addShareToOtherInst-shareSearchResultRow");var e=bb.selector.queryAll(p,".ap-addShareToOtherInst-shareSearchResultRecord");var q=true;var k="";var t=0;var m="";for(var o=0;o<e.length;o++){if(phe.checkBox.isChecked(e[o])){t++;if(q){q=false}var l=bb.selector.query(c[o],".ap-addShareToOtherInst-jseCode");var j=bb.selector.query(c[o],".ap-addShareToOtherInst-shareName");var b=bb.selector.query(c[o],".ap-addShareToOtherInst-companyName");var d=bb.selector.query(c[o],".ap-addShareToOtherInst-noOfShares");var r=phe.tableBodyCell.getAttribute(l,"data-jseCode");var n=phe.tableBodyCell.getAttribute(j,"data-shareName");var f=phe.tableBodyCell.getAttribute(b,"data-companyName");var a=phe.textBox.getValue(bb.selector.query(d,".ap-addShareToOtherInst-noOfSharesValue"));k=k+"jseCode="+r+"&shareName="+n+"&companyName="+f+"&noOfShares="+a+"&"}}if(q){phe.common.show(bb.selector.query(p,".ap-addShareToOtherInst-messageNoneSelected"))}else{var m="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=addSharesToSharesOtherInst&"+k;phe.loadingMessage.showLoadingMessage(h,"Loading");absa.io.makeRequest(m,function(u){var w=bb.html.createElementFromString(u.text);var v=bb.selector.query(w,".ap-addShareToOtherInst-error");if(v){h.parentNode.replaceChild(w,h)}else{m="proxy?pipe=genericEmptyResponse&xslFile=SaveAndInvest/Shares/viewSharesOtherInst-createTableHeaders";phe.common.setAttribute(h,"proxyurl",m);absa.lazyLoadNode(h,true);absa.util.observer.publish("load-otherinvestment-balances",{})}phe.loadingMessage.hideLoadingMessage(h)})}}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.otherInvestmentPortfolio_unitTrust=absa.apps.otherInvestmentPortfolio_unitTrust||{};absa.apps.otherInvestmentPortfolio_unitTrust.init=function(a){this.gadget=a;absa.form.attachHandlers(a.body);var d='<div style="width: 200px; padding: 0px 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>';absa.util.observer.subscribe("otherinvestment-balances",function(h){var k=bb.selector.query(a._window.viewNode,".ap-otherInv-balances");var j=bb.selector.query(a._window.viewNode,".balance-field");var f=false;for(var g=1;g<h.length;g++){if(h[g].id=="4"){f=true;j.innerHTML=h[g].idBalance}}if(h[1].userType=="O"){j.innerHTML=""}else{if(!f){j.innerHTML="0.00"}}});var c;c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-print","absa.print.printGadgetGeneric(this)","Common/General/Label/Print"));var e=bb.html.createElementFromString("<div class='ap-otherInv-balances'>"+d+"</div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.apps.otherInvestmentPortfolio_unitTrust.onRestore=function(b){var d=b._window.viewNode;var g=bb.selector.query(d,".ap-otherInv-balances .ap-bar-title");var c=bb.selector.query(d,".ap-gadget-lazyContent");var f=phe.common.getAttribute(c,"proxyurl");var e=bb.string.trim(g.innerHTML);var a=f+"&accountBalance="+e;phe.common.setAttribute(c,"proxyurl",a);absa.gadgets.loadLazyContent(b,true);phe.common.setAttribute(c,"proxyurl",f)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.authorisations=absa.gadgets.authorisations||{};absa.gadgets.authorisations.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-authorisations",function(){absa.gadgets.authorisations.goTo(a,"authorisationspayments")},"Common/General/GadgetIcons/Tooltip/Authorisations")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:authorisations/authorisationspayments",function(b){absa.gadgets.authorisations.goTo(a,"authorisationspayments",b)});gadgets.pubsub.subscribe("goTo:authorisations/authorisationsaccounts",function(b){absa.gadgets.authorisations.goTo(a,"authorisationsaccounts",b)});gadgets.pubsub.subscribe("goTo:authorisations/authorisationsprofile",function(b){absa.gadgets.authorisations.goTo(a,"authorisationsprofile",b)});gadgets.pubsub.subscribe("goTo:authorisations/authorisationstax_uif",function(b){absa.gadgets.authorisations.goTo(a,"authorisationstax_uif",b)});gadgets.pubsub.subscribe("goTo:authorisations/authorisationsiPayRoll",function(b){absa.gadgets.authorisations.goTo(a,"authorisationsiPayRoll",b)})};absa.gadgets.authorisations.goTo=function(a,c,d){var b=function(){absa.gadgets.authorisations.loadTab(a,c,function(e){absa.apps.authorisations.resetGlobalVariables();absa.apps.authorisations.resetGlobalPollingVars()})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.authorisations.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.authorisations.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.authorisations.loadTab(a,"authorisationspayments",function(){absa.apps.authorisations.resetGlobalVariables();absa.apps.authorisations.resetGlobalPollingVars()})};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.cashSend=absa.gadgets.cashSend||{};absa.gadgets.cashSend.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-cashSendSingle",function(){absa.gadgets.cashSend.goTo(a,"sendSingleCashSend")},"Common/General/GadgetIcons/Tooltip/SendSingleCashSend");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-cashSendOnceOff",function(){absa.gadgets.cashSend.goTo(a,"sendOnceOffCashSend")},"Common/General/GadgetIcons/Tooltip/SendOnceOffCashSend");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen",function(){absa.gadgets.cashSend.goTo(a,"addCashSendBeneficiary")},"Common/General/GadgetIcons/Tooltip/AddCashSendBeneficiary")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:cashSend/sendSingleCashSend",function(b){absa.gadgets.cashSend.goTo(a,"sendSingleCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSend/addCashSendBeneficiary",function(b){absa.gadgets.cashSend.goTo(a,"addCashSendBeneficiary",b)});gadgets.pubsub.subscribe("goTo:cashSend/sendMultipleCashSend",function(b){absa.gadgets.cashSend.goTo(a,"sendMultipleCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSend/sendOnceOffCashSend",function(b){absa.gadgets.cashSend.goTo(a,"sendOnceOffCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSend/viewUnredeemedTransactions",function(b){absa.gadgets.cashSend.goTo(a,"viewUnredeemedTransactions",b)});gadgets.pubsub.subscribe("goTo:cashSend/viewAndManageCashSendBeneficiaries",function(b){absa.gadgets.cashSend.goTo(a,"viewAndManageCashSendBeneficiaries",b)})};absa.gadgets.cashSend.goTo=function(a,c,d){var b=function(){absa.gadgets.cashSend.loadTab(a,c,function(e){if(d){switch(c){case"sendSingleCashSend":absa.apps.cashSendSingle.populate(e,d);break;case"addCashSendBeneficiary":absa.apps.addCashSendBeneficiary.populate(e,d);break}}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.cashSend.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.cashSend.onRestore=function(a){absa.index.ficController.check("Payments",function(b){if(!b){var c=a.$onRestore||function(){absa.gadgets.cashSend.loadTab(a,"sendMultipleCashSend")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,c)}else{if(c){c()}}}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.cashSendPlus=absa.gadgets.cashSendPlus||{};absa.gadgets.cashSendPlus.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-cashSendSingle",function(){absa.gadgets.cashSendPlus.goTo(a,"sendSingleCashSend")},"Common/General/GadgetIcons/Tooltip/SendSingleCashSend");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-cashSendOnceOff",function(){absa.gadgets.cashSendPlus.goTo(a,"sendOnceOffCashSend")},"Common/General/GadgetIcons/Tooltip/SendOnceOffCashSend");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen",function(){absa.gadgets.cashSendPlus.goTo(a,"addCashSendBeneficiary")},"Common/General/GadgetIcons/Tooltip/AddCashSendBeneficiary");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:cashSendPlus/sendSingleCashSend",function(b){absa.gadgets.cashSendPlus.goTo(a,"sendSingleCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/addCashSendBeneficiary",function(b){absa.gadgets.cashSendPlus.goTo(a,"addCashSendBeneficiary",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/sendMultipleCashSend",function(b){absa.gadgets.cashSendPlus.goTo(a,"sendMultipleCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/sendOnceOffCashSend",function(b){absa.gadgets.cashSendPlus.goTo(a,"sendOnceOffCashSend",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/viewUnredeemedTransactions",function(b){absa.gadgets.cashSendPlus.goTo(a,"viewUnredeemedTransactions",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/viewAndManageCashSendBeneficiaries",function(b){absa.gadgets.cashSendPlus.goTo(a,"viewAndManageCashSendBeneficiaries",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/registerCashSendPlusUser",function(b){absa.gadgets.cashSendPlus.goTo(a,"registerCashSendPlusUser",b)});gadgets.pubsub.subscribe("goTo:cashSendPlus/manageLimitsCashSendPlus",function(b){absa.gadgets.cashSendPlus.goTo(a,"manageLimitsCashSendPlus",b)})};absa.gadgets.cashSendPlus.goTo=function(a,c,d){var b=function(){absa.gadgets.cashSendPlus.loadTab(a,c,function(e){if(d){switch(c){case"sendSingleCashSend":absa.apps.performSingleCashSendPlusTransaction.populate(e,d);break;case"addCashSendBeneficiary":absa.apps.addCashSendPlusBeneficiary.populate(e,d);break;case"registerCashSendPlusUser":absa.gadgets.cashSendPlus.loadTab(e,d);break}}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.cashSendPlus.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.cashSendPlus.onRestore=function(a){absa.index.ficController.check("Payments",function(b){if(!b){var c=a.$onRestore||function(){absa.gadgets.cashSendPlus.loadTab(a,"cashSendPlusINIT")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,c)}else{if(c){c()}}}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.contactLessPayment=absa.gadgets.contactLessPayment||{};absa.gadgets.contactLessPayment.init=function(a,b){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-loadPayPass",function(){absa.gadgets.contactLessPayment.goTo(a,"loadContactless")},"Common/General/GadgetIcons/Tooltip/LoadPayPass")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:contactlessPayment/loadContactless",function(c){absa.gadgets.contactLessPayment.goTo(a,"loadContactless",c)})};absa.gadgets.contactLessPayment.goTo=function(a,c,d){var b=function(){absa.gadgets.contactLessPayment.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.contactLessPayment.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.contactLessPayment.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.contactLessPayment.loadTab(a,"loadContactless")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.creditCardBudgets=absa.gadgets.creditCardBudgets||{};absa.gadgets.creditCardBudgets.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-settleBudget",function(){absa.gadgets.creditCardBudgets.goTo(a,"payOrSettleCreditCardBudget")},"Common/General/GadgetIcons/Tooltip/SettleCreditCardBudget");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-settleAllBudgets",function(){absa.gadgets.creditCardBudgets.goTo(a,"CreateCreditCardBudget")},"Common/General/GadgetIcons/Tooltip/CreateNewCreditCardBudget")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:creditCardBudgets/payOrSettleCreditCardBudget",function(b){absa.gadgets.creditCardBudgets.goTo(a,"payOrSettleCreditCardBudget",b)});gadgets.pubsub.subscribe("goTo:creditCardBudgets/CreateCreditCardBudget",function(b){absa.gadgets.creditCardBudgets.goTo(a,"CreateCreditCardBudget",b)})};absa.gadgets.creditCardBudgets.goTo=function(a,c,d){var b=function(){absa.gadgets.creditCardBudgets.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.creditCardBudgets.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.creditCardBudgets.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.creditCardBudgets.loadTab(a,"payOrSettleCreditCardBudget")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.internationalFundsTransfer=absa.gadgets.internationalFundsTransfer||{};absa.gadgets.internationalFundsTransfer.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-westernUnionSend",function(){absa.gadgets.internationalFundsTransfer.goTo(a,"payIFTBeneficiary")},"Pay beneficiary");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-westernUnionRecieve",function(){absa.gadgets.internationalFundsTransfer.goTo(a,"receiptsIFT")},"Receive funds");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen",function(){absa.gadgets.internationalFundsTransfer.goTo(a,"addIFTWUBeneficiary")},"Add beneficiary");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/payIFTBeneficiary",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"payIFTBeneficiary",b)});gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/onceOffIFTPayment",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"onceOffIFTPayment",b)});gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/addIFTWUBeneficiary",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"addIFTWUBeneficiary",b)});gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/manageIFTBeneficiary",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"manageIFTBeneficiary",b)});gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/receiptsIFT",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"receiptsIFT",b)});gadgets.pubsub.subscribe("goTo:internationalFundsTransfer/receiptsHistory",function(b){absa.gadgets.internationalFundsTransfer.goTo(a,"receiptsHistory",b)})};absa.gadgets.internationalFundsTransfer.goTo=function(a,c,d){var b=function(){absa.gadgets.internationalFundsTransfer.loadTab(a,c,function(e){if(d){switch(c){case"payIFTBeneficiary":absa.gadgets.internationalFundsTransfer.loadTab(a,"payIFTBeneficiary");break;case"onceOffIFTPayment":absa.gadgets.internationalFundsTransfer.loadTab(a,"internationalFundsTransfer-onceOffPayment");break;case"addIFTWUBeneficiary":absa.gadgets.internationalFundsTransfer.loadTab(a,"addIFTWUBeneficiary");break;case"manageIFTBeneficiary":absa.gadgets.internationalFundsTransfer.loadTab(a,"manageIFTBeneficiary");break;case"receiptsIFT":absa.gadgets.internationalFundsTransfer.loadTab(a,"receiptsIFT");break;case"receiptsHistory":absa.gadgets.internationalFundsTransfer.loadTab(a,"receiptsHistory");break}}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.internationalFundsTransfer.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.internationalFundsTransfer.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.internationalFundsTransfer.loadTab(a,"payIFTBeneficiary")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.payBen=absa.gadgets.payBen||{};absa.gadgets.payBen.init=function(a,b){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-paySingle",function(){absa.gadgets.payBen.goTo(a,"payMultipleBeneficiaries")},"Common/General/GadgetIcons/Tooltip/PayMultipleBeneficiaries");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen vi-addPaymentBenIcon",function(){absa.gadgets.payBen.goTo(a,"addBeneficiary")},"Common/General/GadgetIcons/Tooltip/AddBeneficiary");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-viewBen2 vi-managePaymentBenIcon",function(){absa.gadgets.payBen.goTo(a,"viewOrManageBeneficiariesOrGroups")},"Common/General/GadgetIcons/Tooltip/ViewOrManageBeneficiariesOrGroups")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:mainBeneficiaries/paySingleBeneficiary",function(c){absa.gadgets.payBen.goTo(a,"paySingleBeneficiary",c)});gadgets.pubsub.subscribe("goTo:mainBeneficiaries/payBeneficiaryGroup",function(c){absa.gadgets.payBen.goTo(a,"payBeneficiaryGroup",c)});gadgets.pubsub.subscribe("goTo:mainBeneficiaries/viewOrManageBeneficiariesOrGroups",function(c){absa.gadgets.payBen.goTo(a,"viewOrManageBeneficiariesOrGroups",c)});gadgets.pubsub.subscribe("goTo:mainBeneficiaries/addBeneficiary",function(c){absa.gadgets.payBen.goTo(a,"addBeneficiary",c)});gadgets.pubsub.subscribe("goTo:mainBeneficiaries/payMultipleBeneficiaries",function(c){absa.gadgets.payBen.goTo(a,"payMultipleBeneficiaries",c)});gadgets.pubsub.subscribe("goTo:mainBeneficiaries",function(c){absa.gadgets.payBen.goTo(a,"payBeneficiariesVI")})};absa.gadgets.payBen.goTo=function(a,c,d){var b=function(){absa.gadgets.payBen.loadTab(a,c,function(e){if(d){switch(c){case"paySingleBeneficiary":absa.apps.paySingle.populate(e,d);break;case"payBeneficiaryGroup":absa.apps.payBenGroups.populate(e,d);break;case"addBeneficiary":absa.apps.addBeneficiary.populate(e,d);break}}if(absa.VI=="true"){absa.vi.addActiveContentDiv(e)}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.payBen.loadTab=function(a,d,c){if(d=="payBeneficiariesVI"){var e=bb.selector.query(a.body,".ap-tabHead-payMultipleBeneficiaries");var b=document.getElementById("ap-page-body");b.focus();e.focus()}else{var e=bb.selector.query(a.body,".ap-tabHead-"+d);phe.tabBox.selectTab(e,false,c)}};absa.gadgets.payBen.onRestore=function(a){absa.index.ficController.check("Payments",function(b){if(!b){var c=a.$onRestore||function(){absa.gadgets.payBen.loadTab(a,"payMultipleBeneficiaries")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,c)}else{if(c){c()}}}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.payTrafficFine=absa.gadgets.payTrafficFine||{};absa.gadgets.payTrafficFine.init=function(a,b){this.gadget=a;this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-payTrafficFine",function(){absa.gadgets.payTrafficFine.goTo(a,"payTrafficFine")},"Common/General/GadgetIcons/Tooltip/PayTrafficFine")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:payTrafficFine/payTrafficFine",function(c){absa.gadgets.payTrafficFine.goTo(a,"payTrafficFine",c)})};absa.gadgets.payTrafficFine.goTo=function(a,c,d){var b=function(){absa.gadgets.payTrafficFine.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.payTrafficFine.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.payTrafficFine.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.payTrafficFine.loadTab(a,"payTrafficFine")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.payOnceOff=absa.gadgets.payOnceOff||{};absa.gadgets.payOnceOff.init=function(a,b){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-payOnceOff",function(){absa.gadgets.payOnceOff.goTo(a,"payOnceOffBeneficiary")},"Common/General/GadgetIcons/Tooltip/MakeOnceOffPayment")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:payOnceOff/payOnceOffBeneficiary",function(c){absa.gadgets.payOnceOff.goTo(a,"payOnceOffBeneficiary",c)});gadgets.pubsub.subscribe("goTo:payOnceOff/payOnceOffHistory",function(c){absa.gadgets.payOnceOff.goTo(a,"payOnceOffHistory",c)})};absa.gadgets.payOnceOff.goTo=function(a,c,d){var b=function(){absa.gadgets.payOnceOff.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.payOnceOff.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.payOnceOff.onRestore=function(a){absa.index.ficController.check("Payments",function(b){if(!b){var c=a.$onRestore||function(){absa.gadgets.payOnceOff.loadTab(a,"payOnceOffHistory")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,c)}else{if(c){c()}}}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.prepaid=absa.gadgets.prepaid||{};absa.gadgets.prepaid.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-prepaidSingle",function(){absa.gadgets.prepaid.goTo(a,"paySinglePrepaidBeneficiary")},"Common/General/GadgetIcons/Tooltip/PurchaseSingle");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-prepaidOnceOff",function(){absa.gadgets.prepaid.goTo(a,"payOnceOffPrepaidBeneficiary")},"Common/General/GadgetIcons/Tooltip/PurchaseOnceOff");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen",function(){absa.gadgets.prepaid.goTo(a,"addPrepaidBeneficiary")},"Common/General/GadgetIcons/Tooltip/AddPrepaidBeneficiary")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:prepaidBeneficiaries/paySinglePrepaidBeneficiary",function(b){absa.gadgets.prepaid.goTo(a,"paySinglePrepaidBeneficiary",b)});gadgets.pubsub.subscribe("goTo:prepaidBeneficiaries/payMultiplePrepaidBeneficiary",function(b){absa.gadgets.prepaid.goTo(a,"payMultiplePrepaidBeneficiary",b)});gadgets.pubsub.subscribe("goTo:prepaidBeneficiaries/addPrepaidBeneficiary",function(b){absa.gadgets.prepaid.goTo(a,"addPrepaidBeneficiary",b)});gadgets.pubsub.subscribe("goTo:prepaidBeneficiaries/payOnceOffPrepaidBeneficiary",function(b){absa.gadgets.prepaid.goTo(a,"payOnceOffPrepaidBeneficiary",b)});gadgets.pubsub.subscribe("goTo:prepaidBeneficiaries/viewPrepaidBeneficiary",function(b){absa.gadgets.prepaid.goTo(a,"viewPrepaidBeneficiary",b)})};absa.gadgets.prepaid.goTo=function(a,c,d){var b=function(){absa.gadgets.prepaid.loadTab(a,c,function(e){if(d){switch(c){case"paySinglePrepaidBeneficiary":if(d.prepaidType=="ppe"){absa.apps.purchaseSingle.populatePPE(e,d)}else{if(d.prepaidType=="telkomlandline"){absa.apps.purchaseSingle.populateTLL(e,d)}else{absa.apps.purchaseSingle.populate(e,d)}}break;case"addPrepaidBeneficiary":absa.apps.addPrePaidBeneficiary.populate(e,d);break}}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.prepaid.loadSpecificTab=function(a,c){var b=bb.selector.queryAncestor(a,".p-gadget-content");var d=bb.selector.query(b,".ap-tabHead-"+c);if(d){phe.tabBox.selectTab(d,false,null)}};absa.gadgets.prepaid.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.prepaid.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.prepaid.loadTab(a,"paySinglePrepaidBeneficiary")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.recurringPayments=absa.gadgets.recurringPayments||{};absa.gadgets.recurringPayments.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addRecurring",function(){absa.gadgets.payBen.goTo(a,"addRecurringPayment")},"Payments/AddOrManageRecurringPayments/Tab/AddRecurringPayment");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-viewRecurringPayment",function(){absa.gadgets.payBen.goTo(a,"viewRecurringPayments")},"Payments/AddOrManageRecurringPayments/Tab/ViewOrManageRecurringPayments")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:recurringPayments/addRecurringPayment",function(b){absa.gadgets.recurringPayments.goTo(a,"addRecurringPayment",b)});gadgets.pubsub.subscribe("goTo:recurringPayments/viewRecurringPayments",function(b){absa.gadgets.recurringPayments.goTo(a,"viewRecurringPayments",b)})};absa.gadgets.recurringPayments.goTo=function(a,c,d){var b=function(){absa.gadgets.recurringPayments.loadTab(a,c,function(e){if(d){switch(c){case"addRecurringPayment":absa.apps.addRecurringPayment.populate(e,d);break}}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.recurringPayments.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.recurringPayments.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.recurringPayments.loadTab(a,"viewRecurringPayments")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.stopPayment=absa.gadgets.stopPayment||{};absa.gadgets.stopPayment.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addStopPayments",function(){absa.gadgets.stopPayment.goTo(a,"addStopPayment")},"Common/General/GadgetIcons/Tooltip/AddStopPayment");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-viewStopPayments",function(){absa.gadgets.stopPayment.goTo(a,"viewStopPayments")},"Common/General/GadgetIcons/Tooltip/ViewManageStopPayments")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:stopPayments/addStopPayment",function(b){absa.gadgets.stopPayment.goTo(a,"addStopPayment",b)});gadgets.pubsub.subscribe("goTo:stopPayments/viewStopPayments",function(b){absa.gadgets.stopPayment.goTo(a,"viewStopPayments",b)});if(absa.DODENABLEDFOR.indexOf(absa.CLIENTTYPE)!=-1){a.setTitle(absa.locale["Common/General/GadgetTitle/Label/SPAndDOD"]);absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/SPAndDOD"])}else{a.setTitle(absa.locale["Common/General/GadgetTitle/Label/StopPayments"]);absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/StopPayment"])}};absa.gadgets.stopPayment.goTo=function(a,c,d){var b=function(){absa.gadgets.stopPayment.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.stopPayment.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.stopPayment.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.stopPayment.loadTab(a,"addStopPayment")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.avs=absa.gadgets.avs||{};absa.gadgets.avs.init=function(a,b){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:avs/verifyAccount",function(c){absa.gadgets.payBen.goTo(a,"verifyAccount",c)})};absa.gadgets.avs.goTo=function(a,c,d){var b=function(){absa.gadgets.avs.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.avs.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.avs.onRestore=function(a){absa.index.ficController.check("Payments",function(b){if(!b){var c=a.$onRestore||function(){absa.gadgets.avs.loadTab(a,"payMultipleBeneficiaries")};absa.gadgets.loadLazyContent(a,true,c)}else{a.minimize()}})};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.bankOnMe=absa.gadgets.bankOnMe||{};absa.gadgets.bankOnMe.init=function(a,b){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:bankOnMe/paySingle",function(c){absa.gadgets.bankOnMe.goTo(a,"paySingle",c)});gadgets.pubsub.subscribe("goTo:bankOnMe/addBeneficiary",function(c){absa.gadgets.bankOnMe.goTo(a,"addBeneficiary",c)});gadgets.pubsub.subscribe("goTo:bankOnMe/addRecurringPayment",function(c){absa.gadgets.bankOnMe.goTo(a,"addRecurringPayment",c)})};absa.gadgets.bankOnMe.goTo=function(a,c,d){var b=function(){absa.gadgets.bankOnMe.loadTab(a,c,function(e){if(d){switch(c){case"paySingle":absa.apps.bankOnMePaySingle.populate(e,d);break;case"addBeneficiary":absa.apps.bankOnMeAddBen.populate(e,d);break;case"addRecurringPayment":absa.apps.bankOnMeAddRecurringPayment.populate(e,d);break}}if(absa.VI=="true"){absa.vi.addActiveContentDiv(e)}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.bankOnMe.loadTab=function(a,d,c){if(d=="payBeneficiariesVI"){var e=bb.selector.query(a.body,".ap-tabHead-paySingle");var b=document.getElementById("ap-page-body");b.focus();e.focus()}else{var e=bb.selector.query(a.body,".ap-tabHead-"+d);phe.tabBox.selectTab(e,false,c)}};absa.gadgets.bankOnMe.goToOnceOff=function(d,e){var f=bb.selector.queryAncestor(d,".ap-bankOnMe");phe.loadingMessage.showLoadingMessage(f);var c=bb.selector.queryAncestor(d,".ap-navigation-sub");var g=bb.selector.queryAll(c,".ap-tab-button");for(var j=0;j<g.length;j++){var l=g[j];if(bb.html.hasClass(l,"ap-subtab-active")){bb.html.removeClass(l,"ap-subtab-active")}}bb.html.addClass(d.parentNode,"ap-subtab-active");var h=bb.selector.query(f,".ap-bankOnMe-onceOffContainer");var k=bb.selector.query(f,".ap-bankOnMe-onceOffContent");var b="proxy?pipe=genericEmptyResponse&xslFile=BankOnMe/OnceOffPayment/payOnceOffBeneficiary";if(e=="1"){b="proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getAllRetailAccounts&view=PayOnceoffHistoryviewOperator&mode=paybengroups"}absa.io.makeRequest(b,function(m){phe.loadingMessage.hideLoadingMessage(f);if(!m.errors.length){var n=bb.html.createElementFromString(m.text);var a=document.createElement("div");a.setAttribute("class","ap-bankOnMe-onceOffContent");a.appendChild(n);k.parentNode.replaceChild(a,k);absa.initializeNewContent(a)}else{absa.showIOErrorMessage(k)}})};absa.gadgets.bankOnMe.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.bankOnMe.loadTab(a,"paySingle")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.pingIt=absa.gadgets.pingIt||{};absa.gadgets.pingIt.init=function(a){this.gadget=a};absa.gadgets.pingIt.goTo=function(a,b,c){if(a._window.getProperty("minimized")){a.$onRestore=fOnRestore;a._window.restore()}else{fOnRestore()}};absa.gadgets.pingIt.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.linkUnlink=absa.gadgets.linkUnlink||{};absa.gadgets.linkUnlink.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:linkUnlinkAccounts/linkUnlinkRetail",function(b){absa.gadgets.linkUnlink.goTo(a,"linkUnlinkRetail",b)});gadgets.pubsub.subscribe("goTo:linkUnlinkAccounts/linkUnlinkOST",function(b){absa.gadgets.linkUnlink.goTo(a,"linkUnlinkOST",b)});gadgets.pubsub.subscribe("goTo:linkUnlinkAccounts/linkUnlinkAims",function(b){absa.gadgets.linkUnlink.goTo(a,"linkUnlinkAims",b)});gadgets.pubsub.subscribe("goTo:linkUnlinkAccounts/linkUnlinkPolicies",function(b){absa.gadgets.linkUnlink.goTo(a,"linkUnlinkPolicies",b)})};absa.gadgets.linkUnlink.goTo=function(a,c,d){var b=function(){absa.gadgets.linkUnlink.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.linkUnlink.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.linkUnlink.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.linkUnlink.loadTab(a,"linkUnlinkRetail")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.additionalServices=absa.gadgets.additionalServices||{};absa.gadgets.additionalServices.init=function(a,b){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:additionalServices/viewTaxCertificate",function(c){absa.gadgets.additionalServices.goTo(a,"viewTaxCertificate",c)})};absa.gadgets.additionalServices.goTo=function(a,c,d){var b=function(){absa.gadgets.additionalServices.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.additionalServices.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.additionalServices.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.additionalServices.loadTab(a,"viewTaxCertificate")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.cardManagement=absa.gadgets.cardManagement||{};absa.gadgets.cardManagement.init=function(a,b){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:cardManagement/viewCardPin",function(c){absa.gadgets.cardManagement.goTo(a,"viewCardPin",c)})};absa.gadgets.cardManagement.goTo=function(a,c,d){var b=function(){absa.gadgets.cardManagement.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.cardManagement.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.cardManagement.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.cardManagement.loadTab(a,"manageCardLimits")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.ficDocHandlerGadget=absa.gadgets.ficDocHandlerGadget||{};absa.gadgets.ficDocHandlerGadget.init=function(a){this.gadget=a};absa.gadgets.ficDocHandlerGadget.onRestore=function(a){var b=a.$onRestore||function(){};if(b){b()}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.ISFSwitching=absa.gadgets.ISFSwitching||{};absa.gadgets.ISFSwitching.init=function(a,c){var b="proxy?pipe=genericWebservice&ws=ISFSwitchingWebService&action=isfCheckSwitchingCaseExist";absa.io.makeRequest(b,function(f){var e=bb.html.createElementFromString(f.text);if(e.getAttribute("code")=="true"){var d=bb.selector.query(absa.gadgets.ISFSwitching.gadget.body,".ap-gadget-lazyContent");var g="proxy?pipe=genericWebservice&ws=ISFSwitchingWebService&action=isfRetrieveSavedSwitchingDetails";phe.common.setAttribute(d,"proxyurl",g);a.setTitle("<div class='p-gadget-title ap-bar-section ap-bar-title' tabindex='0'>[Retreive Application] </div>")}else{a.setTitle("<div class='p-gadget-title ap-bar-section ap-bar-title' tabindex='0'>[New Switching Application] </div>")}});this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:ISFSwitching/switchingISF",function(d){absa.gadgets.ISFSwitching.goTo(a,"switchingISF",d)});if(absa.GIDTOSHOW=="g3010131"){absa.gadgets.ISFSwitching.goTo(a)}};absa.gadgets.ISFSwitching.goTo=function(a,b,c){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.ISFSwitching.onRestore(a);a._window.restore()}else{fOnRestore()}};absa.gadgets.ISFSwitching.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.ISFSwitching.onRestore=function(a){absa.gadgets.loadLazyContent(a,true)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.linkDelinkDevices=absa.gadgets.linkDelinkDevices||{};absa.gadgets.linkDelinkDevices.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:devices/linkDelinkDevices",function(b){absa.gadgets.linkDelinkDevices.goTo(a,"linkDelinkDevices",b)})};absa.gadgets.linkDelinkDevices.goTo=function(a,c,d){var b=function(){absa.gadgets.linkDelinkDevices.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.linkDelinkDevices.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.linkDelinkDevices.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.linkDelinkDevices.loadTab(a,"linkDelinkDevices")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.manageCardServices=absa.gadgets.manageCardServices||{};absa.gadgets.manageCardServices.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:manageCardServices/manageCardServices",function(b){absa.gadgets.manageCardServices.goTo(a)})};absa.gadgets.manageCardServices.goTo=function(a,c,e){var d=c;switch(c){case"changeBillingAccount":d="viewServiceInformation";break}var b=function(){absa.gadgets.manageCardServices.loadPanel(a,d,function(g){switch(d){case"viewServiceInformation":var h=bb.selector.query(g,".ui-tabBox"),f=bb.selector.query(g,".ap-tabHead-changeBillingAccount");phe.tabBox.selectTab(f,false,function(j){if(e){absa.apps.changeBillingAccount.populate(g,e)}});break;case"viewCostSummary":if(e){absa.apps.costSummary.populate(g,e)}break}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.manageCardServices.onRestore=function(a){var b=a.$onRestore||function(){};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};absa.gadgets.manageCardServices.loadPanel=function(b,e,g){var d=bb.selector.query(b.body,".ui-table");var c=bb.selector.query(d,".ap-tableRow-"+e);var a=phe.tableBodyRow.getRowExpandableExtension(c);var f=phe.tableBodyRow.getAttribute(a,"dataFileView");if(f){phe.tableBodyRow.expandRow(c,f,g)}else{phe.tableBodyRow.expandRow(c);g(a)}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.manageEStatements=absa.gadgets.manageEStatements||{};absa.gadgets.manageEStatements.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:manageEstatements/manageEstatements",function(b){absa.gadgets.manageEStatements.goTo(a)})};absa.gadgets.manageEStatements.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.manageEStatements.onRestore(a);a._window.restore()}};absa.gadgets.manageEStatements.onRestore=function(a){absa.gadgets.loadLazyContent(a,true)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.managePersonalDetails=absa.gadgets.managePersonalDetails||{};absa.gadgets.managePersonalDetails.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:managePersonalDetails/managePersonalDetails",function(b){absa.gadgets.managePersonalDetails.goTo(a);absa.gadgets.loadLazyContent(a,true,absa.gadgets.managePersonalDetails.OnrestoreCifDetails(a,b))})};absa.gadgets.managePersonalDetails.goTo=function(a){if(a._window.getProperty("minimized")){a.$onRestore=absa.gadgets.managePersonalDetails.onRestore(a);a._window.restore()}};absa.gadgets.managePersonalDetails.onRestore=function(a){absa.gadgets.loadLazyContent(a,true,function(){})};absa.gadgets.managePersonalDetails.OnrestoreCifDetails=function(a,b){return function(){var e=bb.selector.query(document.body,".ap-tabHead-cifAlertBox");absa.apps.personalInformation.loadTab(phe.tableBodyRow.getRowExpandableExtension(e));var c="proxy?pipe=genericEmptyResponse&xslFile=managePersonalDetails&cifKey="+b.cifKeyValue;phe.tableBodyRow.expandRow(e,c);var d="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&view=viewInformation&cifKey="+b.cifKeyValue;absa.io.makeRequest(d,function(f){if(!f.errors.length){var h=bb.html.createElementFromString(f.text);if(h){var g=bb.selector.query(h,".ap-icon-tools");if(g){g.click()}}}})}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.manageServices=absa.gadgets.manageServices||{};absa.gadgets.manageServices.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:manageServices/manageServices",function(b){absa.gadgets.manageServices.goTo(a)});gadgets.pubsub.subscribe("goTo:manageServices/changeBillingAccount",function(b){absa.gadgets.manageServices.goTo(a,"changeBillingAccount",b)});gadgets.pubsub.subscribe("goTo:manageServices/viewCostSummary",function(b){absa.gadgets.manageServices.goTo(a,"viewCostSummary",b)})};absa.gadgets.manageServices.goTo=function(a,c,e){var d=c;switch(c){case"changeBillingAccount":d="viewServiceInformation";break}var b=function(){absa.gadgets.manageServices.loadPanel(a,d,function(g){switch(d){case"viewServiceInformation":var h=bb.selector.query(g,".ui-tabBox"),f=bb.selector.query(g,".ap-tabHead-changeBillingAccount");phe.tabBox.selectTab(f,false,function(j){if(e){absa.apps.changeBillingAccount.populate(g,e)}});break;case"viewCostSummary":if(e){absa.apps.costSummary.populate(g,e)}break}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.manageServices.onRestore=function(a){var b=a.$onRestore||function(){};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{absa.gadgets.loadLazyContent(a,true,b)}};absa.gadgets.manageServices.loadPanel=function(a,c,d){var b=bb.selector.query(a.body,".ui-table");oBodyRow=bb.selector.query(b,".ap-tableRow-"+c),oBodyRowExtension=phe.tableBodyRow.getRowExpandableExtension(oBodyRow),sDataFileView=phe.tableBodyRow.getAttribute(oBodyRowExtension,"dataFileView");if(sDataFileView){phe.tableBodyRow.expandRow(oBodyRow,sDataFileView,d)}else{phe.tableBodyRow.expandRow(oBodyRow);d(oBodyRowExtension)}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.manageUsers=absa.gadgets.manageUsers||{};absa.gadgets.manageUsers.init=function(a){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:manageUsers/mainUsers",function(b){absa.gadgets.manageUsers.goTo(a,"mainUsers",b)});gadgets.pubsub.subscribe("goTo:manageUsers/operators",function(b){absa.gadgets.manageUsers.goTo(a,"operators",b)});gadgets.pubsub.subscribe("goTo:manageUsers/addOperator",function(b){absa.gadgets.manageUsers.goTo(a,"addOperator",b)})};absa.gadgets.manageUsers.goTo=function(a,c,d){var b=function(){absa.gadgets.manageUsers.loadTab(a,c,function(e){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.manageUsers.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.manageUsers.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.manageUsers.loadTab(a,"mainUsers")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.saveinvest_absasavings=absa.gadgets.saveinvest_absasavings||{};absa.gadgets.saveinvest_absasavings.init=function(a){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");absa.gadgets.saveinvest_absasavings.setBar(a)};absa.gadgets.saveinvest_absasavings.onRestore=function(e){var c=bb.selector.query(e.body,".ap-account-gadget-content");if(!c){var j=e.getPreference("account");var d=JSONRequest.parse(j);var h=d.accountType.name;var k=d.accountNo;var b=d.accessBits;var l=d.options.viewAccountInformation;var g=e.getPreference("gadgetIndex");var a;if(h=="unitTrustAccount"){a="proxy?pipe=genericEmptyResponse&xslFile=unitTrust"}else{if(h=="onlineShareTrading"){a="proxy?pipe=genericEmptyResponse&xslFile=OnlineShareTrading/onlineShareTradingTableHead&accountType="+h+"&accountNo="+k+"&accountGroup=OST&index="+g}else{if(h=="passiveInvest"){a="proxy?pipe=genericEmptyResponse&xslFile=abcap/viewRAAccount/passiveInvestment&mainTab=saveInvest&accountType="+h+"&accountNo="+k+"&accountGroup=AIMS&index="+g}else{if(h=="aims"){a="proxy?pipe=genericEmptyResponse&xslFile=aims&mainTab=saveInvest&accountType="+h+"&accountNo="+k+"&accountGroup=AIMS&index="+g}else{if(h=="wim"){a="proxy?pipe=genericEmptyResponse&xslFile=aims/viewpolicy/taxFreeInvestmentLandingPage&mainTab=saveInvest&accountType="+h+"&accountNo="+k+"&accountGroup=AIMS&index="+g}else{a="proxy?pipe=genericEmptyResponse&xslFile=saveInvestOverview&index="+g+"&accountNo="+k+"&accountType="+h+"&accountBits="+b+"&optionInfo="+l}}}}}phe.common.setAttribute(bb.selector.query(e.body,".ap-gadget-lazyContent"),"proxyurl",a);absa.gadgets.loadLazyContent(e,false)}else{var f=bb.selector.query(e.body,".ui-tabBox");if(f){absa.gadgets.saveinvest_absasavings.selectTab(e)}else{absa.gadgets.loadLazyContent(e,true)}}};absa.gadgets.saveinvest_absasavings.createButton=function(d,b,c,f){var a=[];a[a.length]="<button ";if(b&&b!=""){a[a.length]='onclick="'+b+'" '}a[a.length]='type="button" tooltip="'+c+'" ';a[a.length]='class="ui-button '+d+'">';a[a.length]='<div class="ui-button-left">';a[a.length]='<div class="ui-button-right">';a[a.length]='<div class="ui-button-center">';a[a.length]='<span class="vi-screenreader-line ">'+f+". </span>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</div>";a[a.length]="</button>";var e=bb.html.createElementFromString(a.join(""));return e};absa.gadgets.saveinvest_absasavings.setBar=function(h){h.setPreference("selectedTab",h.preferences.selectedTab["default"]);var c=h.getPreference("account");var f=JSONRequest.parse(c);var p=bb.selector.queryAncestor(h.body,".ap-accountbar");p.setAttribute("accountNo",f.accountNo);var j=f.accountType.name;var s=h.getPreference("balanceAvailable")||"true";var r=f.accountNo;if(j=="onlineShareTrading"){bb.html.addClass(p,"ap-ostAccount")}else{if(j=="aims"){bb.html.addClass(p,"ap-aimsAccount")}else{if(j=="unitTrustAccount"){bb.html.addClass(p,"ap-unitTrustAccount")}else{if(j=="cia"){bb.html.addClass(p,"ap-currencyInvestmentAccount")}}}}if(j=="onlineShareTrading"|j=="onlineShareTradingPrivate"|j=="unitTrustAccount"|j=="aims"|j=="passiveInvest"){h.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view'>"+f.displayName+"</div></div>");switch(j){case"onlineShareTrading":absa.gadgets.setSubtitle(h,absa.locale["Common/General/GadgetSubTitle/Label/OnlineShareTrading"]);break;case"unitTrustAccount":absa.gadgets.setSubtitle(h,absa.locale["Common/General/GadgetSubTitle/Label/UnitTrustAccount"]);break;case"aims":absa.gadgets.setSubtitle(h,absa.locale["Common/General/GadgetSubTitle/Label/Aims"]);break;case"passiveInvest":absa.gadgets.setSubtitle(h,r);break}}else{if(j=="cia"){var e=r;var m=e.split("-");var d=m[0];var a=m[1].split("-");var o=a[0];h.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view'>"+f.displayName+"</div></div>");absa.gadgets.setSubtitle(h,f.accountNo+"<img src='static/style/resources/"+o+".png' alt='Loading' width='15' height='13' style='padding-left:5px' />")}else{h.setTitle("<div style='line-height:17px' aria-labelledby='ap-bar-section-Accounts'><div class='p-gadget-title-view'>"+f.displayName+"</div></div>");absa.gadgets.setSubtitle(h,f.accountNo)}}if(s=="false"){var k=absa.locale["Portfolio/ViewAccountBalance/Label/NotAuthorised"];oBalance=bb.html.createElementFromString('<div style="width: 500px; padding: 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field">'+k+"</div>")}else{oBalance=bb.html.createElementFromString('<div style="width: 150px; padding: 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balance-field"></div>');oBalanceLeft=bb.html.createElementFromString('<div style="width: 150px; padding: 0px; font-size:12px;" class="ap-bar-section ap-bar-section-right ap-bar-align-right ap-bar-title ap-bar-section-m balanceLeft-field"></div>');absa.util.observer.subscribe("absasavings-balances",function(u){if(u!=null){for(var B=0;B<u.length;B++){var z=u[B];if(z){if(z.accountNo==f.accountNo){if(typeof(h._window)!="undefined"&h._window!=null){var x=bb.selector.query(h._window.viewNode,".ap-balances");if(x){var w=bb.selector.query(h._window.viewNode,".balance-field");var y=bb.selector.query(h._window.viewNode,".balanceLeft-field");if(z.accountType=="cia"){var t="";t=f.accountNo;var A=t.split("-");var C=A[0];var v=A[1].split("-");var D=v[0];y.innerHTML=D+""+z.displayAvailable;w.innerHTML=z.displayBalance}else{w.innerHTML=z.displayBalance}}}}}}}});absa.util.observer.subscribe("load-absasavings-balances",function(){if(typeof(h._window)!="undefined"&h._window!=null){var u=bb.selector.query(h._window.viewNode,".ap-balances");if(u){var t=bb.selector.query(u,".balance-field");t.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='"+absa.locale["Common/General/Label/Loading"]+"' width='20' height='20' />"}}})}var n;n=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');if(f.options){if(f.options.viewAccountInformation&absa.VI!="true"){n.appendChild(absa.gadgets.accounts.createButton("ap-icon-accountsInfo","",absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountInformation"],absa.locale["Portfolio/ViewAccountBalance/Tooltip/AccountInformation"]))}}if(j=="onlineShareTrading"|j=="onlineShareTradingPrivate"){var g=absa.locale["Portfolio/ViewAccountBalance/Tooltip/LogonTo"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/OST"];var l=absa.locale["Portfolio/ViewAccountBalance/Tooltip/RegisterFor"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/OST"];n.appendChild(absa.gadgets.accounts.createButton("ap-icon-logOn","absa.index.onLogonOSTButtonClick(this)",g,g));n.appendChild(absa.gadgets.accounts.createButton("ap-icon-arrowRight","absa.index.RegisterOST(this)",l,l))}if(j=="aims"){var g=absa.locale["Portfolio/ViewAccountBalance/Tooltip/LogonTo"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];var l=absa.locale["Portfolio/ViewAccountBalance/Tooltip/RegisterFor"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];n.appendChild(absa.gadgets.accounts.createButton("ap-icon-logOn","absa.index.onLogonAIMSButtonClick(this)",g,g));n.appendChild(absa.gadgets.accounts.createButton("ap-icon-arrowRight","absa.index.RegisterAIMS(this)",l,l))}if(j=="passiveInvest"){var g=absa.locale["Portfolio/ViewAccountBalance/Tooltip/LogonTo"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];var l=absa.locale["Portfolio/ViewAccountBalance/Tooltip/RegisterFor"]+" "+absa.locale["Portfolio/ViewAccountBalance/Tooltip/AIMS"];n.appendChild(absa.gadgets.accounts.createButton("ap-icon-logOn","absa.index.onLogonAIMSButtonClick(this)",g,g));n.appendChild(absa.gadgets.accounts.createButton("ap-icon-arrowRight","absa.index.RegisterAIMS(this)",l,l))}var q=bb.html.createElementFromString("<div class='ap-balances'></div>");q.appendChild(oBalanceLeft);q.appendChild(oBalance);q.appendChild(n);var b=bb.selector.query(h._window.viewNode,".p-gadget-header");b.appendChild(q)};absa.gadgets.saveinvest_absasavings.selectTab=function(a){var b=a.getPreference("selectedTab");var c;if(b&&b!="first"){c=bb.selector.query(a.body,".ap-option2Tab-"+b)}else{if(b=="first"){c=bb.selector.query(a.body,".ui-tabBox .ui-tabHeads li")}}if(c&&!a._dragging){phe.tabBox.selectTab(c)}a.setPreference("selectedTab","first")};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.savingGoal=absa.gadgets.savingGoal||{};absa.gadgets.savingGoal.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print")};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.interAccountTransfer=absa.gadgets.interAccountTransfer||{};var fromWhereLanded="";absa.gadgets.interAccountTransfer.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-interAccountTransfer",function(){absa.gadgets.interAccountTransfer.goTo(a,"performInterAccountTransfer")},"Common/General/GadgetIcons/Tooltip/InterAccountTransfer")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:interAccountTransfer/performInterAccountTransfer",function(b){fromWhereLanded=b.fromWhereLanded;absa.gadgets.interAccountTransfer.goTo(a,"performInterAccountTransfer",b)});gadgets.pubsub.subscribe("goTo:interAccountTransfer/interAccountTransferHistory",function(b){absa.gadgets.interAccountTransfer.goTo(a,"interAccountTransferHistory",b)})};absa.gadgets.interAccountTransfer.goTo=function(a,c,d){var b=function(){absa.gadgets.interAccountTransfer.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.interAccountTransfer.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.interAccountTransfer.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.interAccountTransfer.loadTab(a,"performInterAccountTransfer")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};absa.gadgets.interAccountTransfer.doInternationalTransfer=function(a){if(a!=null){if(fromWhereLanded!=""&&fromWhereLanded!="undefined"&&fromWhereLanded=="OpenCIAAccount"){var b=bb.selector.query(a,".ap-interAccounTransfer-transferTypeDomestic");phe.radioGroup.setValue(b,"international");absa.apps.internationalInterAccountTransfer.onTransferTypeChange(b);fromWhereLanded=""}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.westernUnion=absa.gadgets.westernUnion||{};absa.gadgets.westernUnion.init=function(a){this.gadget=a;if(absa.VI!="true"){absa.gadgets.addGadgetHeaderButton(a,"ap-icon-westernUnionSend",function(){absa.gadgets.westernUnion.goTo(a,"westernUnionSend")},"Payments/AddOrManageWesternUnionBeneficiaries/Tab/SendMoney~en");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-westernUnionRecieve",function(){absa.gadgets.westernUnion.goTo(a,"westernUnionRecieve")},"Payments/AddOrManageWesternUnionBeneficiaries/Tab/ReceiveMoney~en");absa.gadgets.addGadgetHeaderButton(a,"ap-icon-addNewBen",function(){absa.gadgets.westernUnion.goTo(a,"westernUnionAddBeneficiary")},"Payments/AddOrManageWesternUnionBeneficiaries/Tab/AddBeneficiary~en")}absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print~en");gadgets.pubsub.subscribe("goTo:westernUnion/westernUnionSend",function(b){absa.gadgets.westernUnion.goTo(a,"westernUnionSend",b)});gadgets.pubsub.subscribe("goTo:westernUnion/westernUnionAddBeneficiary",function(b){absa.gadgets.westernUnion.goTo(a,"westernUnionAddBeneficiary",b)});gadgets.pubsub.subscribe("goTo:westernUnion/westernUnionRecieve",function(b){absa.gadgets.westernUnion.goTo(a,"westernUnionRecieve",b)});gadgets.pubsub.subscribe("goTo:westernUnion/westernUnionRecieptHistory",function(b){absa.gadgets.westernUnion.goTo(a,"westernUnionRecieptHistory",b)});gadgets.pubsub.subscribe("goTo:westernUnion/westernUnionViewBeneficiaries",function(b){absa.gadgets.westernUnion.goTo(a,"westernUnionViewBeneficiaries",b)})};absa.gadgets.westernUnion.goTo=function(a,c,d){var b=function(){var e=phe.tabBox.getCurrentTabBody(a.body,".ui-tab-selected");if(e){var f=bb.selector.query(e,".ui-form");if(f){f.setAttribute("trackUnconfirmedChanges","false")}}absa.gadgets.westernUnion.loadTab(a,c,function(g){if(d){}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.westernUnion.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);if(d){phe.tabBox.selectTab(d,false,b)}};absa.gadgets.westernUnion.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.westernUnion.loadTab(a,"westernUnionSend")};if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.dashboard=absa.gadgets.dashboard||{};absa.gadgets.dashboard.countday=10;absa.gadgets.dashboard.imageFirstTime=true;absa.gadgets.dashboard.rotatingImageDuration=10;absa.gadgets.dashboard.sInterval;absa.gadgets.dashboard.rotatingImageKeys=new Array();absa.gadgets.dashboard.init=function(a,g){var c=bb.document.getElementById("portal");if(c){var f=c.getProperty("activeContainer").getPreference("title").toLowerCase();if(f){if(f=="accounts"){gadgets.pubsub.subscribe("goTo:dashboard/netWorthGraphs",function(h){absa.gadgets.dashboard.goTo(a,"nettWorthGraphs",h)})}if(f=="saveinvest"){gadgets.pubsub.subscribe("goTo:dashboard/pricewatch",function(h){absa.gadgets.dashboard.goTo(a,"pricewatch",h)});gadgets.pubsub.subscribe("goTo:dashboard/educationCentre",function(h){absa.gadgets.dashboard.goTo(a,"educationCentre",h)})}if(f=="apply"){gadgets.pubsub.subscribe("goTo:dashboard/quoteStatus",function(h){absa.gadgets.dashboard.goTo(a,"quoteStatus",h)})}if(f=="insurance"){gadgets.pubsub.subscribe("goTo:dashboard/solutionsforyou",function(h){absa.gadgets.dashboard.goTo(a,"solutionsforyou",h)})}}}gadgets.pubsub.subscribe("goTo:dashboard/viewSecureMessage",function(h){absa.gadgets.dashboard.goTo(a,"viewSecureMessage",h)});gadgets.pubsub.subscribe("update-secureMessagesUnreadCount",function(h){var j=bb.selector.query(a.body,".ap-dashBoard-messageNumber");var k=h*1;j.innerHTML=k==0?"":"("+k+")"});gadgets.pubsub.subscribe("update-secureMessagesUnreadCount",function(h){var j=bb.selector.query(a.body,".ap-secureMessages-tabBoxVerticalMessageNumber");var k=h*1;if(j){j.innerHTML=k==0?"":"("+k+")"}});gadgets.pubsub.subscribe("update-secureMessagesMessageUnreadStatus",function(h){var k=bb.selector.query(a.body,".ap-viewSecureMessages-tableRowUnreadMessage"+h);if(k&&bb.html.hasClass(k,"ap-viewSecureMessages-tableRowUnreadMessage"+h)){bb.html.removeClass(k,"ap-secureMessages-boldFontWeight");bb.html.removeClass(k,"ap-viewSecureMessages-tableRowUnreadMessage"+h);var j=bb.selector.queryAncestor(k,".ap-secureMessages-table");phe.table.reload(j)}});var b=a._window.getPreference("tabItems");var e=a._window.getPreference("tabUrlItems");if(absa.ENABLEIPAYROLL.toLowerCase()=="false"){b=b.toString().replace(/iPayroll,/,"");e=e.toString().replace(/iPayroll\/iPayroll,/,"")}var d="proxy?pipe=dashboard";d+="&tabSectionName="+a._window.getPreference("tabSectionName");d+="&tabItems="+b;d+="&tabUrlItems="+e;phe.common.setAttribute(bb.selector.query(a.body,".ap-gadget-lazyContent"),"proxyurl",d);absa.gadgets.loadLazyContent(a,true,function(){var j=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(j){j.style.display=""}var h=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(f=="insurance"){gadgets.pubsub.publish("goTo:dashboard/solutionsforyou")}else{h.minimize()}absa.util.observer.subscribe("refresh-limits",function(){var k=bb.selector.query(document.body,".ap-dashboard-dummy");var l=bb.selector.query(k,".ap-paymentLimits-tabBoxVertical");if(bb.selector.queryAncestor(l,".ui-tabBody-selected")){phe.tabBoxVertical.reloadTab(l)}})})};absa.gadgets.dashboard.goTo=function(a,d,e){if(d=="educationCentre"){var c=function(){absa.gadgets.dashboard.loadTab(a,d,function(h){var f=bb.selector.query(h,".ui-tabBoxVertical");phe.tabBoxVertical.selectTabByIndex(f,"1");var g=bb.selector.query(h,".ap-educationCentre-howToRegisterShareTrading");phe.modal.showModal(0.5,g,document.body,true)})}}else{var c=function(){absa.gadgets.dashboard.loadTab(a,d,function(f){})}}var b=bb.selector.query(a.body,".p-gadget-minimized");if(b){bb.html.removeClass(b,"p-gadget-minimized")}c()};absa.gadgets.dashboard.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.dashboard.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.dashboard.loadTab(a,"NettWorthGraphs")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};absa.gadgets.dashboard.onpreferencemodified=function(g){var j=g.getPreference("tabSectionName");if(j=="Account"){var f=g.getPreference("displayedGraphSelector");var b=g.getPreference("displayedChartType");var k=g.getPreference("displayedGraphSelectorForLogonCountSeven");var h=g.getPreference("displayedChartTypeForLogonCountSeven");if(f){absa.gadgets.dashboard.setGraphSelectorAndType(g,f,b,".ap-changeAccountGraph-graph")}if(k){absa.gadgets.dashboard.setGraphSelectorAndType(g,k,h,".ap-changeAccountGraph-graph-forlogoncount-seven")}}else{if(j=="Save and Invest"){var a=g.getPreference("displayedGraphSelector1");var e=g.getPreference("displayedChartType1");var m=g.getPreference("displayedGraphSelector2");var d=g.getPreference("displayedChartType2");var l=g.getPreference("displayedGraphSelector3");var c=g.getPreference("displayedChartType3");if(a){absa.gadgets.dashboard.setGraphSelectorAndType(g,a,e,".ap-changeSaveAndInvestGraph-graph1")}if(m){absa.gadgets.dashboard.setGraphSelectorAndType(g,m,d,".ap-changeSaveAndInvestGraph-graph2")}if(l){absa.gadgets.dashboard.setGraphSelectorAndType(g,l,c,".ap-changeSaveAndInvestGraph-graph3")}}}};absa.gadgets.dashboard.setGraphSelectorAndType=function(a,c,d,e){var b=bb.selector.query(a.body||a.viewGate,e);if(b){absa.gadgets.dashboard.changeTab(b,c,d)}};absa.gadgets.dashboard.refreshPrefrences=function(d){var c=bb.selector.queryAncestor(d,".p-gadget-content[id]");if(c){var b=c.id;var a=bb.document.getElementById(b);absa.gadgets.dashboard.onpreferencemodified(a)}};absa.gadgets.dashboard.changeTab=function(l,a,f){var b=bb.selector.queryAncestor(l,".ui-tabBox");var d=bb.selector.query(b,".ui-tabHeads");var k=bb.selector.query(b,".ui-tabBodies");var h=bb.selector.query(b,".ui-tabHeads "+a);var e=bb.selector.queryAll(b,".ui-tabHeads li");for(var g=0;g<e.length;g++){if(!bb.html.hasClass(e[g],"ap-viewTab-change")){e[g].style.display="none"}}h.style.display="";var j=phe.tabBox.getTabBodyBelongingToTabHead(d,h,b,k);var c=phe.tabBody.getAttribute(j,"proxyurl")+"&graphType="+f;phe.tabBody.setAttribute(j,"proxyurl",c);phe.tabBox.selectTab(h)};absa.gadgets.dashboard.setDisplayedGraphSelector=function(f,c){var d=bb.selector.queryAncestor(f,".p-gadget-content[id]");if(d){var b=d.id;var a=bb.document.getElementById(b);a.setPreference("displayedGraphSelector",c);var e=bb.selector.queryAncestor(f,".ui-tabBox");absa.gadgets.dashboard.changeTab(e,c)}};absa.gadgets.dashboard.onGraphBackButtonClick=function(k,a){var g=bb.selector.queryAncestor(k,".p-gadget-content[id]");if(g){var b=g.id;var h=bb.document.getElementById(b);h.setPreference("displayedGraphSelector",a);var c=bb.selector.queryAncestor(k,".ui-tabBox");var d=bb.selector.queryAncestor(c,".ui-tabBox");if(d.className.match("ap-changeAccountGraph-graph-forlogoncount-seven")){a=".ap-viewGraph-nettWorthSum-logonCountSeven"}var j=bb.selector.query(d,".ui-tabHeads "+a);var e=bb.selector.queryAll(d,".ui-tabHeads li");for(var f=0;f<e.length;f++){if(!bb.html.hasClass(e[f],"ap-viewTab-change")){e[f].style.display="none"}}j.style.display="";phe.tabBox.selectTab(j)}};absa.gadgets.dashboard.setDisplayedGraphSelector1=function(f,c){var d=bb.selector.queryAncestor(f,".p-gadget-content[id]");if(d){var b=d.id;var a=bb.document.getElementById(b);a.setPreference("displayedGraphSelector1",c);var e=bb.selector.queryAncestor(f,".ui-tabBox");absa.gadgets.dashboard.changeTab(e,c)}};absa.gadgets.dashboard.setDisplayedGraphSelector2=function(f,c){var d=bb.selector.queryAncestor(f,".p-gadget-content[id]");if(d){var b=d.id;var a=bb.document.getElementById(b);a.setPreference("displayedGraphSelector2",c);var e=bb.selector.queryAncestor(f,".ui-tabBox");absa.gadgets.dashboard.changeTab(e,c)}};absa.gadgets.dashboard.setDisplayedGraphSelector3=function(f,c){var d=bb.selector.queryAncestor(f,".p-gadget-content[id]");if(d){var b=d.id;var a=bb.document.getElementById(b);a.setPreference("displayedGraphSelector3",c);var e=bb.selector.queryAncestor(f,".ui-tabBox");absa.gadgets.dashboard.changeTab(e,c)}};absa.gadgets.dashboard.navigateGraph=function(c,a){var b=bb.selector.queryAncestor(c,".ui-tabBox");if(a=="assests"||a=="assets"){if(b.className.match("ap-changeAccountGraph-graph-forlogoncount-seven")){absa.gadgets.dashboard.setDisplayedGraphSelector(c,".ap-viewGraph-asset-logonCountSeven")}else{absa.gadgets.dashboard.setDisplayedGraphSelector(c,".ap-viewGraph-asset")}}if(a=="liabilities"){if(b.className.match("ap-changeAccountGraph-graph-forlogoncount-seven")){absa.gadgets.dashboard.setDisplayedGraphSelector(c,".ap-viewGraph-liability-logonCountSeven")}else{absa.gadgets.dashboard.setDisplayedGraphSelector(c,".ap-viewGraph-liability")}}};absa.gadgets.dashboard.checkBannersToRotate=function(c,e){var a=(e==".ap-predectiveBanners-portDIV")?"predectiveBanners":"solutions";var d="proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getProductsForBanners&mode="+a;var b=bb.selector.queryAncestor(c,e);phe.loadingMessage.showLoadingMessage(b);clearTimeout(absa.gadgets.dashboard.sInterval);absa.io.makeRequest(d,function(j){if(!j.errors.length){var m=bb.html.createElementFromString(j.text);if(bb.html.hasClass(m,"ap-predictiveBanners-mainDiv")){var l=bb.selector.query(m,".ui-message");var k=bb.selector.query(m,".ap-predictiveBanners-hasAllProducts");if(l==null&&k==null){var g=0;var f=bb.selector.queryAll(m,".ap-predictiveBanners-imageKey");for(var h=0;h<f.length;h++){absa.gadgets.dashboard.rotatingImageKeys[g]=phe.hiddenField.getAttribute(f[h],"data-path");g++;absa.gadgets.dashboard.rotatingImageKeys[g]=phe.hiddenField.getAttribute(f[h],"data-alttext");g++;absa.gadgets.dashboard.rotatingImageKeys[g]=phe.hiddenField.getAttribute(f[h],"data-url");g++}}}if(absa.gadgets.dashboard.rotatingImageKeys.length>0){if(e==".ap-predectiveBanners-portDIV"){absa.gadgets.dashboard.sRootClass=".ap-predectiveBanners-div";setTimeout(absa.gadgets.dashboard.rotateBannersA,0)}else{absa.gadgets.dashboard.sRootClass=".ap-solutionsforyou-bannerdiv";setTimeout(absa.gadgets.dashboard.rotateBannersA,0)}phe.loadingMessage.hideLoadingMessage(b)}else{phe.loadingMessage.hideLoadingMessage(b)}}phe.loadingMessage.hideLoadingMessage(b)})};absa.gadgets.dashboard.tel=0;absa.gadgets.dashboard.sRootClass="";absa.gadgets.dashboard.rotateBannersA=function(){sRootClass=absa.gadgets.dashboard.sRootClass;var b=bb.selector.query(document.body,".ap-dashboard-insurance");var c=bb.selector.query(b,".ap-graphs-rotatingimage");var a=bb.selector.query(b,sRootClass);var d=absa.gadgets.dashboard.rotatingImageKeys[absa.gadgets.dashboard.tel];var e=absa.gadgets.dashboard.rotatingImageKeys[(absa.gadgets.dashboard.tel+1)];var g=absa.gadgets.dashboard.rotatingImageKeys[(absa.gadgets.dashboard.tel+2)];absa.gadgets.dashboard.tel=absa.gadgets.dashboard.tel+3;if(absa.gadgets.dashboard.tel>=absa.gadgets.dashboard.rotatingImageKeys.length){absa.gadgets.dashboard.tel=0}var f="";if(g.indexOf("javascript:")>-1){f="<div><span class='ap-common-cursor' onclick='"+g+"'><img alt='"+e+"' src='/absa-online/assets"+d+"'></span></div>"}else{f="<div><span class='ap-common-cursor' onclick='"+g+"' target='new-window'><img alt='"+e+"' src='/absa-online/assets"+d+"'></span></div>"}a.innerHTML=f;absa.gadgets.dashboard.sInterval=setTimeout(absa.gadgets.dashboard.rotateBannersA,10000)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.customerSelfUpgradeGadget=absa.gadgets.customerSelfUpgradeGadget||{};absa.gadgets.customerSelfUpgradeGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{absa.gadgets.customerSelfUpgradeGadget.displayCustomerSelfUpgradeGadget(a)}};absa.gadgets.customerSelfUpgradeGadget.onRestore=function(a){var b=function(){absa.gadgets.loadLazyContent(a,true,function(){var c=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(c){c.style.display=""}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.customerSelfUpgradeGadget.displayCustomerSelfUpgradeGadget=function(a){var b="CUSTOMER_SELF_UPGRADE";absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersCustomerSelfUpgradeWebService&action=displayCustomerSelfUpgradeGadget",function(f){var j=bb.html.createElementFromString(f.text);var d=bb.selector.query(j,".ap-offers-displayCustomerSelfUpgradeGadgetResponseDiv");var e=d.innerText;var h="";if(!f.errors.length&&(e=="showCheque"||e=="showIslamicCheque")){if(e=="showCheque"){h="11032"}else{h="11029"}absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/CustomerSelfUpgrade"]);absa.gadgets.customerSelfUpgradeGadget.setSnoozeFunc(a,b);var c=bb.selector.query(a.body,".ap-gadget-lazyContent");intialProxyUrl=a.getPreference("initialProxyUrl");var g="proxy?pipe=genericEmptyResponse&xslFile=Offers/CustomerSelfUpgradeOffers/customerSelfUpgradeOffersMain&productCode="+h;phe.common.setAttribute(c,"proxyurl",g);phe.common.show(document.getElementById("gadget-placeholder-l2-g3010157"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010157"))}})};absa.gadgets.customerSelfUpgradeGadget.setSnoozeFunc=function(a,d){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.customerSelfUpgrade.onUnsubscribeClick(this,'"+d+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.customerSelfUpgrade.onUnsubscribeClick(this,'"+d+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.customerSelfUpgrade.onUnsubscribeClick(this,'"+d+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var e=bb.html.createElementFromString("<div class='ap-balances'></div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};absa.gadgets.customerSelfUpgradeGadget.displayCorrectCardDeliveryDetails=function(c){var k=bb.selector.queryAncestor(c,".ui-form");var l=phe.select.getValue(c);var b=bb.selector.query(k,".ap-homeAddressLine1");var a=bb.selector.query(k,".ap-homeAddressLine2");var n=bb.selector.query(k,".ap-homeSuburb");var j=bb.selector.query(k,".ap-homeCity");var h=bb.selector.query(k,".ap-homePostalCode");var f=bb.selector.query(k,".ap-workAddressLine1");var d=bb.selector.query(k,".ap-workAddressLine2");var g=bb.selector.query(k,".ap-workSuburb");var m=bb.selector.query(k,".ap-workCity");var e=bb.selector.query(k,".ap-workPostalCode");if(l=="home"){phe.common.show(b);phe.common.show(a);phe.common.show(n);phe.common.show(j);phe.common.show(h);phe.common.hide(f);phe.common.hide(d);phe.common.hide(g);phe.common.hide(m);phe.common.hide(e)}else{phe.common.hide(b);phe.common.hide(a);phe.common.hide(n);phe.common.hide(j);phe.common.hide(h);phe.common.show(f);phe.common.show(d);phe.common.show(g);phe.common.show(m);phe.common.show(e)}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.smartPackGadget=absa.gadgets.smartPackGadget||{};absa.gadgets.smartPackGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{absa.gadgets.smartPackGadget.displaySmartPackGadget(a)}};absa.gadgets.smartPackGadget.onRestore=function(a){var b=function(){absa.gadgets.loadLazyContent(a,true,function(){var c=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(c){c.style.display=""}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.smartPackGadget.displaySmartPackGadget=function(a){var c="SMART_PACK_SIGN_UP";var b="SMART_PACK_UPGRADE";absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersSmartPackWebService&action=displaySmartPackGadget&offerType=SMARTPACK",function(h){var k=bb.html.createElementFromString(h.text);var d=bb.selector.query(k,".ap-offers-displaySmartPackGadgetResponseDiv");var g=d.getAttribute("result");var f=d.getAttribute("smartPackType");if(!h.errors.length&&g=="true"&&absa.CLIENTTYPE=="B"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-smartPack' aria-labelledby='ap-bar-section-smartPack'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/SmartPack"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/SmartPack"]);if(f=="1"){absa.gadgets.smartPackGadget.setSnoozeFunc(a,b)}else{absa.gadgets.smartPackGadget.setSnoozeFunc(a,c)}var e=bb.selector.query(a.body,".ap-gadget-lazyContent");intialProxyUrl=a.getPreference("initialProxyUrl");var j="proxy?pipe=genericEmptyResponse&xslFile=Offers/SmartPackOffers/smartPackMain&smartPackType="+f;phe.common.setAttribute(e,"proxyurl",j);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010160"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010160"))}})};absa.gadgets.smartPackGadget.setSnoozeFunc=function(a,d){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.smartPack.onUnsubscribeClick(this,'"+d+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.smartPack.onUnsubscribeClick(this,'"+d+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.smartPack.onUnsubscribeClick(this,'"+d+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var e=bb.html.createElementFromString("<div class='ap-balances'></div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.willOffersGadget=absa.gadgets.willOffersGadget||{};absa.gadgets.willOffersGadget.init=function(a){var b=a._window.getProperty("templateId");if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(b)>-1){}else{absa.gadgets.willOffersGadget.displayWillGadget(a)}};absa.gadgets.willOffersGadget.onRestore=function(a){var b=function(){absa.gadgets.loadLazyContent(a,true,function(){var c=document.getElementById("gadget-placeholder-"+a._window.getProperty("container").getProperty("templateId")+"-"+a._window.getProperty("templateId"));if(c){c.style.display=""}})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.willOffersGadget.displayWillGadget=function(a){var b="WILL";absa.io.makeRequest("proxy?pipe=genericWebservice&ws=OffersWillWebService&action=displayWillGadget&offerType=WILL",function(f){var h=bb.html.createElementFromString(f.text);var c=bb.selector.query(h,".ap-offers-displayWillGadgetResponseDiv");var e=c.getAttribute("result");if(!f.errors.length&&e=="true"){a.setTitle("<div style='line-height:17px' class='ap-bar-section-will' aria-labelledby='ap-bar-section-will'><div class='p-gadget-title-view' style='position:relative;'>"+absa.locale["Common/General/GadgetTitle/Label/Will"]+"</div></div>");absa.gadgets.setSubtitle(a,absa.locale["Common/General/GadgetSubTitle/Label/Will"]);absa.gadgets.willOffersGadget.setSnoozeFunc(a,b);var d=bb.selector.query(a.body,".ap-gadget-lazyContent");intialProxyUrl=a.getPreference("initialProxyUrl");var g="proxy?pipe=genericEmptyResponse&xslFile=Offers/WillOffers/willMain";phe.common.setAttribute(d,"proxyurl",g);gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");phe.common.show(document.getElementById("gadget-placeholder-l2-g3010161"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010161"))}})};absa.gadgets.willOffersGadget.setSnoozeFunc=function(a,d){var c=bb.html.createElementFromString('<div class="ap-bar-section ap-bar-section-right ap-bar-align-left ap-bar-section-icons ap-bar-section-icons-options" aria-labelledby="ap-bar-section-accounts-options">');c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeHistory","absa.apps.will.onUnsubscribeClick(this,'"+d+"','OPTNOW')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNotNow"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-3060","absa.apps.will.onUnsubscribeClick(this,'"+d+"','OPT60')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButton3060"]));c.appendChild(absa.gadgets.accounts.createButton("ap-icon-removeStopPayments","absa.apps.will.onUnsubscribeClick(this,'"+d+"','OPTNVR')",absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"],absa.locale["Apply/CreditLimits/Tooltip/UnsubscibeGadgetButtonNever"]));var e=bb.html.createElementFromString("<div class='ap-balances'></div>");e.appendChild(c);var b=bb.selector.query(a._window.viewNode,".p-gadget-header");b.appendChild(e)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.will=absa.gadgets.will||{};absa.gadgets.will.init=function(a){this.gadget=a;absa.gadgets.addGadgetHeaderButton(a,"ap-icon-print",absa.print.printGadgetGeneric,"Common/General/Label/Print");gadgets.pubsub.subscribe("goTo:will/viewWill",function(b){absa.gadgets.will.goTo(a,"viewWill",b)})};absa.gadgets.will.goTo=function(a,c,d){var b=function(){absa.gadgets.will.loadTab(a,c,function(e){})};if(a._window.getProperty("minimized")){a.$onRestore=b;a._window.restore()}else{b()}};absa.gadgets.will.loadTab=function(a,c,b){var d=bb.selector.query(a.body,".ap-tabHead-"+c);phe.tabBox.selectTab(d,false,b)};absa.gadgets.will.onRestore=function(a){var b=a.$onRestore||function(){absa.gadgets.will.loadTab(a,"viewWill")};a.$onRestore=null;if(!bb.selector.query(a.body,".ap-gadget-lazyContent")._isLoaded){absa.gadgets.loadLazyContent(a,false,b)}else{if(b){b()}}};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingAccountsGadget=absa.gadgets.headingAccountsGadget||{};absa.gadgets.headingAccountsGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingAccountsGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingPaymentsGadget=absa.gadgets.headingPaymentsGadget||{};absa.gadgets.headingPaymentsGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingPaymentsGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingSaveGadget=absa.gadgets.headingSaveGadget||{};absa.gadgets.headingSaveGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingSaveGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingApplyGadget=absa.gadgets.headingApplyGadget||{};absa.gadgets.headingApplyGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingApplyGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingInsuranceGadget=absa.gadgets.headingInsuranceGadget||{};absa.gadgets.headingInsuranceGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingInsuranceGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingProfileGadget=absa.gadgets.headingProfileGadget||{};absa.gadgets.headingProfileGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingProfileGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingAccountsGadget=absa.gadgets.headingAccountsGadget||{};absa.gadgets.headingAccountsGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingAccountsGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingApplyGadget=absa.gadgets.headingApplyGadget||{};absa.gadgets.headingApplyGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingApplyGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingInsuranceGadget=absa.gadgets.headingInsuranceGadget||{};absa.gadgets.headingInsuranceGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingInsuranceGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingPaymentsGadget=absa.gadgets.headingPaymentsGadget||{};absa.gadgets.headingPaymentsGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingPaymentsGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingProfileGadget=absa.gadgets.headingProfileGadget||{};absa.gadgets.headingProfileGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingProfileGadget.onRestore=function(a){};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.gadgets.headingSaveGadget=absa.gadgets.headingSaveGadget||{};absa.gadgets.headingSaveGadget.init=function(a){this.gadget=a;var b=a._window.selectSingleNode(".//absa:basicElement",function(){return"http://www.absa.co.za/2009/ui"});if(absa.VI=="true"){a.maximize()}else{a.minimize()}};absa.gadgets.headingSaveGadget.onRestore=function(a){};