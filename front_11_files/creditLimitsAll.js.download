var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.creditLimits=absa.apps.creditLimits||{};absa.apps.creditLimits.userLimits=absa.apps.creditLimits.userLimits||{};absa.apps.creditLimits.userLimits.limits=[];absa.apps.creditLimits.onSlide=function(a){var d=bb.selector.queryAncestor(a,".ap-creditlimits-form");if(d!=null){var e=bb.selector.query(d,".ap-creditlimits-creditlimit");var c=absa.apps.creditLimits.getSliderSelection(a);var b=absa.util.formatCurrency(c.amt);phe.inputReadOnlyText.setValue(e,""+b)}};absa.apps.creditLimits.getSliderSelection=function(a){var h=bb.selector.queryAncestor(a,".ap-creditlimits-form");if(h!=null){absa.apps.creditLimits.initializeCreditLimitsArray(h)}var g=parseInt(phe.slider.getValue(a));if(g==60){g--}var d=parseInt(phe.slider.getAttribute(a,"keyStep"));var c=parseInt(phe.slider.getAttribute(a,"max"));var b=parseInt(c/(parseInt(d)));var f=parseInt(g/b);var e=(b*f)+(b/2);phe.slider.setValue(a,e);return absa.apps.creditLimits.userLimits.limits[f]};absa.apps.creditLimits.initializeCreditLimitsArray=function(d){if(absa.apps.creditLimits.userLimits.limits.length==0){var c=bb.selector.queryAll(d,".ap-creditlimit-limits");for(var b=0;c.length>b;b++){var a=phe.hiddenField.getValue(c[b]);absa.apps.creditLimits.userLimits.limits.push({prd:parseInt(a.substring(0,2)),amt:parseFloat(a.substring(3))})}}};absa.apps.creditLimits.onApplyNowClick=function(g,f){try{var b="PERSONAL_LOAN_OFFERS";var d="proxy?pipe=genericWebservice&ws=OffersTransactionalApplyWebService&action=updateApplyFlagAndLoggingForOffersGadgets&productType="+b+"&amount="+absa.creditLimit.globals.dCreditMaxLimit;absa.io.makeRequest(d,function(e){});if((absa.plCT!=null)&&(absa.plCT.indexOf(absa.CLIENTTYPE)!=-1)){var a=bb.selector.query(bb.selector.queryAncestor(g,".ap-creditlimits-form"),".creditlimitslider");var c=absa.apps.creditLimits.getSliderSelection(a);if(c.prd!=null){absa.VCL_CREDITLIMIT_MONTHS=c.prd;absa.VCL_CREDITLIMIT_AMOUNT=c.amt}if(f=true){absa.index.onSwitchToDSP(this,"product=pc-pl&productCode=00&pricingSchemeCode=PL")}else{gadgets.pubsub.publish("goTo:apply/loanAndAssetFinance/loanAndAssetFinance/personalLoan",c)}}absa.index.hideGadgetOnApplyClick=0;if(g!=""){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010139"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010139"));phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010136"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE")}}catch(h){}};absa.apps.creditLimits.onProductFeaturesButtonClick=function(a){absa.openReport("report/personalLoanProductFeatures/productFeatures.pdf?productCode=pc-al001","PersonalLoan")};absa.apps.creditLimits.onUnsubscribeClick=function(c,a){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010136"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE");var b="proxy?pipe=genericWebservice&ws=CreditLimitsWebService&action=unsubscribeVCLGadget&source="+a;absa.io.makeRequest(b,function(d){})};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.bbTermLoan=absa.apps.bbTermLoan||{};absa.apps.bbTermLoan.userLimits=absa.apps.bbTermLoan.userLimits||{};absa.apps.bbTermLoan.userLimits.limits=[];absa.apps.bbTermLoan.onUnsubscribeClick=function(d,a){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010136"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE");var c="BB_TERM_LOAN";var b="proxy?pipe=genericWebservice&ws=SnoozeProcessWebService&action=persistSnoozedData&source="+a+"&functionName="+c;absa.io.makeRequest(b,function(e){})};absa.apps.bbTermLoan.onTermSlide=function(a){var f=bb.selector.queryAncestor(a,".ap-bbTermLoanMain-form");if(f!=null){var e=bb.selector.query(f,".ap-bbTermLoan-loanAmountBox");var c=absa.apps.bbTermLoan.getSliderSelection(a);var d=bb.selector.query(f,".ap-bbTermLoan-hiddenLoanAmountSelected");var b=absa.util.formatCurrency(c.amt);phe.hiddenField.setValue(d,c.amt);phe.inputReadOnlyText.setValue(e,""+b)}};absa.apps.bbTermLoan.getSliderSelection=function(e){var i=bb.selector.queryAncestor(e,".ap-bbTermLoanMain-form");var a=bb.selector.query(i,".ap-bbTermLoan-hiddenTermSelected");var b=null;if(i!=null){absa.apps.bbTermLoan.initializeTermLoanLimitsArray(i)}var j=parseInt(phe.slider.getValue(e));if(j==50){j--}var f=parseInt(phe.slider.getAttribute(e,"keyStep"));var c=parseInt(phe.slider.getAttribute(e,"max"));var h=parseInt(c/(parseInt(f)));var d=parseInt(j/h);var g=(h*d)+(h/2);phe.slider.setValue(e,g);if(d==0){b=12}else{if(d==1){b=24}else{if(d==2){b=36}else{if(d==3){b=48}else{b=60}}}}phe.hiddenField.setValue(a,b);return absa.apps.bbTermLoan.userLimits.limits[d]};absa.apps.bbTermLoan.initializeTermLoanLimitsArray=function(d){var c=absa.gadgets.creditLimits.termsAmountsValue;for(var b=0;c.length>b;b++){var a=c[b];absa.apps.bbTermLoan.userLimits.limits.push({prd:parseInt(a.substring(0,2)),amt:parseFloat(a.substring(3))})}};absa.apps.bbTermLoan.onApplyNowClick=function(h){var k=bb.selector.queryAncestor(h,".ap-bbTermLoanMain-form");var f=bb.selector.query(k,".ap-bbTermLoan-hiddenMaxLoanAmt");var a=bb.selector.query(k,".ap-bbTermLoan-hiddenTermSelected");var b=bb.selector.query(k,".ap-bbTermLoan-hiddenLoanAmountSelected");var l=bb.selector.query(k,".ap-bbTermLoan-cpp");var m=phe.hiddenField.getValue(f);var g=phe.hiddenField.getValue(a);var j=phe.hiddenField.getValue(b);var e="no";var i=m+";"+g+";"+j+";"+e;var d="OFFERS_BB_TERM_LOAN";var c="proxy?pipe=genericWebservice&ws=OffersBBBCMSWebService&action=trackAndProcessBBBCMSApply&offersBusinessBankProductsEnum="+d+"&bcmsDataSet="+i;if(k!=""){phe.form.setAttribute(k,"action",c)}absa.form.validateAndSubmit(k)};absa.apps.bbTermLoan.onDoneButtonClick=function(a){absa.index.hideGadgetOnApplyClick=0;if(a!=""){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010139"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010139"));phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010136"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE")}};absa.apps.bbTermLoan.showEducationModal=function(c){var b=bb.selector.queryAncestor(c,".ap-bbTermLoanMain-form");var a=bb.selector.query(b,".ap-termLoanEducation-modal");phe.modal.showModal("0.5",a,b,true)};