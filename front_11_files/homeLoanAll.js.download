var absa=absa||{};absa.apps=absa.apps||{};absa.apps.homeLoan=absa.apps.homeLoan||{};absa.apps.homeLoan.onSubmitClick=function(g){var h=bb.selector.queryAncestor(g,".ap-offersHomeLoan-thankYou-form");var d=bb.selector.query(h,".ap-offersHomeLoan-thankYou-errorMessage");var c=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoan-thankYou-cellPhoneNumber"));var i=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoan-thankYou-homePhoneNumber"));var j=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoan-thankYou-workPhoneNumber"));var f=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoan-thankYou-emailAddress"));var e=phe.hiddenField.getValue(bb.selector.query(h,".ap-homeLoanMain-HLAccountNumber"));var a=phe.hiddenField.getValue(bb.selector.query(h,".ap-homeLoanMain-reAdvanceAmount"));if(c==""&&i==""&&j==""){phe.common.show(d);return}else{phe.common.hide(d)}var b="proxy?pipe=genericWebService&ws=OffersHomeLoanWebService&action=submitHomeLoanGadget&cellPhoneNumber="+c+"&emailAddress="+f+"&HLAccountNumber="+e+"&reAdvanceAmount="+a+"&homePhoneNumber="+i+"&workPhoneNumber="+j;if(absa.form.validate(h)){phe.loadingMessage.showLoadingMessage(h);h.style.position="relative";absa.io.makeRequest(b,function(m){if(!m.errors.length){phe.loadingMessage.hideLoadingMessage(h);var n=bb.selector.query(h,".ap-offersHomeLoan-thankYou-successMessage");var k=bb.selector.query(h,".ap-offersHomeLoan-doneButton");var l=bb.selector.query(h,".ap-offersHomeLoan-submitButton");phe.common.show(n);phe.button.hide(l);phe.button.show(k)}else{phe.form.displayIOErrorMessage(h,true)}})}};absa.apps.homeLoan.openHomeLoansWindow=function(c){var b="https://e91.absa.co.za/homeloans/eoml.jsp";var d=document.body.getAttribute("sid");var a="<div style='display:none;'><form novalidate name='osfloginform' id='osfloginform' action='"+b+"' method='post'>";a=a+"<input type='hidden' name='esessionid' id='esessionid' class='input' value='"+d+"' />";a=a+"<input type='submit' name='osfsubmit' id='osfsubmit' value='Login' />";a=a+"</form></div>";a=a+"<script type='text/javascript'>";a=a+"document.osfloginform.submit();<\/script>";c.document.write(a);c.document.close()};absa.apps.homeLoan.onHomeLoanAccountChange=function(l){var r=bb.selector.queryAncestor(l,".ap-offersHomeLoan-form");var d=bb.selector.query(r,".ap-homeLoanMain-homeLoanBondAccountNumbers");var p=bb.selector.query(r,".ap-homeLoanMain-homeLoanBondAccountNumber");var c=bb.selector.query(r,".ap-homeLoanMain-homeLoanBondAccountAdditionalAmounts");var n=bb.selector.query(r,".ap-offersHomeLoan-additionalFundsMoreThanOneAcc");var o=bb.selector.query(r,".ap-offersHomeLoan-bondAccountNumber-Display");var e=bb.selector.query(r,".ap-homeLoanMain-homeLoanBondAccountAdditionalAmount");var b=phe.hiddenField.getValue(d);var h=phe.hiddenField.getValue(p);var m=phe.hiddenField.getValue(c);var k=b.split(",");var a=m.split(",");var f=phe.radioGroup.getValue(l);for(var j=0;j<k.length;j++){if(k[j]==f){var q=a[j];var g=absa.util.formatCurrency(q);phe.inputReadOnlyText.setValue(n,g);if(o){o.innerHTML=k[j]}phe.hiddenField.setValue(e,q);phe.hiddenField.setValue(p,k[j]);break}}};absa.apps.homeLoan.onUnsubscribeClick=function(c,a,d){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010150"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010150"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE");var b="proxy?pipe=genericWebservice&ws=SnoozeProcessWebService&action=persistSnoozedData&source="+d+"&functionName="+a;absa.io.makeRequest(b,function(e){})};absa.apps.homeLoan.onDone=function(){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010150"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010150"))};