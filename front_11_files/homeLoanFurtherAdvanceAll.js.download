var absa=absa||{};absa.apps=absa.apps||{};absa.apps.homeLoanFurtherAdvance=absa.apps.homeLoanFurtherAdvance||{};absa.apps.homeLoanFurtherAdvance.onHomeLoanAccountChange=function(k){var q=bb.selector.queryAncestor(k,".ap-offersHomeLoanFurtherAdvance-form");var e=bb.selector.query(q,".ap-homeLoanFurtherAdvanceMain-homeLoanBondAccountNumbers");var p=bb.selector.query(q,".ap-homeLoanFurtherAdvanceMain-homeLoanBondAccountNumber");var b=bb.selector.query(q,".ap-homeLoanFurtherAdvanceMain-homeLoanBondAccountFurtherAdvanceAmounts");var r=bb.selector.query(q,".ap-offersHomeLoanFurtherAdvance-furtherAdvanceFundsMoreThanOneAcc");var n=bb.selector.query(q,".ap-offersHomeLoanFurtherAdvance-bondAccountNumber-Display");var l=bb.selector.query(q,".ap-homeLoanFurtherAdvanceMain-homeLoanBondAccountFurtherAdvanceAmount");var a=phe.hiddenField.getValue(e);var g=phe.hiddenField.getValue(p);var o=phe.hiddenField.getValue(b);var j=a.split(",");var d=o.split(",");var f=phe.radioGroup.getValue(k);for(var h=0;h<j.length;h++){if(j[h]==f){var m=d[h];var c=absa.util.formatCurrency(m);phe.inputReadOnlyText.setValue(r,c);if(n){n.innerHTML=j[h]}phe.hiddenField.setValue(l,m);phe.hiddenField.setValue(p,j[h]);break}}};absa.apps.homeLoanFurtherAdvance.onSubmitClick=function(g){var h=bb.selector.queryAncestor(g,".ap-offersHomeLoanFurtherAdvance-thankYou-form");var d=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-errorMessage");var b=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-cellPhoneNumber"));var i=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-homePhoneNumber"));var j=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-workPhoneNumber"));var f=phe.textBox.getValue(bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-emailAddress"));var e=phe.hiddenField.getValue(bb.selector.query(h,".ap-homeLoanFurtherAdvanceMain-HLAccountNumber"));var c=phe.hiddenField.getValue(bb.selector.query(h,".ap-homeLoanFurtherAdvanceMain-furtherAdvanceAmount"));if(b==""&&i==""&&j==""){phe.common.show(d);return}else{phe.common.hide(d)}var a="proxy?pipe=genericWebService&ws=OffersHomeLoanFurtherAdvanceWebService&action=submitHomeLoanFurtherAdvanceGadget&cellPhoneNumber="+b+"&emailAddress="+f+"&HLAccountNumber="+e+"&FurtherAdvanceAmount="+c+"&homePhoneNumber="+i+"&workPhoneNumber="+j;if(absa.form.validate(h)){phe.loadingMessage.showLoadingMessage(h);h.style.position="relative";absa.io.makeRequest(a,function(o){phe.loadingMessage.hideLoadingMessage(h);if(!o.errors.length){var r=bb.html.createElementFromString(o.text);if(r){if(bb.html.hasClass(r,"ap-offersHL-submitHomeLoanFurtherAdvanceGadgetResponseDiv")){var n=phe.hiddenField.getValue(bb.selector.query(r,".ap-offersHLFurtherAdv-docqResult"));if(n=="SUCCESS"){var p=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-thankYou-successMessage");var k=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-doneButton");var m=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-submitButton");phe.common.show(p);phe.button.hide(m);phe.button.show(k)}else{var m=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-submitButton");var l=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-closeButton");var q=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-service-errorMessage");phe.button.hide(m);phe.button.show(l);phe.common.show(q)}}}}else{var m=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-submitButton");var l=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-closeButton");var q=bb.selector.query(h,".ap-offersHomeLoanFurtherAdvance-service-errorMessage");phe.button.hide(m);phe.button.show(l);phe.common.show(q)}})}};absa.apps.homeLoanFurtherAdvance.onDone=function(){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010156"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010156"))};absa.apps.homeLoanFurtherAdvance.onUnsubscribeClick=function(c,a,d){phe.common.hide(document.getElementById("gadget-placeholder-l2-g3010156"));phe.common.hide(document.getElementById("gadget-placeholder-l5-g3010156"));gadgets.pubsub.publish("showHide:offersSpoofContainer","HIDE");var b="proxy?pipe=genericWebservice&ws=SnoozeProcessWebService&action=persistSnoozedData&source="+d+"&functionName="+a;absa.io.makeRequest(b,function(e){})};