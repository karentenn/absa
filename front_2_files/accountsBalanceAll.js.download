var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeInvestments=absa.apps.changeInvestments||{};absa.apps.changeInvestments.onChangeIncomeType=function(b){var a=phe.select.getSelectedText(b);var d=bb.selector.queryAncestor(b,".ap-addDebitOrder-changeIncomeDetailsForm");var c=bb.selector.query(d,".ap-addChangeIncome-payintoAccount");if(a=="Reinvest"||a!="Betaal in rekening"){if(a=="Pay into an account"){phe.row.setAttribute(c,"class","ap-addChangeIncome-payintoAccount")}else{phe.row.setAttribute(c,"class","ap-addChangeIncome-payintoAccount ap-common-hide")}}else{phe.row.setAttribute(c,"class","ap-addChangeIncome-payintoAccount")}};absa.apps.changeInvestments.onResetButtonClick=function(a){var c=bb.selector.queryAncestor(a,".ui-form");var b=bb.selector.query(c,".ap-addChangeIncome-payintoAccount");phe.row.setAttribute(b,"class","ap-addChangeIncome-payintoAccount")};absa.apps.changeInvestments.onBeforeFormSubmit=function(b){var a=bb.selector.query(b,".ap-buyUnitTrust-accountNo");if(a){absa.apps.changeInvestments.onAccountSelect(a)}};absa.apps.changeInvestments.onAccountSelect=function(i){var a=bb.selector.queryAncestor(i,"form");var m=phe.select.getSelectedOption(i);var j=bb.selector.query(a,".ap-addChangeIncome-accountType");var l=bb.selector.query(a,".ap-buyunittrust-lumpSumAccountHolder");var d=parseInt(i.value,10);var c=bb.selector.query(a,".ap-buydebitorderInvestmentmethodFields");var f=bb.selector.query(a,".ap-buyUnitTrust-incomeDistributionTypeRow");var q=bb.selector.query(a,".ap-buyUnitTrust-incomeDistributionType");var n=bb.selector.query(a,".ap-buyunittrust-termsAndConditions");var b=bb.selector.query(a,".ap-buyUnitTrust-ContactAbsaManagerMessage");var p=bb.selector.query(a,".ap-buyUnitTrust-doneButton");var e=bb.selector.query(a,".ap-buyUnitTrust-resetButton");var o=bb.selector.query(a,".ap-button-cancel");var r=bb.selector.query(a,".ap-buyUnitTrust-nextButton");var g=bb.selector.query(a,".ap-buyUnitTrust-datepickerWarningMessage1");var h=bb.selector.query(a,".buyUnitTrust-debitOrderStartDate");var k=bb.selector.query(a,".ap-buydebitorderInvestmentmethod-rewardsMessage");phe.row.hide(k);if(j){phe.hiddenField.setValue(j,phe.option.getAttribute(i.options[i.selectedIndex],"data-accountType"))}if(d=="1"){phe.row.hide(c);phe.row.hide(f);phe.row.hide(n);phe.row.setAttribute(b,"class","ap-buyUnitTrust-ContactAbsaManagerMessage");phe.button.setAttribute(p,"class","ap-buyUnitTrust-doneButton ap-button-next");phe.button.setAttribute(e,"class","ap-button-reset ap-buyUnitTrust-resetButton ap-common-hide");phe.button.setAttribute(o,"class","ap-button-cancel ap-buyUnitTrust-cancelButton ap-common-hide");phe.button.setAttribute(r,"class","ap-button-next ap-buyUnitTrust-nextButton ap-common-hide");phe.row.setAttribute(g,"class","ap-buyUnitTrust-datepickerWarningMessage1 ap-common-hide");phe.row.hide(q)}if(d!="1"){phe.row.show(c);phe.row.show(f);phe.row.show(n);phe.row.setAttribute(b,"class","ap-buyUnitTrust-ContactAbsaManagerMessage ap-common-hide");phe.button.setAttribute(p,"class","ap-buyUnitTrust-doneButton ap-button-next ap-common-hide");phe.button.setAttribute(e,"class","ap-button-reset ap-buyUnitTrust-resetButton");phe.button.setAttribute(o,"class","ap-button-cancel ap-buyUnitTrust-cancelButton");phe.button.setAttribute(r,"class","ap-button-next ap-buyUnitTrust-nextButton");phe.hiddenField.setValue(l,phe.option.getAttribute(i.options[i.selectedIndex],"data-accountHolder"));if(h!==""){phe.row.setAttribute(g,"class","ap-buyUnitTrust-datepickerWarningMessage1")}}};absa.apps.changeInvestments.printAddChangeIncomeDistributionDetails=function(a){absa.openReport("report/changeIncomeDistribution.pdf?feIdentifier=AddChangeIncomeDetails&transDateTime="+a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.addDebitOrder=absa.apps.addDebitOrder||{};absa.apps.addDebitOrder.onChangeStartDate=function(c){var d=bb.selector.queryAncestor(c,".ap-addDebitOrder");var a=bb.selector.query(d,".ap-addDebitOrder-debitOrderAllowedDate");var h=phe.textBox.getValue(c);var b=phe.hiddenField.getValue(bb.selector.query(d,".ap-addDebitOrder-endDate"));var f=b.substring(5,7);var e=b.substring(0,4);var g=e+"-"+f+"-"+h;phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderMonth"),f);phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderStartDate"),g);phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderDay"),h)};absa.apps.addDebitOrder.onAccountChange=function(b){var e=bb.selector.queryAncestor(b,".ap-addDebitOrder");var a=phe.select.getValue(b);var g=phe.option.getAttribute(b.options[b.selectedIndex],"data-bankName");var d=phe.option.getAttribute(b.options[b.selectedIndex],"data-branchCode");var f=phe.option.getAttribute(b.options[b.selectedIndex],"data-accountHolder");var c=g+"-"+d;phe.inputReadOnlyText.setValue(bb.selector.query(e,".ap-addDebitOrder-debitOrderAccountHolder"),f);phe.inputReadOnlyText.setValue(bb.selector.query(e,".ap-addDebitOrder-debitOrderBankDetais"),c);phe.hiddenField.setValue(bb.selector.query(e,".ap-addDebitOrder-AccountBankSelected"),g);phe.hiddenField.setValue(bb.selector.query(e,".ap-addDebitOrder-BranchCodeSelected"),d)};absa.apps.addDebitOrder.onChangeDebitOrderAmount=function(d){var c=bb.selector.queryAncestor(d,".ap-addDebitOrder");var d=bb.selector.query(c,".ap-addDebitOrder-debitOrderAmount");var a=phe.textBox.getValue(d);var b=phe.hiddenField.getValue(bb.selector.query(c,".addDebitOrder-debitOrderMinimumAmountHidden"));if(parseFloat(a)<parseFloat(b)){return false}else{return true}};absa.apps.addDebitOrder.onClickOfConfirm=function(b){var c=bb.selector.queryAncestor(b,"form");var a=bb.selector.query(c,".ap-addDebitOrder");if(absa.form.validate(c)){absa.apps.addDebitOrder.onChangeDebitOrderAmount(a);absa.form.validateAndSubmit(c)}};absa.apps.addDebitOrder.resetButton=function(c){var d=bb.selector.queryAncestor(c,"form");var b=bb.selector.query(d,".ap-addDebitOrder");var a=bb.selector.query(d,".ap-addDebitOrder-debitOrderAllowedDate");var e=bb.selector.query(b,".ap-addDebitOrder-debitOrderAmount");phe.form.reset(d);phe.select.setSelectedIndex(a,0)};absa.apps.addDebitOrder.onChangeDetailsToChange=function(c){var m=phe.select.getValue(bb.selector.query(document.body,".ap-addDebitOrder-detailsToChange"));var e=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustAccountNumber"));var k=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustAccountHolder"));var h=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustFundCode"));var l=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustFundCodeCommon"));var g=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustFundName"));var f=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustDebitOrderMinimumAmount"));var b=phe.hiddenField.getValue(bb.selector.query(document.body,".ap-addChangeDebitOrder-fundCodeForMinDO"));var d=bb.selector.queryAncestor(c,".ap-debitOrderDetailsToChange");var j=bb.selector.query(d,".ap-addDebitOrder-details");var i="";var a="true";if(m=="Add"){i="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/changeUnitTrustDetails&mode=addDebitOrder&debitOrderDetailsToChange="+m+"&unitTrustAccountNumber="+e+"&unitTrustAccountHolder="+k+"&fundName="+encodeURIComponent(g)+"&fundCode="+h+"&toggleManageDO="+a+"&fundCodeForMinDOVal="+b+"&fundCodeValue="+l+"&debitOrderMinimumAmount="+f}if(m=="Change"){i="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/changeUnitTrustDetails&mode=changeDebitOrder&debitOrderDetailsToChange="+m+"&unitTrustAccountNumber="+e+"&unitTrustAccountHolder="+k+"&fundName="+encodeURIComponent(g)+"&fundCode="+h+"&toggleManageDO="+a+"&fundCodeForMinDOVal="+b+"&fundCodeValue="+l+"&debitOrderMinimumAmount="+f}if(m=="Remove"){i="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/changeUnitTrustDetails&mode=removeDebitOrder&debitOrderDetailsToChange="+m+"&unitTrustAccountNumber="+e+"&unitTrustAccountHolder="+k+"&fundName="+encodeURIComponent(g)+"&toggleManageDO="+a+"&fundCodeForMinDOVal="+b+"&fundCode="+h+"&fundCodeValue="+l+"&debitOrderMinimumAmount="+f}if(m=="ChangeIncomeDistributionDetails"){i="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/changeUnitTrustDetails&mode=changeIncomeDetails&debitOrderDetailsToChange="+m+"&unitTrustAccountNumber="+e+"&unitTrustAccountHolder="+k+"&fundCodeValue="+l+"&toggleManageDO="+a+"&fundCodeForMinDOVal="+b+"&fundName="+encodeURIComponent(g)+"&fundCode="+h}j.setAttribute("proxyurl",i);absa.lazyLoadNode(j,true)};absa.apps.addDebitOrder.printAddChangeDebitOrder=function(a){absa.openReport("report/addChangeDebitOrder.pdf?feIdentifier=AddChangeDebitOrder&transDateTime="+a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.addEStatementForAccount=absa.apps.addEStatementForAccount||{};absa.apps.addEStatementForAccount.opener=null;absa.apps.addEStatementForAccount.refresh=function(b){var a=bb.selector.queryAncestor(b,".ap-addEStatementForAccount-tabBody");if(a){absa.lazyLoadNode(a,true)}else{var c=bb.selector.queryAncestor(b,".ap-addEStatementForAccount");absa.lazyLoadNode(c,true)}};absa.apps.addEStatementForAccount.loadModal=function(b,c,a){absa.apps.addEStatementForAccount.opener=b;absa.modal.loadModal(c,a)};absa.apps.addEStatementForAccount.onChangeDetailsButtonClick=function(b,c,a){absa.apps.addEStatementForAccount.loadModal(b,c,a)};absa.apps.addEStatementForAccount.onChangeDeliveryMethod=function(c){var b=bb.selector.queryAncestor(c,".ui-form");var e=phe.select.getValue(c);var d=bb.selector.query(b,".ap-eStatementForAccount-primaryEmail");var a=bb.selector.query(b,".ap-eStatementForAccount-secondaryEmail");if(e=="E"|e=="E-mail"){phe.textBox.setAttribute(d,"disabled","");phe.textBox.setAttribute(d,"readOnly","");phe.textBox.setAttribute(d,"required","true");phe.textBox.setAttribute(a,"disabled","");phe.textBox.setAttribute(a,"readOnly","");phe.textBox.setAttribute(a,"required","false")}else{phe.textBox.setAttribute(d,"disabled","disabled");phe.textBox.setAttribute(d,"readOnly","readOnly");phe.textBox.setAttribute(d,"required","false");phe.textBox.setValue(d,"");phe.textBox.setAttribute(a,"disabled","disabled");phe.textBox.setAttribute(a,"readOnly","readOnly");phe.textBox.setAttribute(a,"required","false");phe.textBox.setValue(a,"")}absa.form.validate(b)};absa.apps.addEStatementForAccount.onChangeMethodButtonClick=function(b,c,a){absa.apps.addEStatementForAccount.loadModal(b,c,a)};absa.apps.addEStatementForAccount.onFinishButtonClick=function(a){var d=bb.selector.queryAncestor(a,".ap-accountBalances");if(d){var c=bb.selector.query(d,".ap-balances .ap-icon-statement-inactivated");if(c){bb.html.replaceClass(c,"ap-icon-statement-inactivated","ap-icon-statement")}absa.wizard.finishButton(a)}else{var b=bb.selector.queryAncestor(a,".ap-viewunittrust-attachBodyofotherFunction");if(b){phe.tableBodyRow.collapseRow(b.previousSibling)}}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.applyInsurance=absa.apps.applyInsurance||{};absa.apps.applyInsurance.applyButton=function(e,j,g,i,c,h){var b=bb.selector.queryAncestor(e,".ap-accounts-tabbox");var f=bb.selector.query(b,".ap-applyforcpp-tabHead");var d=bb.selector.query(b,".ap-applyforcpp-tabBody");var a="proxy?pipe=genericWebservice&ws=ApplyForNewPolicyWebService&action=applyForCreditProtection&accountType="+g+"&accountNo="+j+"&accountHolderName="+h+"&age="+i+"&overDraftLimit="+c;phe.tabBody.setAttribute(d,"proxyurl",a);phe.tabBox.selectTab(f)};absa.apps.applyInsurance.openPDF=function(a){window.open("http://sharepoint.absa.co.za/sites/pnp/pnpdocs/forms/Forms%20Published/ABSA%202815%20BX%20(NCA).pdf")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewArchivedStatements=absa.apps.viewArchivedStatements||{};absa.apps.viewArchivedStatements.lazyloadTable=function(h,e,d){var j=bb.selector.queryAncestor(h,".ap-viewArchivedStatements");var i=bb.selector.query(j,".ap-viewArchivedStatements-form");var a=bb.selector.query(j,".ap-viewArchivedStatements-textBox-toDate");var g=bb.selector.query(j,".ap-viewArchivedStatements-textBox-fromDate");var b=phe.datePicker.getValue(a);var c=phe.datePicker.getValue(g);var f=bb.selector.query(j,".ap-viewArchivedStatements-tableContainer");f.setAttribute("proxyurl","proxy?pipe=genericEmptyResponse&xslFile=Folders/statements&mode=loadTable&accountNumber="+parseFloat(e)+"&fromDate="+c+"&toDate="+b+"&statementType="+d);if(absa.form.validate(i)){absa.lazyLoadNode(f,true)}};absa.apps.viewArchivedStatements.lazyloadTableForCIA=function(j){var l=bb.selector.queryAncestor(j,".ap-viewArchivedStatements");var k=bb.selector.query(l,".ap-viewArchivedStatements-form");var d=bb.selector.query(l,".ap-viewArchivedStatements-CIAform");var f=bb.selector.query(l,".ap-viewArchivedStatements-ciaDateRange");var e=bb.selector.query(f,".ap-viewArchivedStatements-ciaDateRangeInput");var b=bb.selector.query(l,".ap-viewArchivedStatements-textBox-toDate");var h=bb.selector.query(l,".ap-viewArchivedStatements-textBox-fromDate");var a=phe.datePicker.getValue(b);var c=phe.datePicker.getValue(h);phe.select.setAttribute(e,"value",c+" - "+a);d.style.display="";var i=bb.selector.query(d,".ap-statements-ciaFromDate");var g=bb.selector.query(d,".ap-statements-ciaToDate");phe.hiddenField.setValue(i,c);phe.hiddenField.setValue(g,a)};absa.apps.viewArchivedStatements.onCIASendEmailClick=function(e,b,i){var g=bb.selector.queryAncestor(e,".ap-viewArchivedStatements");var f=bb.selector.query(g,".ap-viewArchivedStatements-form");var a=bb.selector.query(g,".ap-viewArchivedStatements-CIAform");var d=phe.hiddenField.getValue(bb.selector.query(a,".ap-statements-ciaFromDate"));var c=phe.hiddenField.getValue(bb.selector.query(a,".ap-statements-ciaToDate"));var h="proxy?pipe=genericWebservice&ws=NotificationWebService&action=viewOnlineBankingAlert&view=sendArchiveStatement&mode=ciaEmail&statementDate=20171005&accountNumber="+b+"&statementNumber=statement&documentKey=key&fromDate="+d+"&toDate="+c;absa.modal.loadModal(h,i)};absa.apps.viewArchivedStatements.viewPDF=function(d){phe.button.disableButton(d);phe.button.hide(d);var b=bb.selector.queryAncestor(d,".ap-viewArchivedStatements-tableBodyCell");var c=bb.selector.query(b,".ap-viewArchivedStatements-documentKey");var a=bb.selector.query(b,".ap-viewArchivedStatements-documentWorkingDate");var e=""+new Date().getMilliseconds();absa.openReport("report/archived/"+phe.hiddenField.getValue(a)+".pdf?uniq="+e+"&forceDownload=false&documentKey="+escape(phe.hiddenField.getValue(c)),"report_"+e+"_win","top=0,left=0,width=800,height=500,scrollbars");setTimeout(function(){phe.button.enableButton(d);phe.button.show(d)},10000)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewChqImages=absa.apps.viewChqImages||{};absa.apps.viewChqImages.dateFixer=function(d){var e=bb.selector.queryAncestor(d,".ap-viewArchivedStatements");var h=bb.selector.query(e,".ap-viewChqImages-form");var b=bb.selector.query(e,".ap-viewChqImage-textBox-toDate");var a=phe.datePicker.getValue(d);var f=phe.datePicker.getValue(b);var c=absa.date.addToDate(a,364,0,0,true);var g=absa.date.getDaysDiff(a,f);if(Number(g)>365){phe.datePicker.setValue(b,c)}else{if(Number(g)<0){phe.datePicker.setValue(b,absa.date.addToDate(a,7,0,0,true))}else{if(f==""){phe.datePicker.setValue(b,absa.date.addToDate(a,7,0,0,true))}}}phe.datePicker.setAttribute(b,"fromDate",a);phe.datePicker.setAttribute(b,"toDate",c);absa.form.validate.checkElement(b)};absa.apps.viewChqImages.lazyloadTable=function(g,d){var i=bb.selector.queryAncestor(g,".ap-viewArchivedStatements");var h=bb.selector.query(i,".ap-viewChqImages-form");var a=bb.selector.query(i,".ap-viewChqImage-textBox-toDate");var f=bb.selector.query(i,".ap-viewChqImage-textBox-fromDate");var b=phe.datePicker.getValue(a);var c=phe.datePicker.getValue(f);var e=bb.selector.query(i,".ap-viewChqImage-tableContainer");e.setAttribute("proxyurl","proxy?pipe=genericEmptyResponse&xslFile=ChequeImages/chqImages&mode=loadTable&accountNo="+parseFloat(d)+"&fromDate="+c+"&toDate="+b);if(absa.form.validate(h)){absa.lazyLoadNode(e,true)}};absa.apps.viewChqImages.viewPDF=function(f){var d=bb.selector.queryAncestor(f,".ap-viewArchivedStatements-tableBodyCell");var j=bb.selector.query(d,".ap-viewArchivedStatements-documentKey");var c=bb.selector.query(d,".ap-chequeDate");var e=bb.selector.query(d,".ap-chequeNum");var g=bb.selector.query(d,".ap-chequeAmount");var b=phe.hiddenField.getValue(j);var h=phe.hiddenField.getValue(c);var i=phe.hiddenField.getValue(e);var k=phe.hiddenField.getValue(g);var a="report/viewChequeImage/viewChequeImage.pdf?chequeDate="+h+"&chequeNumber="+i+"&amount="+k+"&docId="+encodeURIComponent(b);absa.openReport(a,"Cheque Image")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.buyUnitTrust=absa.apps.buyUnitTrust||{};absa.apps.buyUnitTrust.absaUnitTrustDecisionToolFundsList=function(e,d,f,c){var b=bb.selector.queryAncestor(e,"tr");var a="proxy?pipe=genericEmptyResponse&xslFile=decisiontool/buyUnitTrustHomePage&displayMode=view&unitTrustAccountNumber="+d+"&accountHoldername="+f+"&accountBalance="+c;if(phe.tableBodyRow.isExpanded(b)&&b._dataFile==a){phe.tableBodyRow.collapseRow(b)}else{phe.tableBodyRow.expandRow(b,a)}};absa.apps.buyUnitTrust.absaUnitTrustFundsList=function(e,d,f,c){var b=bb.selector.queryAncestor(e,"tr");var a="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=getUnitTrustFundsFromMyAbsa&mode=view&unitTrustAccountNumber="+d+"&accountHoldername="+f+"&accountBalance="+c;if(phe.tableBodyRow.isExpanded(b)&&b._dataFile==a){phe.tableBodyRow.collapseRow(b)}else{phe.tableBodyRow.expandRow(b,a)}};absa.apps.buyUnitTrust.investmentmethod=function(l,k,e){var s=bb.selector.queryAncestor(l,".ap-buyunittrust-mainForm");var t=bb.selector.query(s,".ap-buyUnitTrust-doneButton");var c=bb.selector.query(s,".ap-buyUnitTrust-resetButton");var r=bb.selector.query(s,".ap-button-cancel");var o=bb.selector.query(s,".ap-buydebitorderInvestmentmethod-rewardsMessage");var u=bb.selector.query(s,".ap-buyUnitTrust-nextButton");var q=bb.selector.query(s,".ap-buyunittrust-termsAndConditions");var m=bb.selector.query(s,".ap-buyunittrust-getInvestmentMethod");var i=bb.selector.query(s,".ap-buyUnitTrust-incomeDistributionType");var j=bb.selector.query(s,".ap-buyUnitTrust-datepickerWarningMessage1");var g=bb.selector.query(s,".ap-buyUnitTrust-datepickerWarningMessage2");var d=parseInt(l.value,10);var a="";switch(d){case 1:a="lumsum";break;case 2:a="debitorder";break}var v=phe.hiddenField.getValue(bb.selector.query(s,"[name=minLumsumAmountHidden]"));var p=phe.hiddenField.getValue(bb.selector.query(s,"[name=minDebitOrderAmountHidden]"));var n=phe.hiddenField.getValue(bb.selector.query(s,"[name=automaticAnnualIncreasePercentageHidden]"));var b=phe.hiddenField.getValue(bb.selector.query(s,"[name=isTransactionalHidden]"));var f=phe.hiddenField.getValue(bb.selector.query(s,"[name=noOfExternalaccounts]"));var w="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/buyUnitTrust&mode=investmentmethod&investmentMethodType="+a+"&minLumsumAmount="+v+"&minDebitOrderAmount="+p+"&automaticAnnualIncreasePercentage="+n+"&fundCode="+k;m.setAttribute("proxyurl",w);absa.lazyLoadNode(m,true);if(a=="debitorder"&&b=="true"){phe.row.setAttribute(o,"class","ap-buydebitorderInvestmentmethod-rewardsMessage");var h=bb.selector.query(s,".ap-buyUnitTrust-insufficientAmount");phe.message.setAttribute(h,"class","ap-common-hide  ap-buyUnitTrust-insufficientAmount")}if(a=="debitorder"&&b=="false"){if(f=="0"){phe.button.setAttribute(t,"class","ap-buyUnitTrust-doneButton ap-button-next")}if(f>"0"){phe.button.setAttribute(t,"class","ap-buyUnitTrust-doneButton ap-button-next ap-common-hide")}phe.button.setAttribute(c,"class","ap-button-reset ap-buyUnitTrust-resetButton");phe.button.setAttribute(r,"class","ap-button-cancel ap-buyUnitTrust-cancelButton");phe.button.setAttribute(u,"class","ap-button-next ap-buyUnitTrust-nextButton");phe.row.show(q)}if(a=="lumsum"&&b=="false"){phe.button.setAttribute(t,"class","ap-buyUnitTrust-doneButton ap-button-next");phe.button.setAttribute(c,"class","ap-button-reset ap-buyUnitTrust-resetButton ap-common-hide");phe.button.setAttribute(r,"class","ap-button-cancel ap-buyUnitTrust-cancelButton ap-common-hide");phe.button.setAttribute(u,"class","ap-button-next ap-buyUnitTrust-nextButton ap-common-hide");phe.row.hide(i);phe.row.setAttribute(j,"class","ap-buyUnitTrust-datepickerWarningMessage1 ap-common-hide");phe.row.setAttribute(g,"class","ap-buyUnitTrust-datepickerWarningMessage2 ap-common-hide");phe.row.hide(q)}};absa.apps.buyUnitTrust.incomedistribution=function(f){var c=bb.selector.queryAncestor(f,".ap-buyunittrust-mainForm");var b=bb.selector.query(c,".ap-buyunittrust-getIncomeDistributionMethod");var e=parseInt(f.value,10);var a="";switch(e){case 1:a="reinvest";break;case 2:a="payintoAccount";break}var d="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/buyUnitTrust&mode=incomedistribution&incomeDistributionType="+a;b.setAttribute("proxyurl",d);absa.lazyLoadNode(b,true)};absa.apps.buyUnitTrust.onChangeStartDate=function(i){var e=bb.selector.queryAncestor(i,".ap-buyunittrust-mainForm");var a=bb.selector.query(e,".ap-buyUnitTrust-debitOrderAllowedDate");var j=phe.textBox.getValue(i);var d=phe.hiddenField.getValue(bb.selector.query(e,".ap-buyUnitTrust-endDate"));var f=d.substring(5,7);var h=d.substring(0,4);var g=h+"-"+f+"-"+j;var c=bb.selector.query(e,".ap-buyUnitTrust-datepickerWarningMessage1");var b=bb.selector.query(e,".ap-buyUnitTrust-datepickerWarningMessage2");if(a!=""){phe.row.setAttribute(c,"class","ap-buyUnitTrust-datepickerWarningMessage1");phe.row.setAttribute(b,"class","ap-buyUnitTrust-datepickerWarningMessage2")}phe.hiddenField.setValue(bb.selector.query(e,".buyUnitTrust-debitOrderMonth"),f);phe.hiddenField.setValue(bb.selector.query(e,".ap-buyUnitTrust-debitOrderStartDate"),g);phe.hiddenField.setValue(bb.selector.query(e,".ap-buyUnitTrust-debitOrderDay"),j)};absa.apps.buyUnitTrust.onChangeDebitOrderAmount=function(d){var c=bb.selector.queryAncestor(d,".ap-buyunittrust-mainForm");var d=bb.selector.query(c,".buyUnitTrust-debitOrderAmount");var a=phe.textBox.getValue(d);var b=phe.hiddenField.getValue(bb.selector.query(c,".buyUnitTrust-minDebitOrderAmount"));if(parseInt(a)<parseInt(b)){phe.textBox.setAttribute(bb.selector.query(c,".buyUnitTrust-debitOrderAmount"),"customValidationText",absa.locale["UnitTrust/BuyUnitTrust/CustomValidation/MinimumDebitOrderAmount"]);return false}else{return true}};absa.apps.buyUnitTrust.onChangeLumSumAmount=function(c){var a=bb.selector.queryAncestor(c,".ap-buylumsumInvestmentmethod");var d=phe.textBox.getValue(bb.selector.query(a,".buyUnitTrust-lumsumAmount"));var b=phe.hiddenField.getValue(bb.selector.query(a,".buyUnitTrust-minLumsumAmount"));if(parseInt(d)<parseInt(b)){phe.textBox.setAttribute(bb.selector.query(a,".buyUnitTrust-lumsumAmount"),"customValidationText",absa.locale["UnitTrust/BuyUnitTrust/CustomValidation/MinimumLumpSumAmount"]);return false}else{return true}};absa.apps.buyUnitTrust.printBuyUnitTrust=function(a){absa.openReport("report/buyUnitTrust.pdf?feIdentifier=BuyUnitTrust&transDateTime="+a,"totalInvestmentPortfolio")};absa.apps.buyUnitTrust.printBuyMoreUnitTrust=function(a){absa.openReport("report/UnitTrust.pdf?feIdentifier=BuyUnitTrust&transDateTime="+a,"totalInvestmentPortfolio")};absa.apps.buyUnitTrust.resetButton=function(f,e){var g=bb.selector.queryAncestor(f,".ap-buyunittrust-mainForm");var b=bb.selector.query(g,".ap-buyUnitTrust-debitOrderAllowedDate");var c=bb.selector.query(g,".ap-buyUnitTrust-investmentMethodType");var d=bb.selector.query(g,".ap-buyUnitTrust-incomeDistributionType");var a=phe.hiddenField.getValue(bb.selector.query(g,"[name=isTransactionalHidden]"));if(a=="false"){phe.select.setAttribute(d,"class","ap-buyUnitTrust-incomeDistributionType ap-common-hide");phe.select.setSelectedIndex(c,"debitorder");phe.form.reset(g)}else{phe.select.setAttribute(b,"customValidation","return true");phe.select.setSelectedIndex(b,0);absa.form.validate.checkElement(b);phe.form.reset(g);phe.select.setSelectedIndex(c,"1")}};absa.apps.buyUnitTrust.onChangeUnitTrustAccountNumber=function(e){var o=bb.selector.queryAncestor(e,".ap-selectUnitTrustAccount");var n=bb.selector.queryAncestor(e,".ap-assistanceRewards-form");var g=bb.selector.query(o,".ap-asistanceForRewards-proceedButton");var h=phe.select.getSelectedOption(e);var d=bb.selector.query(o,".ap-unitTrustFundList");var l=bb.selector.query(o,".ap-unitTrustFundStatusFalse");var f=bb.selector.query(o,".ap-assistanceForRewards-chooseBuyNewOrBuyMore");var p=phe.radioGroup.getValue(f);var b=phe.select.getValue(e);var j=phe.option.getAttribute(h,"data-accountHolder");var m=bb.selector.query(o,".ap-assistanceForRewrads-buyMoreFundSelection");var a=phe.option.getAttribute(h,"data-accountBalance");var c=phe.option.getAttribute(h,"data-fundStatus");var i=bb.selector.query(n,".ap-asistanceForRewards-errorMessage");if(p=="BuyMore"){if(b==""){phe.row.hide(l)}if(b!=""){phe.common.hide(bb.selector.query(n,".ap-asistanceForRewards-errorMessage"))}var k="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewUnitTrustAccounts&mode=unitTrustFundsList&fundStatus="+c+"&accountNo="+b;phe.common.setAttribute(m,"proxyurl",k);phe.common.show(m);absa.lazyLoadNode(m,true);if(c=="false"){phe.button.disableButton(g)}else{phe.button.enableButton(g)}}if(p=="BuyNew"){if(b!=""){phe.common.hide(bb.selector.query(n,".ap-asistanceForRewards-errorMessage"))}}};absa.apps.buyUnitTrust.proceed=function(k){var a=bb.selector.queryAncestor(k,".ap-selectUnitTrustAccount");var d=bb.selector.query(a,".ap-assistanceForRewards-chooseBuyNewOrBuyMore");var r=phe.radioGroup.getValue(d);var t=bb.selector.queryAncestor(k,".ap-assistanceRewards-form");var b=bb.selector.query(t,".ap-unitTrustAccountDropdown");var e=phe.select.getValue(b);var l=bb.selector.query(document.body,".ap-viewUnitAccount-buyNewButton-"+e);var s=phe.option.getAttribute(b.options[b.selectedIndex],"data-accountHolder");var f=phe.option.getAttribute(b.options[b.selectedIndex],"data-accountBalance");var p=bb.selector.query(document.body,".ap-viewUnitTrust-tableBodyRow-"+e);var m=bb.selector.query(t,".ap-unitTrustFundDropdown");if(r==""){absa.form.validate.checkElement(b);phe.common.show(bb.selector.query(t,".ap-asistanceForRewards-errorMessage"))}if(r=="BuyNew"){if(e==""){absa.form.validate.checkElement(b);phe.common.show(bb.selector.query(t,".ap-asistanceForRewards-errorMessage"))}else{phe.modal.hideModal();var i="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=getUnitTrustFundsFromMyAbsa&mode=view&unitTrustAccountNumber="+e+"&accountHoldername="+s+"&accountBalance="+f+"&fromRewards=true";if(phe.tableBodyRow.isExpanded(p)&&p._dataFile==i){phe.tableBodyRow.collapseRow(p)}else{phe.tableBodyRow.expandRow(p,i)}}}if(r=="BuyMore"){if(e==""){absa.form.validate.checkElement(b);phe.common.show(bb.selector.query(t,".ap-asistanceForRewards-errorMessage"))}if(e!=""){var i="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewUnitTrustAccounts&mode=view&accountNo="+e}if(m!=null){var m=bb.selector.query(t,".ap-unitTrustFundDropdown");var o=phe.option.getAttribute(m.options[m.selectedIndex],"data-fundName");var g=phe.select.getValue(m);var h=bb.selector.query(a,".ap-unitTrustFundDetails-fundAvlBalance");var n=phe.inputReadOnlyText.getValue(h);var c=bb.selector.query(a,".ap-unitTrustFundDetails-fundAvlUnits");var j=phe.inputReadOnlyText.getValue(c);if(g==""){absa.form.validate.checkElement(m);phe.common.show(bb.selector.query(t,".ap-asistanceForRewards-errorMessage"))}if(g!=""){phe.common.hide(bb.selector.query(t,".ap-asistanceForRewards-errorMessage"));phe.tableBodyRow.expandRow(p,i);phe.modal.hideModal();var q="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/unittrustTransaction&unitTrustAccountNumber="+e+"&unitTrustAccountHolder="+encodeURIComponent(s)+"&fundName="+encodeURIComponent(o)+"&fundAvlUnits="+j+"&fundAvlBalance="+n+"&fromRewrads=true&fundCode="+g.replace(/ /g,"");absa.modal.loadModal(q,"Unit trust transaction","","")}}}};absa.apps.buyUnitTrust.chooseBuyNewOrBuyMore=function(f){var g=bb.selector.queryAncestor(f,".ap-assistanceRewards-form");var e=bb.selector.queryAncestor(f,".ap-selectUnitTrustAccount");var f=bb.selector.query(e,".ap-assistanceForRewards-chooseBuyNewOrBuyMore");var c=bb.selector.query(e,".ap-asistanceForRewards-proceedButton");var b=bb.selector.query(e,".ap-assistanceForRewrads-buyMoreFundSelection");var d=phe.radioGroup.getValue(f);var a=bb.selector.query(e,".ap-unitTrustAccountDropdown");if(d=="BuyNew"){phe.button.enableButton(c);phe.common.hide(bb.selector.query(g,".ap-asistanceForRewards-errorMessage"));phe.common.hide(b);absa.lazyLoadNode(b,true);phe.select.setValue(a,"")}if(d=="BuyMore"){phe.common.hide(bb.selector.query(g,".ap-asistanceForRewards-errorMessage"));phe.select.setValue(a,"")}};absa.apps.buyUnitTrust.onChangeUnitTrustFund=function(d){var f=bb.selector.queryAncestor(d,".ap-assistanceRewards-form");var e=bb.selector.queryAncestor(d,".ap-selectUnitTrustAccount");var a=bb.selector.queryAll(e,".ap-unitTrustFundDetails-rows");var c=phe.select.getValue(d);for(var b=0;b<a.length;b++){if(bb.html.hasClass(a[b],"ap-unitTrustFundDetails-rows-"+c)){phe.rows.show(a[b])}else{phe.rows.hide(a[b])}}if(c!=""){phe.common.hide(bb.selector.query(f,".ap-asistanceForRewards-errorMessage"))}};absa.apps.buyUnitTrust.openMoneyMarket=function(a){gadgets.pubsub.publish("goTo:apply/createAccount/createAccount",{fundName:"Money Market Fund"})};absa.apps.buyUnitTrust.printBuyUnitTrustMode=function(c,d){oForm=bb.selector.queryAncestor(c,".ap-buyUnitTrust-confirmStep3");var b=bb.selector.query(oForm,".ap-buyUnitTrust-transIdentifierBuyUnitTrust");var a=phe.hiddenField.getValue(b);if(a=="Lump Sum"){absa.apps.buyUnitTrust.printBuyMoreUnitTrust(d)}else{absa.apps.buyUnitTrust.printBuyUnitTrust(d)}};absa.apps.buyUnitTrust.onNextClick=function(k){var l=bb.selector.queryAncestor(k,".ap-unittrustTransaction-setupForm");var j=bb.selector.query(l,".ap-buyUnitTrust-accountNo");var d=phe.select.getValue(j);var b=bb.selector.query(l,".ap-buyMoreUnitTrust-insufficientAmount");var n=d.split("-");var h=absa.apps.buyUnitTrust.trimAccountNumberAndType(n[0]);var c=absa.apps.buyUnitTrust.trimAccountNumberAndType(n[1]);var i="";if(h=="Current"){i="C"}else{if(h=="Savings"){i="S"}else{i="ABSARewards"}}if(i!="ABSARewards"){var m=bb.selector.query(l,".ap-buyMoreUnitTrustFund-unitTrustAccountHolder");var g=phe.inputReadOnlyText.getValue(m);var e=bb.selector.query(l,".ap-buyunittrust-lumpSumAmountValue");var f=phe.textBox.getValue(e);var a="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=validateLumpSumAmount&accNo="+c+"&accType="+i+"&amount="+f+"&holder="+g;absa.io.makeRequest(a,function(p){if(!p.errors.length){var r=bb.html.createElementFromString(p.text);var q=bb.selector.query(r,".ap-applyForUnitTrust-status");var o=phe.hiddenField.getValue(q);if(o==="true"){if(absa.form.validate(l)){phe.message.setAttribute(b,"class","ap-common-hide ap-buyMoreUnitTrust-insufficientAmount");absa.form.validateAndSubmit(l)}}else{phe.message.setAttribute(b,"class","ap-buyMoreUnitTrust-insufficientAmount")}}})}else{if(absa.form.validate(l)){phe.message.setAttribute(b,"class","ap-common-hide ap-buyMoreUnitTrust-insufficientAmount");absa.form.validateAndSubmit(l)}}};absa.apps.buyUnitTrust.onNextButtonClick=function(j){var k=bb.selector.queryAncestor(j,".ap-buyunittrust-mainForm");var l=bb.selector.query(k,".ap-buyUnitTrust-investmentMethodType");var a=phe.select.getValue(l);var d=bb.selector.query(k,".ap-buyUnitTrust-insufficientAmount");if(a==="1"){var g=phe.hiddenField.getValue(bb.selector.query(k,"[name=lumsumAccountHolder]"));var i=bb.selector.query(k,".ap-buyUnitTrust-accountNo");var e=phe.select.getValue(i);var m=e.split("-");var f=absa.apps.buyUnitTrust.trimAccountNumberAndType(m[0]);var c=absa.apps.buyUnitTrust.trimAccountNumberAndType(m[1]);var h="";if(f=="Current"){h="C"}else{if(f=="Savings"){h="S"}else{h="ABSARewards"}}if(h!="ABSARewards"){var o=bb.selector.query(k,".buyUnitTrust-lumsumAmount");var n=phe.textBox.getValue(o);var g=phe.hiddenField.getValue(bb.selector.query(k,"[name=unitTrustAccountHolder]"));var b="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=validateLumpSumAmount&accNo="+c+"&accType="+h+"&amount="+n+"&holder="+g;absa.io.makeRequest(b,function(q){if(!q.errors.length){var s=bb.html.createElementFromString(q.text);var r=bb.selector.query(s,".ap-applyForUnitTrust-status");var p=phe.hiddenField.getValue(r);if(p==="true"){if(absa.form.validate(k)){phe.message.setAttribute(d,"class","ap-common-hide ap-buyUnitTrust-insufficientAmount");absa.form.validateAndSubmit(k)}}else{phe.message.setAttribute(d,"class","ap-buyUnitTrust-insufficientAmount")}}})}else{if(absa.form.validate(k)){phe.message.setAttribute(d,"class","ap-common-hide ap-buyMoreUnitTrust-insufficientAmount");absa.form.validateAndSubmit(k)}}}if(a==="2"){if(absa.form.validate(k)){phe.message.setAttribute(d,"class","ap-common-hide ap-buyUnitTrust-insufficientAmount");absa.form.validateAndSubmit(k)}}};absa.apps.buyUnitTrust.trimAccountNumberAndType=function(a){return a.replace(/^\s+|\s+$/gm,"")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewTaxCertificateUnitTrust=absa.apps.viewTaxCertificateUnitTrust||{};absa.apps.viewTaxCertificateUnitTrust.onViewButtonClick=function(h){var j=bb.selector.queryAncestor(h,".ap-viewTaxCertificateUnitTrust-form");var i=bb.selector.query(j,".ap-unitTrustAccountDropdown");var d=bb.selector.query(j,".ap-viewTaxCertificate-yearSelect");var c=Number(phe.select.getValue(d));var f=c-1;var a=phe.select.getValue(i);var e=c+"-02-"+absa.apps.viewTaxCertificateUnitTrust.daysInFebruary(c);var g=f+"-03-31";var b="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=searchTaxStatements&fromDate="+g+"&toDate="+e+"&accountNumber="+a;absa.io.makeRequest(b,function(o){if(!o.errors.length){var n=bb.html.createElementFromString(o.text);var m=phe.common.getAttribute(n,"docId");var l="report/unittrusttaxcert/taxCertificateUT.pdf?accountNumber="+a+"&docId="+encodeURIComponent(m);absa.openReport(l,"UT Tax Certificate")}else{var n=bb.html.createElementFromString(o.text);var k=bb.selector.query(n,".ap-searchTaxStatements-errorMessage");if(k){phe.message.setMessage(k,absa.locale["AFS/General/Label/ViewTaxCertificateUTErrorMessage"])}}})};absa.apps.viewTaxCertificateUnitTrust.daysInFebruary=function(a){return(((a%4==0)&&((!(a%100==0))||(a%400==0)))?29:28)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewArchivedStatementUnitTrust=absa.apps.viewArchivedStatementUnitTrust||{};absa.apps.viewArchivedStatementUnitTrust.viewPDF=function(c,b,e,d){var a="report/archivedStatementUT/archivedStatementUT.pdf?docDate="+e+"&docId="+encodeURIComponent(b)+"&accountNumber="+d;absa.openReport(a,"UT Tax Archived Statement")};absa.apps.viewArchivedStatementUnitTrust.functionCheck=function(h){var j=bb.selector.queryAncestor(h,".ap-viewArchivedStatements");var i=bb.selector.query(j,".ap-viewArchivedStatementsUT-form");var g=bb.selector.query(i,".ap-unitTrustAccountDropdown");var e=phe.select.getValue(g);var a=bb.selector.query(j,".ap-viewArchivedStatements-textBox-toDate");var f=bb.selector.query(j,".ap-viewArchivedStatements-textBox-fromDate");var b=phe.datePicker.getValue(a);var c=phe.datePicker.getValue(f);var d=bb.selector.query(j,".ap-viewArchivedStatements-tableContainer");d.setAttribute("proxyurl","proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/viewArchivedStatementsUT&mode=loadTable&accountNumber="+e+"&fromDate="+c+"&toDate="+b);if(absa.form.validate(i)){absa.lazyLoadNode(d,true)}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewUnitTrustTransactionHistory=absa.apps.viewUnitTrustTransactionHistory||{};absa.apps.viewUnitTrustTransactionHistory.onToDatePickerChange=function(b){var a=bb.selector.queryAncestor(b,".ap-viewUnitTrustTransactionHistory-form");absa.apps.viewUnitTrustTransactionHistory.checkDateRange(a)};absa.apps.viewUnitTrustTransactionHistory.checkDateRange=function(a){var c=bb.selector.query(a,".ap-viewUnitTrustTransactionHistory-datePickerFrom");var b=bb.selector.query(a,".ap-viewUnitTrustTransactionHistory-datePickerTo");var d=absa.date.getDaysDiff(phe.datePicker.getValue(c),phe.datePicker.getValue(b));if(Number(d)<0){phe.datePicker.setAttribute(b,"customValidation","return false");absa.form.validate.checkElement(b)}else{phe.datePicker.setAttribute(b,"customValidation","return true");absa.form.validate.checkElement(b)}};absa.apps.viewUnitTrustTransactionHistory.onToggleRowNumberClick=function(e){var b=bb.selector.queryAncestor(e,".ap-viewUnitTrustTransactionHistory-form");var d=bb.selector.query(b,".ap-viewUnitTrustTransactionHistory-datePickerFrom");var c=bb.selector.query(b,".ap-viewUnitTrustTransactionHistory-datePickerTo");absa.apps.viewUnitTrustTransactionHistory.checkDateRange(b);if(absa.form.validate.checkElement(d)&&absa.form.validate.checkElement(c)){var a=bb.selector.query(b,".ap-viewUnitTrustTransactionHistory-table");if(bb.html.hasClass(a,"ap-viewUnitTrustTransactionHistory-tableSize10")){phe.button.setAttribute(e,"class","ap-icon-3010");phe.table.setAttribute(a,"rowPacketSize","30");bb.html.replaceClass(a,"ap-viewUnitTrustTransactionHistory-tableSize10","ap-viewUnitTrustTransactionHistory-tableSize30");phe.table.setAttribute(a,"height","900px")}else{phe.button.setAttribute(e,"class","ap-icon-1030");phe.table.setAttribute(a,"rowPacketSize","10");bb.html.replaceClass(a,"ap-viewUnitTrustTransactionHistory-tableSize30","ap-viewUnitTrustTransactionHistory-tableSize10");phe.table.setAttribute(a,"height","300px")}phe.table.reload(a)}};absa.apps.viewUnitTrustTransactionHistory.onSearchBoxClick=function(h){var d=bb.selector.queryAncestor(h,".ap-viewUnitTrustTransactionHistory-form");var b=phe.searchBox.getValue(h);var p=bb.selector.query(d,".ap-viewUnitTrustTransactionHistory-form");var n=bb.selector.query(d,".ap-viewUnitTrustTransactionHistory-table");var j=bb.selector.query(d,".ap-viewUnitTrustTransactionHistory-datePickerFrom");var a=bb.selector.query(d,".ap-viewUnitTrustTransactionHistory-datePickerTo");var k=bb.selector.query(p,".ap-unitTrustAccountDropdown");var i=phe.select.getValue(k);var g=bb.selector.query(p,".ap-unitTrustFundDropdown");var c=phe.select.getValue(g);var m=phe.datePicker.getValue(j);var f=phe.datePicker.getValue(a);var o=bb.selector.queryAncestor(h,".ap-viewUnitTrustTransactionHistory");var e=bb.selector.query(o,".ap-viewUnitTrustTransactionHistory-table");absa.apps.viewUnitTrustTransactionHistory.checkDateRange(d);if((absa.form.validate.checkElement(j))&&(absa.form.validate.checkElement(a))){var l="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=getUnitTrustTransactionHistory&mode=table&fundCode="+c+"&unitTrustAccountNumber="+i+"&fromDate="+m+"&toDate="+f+"&searchValue="+b;phe.table.setAttribute(e,"dataFile",l);phe.table.reload(e)}};absa.apps.viewUnitTrustTransactionHistory.onResetSearchButtonClick=function(b){var a=bb.selector.queryAncestor(b,".ap-viewUnitTrustTransactionHistory-form");absa.apps.viewUnitTrustTransactionHistory.onSearchBoxClick(b)};absa.apps.viewUnitTrustTransactionHistory.onChangeUnitTrustAccountNumber=function(d){var e=bb.selector.queryAncestor(d,".ap-viewUnitTrustTransactionHistory-form");var a=phe.select.getValue(d);var b=bb.selector.query(e,".ap-viewUnitTrustTransactionHistory-transactionHistoryBody");var c="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewUnitTrustAccounts&mode=transactionHistoryLoad&view=transactionHistory&accountNo="+a;b.setAttribute("proxyurl",c);absa.lazyLoadNode(b,true)};absa.apps.viewUnitTrustTransactionHistory.onChangeUnitTrustFund=function(d){var e=phe.option.getAttribute(d.options[d.selectedIndex],"value");var l=bb.selector.queryAncestor(d,".ap-viewUnitTrustTransactionHistory-form");var f=bb.selector.query(l,".ap-viewUnitTrustTransactionHistory-table");var k=bb.selector.query(l,".ap-viewUnitTrustTransactionHistory-form");var i=bb.selector.query(k,".ap-unitTrustAccountDropdown");var g=phe.select.getValue(i);var b=bb.selector.query(l,".ap-viewUnitTrustTransactionHistory-datePickerTo");var h=bb.selector.query(l,".ap-viewUnitTrustTransactionHistory-datePickerFrom");var a=phe.datePicker.getValue(b);var c=phe.datePicker.getValue(h);var j="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewUnitTrustAccounts&mode=loadTable&view=transactionHistory&fundCode="+e+"&unitTrustAccountNumber="+g+"&fromDate="+c+"&toDate="+a;phe.table.setAttribute(f,"dataFile",j);phe.table.reload(f)};absa.apps.viewUnitTrustTransactionHistory.lazyloadTable=function(k){var m=bb.selector.queryAncestor(k,".ap-viewUnitTrustTransactionHistory");var f=bb.selector.query(m,".ap-viewUnitTrustTransactionHistory-table");var l=bb.selector.query(m,".ap-viewUnitTrustTransactionHistory-form");var i=bb.selector.query(l,".ap-unitTrustAccountDropdown");var g=phe.select.getValue(i);var b=bb.selector.query(m,".ap-viewUnitTrustTransactionHistory-datePickerTo");var h=bb.selector.query(m,".ap-viewUnitTrustTransactionHistory-datePickerFrom");var a=phe.datePicker.getValue(b);var c=phe.datePicker.getValue(h);var e=bb.selector.query(l,".ap-unitTrustFundDropdown");var d=phe.select.getValue(e);var j="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewUnitTrustAccounts&mode=loadTable&view=transactionHistory&fundCode="+d+"&unitTrustAccountNumber="+g+"&fromDate="+c+"&toDate="+a;phe.table.setAttribute(f,"dataFile",j);phe.table.reload(f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeAccountName=absa.apps.changeAccountName||{};absa.apps.changeAccountName.onAccountNameTextBoxMouseUp=function(a){setTimeout(function(){a.focus()},10)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeDebitOrder=absa.apps.changeDebitOrder||{};absa.apps.changeDebitOrder.onChangeStartDate=function(c){var d=bb.selector.queryAncestor(c,".ap-changeDebitOrder");var a=bb.selector.query(d,".ap-changeDebitOrder-debitOrderAllowedDate");var h=phe.textBox.getValue(c);var b=phe.hiddenField.getValue(bb.selector.query(d,".ap-addDebitOrder-endDate"));var f=b.substring(5,7);var e=b.substring(0,4);var g=e+"-"+f+"-"+h;phe.hiddenField.setValue(bb.selector.query(d,".ap-changeDebitOrder-debitOrderStartDate"),g);phe.hiddenField.setValue(bb.selector.query(d,".ap-changeDebitOrder-debitOrderDay"),h)};absa.apps.changeDebitOrder.onChangeDebitOrderAmount=function(d){var c=bb.selector.queryAncestor(d,".ap-changeDebitOrder");var d=bb.selector.query(c,".ap-changeDebitOrder-debitOrderAmount");var a=phe.textBox.getValue(d);var b=phe.inputReadOnlyText.getValue(bb.selector.query(c,".ap-changeDebitOrder-debitOrderMinimumAmount"));if(parseInt(a)<parseInt(b)){return false}else{return true}};absa.apps.changeDebitOrder.onAccountChange=function(b){var e=bb.selector.queryAncestor(b,".ap-changeDebitOrder");var a=phe.select.getValue(b);var g=phe.option.getAttribute(b.options[b.selectedIndex],"data-bankName");var d=phe.option.getAttribute(b.options[b.selectedIndex],"data-branchCode");var f=phe.option.getAttribute(b.options[b.selectedIndex],"data-accountHolder");var c=g+"-"+d;phe.inputReadOnlyText.setValue(bb.selector.query(e,".ap-changeDebitOrder-debitOrderAccountHolder"),f);phe.inputReadOnlyText.setValue(bb.selector.query(e,".ap-changeDebitOrder-debitOrderBankDetais"),c);phe.hiddenField.setValue(bb.selector.query(e,".ap-changeDebitOrder-AccountBankSelected"),g);phe.hiddenField.setValue(bb.selector.query(e,".ap-changeDebitOrder-BranchCodeSelected"),d)};absa.apps.changeDebitOrder.onClickOfConfirm=function(a){var b=bb.selector.queryAncestor(a,"form");if(absa.form.validate(b)){absa.form.validateAndSubmit(b)}};absa.apps.changeDebitOrder.resetButton=function(b){var c=bb.selector.queryAncestor(b,"form");var a=bb.selector.query(c,".ap-changeDebitOrder-debitOrderAllowedDate");phe.form.reset(c);phe.select.setSelectedIndex(a,0)};absa.apps.changeDebitOrder.onChangeDebitOrderToChange=function(b){var g=phe.select.getValue(bb.selector.query(document.body,".ap-changeDebitOrder-debitOrderToChnage"));var i=phe.inputReadOnlyText.getValue(bb.selector.query(document.body,".ap-changeDebitOrder-unitTrustAccountHolder"));var d=bb.selector.queryAncestor(b,".ap-changeDebitOrder");var h=bb.selector.query(d,".ap-changeDebitOrder-details");var c=phe.inputReadOnlyText.getValue(bb.selector.query(d,".ap-changeDebitOrder-chandeDOFundNumber"));var f=phe.hiddenField.getValue(bb.selector.query(d,".ap-changeDebitOrder-chandeDOFundCode"));var e=phe.inputReadOnlyText.getValue(bb.selector.query(d,".ap-changeDebitOrder-unitTrustFundName"));var a="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewDebitOrders&mode=selectedDebitOrder&debitOrderId="+g+"&unitTrustAccountHolder="+encodeURIComponent(i)+"&fundNumber="+c+"&fundCode="+f+"&fundName="+encodeURIComponent(e);h.setAttribute("proxyurl",a);absa.lazyLoadNode(h,true)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeEStatementForAccount=absa.apps.changeEStatementForAccount||{};absa.apps.changeEStatementForAccount.onFinishButtonClick=function(b,a){var d=bb.selector.queryAncestor(absa.apps.addEStatementForAccount.opener,".ap-accountBalances");phe.modal.hideModal();if(!(d==null)){var c=bb.selector.query(d,".ap-balances .ap-icon-statement");var e=phe.button.getAttribute(b,"data-deliveryMethod");if(e=="Print"&&c){bb.html.replaceClass(c,"ap-icon-statement","ap-icon-statement-inactivated")}}absa.apps.addEStatementForAccount.refresh(absa.apps.addEStatementForAccount.opener);absa.apps.addEStatementForAccount.opener=null};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeNotifyMeRecipientForAccount=absa.apps.changeNotifyMeRecipientForAccount||{};absa.apps.changeNotifyMeRecipientForAccount.ownerTable=null;absa.apps.changeNotifyMeRecipientForAccount.onModalFinishButtonClick=function(c,e){var d=bb.selector.queryAncestor(absa.apps.changeNotifyMeRecipientForAccount.ownerTable,".ap-accountBalances");var b=bb.selector.query(d,".ap-balances .ap-icon-mobile");var a=bb.selector.query(d,".ap-balances .ap-icon-mobile-inactivated");phe.modal.hideModal();if(e=="false"&&b){bb.html.replaceClass(b,"ap-icon-mobile","ap-icon-mobile-inactivated")}else{if(e=="true"&&a){bb.html.replaceClass(a,"ap-icon-mobile-inactivated","ap-icon-mobile")}}absa.apps.viewNotifyMeRecipientsList.reloadNotifyMeRecipientsList(absa.apps.changeNotifyMeRecipientForAccount.ownerTable)};absa.apps.changeNotifyMeRecipientForAccount.checkSubscription=function(f){var a=bb.selector.query(f,".ap-changeNotifyMeRecipient-table-row");var d=bb.selector.queryAll(a,".ap-changeNotifyMeRecipient-checkBox");var c=bb.selector.query(a,".ap-changeNotifyMeRecipient-purchases-select");var e=bb.selector.query(f,".ap-changeNotifyMeRecipient-isUnsubscribed");for(var b=0;b<d.length;b++){if(phe.checkBox.isChecked(d[b])){phe.hiddenField.setValue(e,"false");break}else{phe.hiddenField.setValue(e,"true")}}if(c&&phe.select.getValue(c)!=""){phe.hiddenField.setValue(e,"false")}};absa.apps.changeNotifyMeRecipientForAccount.selectRow=function(e){var a=bb.selector.queryAncestor(e,".ap-changeNotifyMeRecipient-table-row");var d=bb.selector.queryAll(a,".ap-changeNotifyMeRecipient-checkBox");var c=bb.selector.query(a,".ap-changeNotifyMeRecipient-purchases-select");if(phe.checkBox.isChecked(e)){for(var b=0;b<d.length;b++){phe.checkBox.setAttribute(d[b],"checked","true");if(bb.html.hasClass(d[b],"ap-changeNotifyMeRecipient-purchases-checkBox")){absa.apps.changeNotifyMeRecipientForAccount.setPurchasesValueForCheckBox(d[b])}}if(c){phe.select.setSelectedIndex(c,"1")}}else{for(var b=0;b<d.length;b++){phe.checkBox.setAttribute(d[b],"checked","false");if(bb.html.hasClass(d[b],"ap-changeNotifyMeRecipient-purchases-checkBox")){absa.apps.changeNotifyMeRecipientForAccount.setPurchasesValueForCheckBox(d[b])}}if(c){phe.select.setSelectedIndex(c,"0")}}};absa.apps.changeNotifyMeRecipientForAccount.setPurchasesValueForCheckBox=function(c){var b=bb.selector.queryAncestor(c,".ap-changeNotifyMeRecipient-purchases-cell");var a=bb.selector.query(b,".ap-changeNotifyMeRecipient-selectedOption");if(phe.checkBox.isChecked(c)){phe.hiddenField.setValue(a,"29")}else{phe.hiddenField.setValue(a,"")}};absa.apps.changeNotifyMeRecipientForAccount.setPurchasesValue=function(d){var a=bb.selector.queryAncestor(d,".ap-changeNotifyMeRecipient-table-row");var c=bb.selector.queryAll(a,".ap-changeNotifyMeRecipient-checkBox");var e=bb.selector.query(a,".ap-changeNotifyMeRecipient-selectAll");if(phe.select.getValue(d)==""){phe.checkBox.setAttribute(e,"checked","false")}else{for(var b=0;b<c.length;b++){if(phe.checkBox.isChecked(c[b])){phe.checkBox.setAttribute(e,"checked","true")}else{phe.checkBox.setAttribute(e,"checked","false");break}}}};absa.apps.changeNotifyMeRecipientForAccount.deSelectAll=function(e){var a=bb.selector.queryAncestor(e,".ap-changeNotifyMeRecipient-table-row");var d=bb.selector.queryAll(a,".ap-changeNotifyMeRecipient-checkBox");var c=bb.selector.query(a,".ap-changeNotifyMeRecipient-purchases-select");var f=bb.selector.query(a,".ap-changeNotifyMeRecipient-selectAll");if(!phe.checkBox.isChecked(e)){phe.checkBox.setAttribute(f,"checked","false")}for(var b=0;b<d.length;b++){if(phe.checkBox.isChecked(d[b])){phe.checkBox.setAttribute(f,"checked","true")}else{phe.checkBox.setAttribute(f,"checked","false");break}}if(c&&phe.select.getValue(c)==""){phe.checkBox.setAttribute(f,"checked","false")}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeRedemptionAccount=absa.apps.changeRedemptionAccount||{};absa.apps.changeRedemptionAccount.onChangeAcc=function(f){var g=bb.selector.queryAncestor(f,".ap-changeRedemption");var d=bb.selector.queryAll(g,".ap-changeRedemption-rows-accountNumber");var a=phe.select.getValue(f);var c=bb.selector.query(f.parentNode,".ap-changeRedemption-accountType");for(var e=0;e<d.length;e++){if(bb.html.hasClass(d[e],"ap-changeRedemption-rows-"+a)){phe.rows.show(d[e]);var h=bb.selector.queryAll(d[e],".ap-changeRedemption-field");for(var b=0;b<h.length;b++){absa.apps.changeRedemptionAccount.removeAccountNumberFromFieldName(h[b])}}else{phe.rows.hide(d[e]);var h=bb.selector.queryAll(d[e],".ap-changeRedemption-field");for(var b=0;b<h.length;b++){absa.apps.changeRedemptionAccount.appendFieldNameWithAccountNumber(h[b],a)}}}if(c){phe.hiddenField.setValue(c,phe.option.getAttribute(f.options[f.selectedIndex],"data-accountType"))}};absa.apps.changeRedemptionAccount.appendFieldNameWithAccountNumber=function(b,a){var c=phe.common.getAttribute(b,"name");c+="-"+a;phe.common.setAttribute(b,"name",c)};absa.apps.changeRedemptionAccount.removeAccountNumberFromFieldName=function(a){var b=phe.common.getAttribute(a,"name");var c=b.split("-");b=c[0];phe.common.setAttribute(a,"name",b)};absa.apps.changeRedemptionAccount.printChangeRedemptionAccount=function(a){absa.openReport("report/changeRedemption.pdf?feIdentifier=changeRedemptionAccountDetails&transDateTime="+a,"totalInvestmentPortfolio")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.changeRewardsMembershipDetails=absa.apps.changeRewardsMembershipDetails||{};absa.apps.changeRewardsMembershipDetails.onDebitOrderFrequencyChange=function(e){var h=bb.selector.queryAncestor(e,".ui-form");var b=bb.selector.query(h,".ap-changeRewardsMembershipDetails-defaultFeeRow");var f=bb.selector.query(h,".ap-changeRewardsMembershipDetails-annualFee");var d=bb.selector.query(h,".ap-changeRewardsMembershipDetails-monthlyFee");var c=bb.selector.query(h,".ap-changeRewardsMembershipDetails-defaultDebitDayCell");var a=bb.selector.query(h,".ap-changeRewardsMembershipDetails-yearlyDebitDayCell");var g=bb.selector.query(h,".ap-changeRewardsMembershipDetails-monthlyDebitDayCell");if(phe.select.getValue(e)==0){bb.html.removeClass(g,"ap-common-hide");bb.html.addClass(a,"ap-common-hide");bb.html.addClass(c,"ap-common-hide");bb.html.removeClass(d,"ap-common-hide");bb.html.addClass(f,"ap-common-hide");bb.html.addClass(b,"ap-common-hide")}else{bb.html.removeClass(a,"ap-common-hide");bb.html.addClass(g,"ap-common-hide");bb.html.addClass(c,"ap-common-hide");bb.html.removeClass(f,"ap-common-hide");bb.html.addClass(d,"ap-common-hide");bb.html.addClass(b,"ap-common-hide")}};absa.apps.changeRewardsMembershipDetails.onFromAccountNoSelectChange=function(b){var c=bb.selector.queryAncestor(b,".ui-form");var a=bb.selector.query(c,".ap-changeRewardsMembershipDetails-hiddenFromAccountNo");phe.hiddenField.setValue(a,phe.select.getSelectedText(b))};absa.apps.changeRewardsMembershipDetails.goToManagePersonalDetails=function(){gadgets.pubsub.publish("goTo:profile/managePersonalDetails/managePersonalDetails")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.creditProtectionPlan=absa.apps.creditProtectionPlan||{};absa.apps.creditProtectionPlan.onApplyButtonClick=function(j,a,d){var b=bb.selector.queryAncestor(j,".ap-accounts-tabbox");var k=bb.selector.queryAncestor(j,".ap-applyCPP");var i=bb.selector.query(b,".ap-applyforcpp-tabHead");var e=bb.selector.query(b,".ap-applyforcpp-tabBody");var g=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountType"));var h=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountNo"));var m=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-age"));var f=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-overDraftLimit"));var l=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountHolderName"));var c="proxy?pipe=genericWebservice&ws=ApplyForNewPolicyWebService&action=applyForCreditProtection&applyInfoClick=InsuranceInfo&accountType="+g+"&accountNo="+h+"&age="+m+"&overDraftLimit="+f+"&accountHolderName="+l;phe.common.setAttribute(k,"proxyurl",c);absa.lazyLoadNode(k,true)};absa.apps.creditProtectionPlan.onConfirmClick=function(g){var a=bb.selector.queryAncestor(g,".ap-accounts-tabbox");var c=bb.selector.query(a,".ap-applyforcpp-tabBody");var e=phe.hiddenField.getValue(bb.selector.query(a,".ap-applyforcpp-accountType"));var h=phe.hiddenField.getValue(bb.selector.query(a,".ap-applyforcpp-accountNo"));var j=phe.hiddenField.getValue(bb.selector.query(a,".ap-applyforcpp-age"));var d=phe.hiddenField.getValue(bb.selector.query(a,".ap-applyforcpp-overDraftLimit"));var k=phe.hiddenField.getValue(bb.selector.query(a,".ap-applyforcpp-accountHolderName"));var b="proxy?pipe=genericWebservice&ws=ViewPolicyInformationWebService&action=viewPolicyDetailsForCPP&accountType="+e+"&accountNo="+h+"&age="+j+"&overDraftLimit="+d+"&accountHolderName="+k;var f=bb.selector.query(a,".ap-applyforcpp-tabHead");var c=bb.selector.query(a,".ap-applyforcpp-tabBody");phe.tabBody.setAttribute(c,"proxyurl",b);var i=bb.selector.query(a,".app-CreditPlan-Confirm");absa.form.validateAndSubmit(i)};absa.apps.creditProtectionPlan.onCancelButtonClick=function(h,a){var b=bb.selector.queryAncestor(h,".ap-accounts-tabbox");var f=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountType"));var i=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountNo"));var j=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-age"));var e=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-overDraftLimit"));var k=phe.hiddenField.getValue(bb.selector.query(b,".ap-applyforcpp-accountHolderName"));var c="proxy?pipe=genericEmptyResponse&xslFile=Insurance/applyForCPP&accountType="+f+"&accountNo="+i+"&age="+j+"&overDraftLimit="+e+"&accountHolderName="+k;var g=bb.selector.query(b,".ap-applyforcpp-tabHead");var d=bb.selector.query(b,".ap-applyforcpp-tabBody");phe.tabBody.setAttribute(d,"proxyurl",c)};absa.apps.creditProtectionPlan.onClickOfDone=function(c){var d=bb.selector.queryAncestor(c,".ap-creditPlan-Confirm");var a=bb.selector.queryAll(document.body,".ap-applyforcpp-tabBody");for(var b=0;b<a.length;b++){absa.lazyLoadNode(a[b],true)}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.interestPayoutInst=absa.apps.interestPayoutInst||{};absa.apps.interestPayoutInst.selectToAccountForInterestPayment=function(d,f,o,i,h,n,g,c,e){var b=phe.select.getValue(d);var m=bb.selector.queryAncestor(d,".ap-updateAccountConfigInstr-form1");var l=bb.selector.query(m,".ap-updateAccountConfigInst-containerPaymentInstruction-internal");var k=bb.selector.query(m,".ap-updateAccountConfigInst-bankCode");var j=phe.hiddenField.getValue(k);if(b=="internal"||b=="external"){var a="";if(b=="internal"){if(j==="632005"){a="proxy?pipe=genericEmptyResponse&xslFile=RetrieveAccountConfig/getInterestPaymentInstruction&payTo=internal&toAccount="+f+"&bankName="+o+"&branchCode="+i+"&paymentAccountNo="+h+"&toAccountRef="+n+"&accountHolderName="+g+"&instAccountType="+c+"&accountType="+e}else{a="proxy?pipe=genericEmptyResponse&xslFile=RetrieveAccountConfig/getInterestPaymentInstruction&payTo=internal"}}else{if(j==="632005"){a="proxy?pipe=genericEmptyResponse&xslFile=RetrieveAccountConfig/getInterestPaymentInstruction&payTo=external"}else{a="proxy?pipe=genericEmptyResponse&xslFile=RetrieveAccountConfig/getInterestPaymentInstruction&payTo=external&toAccount="+f+"&bankName="+o+"&branchCode="+i+"&paymentAccountNo="+h+"&toAccountRef="+n+"&accountHolderName="+g+"&instAccountType="+c+"&accountType="+e}}l.setAttribute("proxyurl",a);absa.lazyLoadNode(l,true,function(p){phe.common.show(l)})}else{phe.common.hide(l)}};absa.apps.interestPayoutInst.onBankSelect=function(d){var c=bb.selector.queryAncestor(d,".ap-updateAccountConfigInstr-form1");var b=bb.selector.query(c,'input[name="branchCode"]');var a=bb.selector.query(c,".ap-applySaveInvest-branchCode");var e=bb.selector.query(c,".ap-applySaveInvest-branchName");phe.textBox.setValue(d,bb.string.trim(phe.textBox.getValue(d)));phe.textBox.setValue(b,"");absa.form.validate.checkElement(d);phe.textBox.focus(b);phe.suggestBox.setAttribute(b,"multipleRequest","proxy?pipe=applicationCachedGenericWebservice&ws=BeneficiaryWebService&action=getBranchCodes&bank="+d.value)};absa.apps.interestPayoutInst.onStepOneResetButtonClick=function(f,l,q,m,h,g,p,e,d,a,r,c){var n=bb.selector.queryAncestor(f,".ap-updateAccountConfigInstr-form1");var i=bb.selector.query(n,".ap-updateAccountConfigInstr-capDay");var h=bb.selector.query(n,".ap-updateAccountConfigInstr-toAccount");var j=bb.selector.query(n,".ap-updateAccountConfigInstr-addPaymentInstruction");var o=bb.selector.query(n,".ap-applySaveInvest-hidden-productCode");var b=phe.hiddenField.getValue(o);var k=phe.select.getValue(h);phe.form.reset(n);if(!(j)){absa.apps.interestPayoutInst.selectToAccountForInterestPayment(h,h,g,p,e,d,a,r,c)}else{phe.checkBox.setValue(j,"yes");absa.apps.interestPayoutInst.showHidePaymentInstruction(j,b)}};absa.apps.interestPayoutInst.validateBankSelection=function(a){var c=bb.selector.queryAncestor(a,".ap-updateAccountConfigInstr-form1");var b=bb.selector.query(c,"[name=bankName]");if(!absa.form.validate.checkElement(b)){phe.textBox.focus(b);phe.textBox.setAttribute(a,"required","false");absa.form.validate.checkElement(a);phe.textBox.setAttribute(a,"required","true");phe.helpText.showHelptext(b)}};absa.apps.interestPayoutInst.onCapDayChangedTerm=function(r,o){var n=bb.selector.queryAncestor(r,".ap-updateAccountConfigInstr-form1");var i=bb.selector.query(n,".ap-updateAccountConfigInstr-capitalisationDayTerm");var q=bb.selector.query(n,".ap-updateAccountConfigInstr-capFrequency");var e=bb.selector.query(n,".ap-updateAccountConfigInstr-nextCapDateTerm");var p=bb.selector.query(n,".ap-updateAccountConfigInstr-maturityDateTerm");var a=phe.hiddenField.getValue(o);var g=phe.select.getValue(i);var c=phe.inputReadOnlyText.getValue(e);var m=phe.inputReadOnlyText.getValue(q);var t="";if(p!=null){t=phe.inputReadOnlyText.getValue(p)}if(g<10){g="0"+g}var d=absa.apps.interestPayoutInst.formatCapFrenquency(m);var f=absa.date.formatDate(absa.date.getNextCapDate(new Date(),parseInt(g,10),parseInt(d,10)));var b=parseInt(c.substring(5,7),10);var k=parseInt(t.substring(5,7));var l=parseInt(t.substring(8,10));var j=absa.date.getDateNow();var h=parseInt(j.substring(8,4));var s=parseInt(j.substring(8,10));if(t!=""){if(absa.date.getDaysDiff(f,t)<0){if(b||k==h){if(g<=s||g>l){phe.select.setValue(i,a);phe.inputReadOnlyText.setValue(e,absa.date.formatDate(absa.date.getNextCapDate(new Date(),parseInt(a,10),parseInt(d,10))))}else{phe.inputReadOnlyText.setValue(e,t)}}}else{phe.inputReadOnlyText.setValue(e,f)}}else{phe.inputReadOnlyText.setValue(e,f)}};absa.apps.interestPayoutInst.onCapDayChangedSaving=function(g){var h=bb.selector.queryAncestor(g,".ap-updateAccountConfigInstr-form1");var e=bb.selector.query(h,".ap-updateAccountConfigInstr-capDay");var j=bb.selector.query(h,".ap-updateAccountConfigInstr-nextCapDateSaving");var f=bb.selector.query(h,".ap-updateAccountConfigInstr-intCapFreq");var b=phe.select.getValue(e);var d=phe.inputReadOnlyText.getValue(j);var a=phe.inputReadOnlyText.getValue(f);if(b<10){b="0"+b}var c=absa.apps.interestPayoutInst.formatCapFrenquency(a);var i=absa.date.formatDate(absa.date.getNextCapDate(new Date(),parseInt(b,10),parseInt(c,10)));phe.inputReadOnlyText.setValue(j,i)};absa.apps.interestPayoutInst.onCapDayChangedNotice=function(t){var p=bb.selector.queryAncestor(t,".ap-updateAccountConfigInstr-form1");var j=bb.selector.query(p,".ap-updateAccountConfigInstr-capitalisationDayNotice");var e=bb.selector.query(p,".ap-updateAccountConfigInstr-nextCapDateNotice");var s=bb.selector.query(p,".ap-updateAccountConfigInstr-intFrequency");var q=bb.selector.query(p,".ap-updateAccountConfigInstr-productCode");var b=phe.hiddenField.getValue(q);var g=phe.select.getValue(j);var c=phe.inputReadOnlyText.getValue(e);var o=phe.inputReadOnlyText.getValue(s);var k=bb.selector.query(p,".ap-updateAccountConfigInstr-capitalisationDayNoticeDeposit");var h=phe.hiddenField.getValue(k);if(g<10){g="0"+g}var d=absa.apps.interestPayoutInst.formatCapFrenquency(o);var f=absa.date.formatDate(absa.date.getNextCapDate(new Date(),parseInt(g,10),parseInt(d,10)));if(b=="09501"){var r=bb.selector.query(p,".ap-updateAccountConfigInstr-maturityDateNotice");var v="";if(r!=null){v=phe.inputReadOnlyText.getValue(r)}var a=parseInt(c.substring(5,7),10);var m=parseInt(v.substring(5,7));var n=parseInt(v.substring(8,10));var l=absa.date.getDateNow();var i=parseInt(l.substring(8,4));var u=parseInt(l.substring(8,10));if(v!=""){if(absa.date.getDaysDiff(f,v)<0){if(a||m==i){if(g<=u||g>n){phe.select.setValue(j,h);phe.inputReadOnlyText.setValue(e,absa.date.formatDate(absa.date.getNextCapDate(new Date(),parseInt(h,10),parseInt(d,10))))}else{phe.inputReadOnlyText.setValue(e,v)}}}else{phe.inputReadOnlyText.setValue(e,f)}}else{phe.inputReadOnlyText.setValue(e,f)}}else{phe.inputReadOnlyText.setValue(e,f)}};absa.apps.interestPayoutInst.formatDate=function(c){var a=c.getDate();if(a<10){a="0"+a}var b=c.getMonth()+1;if(b<10){b="0"+b}var e=c.getFullYear();return e+"-"+b+"-"+a};absa.apps.interestPayoutInst.showHidePaymentInstruction=function(d,e){phe.checkBox.setAttribute(d,"disabled","true");var f=bb.selector.queryAncestor(d,".ap-updateAccountConfigInstr-form1");var a=bb.selector.query(f,".ap-updateAccountConfigInst-containerInterestPaymentInstruction");var c=bb.selector.query(f,".ap-updateAccountConfigInstr-addPaymentInstruction");var e=phe.hiddenField.getValue(e);if(phe.checkBox.isChecked(d)){var b="proxy?pipe=genericEmptyResponse&xslFile=RetrieveAccountConfig/getInterestPaymentInstruction&payTo=show&formClass=placeInstruction&productCode="+e;a.setAttribute("proxyurl",b);absa.lazyLoadNode(a,true,function(g){phe.common.show(a);phe.checkBox.setAttribute(c,"disabled","false")});phe.checkBox.setValue(c,"yes")}else{phe.common.hide(a);phe.checkBox.setValue(c,"no");phe.checkBox.setAttribute(c,"disabled","false")}};absa.apps.interestPayoutInst.globals=absa.apps.interestPayoutInst.globals||{};absa.apps.interestPayoutInst.globals.nOldRange=0;absa.apps.interestPayoutInst.onResetAxisTableSelection=function(a){var d=phe.axisTable.getAttribute(a,"selectedRowValue");var c=phe.axisTable.getAttribute(a,"selectedColValue");var b=bb.selector.queryAncestor(a,".ui-grid");var f=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(f){phe.hiddenField.setValue(f,d)}var e=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,c)}absa.apps.interestPayoutInst.updateInterestRateDisplay(a,0)};absa.apps.interestPayoutInst.onSelectRowCallback=function(b){var d=phe.axisTable.getAttribute(b,"selectedRowValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(e){phe.hiddenField.setValue(e,d)}var a=phe.axisTable.getSelectedCellValue(b);absa.apps.interestPayoutInst.updateInterestRateDisplay(b,a)};absa.apps.interestPayoutInst.onSelectColCallback=function(b){var d=phe.axisTable.getAttribute(b,"selectedColValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,d)}var a=phe.axisTable.getSelectedCellValue(b);absa.apps.interestPayoutInst.updateInterestRateDisplay(b,a)};absa.apps.interestPayoutInst.onDepositAmountTextBoxAxisTableChange=function(d){var q=phe.textBox.getValue(d);var g=phe.textBox.getAttribute(d,"data-min");var k=phe.textBox.getAttribute(d,"data-max");if(isNaN(q)){return}else{if((Number(q)<Number(g))){return}else{if((Number(q)>Number(k))){phe.textBox.setValue(d,k);return}else{var u=bb.selector.queryAncestor(d,".ui-grid");var o=bb.selector.query(u,".ap-applySaveInvest-axisTableA");var w=phe.textBox.getAttribute(d,"data-nbrOfRanges");var j=phe.textBox.getAttribute(d,"data-fromAmountRanges");var r=phe.textBox.getAttribute(d,"data-toAmountRanges");var h=j.split(",");var a=r.split(",");var s=0;var l=new Number(q);for(var n=0;n<h.length;n++){var p=new Number(h[n]);var e=new Number(a[n]);if(l>=p&l<=e){s=p;break}}var b=false;if(Number(s)!=Number(absa.apps.createAccount.globals.nOldRange)){b=true}var y=0;var t=0;var z=0;var c=bb.selector.query(o,"th.hlt-head");var f=bb.selector.query(o,"td.hlt-head");if(f){var v=bb.selector.query(f.parentNode,"td.hlt-col");if(c!=null){y=c.getAttribute("value")}if(f!=null){t=f.getAttribute("value")}if(v!=null){z=v.getAttribute("value")}absa.apps.interestPayoutInst.updateInterestRateDisplay(d,z)}if(b){var i="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=axisTableData&amount="+q+"&withdrawalPerc="+t+"&noticeDays="+y;var m=bb.selector.query(o,".ui-axisTableBody");phe.axisTable.setAttribute(m,"dataFile",i);phe.axisTable.reload(m);absa.apps.interestPayoutInst.globals.nOldRange=Number(s)}}}}};absa.apps.interestPayoutInst.updateInterestRateDisplay=function(c,a){var e=bb.selector.queryAncestor(c,".ap-applySaveInvest-noticeSelectGrid");var b=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-txt");var d=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-interestRate");phe.hiddenField.setValue(d,a);b.innerHTML=new Number(a).toFixed(2)};absa.apps.interestPayoutInst.onDepositAmountSliderBlur=function(a){var c=phe.slider.getValue(a);var e=bb.selector.queryAncestor(a,".ap-applySaveInvest-noticeSelectGrid");var d=bb.selector.query(e,".ap-applySaveInvest-withdrawalPerc");var g=phe.slider.getValue(d);var f=bb.selector.query(e,".ap-applySaveInvest-noticePeriod");var b=phe.slider.getValue(f);absa.apps.interestPayoutInst.updateInterestYouWillEarn(a,c,g,b)};absa.apps.interestPayoutInst.onWithdrawalPercSliderBlur=function(b){var d=phe.slider.getValue(b);var e=bb.selector.queryAncestor(b,".ap-applySaveInvest-noticeSelectGrid");var a=bb.selector.query(e,".ap-applySaveInvest-depositAmount");var g=phe.textBox.getValue(a);var f=bb.selector.query(e,".ap-applySaveInvest-noticePeriod");var c=phe.slider.getValue(f);absa.apps.interestPayoutInst.updateInterestYouWillEarn(b,g,d,c)};absa.apps.interestPayoutInst.onNoticePeriodSliderBlur=function(b){var c=phe.slider.getValue(b);var e=bb.selector.queryAncestor(b,".ap-applySaveInvest-noticeSelectGrid");var a=bb.selector.query(e,".ap-applySaveInvest-depositAmount");var g=phe.textBox.getValue(a);var d=bb.selector.query(e,".ap-applySaveInvest-withdrawalPerc");var f=phe.slider.getValue(d);absa.apps.interestPayoutInst.updateInterestYouWillEarn(b,g,f,c)};absa.apps.interestPayoutInst.updateInterestYouWillEarn=function(a,e,d,b){var c="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=getInterestRate&amount="+e+"&withdrawalPerc="+d+"&noticeDays="+b;absa.io.makeRequest(c,function(i){if(!i.errors.length){var f=bb.html.createElementFromString(i.text);var h=f.getAttribute("interestRate");var g=f.getAttribute("noticeDays");var l=bb.selector.queryAncestor(a,".ap-applySaveInvest-noticeSelectGrid");var j=bb.selector.query(l,".ap-applySaveInvest-interestRateGraph-txt");var k=bb.selector.query(l,".ap-applySaveInvest-interestRateGraph-interestRate");phe.hiddenField.setValue(k,h);j.innerHTML=h}else{absa.showIOErrorMessage(oContentBody)}})};absa.apps.interestPayoutInst.axisTableLoaded=function(a){};absa.apps.interestPayoutInst.formatCapFrenquency=function(a){var b;if(a=="Monthly"||a=="MONTHLY"){b=1}else{if(a=="Quarterly"||a=="QUARTERLY"){b=3}else{if(a=="Half yearly"||a=="HALF-YEARLY"){b=6}else{if(a=="Yearly"||a=="YEARLY"){b=12}}}}return b};absa.apps.interestPayoutInst.onUpdateStep1Submit=function(g){var h=bb.selector.queryAncestor(g,".ap-updateAccountConfigInstr-form1");var e=bb.selector.queryAncestor(g,".ap-createInterestPayoutInstr-wizard");var d=bb.selector.query(h,".ap-updateAccountConfigInst-noInterestRate");var c=bb.selector.query(h,".ap-applySaveInvest-interestRateGraph-interestRate");var b=phe.hiddenField.getValue(c);var f=bb.selector.query(h,".ap-updateAccountConfigInst-productCode");var a=phe.hiddenField.getValue(f);if(a=="09308"){if(Number(b)<=0){phe.message.show(d);return}else{phe.message.hide(d);absa.form.validateAndSubmit(h)}}else{phe.message.hide(d);absa.form.validateAndSubmit(h)}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.manageAccount=absa.apps.manageAccount||{};absa.apps.manageAccount.onDeleteClick=function(k,n,d,h,p,l,g,c,f,m,b,j){try{var a="proxy?pipe=genericEmptyResponse&xslFile=ManageAccountWebService/promptDebitOrderInstruction&mode=deleteDetails&srcAcc="+n+"&startDate="+d+"&endDate="+h+"&srcClrCode="+p+"&nextPaymentDate="+l+"&amount="+g+"&payDay="+c+"&trgInstCode="+f+"&srcStmtRef="+m+"&freq="+b+"&remainingPayments="+j;var o=absa.locale["Accounts/ManageAccount/Label/DeleteDebitOrderInstruction"];absa.modal.loadModal(a,o)}catch(i){}};absa.apps.manageAccount.onUpdateClick=function(k,n,d,h,p,l,g,c,f,m,b,j){try{var a="proxy?pipe=genericEmptyResponse&xslFile=ManageAccountWebService/promptDebitOrderInstruction&mode=updateDetails&srcAcc="+n+"&startDate="+d+"&endDate="+h+"&srcClrCode="+p+"&nextPaymentDate="+l+"&amount="+g+"&payDay="+c+"&trgInstCode="+f+"&srcStmtRef="+m+"&freq="+b+"&remainingPayments="+j;var o=absa.locale["Accounts/ManageAccount/Label/UpdateDebitOrderInstruction"];absa.modal.loadModal(a,o)}catch(i){}};absa.apps.manageAccount.reloadTable=function(){var a=bb.selector.query(window.document,".ap-promptDebitOrderInstruction-table");phe.table.reload(a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.manageInsurancePolicy=absa.apps.manageInsurancePolicy||{};absa.apps.manageInsurancePolicy.onManagePolicyButtonClick=function(b,a,c){gadgets.pubsub.publish("goTo:insurance/insurancelandingpage",{policyNumber:a,position:c})};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.notice=absa.apps.notice||{};absa.apps.notice.validateNoticeAmount=function(d){var h=bb.selector.queryAncestor(d,".ap-placeNotice-form1");var g=bb.selector.query(h,".ap-placeNotice-amountForNotice");var c=bb.selector.query(h,".ap-placeNotice-addPaymentInstruction");try{var a=parseFloat(phe.textBox.getValue(d));var b=parseFloat(phe.hiddenField.getValue(g));if(a>b){return false}else{if(c!==null){phe.checkBox.setAttribute(c,"disabled","false")}return true}}catch(f){return false}};absa.apps.notice.validateNoticeAmountUpdate=function(c){var h=bb.selector.queryAncestor(c,".ap-placeNotice-form1");var b=bb.selector.query(h,".ap-placeNotice-addPaymentInstruction");var f=bb.selector.query(h,".ap-placeNotice-origAmount");try{var a=parseFloat(phe.textBox.getValue(c));var g=parseFloat(phe.hiddenField.getValue(f));if(a>g){return false}else{if(b!==null){phe.checkBox.setAttribute(b,"disabled","false")}return true}}catch(d){return false}};absa.apps.notice.onChangeAmount=function(c){var f=bb.selector.queryAncestor(c,".ap-placeNotice-form1");var b=bb.selector.query(f,".ap-placeNotice-withdrawalAmount");var a=bb.selector.query(f,".ap-placeNotice-paymentAmount");try{phe.hiddenField.setValue(b,phe.textBox.getValue(c));absa.apps.notice.onChangePaymentAmount(a)}catch(d){}};absa.apps.notice.validatePaymentAmount=function(a){var f=bb.selector.queryAncestor(a,".ap-placeNotice-form1");var c=bb.selector.query(f,".ap-placeNotice-noticeAmount");try{var b=parseFloat(phe.textBox.getValue(a));var g=parseFloat(phe.hiddenField.getValue(c));if(b>g){return false}else{return true}}catch(d){return false}};absa.apps.notice.onChangePaymentAmount=function(a){var g=bb.selector.queryAncestor(a,".ap-placeNotice-form1");var d=bb.selector.query(g,".ap-placeNotice-withdrawalAmount");var c=bb.selector.query(g,".ap-placeNotice-noticeAmount");try{var b=parseFloat(phe.textBox.getValue(a));var h=parseFloat(phe.textBox.getValue(c));if(h>=b){phe.hiddenField.setValue(d,Math.ceil((h-b)*100)/100)}}catch(f){}};absa.apps.notice.onStepOneResetButtonClick=function(b){var c=bb.selector.queryAncestor(b,".ap-placeNotice-form1");var a=bb.selector.query(c,".ap-placeNotice-addPaymentInstruction");phe.form.reset(c);if((a)){phe.checkBox.setValue(a,"yes");absa.apps.notice.showHidePaymentInstruction(a)}};absa.apps.notice.showHidePaymentInstruction=function(e){phe.checkBox.setAttribute(e,"disabled","true");var f=bb.selector.queryAncestor(e,".ap-placeNotice-form1");var b=bb.selector.query(f,".ap-placeNotice-paymentContainer");var c=bb.selector.query(f,".ap-placeNotice-noticeAmount");if(phe.checkBox.isChecked(e)){var d="proxy?pipe=genericEmptyResponse&xslFile=Notice/paymentInstruction&payTo=show&formClass=placeNotice";b.setAttribute("proxyurl",d);absa.lazyLoadNode(b,true,function(h){phe.common.show(b);var g=bb.selector.query(f,".ap-placeNotice-paymentAmount");absa.apps.notice.onChangePaymentAmount(g);phe.checkBox.setAttribute(e,"disabled","false")});phe.checkBox.setValue(e,"yes")}else{phe.common.hide(b);phe.checkBox.setValue(e,"no");var a=bb.selector.query(f,".ap-placeNotice-paymentAmount");phe.textBox.setValue(a,0);absa.apps.notice.onChangeAmount(c);phe.checkBox.setAttribute(e,"disabled","false")}};absa.apps.notice.showHideUpadtePaymentInstruction=function(e,d,g,f,b,c){phe.checkBox.setAttribute(e,"disabled","true");var j=bb.selector.queryAncestor(e,".ap-placeNotice-form1");var i=bb.selector.query(j,".ap-placeNotice-paymentContainer");var h=bb.selector.query(j,".ap-placeNotice-noticeAmount");if(phe.checkBox.isChecked(e)){var a="proxy?pipe=genericEmptyResponse&xslFile=Notice/paymentInstruction&payTo=show&formClass=placeNotice&accountNo="+d+"&branchCode="+g+"&amount="+f+"&reference="+b+"&accountType="+c;i.setAttribute("proxyurl",a);absa.lazyLoadNode(i,true,function(m){phe.common.show(i);var n=bb.selector.query(j,".ap-placeNotice-toAccountDropDown");if(null!=d&&""!=d){phe.select.setValue(n,d)}var l=bb.selector.query(j,".ap-placeNotice-paymentAmount");absa.apps.notice.onChangePaymentAmount(l);phe.checkBox.setAttribute(e,"disabled","false")});phe.checkBox.setValue(e,"yes")}else{phe.common.hide(i);phe.checkBox.setValue(e,"no");var k=bb.selector.query(j,".ap-placeNotice-paymentAmount");phe.textBox.setValue(k,0);absa.apps.notice.onChangeAmount(h);phe.checkBox.setAttribute(e,"disabled","false")}};absa.apps.notice.onDeleteClick=function(g,a,f,b){try{var d="proxy?pipe=genericWebservice&ws=NoticeWebService&action=promptForNDUpdateNoticeInstruction&view=delete&accountNumber="+a+"&dbSeq="+f+"&dueDate="+b;var c=absa.locale["Accounts/Notice/Label/DeleteNoticeInstruction"];absa.modal.loadModal(d,c)}catch(h){}};absa.apps.notice.onUpdateClick=function(g,a,f,b){try{var d="proxy?pipe=genericWebservice&ws=NoticeWebService&action=promptForNDUpdateNoticeInstruction&accountNumber="+a+"&dbSeq="+f+"&dueDate="+b;var c=absa.locale["Accounts/Notice/Label/UpdateNoticeInstruction"];absa.modal.loadModal(d,c,absa.apps.notice.onUpdateFormLoad)}catch(h){}};absa.apps.notice.reloadTable=function(){var a=bb.selector.query(window.document,".ap-viewNoticeHistory-table");phe.table.reload(a)};absa.apps.notice.onUpdateStep1Submit=function(h){var v=bb.selector.queryAncestor(h,".ap-placeNotice-form1");var s=bb.selector.queryAncestor(h,".ap-placeNotice-Container");var y=bb.selector.query(v,".ap-placeNotice-nothingChanged");var p=bb.selector.query(v,".ap-placeNotice-addPaymentInstruction");var q=bb.selector.query(v,".ap-placeNotice-origAmount");var e=phe.hiddenField.getValue(q);var j=bb.selector.query(v,".ap-placeNotice-origDueDate");var f=phe.hiddenField.getValue(j);var x=bb.selector.query(v,".ap-placeNotice-origPaymentAmount");var k=phe.hiddenField.getValue(x);var r=bb.selector.query(v,".ap-placeNotice-paymentAccountNumber");var i=phe.hiddenField.getValue(r);var l=bb.selector.query(v,".ap-placeNotice-origBenReference");var a=phe.hiddenField.getValue(l);var g=bb.selector.query(v,".ap-placeNotice-noticeAmount");var u=phe.textBox.getValue(g);var o=bb.selector.query(v,".ap-placeNotice-dueDate");var t=phe.datePicker.getValue(o);var n=bb.selector.query(v,".ap-placeNotice-paymentAmount");var c=phe.textBox.getValue(n);var b=bb.selector.query(v,".ap-placeNotice-toAccountDropDown");var d=phe.textBox.getValue(b);var w=bb.selector.query(v,".ap-placeNotice-beneficiaryReference");var m=phe.textBox.getValue(w);if(phe.checkBox.isChecked(p)){if(e!=u||f!=t||k!=c||i!=d||a!=m){phe.message.hide(y);absa.form.validateAndSubmit(v)}else{phe.message.show(y)}}else{if(e!=u||f!=t){phe.message.hide(y);absa.form.validateAndSubmit(v)}else{phe.message.show(y)}}};absa.apps.notice.onUpdateFormLoad=function(b,a){var c=bb.selector.query(b,".ap-placeNotice-paymentAccountNumber");if(c!=undefined||c!=null){var d=bb.selector.query(b,".ap-placeNotice-toAccountDropDown");phe.select.setValue(d,phe.hiddenField.getValue(c))}};absa.apps.notice.onUpdateResetButtonClick=function(h,d,g,f,b,c,e){var j=bb.selector.queryAncestor(h,".ap-placeNotice-form1");var e=bb.selector.query(j,".ap-placeNotice-addPaymentInstruction");var i=bb.selector.query(j,".ap-placeNotice-paymentContainer");phe.form.reset(j);if(phe.checkBox.isChecked(e)){phe.checkBox.setValue(e,"yes");var a="proxy?pipe=genericEmptyResponse&xslFile=Notice/paymentInstruction&payTo=show&formClass=placeNotice";i.setAttribute("proxyurl",a);absa.lazyLoadNode(i,true,function(n){phe.common.show(i);var m=bb.selector.query(j,".ap-placeNotice-paymentAmount");var o=bb.selector.query(j,".ap-placeNotice-toAccountDropDown");var l=bb.selector.query(j,".ap-placeNotice-beneficiaryReference");phe.textBox.setValue(m,f);phe.textBox.setValue(o,d);phe.textBox.setValue(l,b);phe.checkBox.setValue(e,"yes");phe.checkBox.setAttribute(e,"disabled","false")})}else{phe.common.hide(i);phe.checkBox.setValue(e,"no");var k=bb.selector.query(j,".ap-placeNotice-paymentAmount");phe.textBox.setValue(k,0);phe.checkBox.setAttribute(e,"disabled","false")}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.mccpBalance=absa.apps.mccpBalance||{};var count=1;absa.apps.mccpBalance.checkPolling=function(c){var b=bb.selector.query(document.body,".ap-mccpAccountBalance-form");var a="proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getMCCPAccountBalances&accountNo="+c+"&mode=mccpBalances";if(bb.browser.ie){absa.apps.internationalInterAccountTransfer.showLoadingMessage(b,'<b>Processing request...</b><br> This will only take about <font color="red"><b> 30 </b></font> seconds')}else{phe.loadingMessage.showLoadingMessage(b,'<b>Processing request...</b><br> This will only take about <font color="red"><b> 30 </b></font> seconds')}absa.io.makeRequest(a,function(e){if(!e.errors.length){phe.loadingMessage.hideLoadingMessage(b);var h=bb.html.createElementFromString(e.text);if(h){var d=bb.selector.query(h,".ap-MCCPbalance-data");if(d){var g=bb.selector.query(d,".ap-mccpBalance-errorCode");if(phe.hiddenField.getValue(g)=="2"){mccpModal=bb.selector.query(b,".ap-MCCPBalanceAlert");phe.modal.showModal(0.5,mccpModal,b,true)}else{if(phe.hiddenField.getValue(g)!="0"){var f=bb.selector.query(b,".ap-mccpBalance-errorMsg");phe.common.show(f)}}}}}})};absa.apps.mccpBalance.fetchMccpAccountBalanceSecondTime=function(b){var a="proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getMCCPAccountBalances&accountNo="+b+"&mode=mccpBalances";if(bb.browser.ie){absa.apps.internationalInterAccountTransfer.showLoadingMessage(oForm,'<b>Processing request...</b><br> This will only take about <font color="red"><b> 30 </b></font> seconds')}else{phe.loadingMessage.showLoadingMessage(oForm,'<b>Processing request...</b><br> This will only take about <font color="red"><b> 30 </b></font> seconds')}absa.io.makeRequest(a,function(d){if(!d.errors.length){phe.loadingMessage.hideLoadingMessage(g);var h=bb.html.createElementFromString(d.text);if(h){var c=bb.selector.query(h,".ap-MCCPbalance-data");var g=bb.selector.query(document.body,".ap-mccpAccountBalance-form");if(c){var f=bb.selector.query(c,".ap-mccpBalance-errorCode");if(phe.hiddenField.getValue(f)=="2"&&count>0){mccpModal=bb.selector.query(g,".ap-MCCPBalanceAlert");phe.modal.showModal(0.5,mccpModal,g,true)}else{if(phe.hiddenField.getValue(f)!="0"){var e=bb.selector.query(g,".ap-mccpBalance-errorMsg");phe.common.show(e)}}count=count-1;if(count==0){var e=bb.selector.query(g,".ap-mccpBalance-errorMsg");phe.common.show(e)}}}}})};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.redeemRewards=absa.apps.redeemRewards||{};absa.apps.redeemRewards.onSelectRedeem=function(c){var o=bb.selector.queryAncestor(c,".ap-redeemRewards-content");var v=bb.selector.queryAncestor(c,".ap-redeemRewards-form");var t=bb.selector.query(o,".ap-redeemRewards-contentBody");var a=bb.selector.query(o,".ap-redeemRewards-container");var n=phe.select.getValue(c);var h="";var s="";var x="";if(n.indexOf("~")>-1){var i=n.split("~");h=i[0];s=i[1]}var e=bb.selector.query(o,".ap-redeemRewards-infoAirtime");var z=bb.selector.query(o,".ap-redeemRewards-infoRetail");var r=bb.selector.query(o,".ap-redeemRewards-infoTravel");var d=bb.selector.query(o,".ap-redeemRewards-infoToPoints");var m=bb.selector.query(o,".ap-redeemRewards-noticeBoxes");var f=bb.selector.query(o,".ap-redeemRewards-redemptionTypeCode");var b=bb.selector.query(o,".ap-button-reset");var g=bb.selector.query(v,".ap-button-next ap-redeemRewardsNext");var q=bb.selector.query(v,".ap-button-cancel ap-redeemRewardsCancel");var k=bb.selector.query(v,".ap-investButton");var u=bb.selector.query(v,".ap-applyButton");var w=bb.selector.query(v,".ap-redeemRewards-warningMessage");var p=bb.selector.query(v,".ap-investTypeDropdown");var j=phe.select.getSelectedOption(c);var l=phe.common.getAttribute(j,"data-redemptionTypeCode")||phe.common.getAttribute(j,"data-redemptiontypecode");phe.hiddenField.setValue(f,l);phe.common.show(m);phe.noticeBox.hide(e);phe.noticeBox.hide(z);phe.noticeBox.hide(r);phe.noticeBox.hide(d);if(h==""){h=n}switch(h){case"Cash":x="Cash";phe.form.reset(v);phe.select.setValue(c,h);break;case"Airtime":x="Airtime";phe.noticeBox.show(e);phe.form.reset(v);phe.select.setValue(c,h);break;case"Retail Voucher":x="Retail Voucher";phe.noticeBox.show(z);phe.form.reset(v);phe.select.setValue(c,h);break;case"Travel":x="Travel";phe.noticeBox.show(r);phe.form.reset(v);phe.select.setValue(c,h);break;case"Charity":x="Charity";phe.form.reset(v);phe.select.setValue(c,h);break;case"Redeem to points":x="Redeem to points";phe.noticeBox.show(d);phe.form.reset(v);phe.select.setValue(c,h);break}if(h==""){phe.form.reset(v);phe.common.hide(t);phe.select.setAttribute(p,"disabled","false");phe.row.setAttribute(w,"class","ap-redeemRewards-warningMessage ap-common-hide");phe.button.setAttribute(g,"class","ap-button-next ap-nextButton ");phe.button.setAttribute(u,"class","ap-button-next ap-applyButton ap-common-hide");phe.button.setAttribute(k,"class","ap-button-next ap-investButton ap-common-hide")}else{phe.button.show(b);phe.button.setAttribute(g,"class",".ap-button-next ap-redeemRewardsNext");phe.button.setAttribute(q,"class",".ap-button-cancel ap-redeemRewardsCancel");phe.button.hide(u);phe.row.setAttribute(w,"class","ap-redeemRewards-warningMessage ap-common-hide")}phe.loadingMessage.showLoadingMessage(a);var y="proxy?pipe=genericWebservice&ws=RewardsNewWebService&action=getRedemptionTypes&mode=changeSelect&redeemTypeDisplay="+h+"&redemptionTypeCode="+l+"&status="+x+"&minimumBalance="+s;absa.io.makeRequest(y,function(A){phe.loadingMessage.hideLoadingMessage(a);if(!A.errors.length){t.innerHTML=A.text;absa.form.attachHandlers(t)}else{absa.showIOErrorMessage(t)}});phe.common.show(t);if(h!=""){phe.select.setAttribute(p,"disabled","true")}};absa.apps.redeemRewards.onResetClick=function(c){var e=bb.selector.queryAncestor(c,".ap-redeemRewards-content");var i=bb.selector.query(e,".ap-redeemRewards-redeemDropDown");var k=bb.selector.queryAncestor(c,".ap-redeemRewards-form");var d=bb.selector.query(k,".ap-redeemRewards-warningMessage");var g=bb.selector.query(e,".ap-redeemRewards-contentBody");var b=bb.selector.query(k,".ui-select");var a=bb.selector.query(k,".ap-investTypeDropdown");var h=bb.selector.query(k,".ap-nextButton");var f=bb.selector.query(k,".ap-applyButton");var j=bb.selector.query(k,".ap-investButton");phe.form.reset(k);phe.common.hide(g);phe.row.setAttribute(d,"class","ap-redeemRewards-warningMessage ap-common-hide");phe.select.setAttribute(b,"disabled","false");phe.select.setAttribute(a,"disabled","false");phe.button.setAttribute(h,"class","ap-button-next ap-nextButton ");phe.button.setAttribute(f,"class","ap-button-next ap-applyButton ap-common-hide");phe.button.setAttribute(j,"class","ap-button-next ap-investButton ap-common-hide")};absa.apps.redeemRewards.onSelectNetwork=function(b){var a=phe.select.getValue(b);var e=bb.selector.queryAncestor(b,".ap-redeemRewards-body");var d=bb.selector.queryAll(e,".ap-redeemRewards-amount");for(var c=0;c<d.length;c++){if(phe.select.getAttribute(d[c],"data-provider")==a){phe.select.show(d[c])}else{phe.select.hide(d[c])}}};absa.apps.redeemRewards.onRedeemSubmit=function(e){var j=bb.selector.queryAncestor(e,".ap-redeemRewards-content");var a=bb.selector.query(j,".ap-redeemRewards-redemptionTypeSelect");var q=bb.selector.queryAncestor(e,".ap-redeemRewards-form");var o=phe.select.getValue(a);var h=o.split("~");var n=h[0];if(n=="Airtime"){var p=bb.selector.query(q,".ap-redeemRewards-networkTypeSelect");var m=bb.selector.query(q,".ap-redeemRewards-networkTypeHiddenField");var c=bb.selector.query(q,'.ap-redeemRewards-amount[data-provider="'+phe.select.getValue(p)+'"]');var f=bb.selector.query(q,".ap-redeemRewards-redeemAmountDisplay");var d=bb.selector.query(q,".ap-redeemRewards-amountSelected");absa.apps.redeemRewards.setDisplayedText(m,p);absa.apps.redeemRewards.setDisplayedText(f,c);phe.hiddenField.setValue(d,phe.select.getValue(c))}else{if(n=="Cash"){var i=bb.selector.query(q,".ap-redeemRewards-accountType");var k=bb.selector.query(q,".ap-redeemRewards-accountTypeDisplay");absa.apps.redeemRewards.setDisplayedText(k,i)}else{if(n=="Retail Voucher"){var g=bb.selector.query(q,".ap-redeemRewards-voucherType");var l=bb.selector.query(q,".ap-redeemRewards-voucherTypeDisplay");absa.apps.redeemRewards.setDisplayedText(l,g)}else{if(n=="Charity"){var t=bb.selector.query(q,".ap-redeemRewards-charityType");var s=bb.selector.query(q,".ap-redeemRewards-charityTypeDisplay");absa.apps.redeemRewards.setDisplayedText(s,t)}else{if(n=="Redeem to points"){var r=bb.selector.query(q,".ap-redeemRewards-partner");var b=bb.selector.query(q,".ap-redeemRewards-partnerDisplay");absa.apps.redeemRewards.setDisplayedText(b,r)}}}}}absa.form.validateAndSubmit(q)};absa.apps.redeemRewards.setDisplayedText=function(a,b){phe.hiddenField.setValue(a,phe.select.getSelectedText(b))};absa.apps.redeemRewards.validateAmount=function(f){var c=phe.textBox.getAttribute(f,"data-fixedAmount");if(c=="true"){return true}var h=bb.selector.queryAncestor(f,".ap-redeemRewards-form");var e=bb.selector.query(h,".ap-redeemRewards-partner");var b=phe.textBox.getValue(f)*1;var a=phe.textBox.getAttribute(f,"data-minimumBalance")*1;if(e){var d=phe.select.getSelectedOption(e);var g=phe.option.getAttribute(d,"data-minimumBalance")*1;phe.textBox.setAttribute(f,"data-minimumBalance",g);phe.textBox.setAttribute(f,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountValidation"]+g);if(b%10!=0&&phe.select.getSelectedIndex(e)==0){phe.textBox.setAttribute(f,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountIncrement"]);return false}}else{phe.textBox.setAttribute(f,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountValidation"]+a)}if(b<a){return false}else{return true}};absa.apps.redeemRewards.resolveCacheIssue=function(e){var g=bb.selector.queryAncestor(e,".ap-redeemRewards-form");var d=bb.selector.query(g,".ap-redeemRewards-partner");var b=phe.textBox.getValue(e)*1;var a=phe.textBox.getAttribute(e,"data-minimumBalance")*1;if(d){var c=phe.select.getSelectedOption(d);var f=phe.option.getAttribute(c,"data-minimumBalance")*1;phe.textBox.setAttribute(e,"data-minimumBalance",f);phe.textBox.setAttribute(e,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountValidation"]+f);if(b%10!=0&&phe.select.getSelectedIndex(d)==0){phe.textBox.setAttribute(e,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountIncrement"]);return false}}else{phe.textBox.setAttribute(e,"customValidationText",absa.locale["Accounts/Redeemrewards/CustomValidation/AmountValidation"]+a)}if(b<a){return false}else{return true}};absa.apps.redeemRewards.onPartnerSelectChange=function(a){var c=bb.selector.queryAncestor(a,".ap-redeemRewards-form");var b=bb.selector.query(c,".ap-redeemRewards-cardMembershipNumber");phe.textBox.setValue(b,"")};absa.apps.redeemRewards.onVoucherVendorSelectChange=function(c){var f=bb.selector.queryAncestor(c,".ap-redeemRewards-form");var a=phe.select.getSelectedAttribute(c,"data-fixedAmount");var b=phe.select.getSelectedAttribute(c,"data-amount");var d=bb.selector.query(f,".ap-redeemRewards-amountHiddenField");var e=bb.selector.query(f,".ap-redeemRewards-amountTextBox");if(a.toLowerCase()=="y"){phe.textBox.setValue(e,b);phe.textBox.setAttribute(e,"disabled","true");phe.textBox.setAttribute(e,"data-fixedAmount","true");absa.form.validate.checkElement(e);phe.hiddenField.setValue(d,b)}else{phe.textBox.setAttribute(e,"disabled","");phe.textBox.setAttribute(e,"data-fixedAmount","");phe.textBox.setValue(e,"");phe.hiddenField.setValue(d,"")}};absa.apps.redeemRewards.onSelectInvest=function(f){var e=bb.selector.queryAncestor(f,".ap-redeemRewards-content");var m=bb.selector.queryAncestor(f,".ap-redeemRewards-form");var k=parseInt(f.value,10);var a=phe.select.getValue(f);var n=bb.selector.query(m,".ap-cancelButton");var i=bb.selector.query(m,".ap-nextButton");var g=bb.selector.query(m,".ap-applyButton");var d=bb.selector.query(m,".ap-redeemRewards-warningMessage");var h=phe.hiddenField.getValue(bb.selector.query(e,"[name=hasUnitTustAccount]"));var b=bb.selector.query(m,".ui-select");var j=bb.selector.query(m,".ap-redeemRewards-redeemLabel");var c=bb.selector.query(m,".ap-button-reset");var l=bb.selector.query(m,".ap-investButton");if(a==""){phe.form.reset(m);phe.select.setAttribute(b,"disabled","false");phe.button.setAttribute(i,"class","ap-button-next ap-nextButton");phe.button.setAttribute(n,"class","ap-button-cancel ap-cancelButton");phe.button.setAttribute(l,"class","ap-button-next ap-investButton ap-common-hide");phe.button.setAttribute(g,"class","ap-button-next ap-applyButton ap-common-hide");phe.row.setAttribute(d,"class","ap-redeemRewards-warningMessage ap-common-hide")}if(a=="Unit Trust"&&h!=""){phe.form.reset(m);phe.select.setValue(f,a);phe.select.setAttribute(b,"disabled","true");phe.button.setAttribute(i,"class","ap-button-next ap-nextButton ap-common-hide");phe.button.setAttribute(l,"class","ap-button-next ap-investButton");phe.button.show(c)}if(a=="Unit Trust"&&h==""){phe.form.reset(m);phe.select.setValue(f,a);phe.select.setAttribute(b,"disabled","true");phe.button.setAttribute(i,"class","ap-button-next ap-nextButton ap-common-hide");phe.button.setAttribute(g,"class","ap-button-next ap-applyButton");phe.row.setAttribute(d,"class","ap-redeemRewards-warningMessage");phe.button.show(c)}};absa.apps.redeemRewards.onApplyClick=function(b){var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");phe.form.setAttribute(c,"trackUnconfirmedChanges","false");gadgets.pubsub.publish("goTo:apply/applyForUnitTrust/applyForUnitTrust")};absa.apps.redeemRewards.onInvestClick=function(b,d){var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");phe.form.setAttribute(c,"trackUnconfirmedChanges","false");gadgets.pubsub.publish("goTo:unitTrust");absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/assistanceForRewardsInvestment&",d,"","")};absa.apps.redeemRewards.nonsenseFunctionToAlterSizeOfDownload=function(b,d){var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var a=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var c=bb.selector.queryAncestor(b,".ap-redeemRewards-form")};absa.apps.redeemRewards.onSelectRedeemNonsenseFunctionToAlterSizeOfDownload=function(b){var o=bb.selector.queryAncestor(b,".ap-redeemRewards-content");var v=bb.selector.queryAncestor(b,".ap-redeemRewards-form");var t=bb.selector.query(o,".ap-redeemRewards-contentBody");var a=bb.selector.query(o,".ap-redeemRewards-container");var n=phe.select.getValue(b);var i=n.split("-");var g=i[0];var s=i[1];var x="";var d=bb.selector.query(o,".ap-redeemRewards-infoAirtime");var z=bb.selector.query(o,".ap-redeemRewards-infoRetail");var r=bb.selector.query(o,".ap-redeemRewards-infoTravel");var c=bb.selector.query(o,".ap-redeemRewards-infoToPoints");var m=bb.selector.query(o,".ap-redeemRewards-noticeBoxes");var e=bb.selector.query(o,".ap-redeemRewards-redemptionTypeCode");var h=bb.selector.query(o,".ap-button-reset");var f=bb.selector.query(v,".ap-button-next ap-redeemRewardsNext");var q=bb.selector.query(v,".ap-button-cancel ap-redeemRewardsCancel");var k=bb.selector.query(v,".ap-investButton");var u=bb.selector.query(v,".ap-applyButton");var w=bb.selector.query(v,".ap-redeemRewards-warningMessage");var p=bb.selector.query(v,".ap-investTypeDropdown");var j=phe.select.getSelectedOption(b);var l=phe.common.getAttribute(j,"data-redemptionTypeCode")||phe.common.getAttribute(j,"data-redemptiontypecode");phe.hiddenField.setValue(e,l);phe.common.show(m);phe.noticeBox.hide(d);phe.noticeBox.hide(z);phe.noticeBox.hide(r);phe.noticeBox.hide(c);switch(g){case"Cash":x="Cash";phe.form.reset(v);phe.select.setValue(b,g);break;case"Airtime":x="Airtime";phe.noticeBox.show(d);phe.form.reset(v);phe.select.setValue(b,g);break;case"Retail Voucher":x="Retail Voucher";phe.noticeBox.show(z);phe.form.reset(v);phe.select.setValue(b,g);break;case"Travel":x="Travel";phe.noticeBox.show(r);phe.form.reset(v);phe.select.setValue(b,g);break;case"Charity":x="Charity";phe.form.reset(v);phe.select.setValue(b,g);break;case"Redeem to points":x="Redeem to points";phe.noticeBox.show(c);phe.form.reset(v);phe.select.setValue(b,g);break}if(g==""){phe.form.reset(v);phe.common.hide(t);phe.select.setAttribute(p,"disabled","false");phe.row.setAttribute(w,"class","ap-redeemRewards-warningMessage ap-common-hide");phe.button.setAttribute(f,"class","ap-button-next ap-nextButton ");phe.button.setAttribute(u,"class","ap-button-next ap-applyButton ap-common-hide");phe.button.setAttribute(k,"class","ap-button-next ap-investButton ap-common-hide")}else{phe.button.show(h);phe.button.setAttribute(f,"class",".ap-button-next ap-redeemRewardsNext");phe.button.setAttribute(q,"class",".ap-button-cancel ap-redeemRewardsCancel");phe.button.hide(u);phe.row.setAttribute(w,"class","ap-redeemRewards-warningMessage ap-common-hide")}phe.loadingMessage.showLoadingMessage(a);var y="proxy?pipe=genericWebservice&ws=RewardsNewWebService&action=getRedemptionTypes&mode=changeSelect&redeemTypeDisplay="+g+"&redemptionTypeCode="+l+"&status="+x+"&minimumBalance="+s;absa.io.makeRequest(y,function(A){phe.loadingMessage.hideLoadingMessage(a);if(!A.errors.length){t.innerHTML=A.text;absa.form.attachHandlers(t)}else{absa.showIOErrorMessage(t)}});phe.common.show(t);if(g!=""){phe.select.setAttribute(p,"disabled","true")}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.removeDebitOrder=absa.apps.removeDebitOrder||{};absa.apps.removeDebitOrder.onChangeDebitOrderToChange=function(b){var g=phe.select.getValue(bb.selector.query(document.body,".ap-removeDebitOrder-debitOrderToChnage"));var i=phe.inputReadOnlyText.getValue(bb.selector.query(document.body,".ap-addDebitOrder-unitTrustAccountHolder"));var d=bb.selector.queryAncestor(b,".ap-removeDebitOrder");var h=bb.selector.query(d,".ap-removeDebitOrder-details");var f=phe.hiddenField.getValue(bb.selector.query(d,".ap-removeDebitOrder-removedebitFundCode"));var c=phe.inputReadOnlyText.getValue(bb.selector.query(d,".ap-removeDebitOrder-removeDebitFundNumber"));var e=phe.inputReadOnlyText.getValue(bb.selector.query(d,".ap-removeDebitOrder-fundName"));var a="proxy?pipe=genericWebservice&ws=UnitTrustWebService&action=viewDebitOrders&mode=selectedRemoveDebitOrder&debitOrderId="+g+"&unitTrustAccountHolder="+i+"&fundNumber="+c+"&fundCode="+f+"&fundName="+encodeURIComponent(e);h.setAttribute("proxyurl",a);absa.lazyLoadNode(h,true)};absa.apps.removeDebitOrder.printRemoveDebitOrder=function(a){absa.openReport("report/removeDebitOrder.pdf?feIdentifier=RemoveDebitOrder&transDateTime="+a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.renewal=absa.apps.renewal||{};absa.apps.renewal.validateRenewalAmount=function(e){var g=bb.selector.queryAncestor(e,".ap-createRenewalInstr-form1");var f=bb.selector.query(g,".ap-createRenewalInstr-minDeposit");var b=bb.selector.query(g,".ap-createRenewalInstr-depositBalance");var a=parseFloat(phe.textBox.getValue(e));var c=parseFloat(phe.hiddenField.getValue(f));var d=parseFloat(phe.hiddenField.getValue(b));if(a>=c){return true}else{return false}};absa.apps.renewal.onChangeRenewalAmount=function(e){var h=bb.selector.queryAncestor(e,".ap-createRenewalInstr-form1");var a=bb.selector.query(h,".ap-createRenewalInstr-transferInstrContainer-row");var c=bb.selector.query(h,".ap-createRenewalInstr-depositBalance");var g=bb.selector.query(a,".ap-createRenewalInstr-transferInstrContainer-cell");var i=parseFloat(phe.hiddenField.getValue(c));var f=parseFloat(phe.textBox.getValue(e));if(absa.apps.renewal.validateRenewalAmount(e)&&f>i){var d=bb.selector.query(h,".ap-createRenewalInstr-isMatured");var b=phe.hiddenField.getValue(d);phe.common.show(a);g.setAttribute("proxyurl","proxy?pipe=genericEmptyResponse&xslFile=Renewal/fundTransferForm&transferAmount="+(Math.ceil((f-i)*100)/100)+"&isMatured="+b);absa.lazyLoadNode(g,true)}else{phe.common.hide(a);g.innerHTML=null}};absa.apps.renewal.onChangeEndDate=function(a){try{var j=bb.selector.queryAncestor(a,".ap-createRenewalInstr");var k=bb.selector.query(j,".ap-createRenewalInstr-startDate");var n=bb.selector.query(j,".ap-createRenewalInstr-term");var i=bb.selector.query(j,".ap-createRenewalInstr-capitalizationFrequency");var c=bb.selector.query(j,".ap-createRenewalInstr-nextCapDate");var l=bb.selector.query(j,".ap-createRenewalInstr-capDay");var c=bb.selector.query(j,".ap-createRenewalInstr-nextCapDate");var d=bb.selector.query(j,".ap-createRenewalInstr-productCode");var m=phe.hiddenField.getValue(d);var b=phe.select.getValue(i);var g=phe.datePicker.getValue(a);var f=phe.inputReadOnlyText.getValue(k);if(absa.date.isValidDate(g)){phe.textBox.setValue(n,absa.date.getDaysDiff(f,g))}if(m=="09501"){absa.apps.renewal.setDFDCapDetails(j,b,f,g)}else{absa.apps.renewal.setCapDetails(j,b,f,g)}}catch(h){}};absa.apps.renewal.validateTerm=function(j){var h=bb.selector.queryAncestor(j,".ap-createRenewalInstr-form1");var g=bb.selector.query(h,".ap-createRenewalInstr-startDate");var c=bb.selector.query(h,".ap-createRenewalInstr-minEndDate");var k=bb.selector.query(h,".ap-createRenewalInstr-maxEndDate");var f=parseInt(phe.textBox.getValue(j));var e=phe.inputReadOnlyText.getValue(g);var d=phe.hiddenField.getValue(c);var a=phe.hiddenField.getValue(k);var b=parseInt(absa.date.getDaysDiff(e,d));var i=parseInt(absa.date.getDaysDiff(e,a));if(f<=i&&f>=b){return true}else{return false}};absa.apps.renewal.onChangeTerm=function(l){try{if(absa.apps.renewal.validateTerm(l)){var j=bb.selector.queryAncestor(l,".ap-createRenewalInstr");var k=bb.selector.query(j,".ap-createRenewalInstr-startDate");var a=bb.selector.query(j,".ap-createRenewalInstr-endDate");var i=bb.selector.query(j,".ap-createRenewalInstr-capitalizationFrequency");var c=bb.selector.query(j,".ap-createRenewalInstr-nextCapDate");var f=phe.inputReadOnlyText.getValue(k);var h=parseInt(phe.textBox.getValue(l));var b=phe.select.getValue(i);var d=absa.date.addToDate(f,h,0,0,true);phe.datePicker.setValue(a,d);absa.apps.renewal.setCapDetails(j,b,f,d)}}catch(g){}};absa.apps.renewal.onChangeCapDay=function(l){try{var j=bb.selector.queryAncestor(l,".ap-createRenewalInstr");var d=bb.selector.query(j,".ap-createRenewalInstr-nextCapDate");var k=bb.selector.query(j,".ap-createRenewalInstr-startDate");var a=bb.selector.query(j,".ap-createRenewalInstr-endDate");var i=bb.selector.query(j,".ap-createRenewalInstr-capitalizationFrequency");var g=phe.inputReadOnlyText.getValue(k);var f=phe.datePicker.getValue(a);var c=phe.select.getValue(i);var b=bb.selector.query(j,".ap-createRenewalInstr-productCode");var m=phe.hiddenField.getValue(b);if(m=="09501"){absa.apps.renewal.setDFDCapDetails(j,c,g,f)}else{absa.apps.renewal.setCapDetails(j,c,g,f)}}catch(h){}};absa.apps.renewal.onChangeCapitalizationFrequency=function(h){try{var o=bb.selector.queryAncestor(h,".ap-createRenewalInstr");var c=bb.selector.query(o,".ap-createRenewalInstr-startDate");var t=bb.selector.query(o,".ap-createRenewalInstr-nextCapDate");var s=bb.selector.query(o,".ap-createRenewalInstr-capDay");var d=bb.selector.query(o,".ap-createRenewalInstr-endDate");var l=bb.selector.query(o,".ap-createRenewalInstr-capDayContainer");var k=bb.selector.query(o,".ap-createRenewalInstr-productCode");var q=phe.inputReadOnlyText.getValue(c);var f=phe.select.getValue(h);var n=phe.select.getValue(s);var p=phe.datePicker.getValue(d);var b=phe.hiddenField.getValue(k);if(0===parseInt(f)){phe.row.hide(l)}else{phe.row.show(l)}absa.apps.renewal.setCapDetails(o,f,q,p);if(b==="03041"){var i="";var j=phe.hiddenField.getValue(bb.selector.query(o,".ap-createRenewalInstr-minEndDate"));var a=phe.datePicker.getAttribute(d,"fromDate");if(12===parseInt(f)){i=absa.date.addToDate(j,2,0,0,true)}else{if(j!==a){i=j}}if(i!==""){phe.datePicker.setAttribute(d,"fromDate",i);var m=bb.selector.query(o,".ap-applySaveInvest-minDateDisplay");var g=m.innerHTML;m.innerHTML=g.replace(a,i);phe.inputReadOnlyText.setValue(t,"");phe.datePicker.setValue(d,"");phe.textBox.setValue(bb.selector.query(o,".ap-createRenewalInstr-term"),"")}}}catch(r){}};absa.apps.renewal.onUpdateClick=function(e){var d=bb.selector.queryAncestor(e,".ap-manageAccount-table");var c=bb.selector.query(d,".ap-manageAccount-renewalRow");var b=bb.selector.query(d,".ap-manageAccount-renewalRowExtention");var a=phe.tableBodyRowExpandableExtention.getAttribute(b,"dataFileView");phe.tableBodyRow.expandRow(c,a)};absa.apps.renewal.onDeleteClick=function(g,b,h,j,f,c){try{var a="proxy?pipe=genericWebservice&ws=RenewalWebService&action=promptForTDRenewalInstruction&view=delete&accountNumber="+b;var i=absa.locale["Accounts/Renewal/Label/DeleteRenewalInstruction"];absa.modal.loadModal(a,i)}catch(d){}};absa.apps.renewal.reloadTable=function(){try{var b=bb.selector.query(window.document,".ap-manageAccount-renewalHistoryRow");var a=b.parentNode.rows[b.rowIndex+1];phe.tableBodyRow.collapseRow(b);phe.tableBodyRow.expandRow(b,phe.common.getAttribute(a,"dataFileView"))}catch(c){}};absa.apps.renewal.validateForm=function(d){var c=bb.selector.query(d,".ap-createRenewalInstr-endDate");var e=bb.selector.query(d,".ap-createRenewalInstr-nextCapDate");var b=phe.datePicker.getValue(c);var a=phe.inputReadOnlyText.getValue(e);if(absa.date.getDaysDiff(a,b)<0){return false}else{return true}};absa.apps.renewal.validateCapFrequency=function(n){try{var k=bb.selector.queryAncestor(n,".ap-createRenewalInstr");var d=bb.selector.query(k,".ap-createRenewalInstr-nextCapDate");var l=bb.selector.query(k,".ap-createRenewalInstr-startDate");var c=bb.selector.query(k,".ap-createRenewalInstr-endDate");var m=bb.selector.query(k,".ap-createRenewalInstr-capDay");var f=phe.select.getValue(n);var h=phe.datePicker.getValue(c);var g=phe.inputReadOnlyText.getValue(l);var a=phe.select.getValue(m);if(0===parseInt(f)){return true}else{var b=new Date(Number(g.substring(0,4)),(Number(g.substring(5,7))-1),Number(g.substring(8,10)));var j=absa.date.getNextCapDate(b,parseInt(a),parseInt(f));if(absa.date.getDaysDiff(absa.date.formatDate(j),h)<0){return false}else{return true}}}catch(i){}};absa.apps.renewal.onFromAccountChange=function(b){var h=bb.selector.queryAncestor(b,".ap-createRenewalInstr-fromAccount-cell");var j=bb.selector.query(h,".ap-createRenewalInstr-availableAmount");var g=bb.selector.query(h,".ap-createRenewalInstr-availableBalanceLabelAndAmount");var d=phe.select.getValue(b);var a;var c;var k=bb.selector.queryAll(h,".ap-createRenewalInstr-fromAccount-div");var f;for(var e=0;e<k.length;e++){f=phe.common.getAttribute(k[e],"data-accountNo");if(f==d){if(phe.common.getAttribute(k[e],"data-available")=="operator"){phe.common.hide(g)}else{phe.common.show(g);a=phe.common.getAttribute(k[e],"data-availableFormatted");c=phe.common.getAttribute(k[e],"data-available")}}}phe.inputReadOnlyText.setValue(j,a);return c};absa.apps.renewal.onUpdateStep1Submit=function(f){var g=bb.selector.queryAncestor(f,".ap-createRenewalInstr-form1");var d=bb.selector.queryAncestor(g,".ap-createRenewalInstr-wizard");var j=bb.selector.query(g,".ap-createRenewalInstr-fromAccount");var b=bb.selector.query(g,".ap-createRenewalInstr-transferAmount");var k=phe.hiddenField.getValue(bb.selector.query(g,".ap-createRenewalInstr-productCode"));var h=null;var i=null;if(j!=null){try{if(!isNaN(parseFloat(absa.apps.renewal.onFromAccountChange(j)))){h=parseFloat(absa.apps.renewal.onFromAccountChange(j))}}catch(c){}}var a=null;if(b!=null){try{if(!isNaN(parseFloat(phe.textBox.getValue(b)))){a=parseFloat(phe.textBox.getValue(b))}}catch(c){}}absa.form.validateAndSubmit(g)};absa.apps.renewal.resetForm=function(b){var d=bb.selector.queryAncestor(b,".ap-createRenewalInstr-form1");phe.form.reset(d);var a=bb.selector.query(d,".ap-createRenewalInstr-additionalAmount");var c=bb.selector.query(d,".ap-createRenewalInstr-availableAmount");if(null!=a){phe.inputReadOnlyText.setValue(a,"")}if(null!=c){phe.inputReadOnlyText.setValue(c,"")}};absa.apps.renewal.onRenewalMethodSelect=function(f){var a=bb.selector.queryAncestor(f,".ap-createRenewalInstr-wizard");var c=bb.selector.query(a,".ap-createRenewalInstr-renewalMethodRadio");var e=phe.radioGroup.getValue(c);var h=bb.selector.query(a,".ui-wizard-body-selected");var b=phe.hiddenField.getValue(bb.selector.query(a,".ap-createRenewalInstr-accountNumber"));var d=null;if(""===e){phe.message.show(bb.selector.query(a,".ap-createRenewalInstr-noSelectionError"))}else{if("M"===e){phe.message.hide(bb.selector.query(a,".ap-createRenewalInstr-noSelectionError"));d="proxy?pipe=genericWebservice&ws=RenewalWebService&action=promptForTDRenewalInstruction&view=new&accountNumber="+b;h.setAttribute("proxyurl",d);absa.lazyLoadNode(h,true)}else{phe.message.hide(bb.selector.query(a,".ap-createRenewalInstr-noSelectionError"));phe.wizard.selectStepAbsolute(f,2);var g=bb.selector.queryAncestor(f,".ap-createRenewalInstr-form1");absa.form.validateAndSubmit(g)}}};absa.apps.renewal.setCapDetails=function(e,b,a,c){var d=bb.selector.query(e,".ap-createRenewalInstr-capDay");var h=bb.selector.query(e,".ap-createRenewalInstr-nextCapDate");var f=phe.select.getValue(d);if(absa.date.isValidDate(c)){switch(b){case"00":if(c!=""){var g=absa.apps.createAccount.formatDate(new Date(c.substr(0,4),c.substr(5,2)-1,c.substr(8,2)));phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}else{phe.inputReadOnlyText.setValue(h,"")}break;case"01":var g=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(f),parseInt(b)));if(c!=""){if(absa.date.getDaysDiff(g,c)<0){phe.inputReadOnlyText.setValue(h,c);phe.inputReadOnlyText.show(h);phe.select.setValue(d,parseInt(c.substr(8,2),10))}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}break;case"03":var g=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(f),parseInt(b)));if(c!=""){if(absa.date.getDaysDiff(g,c)<0){phe.inputReadOnlyText.setValue(h,c);phe.inputReadOnlyText.show(h);phe.select.setValue(d,parseInt(c.substr(8,2),10))}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}break;case"06":var g=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(f),parseInt(b)));if(c!=""){if(absa.date.getDaysDiff(g,c)<0){phe.inputReadOnlyText.setValue(h,c);phe.inputReadOnlyText.show(h);phe.select.setValue(d,parseInt(c.substr(8,2),10))}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}break;case"12":var g=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(f),parseInt(b)));if(c!=""){if(absa.date.getDaysDiff(g,c)<0){phe.inputReadOnlyText.setValue(h,c);phe.inputReadOnlyText.show(h);phe.select.setValue(d,parseInt(c.substr(8,2),10))}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}}else{phe.inputReadOnlyText.setValue(h,g);phe.inputReadOnlyText.show(h)}break}}else{phe.inputReadOnlyText.setValue(h,"")}};absa.apps.renewal.onRenewalMethodChanged=function(k,d){var j=bb.selector.queryAncestor(k,".ap-createRenewalInstr-form1");var a=bb.selector.query(j,".ap-createRenewalInstr-automaticallyReinvest-row");var i=bb.selector.query(j,".ap-createRenewalInstr-renewalMethodRadio");var l=phe.radioGroup.getValue(i);var g=bb.selector.query(j,".ap-createRenewalInstr-automaticallyReinvest");var h=parseFloat(phe.hiddenField.getValue(bb.selector.query(j,".ap-createRenewalInstr-depBalance")));var e=parseFloat(phe.hiddenField.getValue(bb.selector.query(j,".ap-createRenewalInstr-minDepBalance")));var c=phe.hiddenField.getValue(bb.selector.query(j,".ap-createRenewalInstr-isMatured"));if(d=="false"&l=="A"){if(c=="true"&&e>h){phe.row.setAttribute(a,"class","ap-createRenewalInstr-automaticallyReinvest-row ap-common-hide");phe.row.hide(a)}else{phe.row.setAttribute(a,"class","ap-createRenewalInstr-automaticallyReinvest-row ap-common-show");phe.row.show(a);phe.select.setSelectedIndex(g,0)}}else{phe.row.setAttribute(a,"class","ap-createRenewalInstr-automaticallyReinvest-row ap-common-hide");phe.row.hide(a)}var b=bb.selector.queryAncestor(k,".ap-createRenewalInstr-wizard");phe.message.hide(bb.selector.query(b,".ap-createRenewalInstr-noSelectionError"));var f=bb.selector.query(j,".ap-createRenewalInstr-nextButton");phe.button.setAttribute(f,"class","ap-button-next ap-createRenewalInstr-nextButton");phe.message.hide(bb.selector.query(b,".ap-createRenewalInstr-needFundTransferError"))};absa.apps.renewal.onChangeTermRange=function(j){var t=bb.selector.queryAncestor(j,".ap-createRenewalInstr-form1");var i=bb.selector.query(t,".ap-applySaveInvest-interestRateOptionRadio");var l=phe.radioGroup.getValue(i);var s=bb.selector.queryAncestor(j,".ui-grid");var k=bb.selector.query(t,".ap-applySaveInvest-axisTableA");var g=bb.selector.query(k,".ui-axisTableBody");var p=bb.selector.query(t,".ap-createRenewalInstr-termRange");var d=phe.select.getValue(p);var c=parseFloat(phe.hiddenField.getValue(bb.selector.query(t,".ap-createRenewalInstr-depositBalance")));var m=parseFloat(phe.hiddenField.getValue(bb.selector.query(t,".ap-createRenewalInstr-minDeposit")));var f=phe.hiddenField.getValue(bb.selector.query(t,".ap-createRenewalInstr-isMatured"));var u=phe.hiddenField.getValue(bb.selector.query(t,".ap-createRenewalInstr-isProcessed"));if(f=="true"&&(u=="false"||u==null)){var a=parseFloat(phe.textBox.getValue(bb.selector.query(t,".ap-createRenewalInstr-amountToRenewal")));c=a}var o=bb.selector.query(t,".ap-createRenewalInstr-productCode");var n=phe.hiddenField.getValue(o);var r=bb.selector.query(t,".ap-createRenewalInstr-endDate");phe.datePicker.setValue(r,"");var h=bb.selector.query(t,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.showLoadingMessage(h);absa.apps.renewal.updateInterestRateDisplay(k,0);var b=bb.selector.query(t,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(b){phe.hiddenField.setValue(b,0)}var q=bb.selector.query(t,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(q){phe.hiddenField.setValue(q,0)}var e="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveDynamicFixedDepositInterestRateInfo&mode=renewalInstrInterestRateData&code="+n+"&depositAmount="+c+"&prodCode="+n+"&interestRateOption="+l+"&daysRange="+d;absa.io.makeRequest(e,function(v){h=bb.selector.query(t,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.hideLoadingMessage(h);h.innerHTML=v.text})};absa.apps.renewal.onResetAxisTableSelectionForDFD=function(a){var d=phe.axisTable.getAttribute(a,"selectedRowValue");var c=phe.axisTable.getAttribute(a,"selectedColValue");var b=bb.selector.queryAncestor(a,".ui-grid");var f=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(f){phe.hiddenField.setValue(f,c)}var e=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,d)}absa.apps.renewal.updateInterestRateDisplay(a,0)};absa.apps.renewal.onSelectColCallbackForDFD=function(b){var d=phe.axisTable.getAttribute(b,"selectedColValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(e){phe.hiddenField.setValue(e,d)}absa.apps.createAccount.globals.nwithdrawalPerc=d;var a=phe.axisTable.getSelectedCellValue(b);absa.apps.renewal.updateInterestRateDisplay(b,a)};absa.apps.renewal.onSelectRowCallbackForDFD=function(g){var t=phe.axisTable.getAttribute(g,"selectedRowValue");var n=bb.selector.queryAncestor(g,".ui-grid");var k=bb.selector.query(n,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(k){phe.hiddenField.setValue(k,t)}absa.apps.createAccount.globals.nNoticePeriod=t;var v=phe.axisTable.getSelectedCellValue(g);absa.apps.renewal.updateInterestRateDisplay(g,v);var r=bb.selector.queryAncestor(g,".ap-createRenewalInstr-form1");var j=bb.selector.query(r,".ap-createRenewalInstr-hidden-createAccountForm1");if(j){var l=bb.selector.query(r,".ap-createRenewalInstr-endDate");phe.datePicker.setAttribute(l,"disabled","false")}var h=bb.selector.query(r,".ap-createRenewalInstr-maturityDate-hidden");var m=phe.hiddenField.getValue(h);var c=bb.selector.query(r,".ap-createRenewalInstr-daysRangeSelected");var q=phe.hiddenField.getValue(c);var a=bb.selector.query(r,".ap-createRenewalInstr-maturityDateLabelCell");var l=bb.selector.query(r,".ap-createRenewalInstr-endDate");var e=bb.selector.query(r,".ap-createRenewalInstr-minMaturityDateDisplay");sTxt1=phe.datePicker.getAttribute(l,"data-labelTxtForDisplay1");sTxt2=phe.datePicker.getAttribute(l,"data-labelTxtForDisplay2");phe.cell.setAttribute(a,"class","ap-createRenewalInstr-maturityDateLabelCell");var u=bb.selector.query(n,".ap-createRenewalInstr-InstrstartDate");var d=phe.hiddenField.getValue(u);var o=t.split("-");var i=o[0];var p=o[1];var s=d.split("-");var b=new Date(s[0],s[1]-1,s[2]);var f=new Date(s[0],s[1]-1,s[2]);b.setDate(b.getDate()+parseInt(i));f.setDate(f.getDate()+parseInt(p));if((q==t)&&(null!=m&&""!=m)){phe.datePicker.setValue(l,m)}else{phe.datePicker.setValue(l,"")}phe.datePicker.setAttribute(l,"toDate",absa.date.formatDate(new Date(f)));phe.datePicker.setAttribute(l,"fromDate",absa.date.formatDate(new Date(b)));phe.datePicker.setAttribute(l,"data-startToDate",absa.date.formatDate(new Date(f)));phe.datePicker.setAttribute(l,"data-startFromDate",absa.date.formatDate(new Date(b)));e.innerHTML=sTxt1+" "+absa.date.formatDate(new Date(b)).substring(0,10)+" "+sTxt2+" "+absa.date.formatDate(new Date(f)).substring(0,10);i="";p=""};absa.apps.renewal.updateInterestRateDisplay=function(c,a){var e=bb.selector.queryAncestor(c,".ap-applySaveInvest-noticeSelectGrid");var b=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-txt");var d=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-interestRate");phe.hiddenField.setValue(d,a);b.innerHTML=new Number(a).toFixed(2)};absa.apps.renewal.onDFDDeleteClick=function(m,j,b,d,i,h,n,l,g,a,f){try{var c="proxy?pipe=genericEmptyResponse&xslFile=Renewal/promptForDFDRenewalInstruction-delete&accountNumber="+j+"&investTerm="+b+"&startDate="+d+"&endDate="+i+"&capitalisationDay="+h+"&capitalisationFrqncy="+n+"&nextCapDate="+l+"&rateOption="+g+"&reinvestCapInt="+a+"&liqPerc="+f;var o=absa.locale["Accounts/Renewal/Label/DeleteRenewalInstruction"];absa.modal.loadModal(c,o)}catch(k){}};absa.apps.renewal.selectAutomaticallyReinvest=function(c){var j=bb.selector.queryAncestor(c,".ap-createRenewalInstr-form1");var g=bb.selector.query(j,".ap-createRenewalInstr-capitalInterestBalanceDisplay");var f=bb.selector.query(j,".ap-createRenewalInstr-automaticallyReinvest");var b=phe.select.getValue(f);if(b=="Y"){var k=bb.selector.query(j,".ap-createRenewalInstr-accountBalance");var a=phe.hiddenField.getValue(k);var d=a}else{var l=bb.selector.query(j,".ap-createRenewalInstr-investAmount");var e=phe.hiddenField.getValue(l);var d=e}var i="R";var h=absa.locale["Accounts/Renewal/Label/Automaticrenewalamount"];g.innerHTML=i+d+" "+h+" "+absa.date.getDateTimeNow()};absa.apps.renewal.setDFDCapDetails=function(g,d,f,e){var j=bb.selector.query(g,".ap-createRenewalInstr-capDay");var c=bb.selector.query(g,".ap-createRenewalInstr-nextCapDate");var a=phe.select.getValue(j);var h=bb.selector.query(g,".ap-createRenewalInstr-startDate");var f=phe.inputReadOnlyText.getValue(h);var i=f.split("-");f=new Date(i[0],i[1]-1,i[2]);if(absa.date.isValidDate(e)){var b=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(f,parseInt(a),parseInt(d)));if(e!=""){if(absa.date.getDaysDiff(b,e)<0){phe.inputReadOnlyText.setValue(c,e);phe.inputReadOnlyText.show(c);phe.select.setValue(j,parseInt(e.substr(8,2),10))}else{phe.inputReadOnlyText.setValue(c,b);phe.inputReadOnlyText.show(c)}}else{phe.inputReadOnlyText.setValue(c,b);phe.inputReadOnlyText.show(c)}}else{phe.inputReadOnlyText.setValue(c,"")}};absa.apps.renewal.onDFDFromAccountChange=function(v){var D=bb.selector.queryAncestor(v,".ap-createRenewalInstr-fromAccount-cell");var E=bb.selector.query(D,".ap-createRenewalInstr-availableAmount");var q=bb.selector.query(D,".ap-createRenewalInstr-availableBalanceLabelAndAmount");var J=bb.selector.query(D,".ap-createRenewalInstr-availableBalanceLabelCell");var C=bb.selector.queryAncestor(v,".ap-createRenewalInstr-form1");var e=bb.selector.query(C,".ap-createRenewalInstr-instrDetailsGrid");var n=bb.selector.query(C,".ap-applySaveInvest-noticeSelectGrid");var G=bb.selector.query(C,".ap-createRenewalInstr-dayContainer");var p=bb.selector.query(C,".ap-applySaveInvest-axisTableA");var F=phe.select.getValue(v);var f;var c;var H=bb.selector.queryAll(D,".ap-createRenewalInstr-fromAccount-div");var j;for(var A=0;A<H.length;A++){j=phe.common.getAttribute(H[A],"data-accountNo");if(j==F){if(phe.common.getAttribute(H[A],"data-available")=="operator"){phe.common.hide(q);phe.common.setAttribute(q,"class","ap-createRenewalInstr-availableBalanceLabelAndAmount ap-common-hide")}else{f=phe.common.getAttribute(H[A],"data-availableFormatted");if(f!=null){phe.common.show(q);phe.common.setAttribute(q,"class","ap-createRenewalInstr-availableBalanceLabelAndAmount");c=phe.common.getAttribute(H[A],"data-available");var I=bb.selector.query(C,".ap-createRenewalInstr-transferAmount");var s=parseFloat(phe.hiddenField.getValue(I));phe.inputReadOnlyText.setValue(E,f);f=parseFloat(c);var a=parseFloat(phe.textBox.getValue(bb.selector.query(C,".ap-createRenewalInstr-amountToRenewal")));phe.hiddenField.setValue(bb.selector.query(C,".ap-createRenewalInstr-renewalAmount"),a);var B=a+s;if(f>s){sInstrDetailsGridClass=phe.grid.getAttribute(e,"class");if(sInstrDetailsGridClass=="ap-createRenewalInstr-instrDetailsGrid ap-common-hide"){phe.grid.setAttribute(e,"class","ap-createRenewalInstr-instrDetailsGrid");phe.grid.setAttribute(n,"class","ap-applySaveInvest-noticeSelectGrid");phe.grid.setAttribute(G,"class","ap-createRenewalInstr-dayContainer");var m=bb.selector.query(C,".ap-applySaveInvest-interestRateOptionRadio");var b=phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-daysRangeSelected"));var x=phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-liqPercSelected"));var o=phe.radioGroup.getValue(m);var z=bb.selector.queryAncestor(m,".ui-grid");var k=bb.selector.query(p,".ui-axisTableBody");var w=bb.selector.query(C,".ap-createRenewalInstr-termRange");var g=phe.select.getValue(w);var r=parseFloat(phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-minDeposit")));var u=bb.selector.query(C,".ap-createRenewalInstr-productCode");var t=phe.hiddenField.getValue(u);var l=bb.selector.query(C,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.showLoadingMessage(l);absa.apps.renewal.updateInterestRateDisplay(p,0);var d=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(d){phe.hiddenField.setValue(d,0)}var y=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(y){phe.hiddenField.setValue(y,0)}var h="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveDynamicFixedDepositInterestRateInfo&mode=renewalInstrInterestRateData&code="+t+"&depositAmount="+a+"&prodCode="+t+"&interestRateOption="+o+"&daysRange="+g+"&liqPercSelected="+x+"&daysRangeSelected="+b;absa.io.makeRequest(h,function(i){l=bb.selector.query(C,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.hideLoadingMessage(l);l.innerHTML=i.text})}}else{absa.apps.renewal.updateInterestRateDisplay(p,0);var d=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(d){phe.hiddenField.setValue(d,0)}var y=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(y){phe.hiddenField.setValue(y,0)}phe.grid.setAttribute(e,"class","ap-createRenewalInstr-instrDetailsGrid ap-common-hide");phe.grid.setAttribute(n,"class","ap-applySaveInvest-noticeSelectGrid ap-common-hide");phe.grid.setAttribute(G,"class","ap-createRenewalInstr-dayContainer ap-common-hide")}}}}}return c};absa.apps.renewal.onDFDChangeRenewalAmount=function(w){var C=bb.selector.queryAncestor(w,".ap-createRenewalInstr-form1");var j=bb.selector.query(C,".ap-createRenewalInstr-transferInstrContainer-row");var u=bb.selector.query(C,".ap-createRenewalInstr-depositBalance");var f=bb.selector.query(j,".ap-createRenewalInstr-transferInstrContainer-cell");var d=bb.selector.query(C,".ap-createRenewalInstr-instrDetailsGrid");var o=bb.selector.query(C,".ap-applySaveInvest-noticeSelectGrid");var E=bb.selector.query(C,".ap-createRenewalInstr-dayContainer");var a=parseFloat(phe.hiddenField.getValue(u));var D=parseFloat(phe.textBox.getValue(w));var l=bb.selector.query(C,".ap-createRenewalInstr-instrNextButton");var z=bb.selector.query(C,".ap-createRenewalInstr-isMatured");var i=phe.hiddenField.getValue(z);var q=bb.selector.query(C,".ap-applySaveInvest-axisTableA");if(absa.apps.renewal.validateRenewalAmount(w)){if(D>a){phe.common.show(j);phe.select.setValue(bb.selector.query(C,".ap-createRenewalInstr-automaticallyReinvest"),"");f.setAttribute("proxyurl","proxy?pipe=genericEmptyResponse&xslFile=Renewal/fundTransferFormForDFD&transferAmount="+(Math.ceil((D-a)*100)/100)+"&isMatured="+i);absa.lazyLoadNode(f,true);phe.button.setAttribute(l,"class","ap-button-next ap-createRenewalInstr-instrNextButton");phe.grid.setAttribute(d,"class","ap-createRenewalInstr-instrDetailsGrid ap-common-hide");phe.grid.setAttribute(o,"class","ap-applySaveInvest-noticeSelectGrid ap-common-hide");phe.grid.setAttribute(E,"class","ap-createRenewalInstr-dayContainer ap-common-hide");phe.message.hide(bb.selector.query(C,".ap-createRenewalInstr-lessInvestmentAmountThanDepositAmount"));absa.apps.renewal.updateInterestRateDisplay(q,0);var e=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(e){phe.hiddenField.setValue(e,0)}var A=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(A){phe.hiddenField.setValue(A,0)}}else{if(D==a){sInstrDetailsGridClass=phe.grid.getAttribute(d,"class");var y=bb.selector.query(C,".ap-createReneawalInstr-dfdFundTransferForm");sFundTransferGridClass=phe.grid.getAttribute(y,"class");if(sFundTransferGridClass=="ap-createReneawalInstr-dfdFundTransferForm"){phe.grid.setAttribute(y,"class","ap-createReneawalInstr-dfdFundTransferForm ap-common-hide");phe.common.hide(j)}if(sInstrDetailsGridClass=="ap-createRenewalInstr-instrDetailsGrid ap-common-hide"){phe.grid.setAttribute(d,"class","ap-createRenewalInstr-instrDetailsGrid");phe.grid.setAttribute(o,"class","ap-applySaveInvest-noticeSelectGrid");phe.grid.setAttribute(E,"class","ap-createRenewalInstr-dayContainer");var b=parseFloat(phe.textBox.getValue(bb.selector.query(C,".ap-createRenewalInstr-amountToRenewal")));var n=bb.selector.query(C,".ap-applySaveInvest-interestRateOptionRadio");var c=phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-daysRangeSelected"));phe.select.setValue(bb.selector.query(C,".ap-createRenewalInstr-automaticallyReinvest"),"Y");var x=phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-liqPercSelected"));var p=phe.radioGroup.getValue(n);var B=bb.selector.queryAncestor(n,".ui-grid");var k=bb.selector.query(q,".ui-axisTableBody");var v=bb.selector.query(C,".ap-createRenewalInstr-termRange");var g=phe.select.getValue(v);var r=parseFloat(phe.hiddenField.getValue(bb.selector.query(C,".ap-createRenewalInstr-minDeposit")));var t=bb.selector.query(C,".ap-createRenewalInstr-productCode");var s=phe.hiddenField.getValue(t);var m=bb.selector.query(C,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.showLoadingMessage(m);phe.button.setAttribute(l,"class","ap-button-next ap-createRenewalInstr-instrNextButton");phe.message.hide(bb.selector.query(C,".ap-createRenewalInstr-lessInvestmentAmountThanDepositAmount"));var h="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveDynamicFixedDepositInterestRateInfo&mode=renewalInstrInterestRateData&code="+s+"&depositAmount="+b+"&prodCode="+s+"&interestRateOption="+p+"&daysRange="+g+"&liqPercSelected="+x+"&daysRangeSelected="+c;absa.io.makeRequest(h,function(F){m=bb.selector.query(C,".ap-createRenewalInstr-interestRate1");phe.loadingMessage.hideLoadingMessage(m);m.innerHTML=F.text})}}else{if(D<a){phe.button.setAttribute(l,"class","ap-button-next ap-createRenewalInstr-instrNextButton ap-common-hide");phe.message.hide(bb.selector.query(C,".ap-createRenewalInstr-noSelectionError"));phe.common.hide(j);phe.select.setValue(bb.selector.query(C,".ap-createRenewalInstr-automaticallyReinvest"),"");phe.grid.setAttribute(d,"class","ap-createRenewalInstr-instrDetailsGrid ap-common-hide");phe.grid.setAttribute(o,"class","ap-applySaveInvest-noticeSelectGrid ap-common-hide");phe.grid.setAttribute(E,"class","ap-createRenewalInstr-dayContainer ap-common-hide");var y=bb.selector.query(C,".ap-createReneawalInstr-dfdFundTransferForm");sFundTransferGridClass=phe.grid.getAttribute(y,"class");if(sFundTransferGridClass=="ap-createReneawalInstr-dfdFundTransferForm"){phe.grid.setAttribute(y,"class","ap-createReneawalInstr-dfdFundTransferForm ap-common-hide")}phe.message.show(bb.selector.query(C,".ap-createRenewalInstr-lessInvestmentAmountThanDepositAmount"))}}}}else{phe.common.hide(j);phe.button.setAttribute(l,"class","ap-button-next ap-createRenewalInstr-instrNextButton ap-common-hide");f.innerHTML=null;phe.grid.setAttribute(d,"class","ap-createRenewalInstr-instrDetailsGrid ap-common-hide");phe.grid.setAttribute(o,"class","ap-applySaveInvest-noticeSelectGrid ap-common-hide");phe.grid.setAttribute(E,"class","ap-createRenewalInstr-dayContainer ap-common-hide")}};absa.apps.renewal.onDFDRenewalMethodSelect=function(g,k){var m=bb.selector.queryAncestor(g,".ap-createRenewalInstr-wizard");var q=bb.selector.queryAncestor(g,".ap-createRenewalInstr-form1");var u=bb.selector.query(m,".ap-createRenewalInstr-renewalMethodRadio");var v=phe.radioGroup.getValue(u);var e=bb.selector.query(m,".ui-wizard-body-selected");var j=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-accountNumber"));var b=parseFloat(phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-depBalance")));var h=parseFloat(phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-minDepBalance")));var i=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-productCode"));var l=null;if(""===v){phe.message.show(bb.selector.query(m,".ap-createRenewalInstr-noSelectionError"))}else{if("M"===v){phe.message.hide(bb.selector.query(m,".ap-createRenewalInstr-noSelectionError"));var w=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-accountBalance"));var p=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-investAmount"));var s=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-isProcessed"));if("true"==s){l="proxy?pipe=genericWebservice&ws=RenewalWebService&action=promptForDFDRenewalInstruction&view=newPostProcess&accountNumber="+j+"&accountBalance="+w+"&investAmount="+b+"&isProcessed="+s}else{l="proxy?pipe=genericWebservice&ws=RenewalWebService&action=promptForDFDRenewalInstruction&view=new&accountNumber="+j+"&accountBalance="+w+"&investAmount="+p}e.setAttribute("proxyurl",l);absa.lazyLoadNode(e,true)}else{var f=phe.hiddenField.getValue(bb.selector.query(q,".ap-createRenewalInstr-isMatured"));if("true"==f&&"false"==k){if(h>b){l="proxy?pipe=genericEmptyResponse&xslFile=Renewal/fundTransferAfterMaturityForDFD&minDepositBalance="+h+"&depositBalance="+b+"&toAccountNo="+j;e.setAttribute("proxyurl",l);absa.lazyLoadNode(e,true)}else{var c=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-automaticReinvestment"));var o=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-automaticallyReinvest"));var t=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-withdrawalPerc"));var r=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-startDate"));var n=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-capDay"));var a=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-accountRateOption"));var d=phe.hiddenField.getValue(bb.selector.query(m,".ap-createRenewalInstr-accountInvestTerm"));l="proxy?pipe=genericWebservice&ws=RenewalWebService&action=createDFDRenewalInstruction&mode=afterMaturity&accountNumber="+j+"&productCode="+i+"&renewAutomatically="+c+"&automaticallyReinvest="+o+"&withdrawalPerc="+t+"&startDate="+r+"&capitalizationFrequency=01&capDay="+n+"&interestRateOption="+a+"&investTerm="+d;e.setAttribute("proxyurl",l);absa.lazyLoadNode(e,true);phe.wizard.selectStepAbsolute(g,2);absa.form.validateAndSubmit(q)}}else{phe.message.hide(bb.selector.query(m,".ap-createRenewalInstr-noSelectionError"));phe.button.setAttribute(g,"class","ap-button-next ap-createRenewalInstr-nextButton");phe.message.hide(bb.selector.query(m,".ap-createRenewalInstr-needFundTransferError"));phe.wizard.selectStepAbsolute(g,2);absa.form.validateAndSubmit(q)}}}};absa.apps.renewal.onDFDChangeRenewalAmountAfterMaturity=function(b){var g=bb.selector.queryAncestor(b,".ap-createRenewalInstr-form1");var c=bb.selector.query(g,".ap-createRenewalInstr-depositBalance");var d=parseFloat(phe.hiddenField.getValue(c));var a=parseFloat(phe.textBox.getValue(b));if(absa.apps.renewal.validateRenewalAmount(b)){var e=bb.selector.query(g,".ap-createRenewalInstr-additionalAmount");var f=(Math.ceil((a-d)*100)/100);phe.inputReadOnlyText.setValue(e,f)}else{}};absa.apps.renewal.onDFDFromAccountChangeAfterMaturity=function(b){var n=bb.selector.queryAncestor(b,".ap-createRenewalInstr-form1");var j=bb.selector.queryAncestor(b,".ap-createRenewalInstr-fromAccount-cell");var k=bb.selector.query(j,".ap-createRenewalInstr-availableAmount");var h=bb.selector.query(j,".ap-createRenewalInstr-availableBalanceLabelAndAmount");var l=bb.selector.query(j,".ap-createRenewalInstr-availableBalanceLabelCell");var e=phe.select.getValue(b);var a;var d;var o=bb.selector.queryAll(j,".ap-createRenewalInstr-fromAccount-div");var g;for(var f=0;f<o.length;f++){g=phe.common.getAttribute(o[f],"data-accountNo");if(g==e){if(phe.common.getAttribute(o[f],"data-available")=="operator"){phe.common.hide(h);phe.common.setAttribute(h,"class","ap-createRenewalInstr-availableBalanceLabelAndAmount ap-common-hide")}else{a=phe.common.getAttribute(o[f],"data-availableFormatted");if(a!=null){phe.common.show(h);phe.common.setAttribute(h,"class","ap-createRenewalInstr-availableBalanceLabelAndAmount");d=phe.common.getAttribute(o[f],"data-available");phe.inputReadOnlyText.setValue(k,a);var c=bb.selector.query(n,".ap-createRenewalInstr-additionalAmount");var m=parseFloat(phe.hiddenField.getValue(c));if(!(d>=m)){phe.message.show(bb.selector.query(n,".ap-createRenewalInstr-selectedAccountInvalid"))}else{if(bb.selector.query(n,".ap-createRenewalInstr-selectedAccountInvalid")){phe.message.hide(bb.selector.query(n,".ap-createRenewalInstr-selectedAccountInvalid"))}}}}}}return d};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.sellUnitTrust=absa.apps.sellUnitTrust||{};absa.apps.sellUnitTrust.onUnitsToSellChange=function(g,c){var m=bb.selector.queryAncestor(g,c);var g=bb.selector.query(m,".ap-sellUnitTrust-redemptionType");var j=bb.selector.query(m,".ap-sellUnitTrust-unitsTotheValueOfR");var o=bb.selector.query(m,".ap-sellUnitTrust-unitsToSell");var l=bb.selector.query(m,".ap-sellUnitTrust-unitsToSellText");var k=phe.textBox.getValue(l);var n=phe.hiddenField.getValue(bb.selector.query(m,".ap-sellUnitTrust-minUnits"));var b=bb.selector.query(m,".sellUnitTrust-unitsTotheValueOfR");var f=phe.textBox.getValue(b);var i=phe.hiddenField.getValue(bb.selector.query(m,".sellUnitTrust-minAvailableBalance"));var h=bb.selector.query(m,".ap-sellUnitTrust-RedemptionWarningMessage");var a=bb.selector.query(m,".ap-sellUnitTrust-nityFiveRuleIndicator");var e=bb.selector.query(m,".ap-sellUT-amountAvailableForRedemption");var q=bb.selector.query(m,".ap-sellUT-unitsAvailableForRedemption");var d=phe.inputReadOnlyText.getValue(e);var p=phe.inputReadOnlyText.getValue(q);if("Units to the value of (R)"==phe.select.getValue(g)){phe.row.setAttribute(j,"class","ap-sellUnitTrust-unitsTotheValueOfR ap-sellUnitTrust-display");phe.row.setAttribute(o,"class","ap-sellUnitTrust-unitsToSell ap-sellUnitTrust-displayNone");phe.select.setAttribute(bb.selector.query(m,".ap-sellUnitTrust-redemptionType"),"customValidation","return true");if(parseFloat(f)/parseFloat(i)*100>95&&parseFloat(f)<parseFloat(i)){phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(a,"true")}else{phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(a,"false")}}else{if("Number of units"==phe.select.getValue(g)){phe.row.setAttribute(j,"class","ap-sellUnitTrust-unitsTotheValueOfR ap-sellUnitTrust-displayNone");phe.row.setAttribute(o,"class","ap-sellUnitTrust-unitsToSell ap-sellUnitTrust-display");phe.select.setAttribute(bb.selector.query(m,".ap-sellUnitTrust-redemptionType"),"customValidation","return true");if(parseFloat(k)/parseFloat(n)*100>95&&parseFloat(k)<=parseFloat(n)){phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(a,"true")}else{phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(a,"false")}}else{if("All units"==phe.select.getValue(g)){phe.row.setAttribute(j,"class","ap-sellUnitTrust-unitsTotheValueOfR ap-sellUnitTrust-displayNone");phe.row.setAttribute(o,"class","ap-sellUnitTrust-unitsToSell ap-sellUnitTrust-displayNone");phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");if(d=="0"||p=="0"){phe.select.setAttribute(bb.selector.query(m,".ap-sellUnitTrust-redemptionType"),"customValidation","return false")}else{phe.select.setAttribute(bb.selector.query(m,".ap-sellUnitTrust-redemptionType"),"customValidation","return true")}}else{phe.row.setAttribute(j,"class","ap-sellUnitTrust-unitsTotheValueOfR ap-sellUnitTrust-displayNone");phe.row.setAttribute(o,"class","ap-sellUnitTrust-unitsToSell ap-sellUnitTrust-displayNone");phe.row.setAttribute(h,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide")}}}};absa.apps.sellUnitTrust.onChangecheckBox=function(b){var a=bb.selector.queryAncestor(b,".ap-sellUnitTrust-cancelCheckbox");if(phe.checkBox.isChecked(b)){phe.checkBox.setAttribute(a,"value","Yes")}else{phe.checkBox.setAttribute(a,"value","No")}};absa.apps.sellUnitTrust.onChangeRedemptionAmount=function(g){var h=bb.selector.queryAncestor(g,".ap-unittrustTransaction-setupForm");var e=bb.selector.queryAncestor(g,".ap-sellUnitTrust-unitsTotheValueOfR");var b=bb.selector.query(e,".sellUnitTrust-unitsTotheValueOfR");var a=phe.textBox.getValue(b);var d=phe.hiddenField.getValue(bb.selector.query(e,".sellUnitTrust-minAvailableBalance"));var c=bb.selector.query(h,".ap-sellUnitTrust-RedemptionWarningMessage");var f=bb.selector.query(h,".ap-sellUnitTrust-nityFiveRuleIndicator");if(parseFloat(a)/parseFloat(d)*100>95&&parseFloat(a)<=parseFloat(d)){phe.row.setAttribute(c,"class","ap-sellUnitTrust-RedemptionWarningMessage");phe.row.setAttribute(c,"style","");phe.hiddenField.setValue(f,"true");phe.textBox.setAttribute(b,"customValidation","return true")}else{if(parseFloat(a)/parseFloat(d)*100<95){phe.row.setAttribute(c,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(f,"false");phe.textBox.setAttribute(b,"customValidation","return true")}else{if(parseFloat(a)>parseFloat(d)){phe.textBox.setAttribute(b,"customValidation","return false")}else{if(parseFloat(a)<parseFloat(d)){phe.textBox.setAttribute(b,"customValidation","return true")}}}}};absa.apps.sellUnitTrust.onChangeUnitsTosell=function(g){var h=bb.selector.queryAncestor(g,".ap-unittrustTransaction-setupForm");var c=bb.selector.queryAncestor(g,".ap-sellUnitTrust-unitsToSell");var f=bb.selector.query(c,".ap-sellUnitTrust-unitsToSellText");var a=phe.textBox.getValue(f);var e=phe.hiddenField.getValue(bb.selector.query(c,".ap-sellUnitTrust-minUnits"));var b=bb.selector.query(h,".ap-sellUnitTrust-RedemptionWarningMessage");var d=bb.selector.query(h,".ap-sellUnitTrust-nityFiveRuleIndicator");if(parseFloat(a)/parseFloat(e)*100>95&&parseFloat(a)<=parseFloat(e)){phe.row.setAttribute(b,"class","ap-sellUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(d,"true");phe.textBox.setAttribute(f,"customValidation","return true")}else{if(parseFloat(a)/parseFloat(e)*100<95){phe.row.setAttribute(b,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(d,"false");phe.textBox.setAttribute(f,"customValidation","return true")}else{if(parseFloat(a)>parseFloat(e)){phe.textBox.setAttribute(f,"customValidation","return false")}else{if(parseFloat(a)<parseFloat(e)){phe.textBox.setAttribute(f,"customValidation","return true")}}}}};absa.apps.sellUnitTrust.printSellUnitTrust=function(a){absa.openReport("report/sellUnitTrust.pdf?feIdentifier=SellUnitTrust&transDateTime="+a,"totalInvestmentPortfolio")};absa.apps.sellUnitTrust.onNextbutton=function(c){var b=bb.selector.queryAncestor(c,".ap-unitTrustTransaction-wizard");var a=bb.selector.query(b,".ap-sellUnitTrust-redemptionConfirmModal");phe.modal.showModal(0.5,a,b,false)};absa.apps.sellUnitTrust.resetButton=function(e){var f=bb.selector.queryAncestor(e,".ap-unittrustTransaction-setupForm");var c=bb.selector.query(f,".ap-sellUnitTrust-RedemptionWarningMessage");var d=bb.selector.query(f,".ap-sellUnitTrust-nityFiveRuleIndicator");var a=bb.selector.query(f,".ap-sellUnitTrust-unitsTotheValueOfR");var b=bb.selector.query(f,".ap-sellUnitTrust-unitsToSell");phe.row.setAttribute(a,"class","ap-sellUnitTrust-unitsTotheValueOfR ap-sellUnitTrust-display");phe.row.setAttribute(b,"class","ap-sellUnitTrust-unitsToSell ap-sellUnitTrust-displayNone");phe.row.setAttribute(c,"class","ap-sellUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(d,"false");phe.form.reset(f)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.switchUnitTrust=absa.apps.switchUnitTrust||{};absa.apps.switchUnitTrust.onChangeOfSwitchOption=function(e){var n=bb.selector.queryAncestor(e,".ap-switchUnitTrust-rootGrid");var k=bb.selector.query(n,".ap-switchUnitTrust-unitsToValue");var p=bb.selector.query(n,".ap-switchUnitTrust-unitsToSwitch");var f=bb.selector.query(n,".ap-switchUnitTrust-unitsToSwitch-textBox");var b=bb.selector.query(n,".ap-switchUnitTrust-unitsToValue-textBox");var g=bb.selector.query(n,".ap-switchUnitTrust-RedemptionWarningMessage");var d=bb.selector.query(n,".ap-switchUT-amountAvailableForRedemption");var o=bb.selector.query(n,".ap-switchUT-unitAvailableForRedemption");var a=bb.selector.query(n,".ap-sellUnitTrust-nityFiveRuleIndicator");var m=phe.hiddenField.getValue(bb.selector.query(n,".switchUnitTrustFund-fundAvlAmount"));var l=phe.hiddenField.getValue(bb.selector.query(n,".switchUnitTrustFund-fundAvlUnits"));var i=phe.textBox.getValue(b);var c=phe.textBox.getValue(f);var j=phe.inputReadOnlyText.getValue(d);var h=phe.inputReadOnlyText.getValue(o);if("Units to the value of (R)"==phe.select.getValue(e)){phe.row.setAttribute(k,"class","ap-switchUnitTrust-unitsToValue");phe.row.setAttribute(p,"class","ap-switchUnitTrust-unitsToSwitch ap-common-hide");phe.select.setAttribute(bb.selector.query(n,".ap-switchUnitTrustFund-switchOption"),"customValidation","return true");if(parseFloat(i)/parseFloat(m)*100>95){phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(a,"true")}else{phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(a,"false")}}else{if("Number of units"==phe.select.getValue(e)){phe.row.setAttribute(k,"class","ap-switchUnitTrust-unitsToValue ap-common-hide");phe.row.setAttribute(p,"class","ap-switchUnitTrust-unitsToSwitch");phe.select.setAttribute(bb.selector.query(n,".ap-switchUnitTrustFund-switchOption"),"customValidation","return true");if(parseFloat(c)/parseFloat(l)*100>95){phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(a,"true")}else{phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(a,"false")}}else{if("All units"==phe.select.getValue(e)){phe.row.setAttribute(k,"class","ap-switchUnitTrust-unitsToValue ap-common-hide");phe.row.setAttribute(p,"class","ap-switchUnitTrust-unitsToSwitch ap-common-hide");phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");if(j=="0"||h=="0"){phe.select.setAttribute(bb.selector.query(n,".ap-switchUnitTrustFund-switchOption"),"customValidation","return false")}else{phe.select.setAttribute(bb.selector.query(n,".ap-switchUnitTrustFund-switchOption"),"customValidation","return true")}}else{phe.row.setAttribute(k,"class","ap-switchUnitTrust-unitsToValue ap-common-hide");phe.row.setAttribute(p,"class","ap-switchUnitTrust-unitsToSwitch ap-common-hide");phe.row.setAttribute(g,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide")}}}};absa.apps.switchUnitTrust.onChangeOfIncomeDistributionType=function(a){var c=bb.selector.queryAncestor(a,".ap-switchUnitTrust-rootGrid");var b=bb.selector.query(c,".ap-switchUnitTrust-PayIntoAccount");if("Pay into an account"==phe.select.getValue(a)){phe.row.setAttribute(b,"class","ap-switchUnitTrust-PayIntoAccount")}else{phe.row.setAttribute(b,"class","ap-switchUnitTrust-PayIntoAccount ap-common-hide")}};absa.apps.switchUnitTrust.onChangeStartDate=function(h,b){var d=bb.selector.queryAncestor(h,b);var a=bb.selector.query(d,".ap-addDebitOrder-debitOrderStartDate");var i=phe.textBox.getValue(h);var c=phe.hiddenField.getValue(bb.selector.query(d,".ap-addDebitOrder-endDate"));var e=c.substring(5,7);var g=c.substring(0,4);var f=g+"-"+e+"-"+i;phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderMonth"),e);phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderStartDate"),f);phe.hiddenField.setValue(bb.selector.query(d,".ap-addDebitOrder-debitOrderDay"),i)};absa.apps.switchUnitTrust.onChangeCheckBox=function(b,c){var a=bb.selector.queryAncestor(b,c);var h=bb.selector.query(a,".ap-SwitchUnitTrustNewDebitChecked");var f=bb.selector.query(a,".ap-addDebitOrder-debitOrderAmount");var e=bb.selector.query(a,".ap-addDebitOrder-debitOrderAllowedDate");var d=bb.selector.query(a,".ui-select");var j=bb.selector.query(a,".ap-addDebitOrder-debitOrderDay");var i=bb.selector.query(a,".ap-addDebitOrder-annualIncreasePercentage");var g=phe.checkBox.getAttribute(b,"checked");if(g){phe.select.setAttribute(d,"disabled","false");phe.textBox.setAttribute(f,"disabled","false");phe.select.setAttribute(e,"disabled","false");phe.inputReadOnlyText.setAttribute(j,"disabled","false");phe.textBox.setAttribute(i,"disabled","false");phe.hiddenField.setValue(h,"yes");phe.textBox.setAttribute(f,"required","true");phe.select.setAttribute(e,"required","true")}else{phe.hiddenField.setValue(h,"no");phe.textBox.setAttribute(f,"required","false");phe.select.setAttribute(e,"required","false");phe.textBox.setAttribute(i,"required","false");phe.select.setSelectedIndex(d,0);phe.textBox.setValue(f,"");phe.select.setSelectedIndex(e,0);phe.inputReadOnlyText.setValue(j,"");phe.textBox.setValue(i,"10");phe.select.setAttribute(d,"disabled","true");phe.textBox.setAttribute(f,"disabled","true");phe.select.setAttribute(e,"disabled","true");phe.inputReadOnlyText.setAttribute(j,"disabled","true");phe.textBox.setAttribute(i,"disabled","true");phe.textBox.setAttribute(f,"customValidation","");phe.select.setAttribute(e,"customValidation","");phe.textBox.setAttribute(i,"customValidation","");absa.form.validate.checkElement(f);absa.form.validate.checkElement(i);absa.form.validate.checkElement(e)}};absa.apps.switchUnitTrust.resetButton=function(h){var b=bb.selector.queryAncestor(h,".ap-switchUnitTrust-setupForm");var i=bb.selector.queryAncestor(h,".ap-switchUnitTrust-setupForm");var c=bb.selector.query(b,".ap-addDebitOrder-debitOrderAllowedDate");var e=bb.selector.query(b,".ap-SwitchUnitTrustNewDebit");var g=bb.selector.query(b,".ap-addDebitOrder-debitOrderAmount");var j=bb.selector.query(b,".ap-addDebitOrder-annualIncreasePercentage");var k=bb.selector.query(b,".ap-switchUnitTrust-unitsToSwitch-textBox");var d=bb.selector.query(b,".ap-switchUnitTrust-RedemptionWarningMessage");var a=bb.selector.query(b,".ap-sellUnitTrust-nityFiveRuleIndicator");var f=bb.selector.query(b,".ap-switchUnitTrust-unitsToValue");var k=bb.selector.query(b,".ap-switchUnitTrust-unitsToSwitch");phe.select.setSelectedIndex(c,0);phe.select.setAttribute(c,"required","false");phe.select.setAttribute(c,"customValidation","return true");absa.form.validate.checkElement(c);phe.textBox.setAttribute(g,"required","false");phe.textBox.setValue(g,"");phe.textBox.setAttribute(g,"customValidation","");absa.form.validate.checkElement(g);absa.form.validate.checkElement(k);phe.textBox.setValue(j,"10");absa.form.validate.checkElement(j);phe.row.setAttribute(d,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");phe.row.setAttribute(f,"class","ap-switchUnitTrust-unitsToValue");phe.row.setAttribute(k,"class","ap-switchUnitTrust-unitsToSwitch ap-common-hide");phe.hiddenField.setValue(a,"false");phe.form.reset(i)};absa.apps.switchUnitTrust.onCheckAnotherDebitAcc=function(p){var i=bb.selector.queryAncestor(p,".ap-switchUnitTrust-rootGrid");var j=bb.selector.query(i,".ap-switchUnitTrust-DebitClone");var o=phe.hiddenField.getValue(bb.selector.query(i,".ap-SwitchUnitTrustDebitOrderCount"));var h=phe.hiddenField.getValue(bb.selector.query(i,".ap-SwitchUnitTrustDebitLimit"));var q=phe.hiddenField.getValue(bb.selector.query(i,".ap-SwitchUnitTrustIncrementCount"));var s=parseInt(h)-parseInt(o);if(s>q){var d=j.lastChild;var g=phe.grid.getAttribute(d,"class").charAt(phe.grid.getAttribute(d,"class").length-1);g++;var f=d.cloneNode(true);var a=phe.grid.getAttribute(f,"class").substring(0,phe.grid.getAttribute(f,"class").length-1);phe.grid.setAttribute(f,"class",a+g);var b=phe.grid.getAttribute(f,"class");var l=bb.selector.query(f,".ap-addDebitOrder-debitOrderAllowedDate");phe.select.setAttribute(l,"onchange","absa.apps.switchUnitTrust.onChangeStartDate(this,'."+b+"')");var m=bb.selector.query(f,".ap-addDebitOrder-debitOrderAmount");phe.inputReadOnlyText.setAttribute(m,"onchange","absa.apps.switchUnitTrust.onChangeDebitAmount(this,'."+b+"')");var e=bb.selector.query(f,".ap-SwitchUnitTrustNewDebit");phe.checkBox.setValue(e,"no");phe.checkBox.setAttribute(e,"onchange","absa.apps.switchUnitTrust.onChangeCheckBox(this,'."+b+"')");phe.checkBox.setAttribute(e,"checked","true");var c=bb.selector.query(f,".ui-select");var r=bb.selector.query(f,".ap-addDebitOrder-debitOrderDay");var k=bb.selector.query(f,".ap-addDebitOrder-annualIncreasePercentage");phe.select.setSelectedIndex(c,0);phe.textBox.setValue(m,"");phe.select.setSelectedIndex(l,0);phe.inputReadOnlyText.setValue(r,"");phe.textBox.setValue(k,"10");j.appendChild(f);phe.checkBox.setAttribute(bb.selector.query(i,".ap-SwitchUnitTrustanotherDebit"),"checked","false");var n=parseInt(q)+1;phe.hiddenField.setValue(bb.selector.query(i,".ap-SwitchUnitTrustIncrementCount"),n);absa.initializeNewContent(f);absa.apps.switchUnitTrust.onChangeCheckBox(e,"."+b)}else{phe.checkBox.setAttribute(bb.selector.query(i,".ap-SwitchUnitTrustanotherDebit"),"checked","false");phe.checkBox.setAttribute(bb.selector.query(i,".ap-SwitchUnitTrustanotherDebit"),"disabled","true")}};absa.apps.switchUnitTrust.onChangeAmount=function(f){var b=bb.selector.queryAncestor(f,".ap-switchUnitTrust-rootGrid");var e=phe.hiddenField.getValue(bb.selector.query(b,".switchUnitTrustFund-fundAvlAmount"));var d=phe.textBox.getValue(bb.selector.query(b,".ap-switchUnitTrust-unitsToValue-textBox"));var a=bb.selector.query(b,".ap-switchUnitTrust-RedemptionWarningMessage");var c=bb.selector.query(b,".ap-sellUnitTrust-nityFiveRuleIndicator");if(parseFloat(d)/parseFloat(e)*100>95&&parseFloat(e)>=parseFloat(d)){phe.row.setAttribute(a,"class","ap-switchUnitTrust-RedemptionWarningMessage");phe.row.setAttribute(a,"style","");phe.hiddenField.setValue(c,"true");phe.textBox.setAttribute(bb.selector.query(b,".ap-switchUnitTrust-unitsToValue-textBox"),"customValidation","return true")}else{if(parseFloat(d)/parseFloat(e)*100<95){phe.row.setAttribute(a,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");phe.textBox.setAttribute(bb.selector.query(b,".ap-switchUnitTrust-unitsToValue-textBox"),"customValidation","return true")}else{if(parseFloat(e)<parseFloat(d)){phe.textBox.setAttribute(bb.selector.query(b,".ap-switchUnitTrust-unitsToValue-textBox"),"customValidation","return false")}else{if(parseFloat(e)>parseFloat(d)){phe.textBox.setAttribute(bb.selector.query(b,".ap-switchUnitTrust-unitsToValue-textBox"),"customValidation","return true")}}}}};absa.apps.switchUnitTrust.onChangeFundSelect=function(c){var i=bb.selector.queryAncestor(c,".ui-form");var b=phe.select.getValue(c);if(b.indexOf("@")>-1){var a=bb.selector.queryAncestor(c,".ui-row");var e=bb.selector.query(i,".ap-icon-viewPdf");var h=bb.selector.query(i,".ap-SwitchUnitTrust-termsAndConditions-link");var d=bb.selector.query(a,".ap-switchUnitTrustFund-termsCondCMSKey");var j=phe.select.getSelectedIndex(c);var g=c.options[j];var k=g.getAttribute("data-pdf");var f=g.getAttribute("data-termsandcond");phe.link.setAttribute(e,"onclick","absa.gadgets.accounts.openPdfFromCms('"+k+"')");phe.hiddenField.setValue(d,f);phe.button.setAttribute(h,"onclick","absa.apps.switchUnitTrust.termsAndCond(this,'"+f+"')")}};absa.apps.switchUnitTrust.termsAndCond=function(f,e){var b=bb.selector.queryAncestor(f,".ui-row");var a=bb.selector.query(b,".ap-switchUnitTrustFund-termsCondCMSKey");var c=phe.hiddenField.getValue(a);if(c==""){c=e}else{c=escape(e)}var d="assets"+c;window.open(d,"TermsAndConditions","top=0,left=0,width=850,height=600,resizable")};absa.apps.switchUnitTrust.onChangeUnits=function(f){var c=bb.selector.queryAncestor(f,".ap-switchUnitTrust-rootGrid");var e=phe.hiddenField.getValue(bb.selector.query(c,".switchUnitTrustFund-fundAvlUnits"));var a=phe.textBox.getValue(bb.selector.query(c,".ap-switchUnitTrust-unitsToSwitch-textBox"));var b=bb.selector.query(c,".ap-switchUnitTrust-RedemptionWarningMessage");var d=bb.selector.query(c,".ap-sellUnitTrust-nityFiveRuleIndicator");if(parseFloat(a)/parseFloat(e)*100>95&&parseFloat(e)>=parseFloat(a)){phe.row.setAttribute(b,"class","ap-switchUnitTrust-RedemptionWarningMessage");phe.hiddenField.setValue(d,"true");phe.textBox.setAttribute(bb.selector.query(c,".ap-switchUnitTrust-unitsToSwitch-textBox"),"customValidation","return true")}else{if(parseFloat(a)/parseFloat(e)*100<95){phe.row.setAttribute(b,"class","ap-switchUnitTrust-RedemptionWarningMessage ap-common-hide");phe.hiddenField.setValue(d,"false");phe.textBox.setAttribute(bb.selector.query(c,".ap-switchUnitTrust-unitsToSwitch-textBox"),"customValidation","return true")}else{if(parseFloat(e)<parseFloat(a)){phe.textBox.setAttribute(bb.selector.query(c,".ap-switchUnitTrust-unitsToSwitch-textBox"),"customValidation","return false")}else{if(parseFloat(e)>parseFloat(a)){phe.textBox.setAttribute(bb.selector.query(c,".ap-switchUnitTrust-unitsToSwitch-textBox"),"customValidation","return true")}}}}};absa.apps.switchUnitTrust.onChangeDebitAmount=function(d,e){var c=bb.selector.queryAncestor(d,e);var b=phe.textBox.getValue(bb.selector.query(c,".ap-addDebitOrder-debitOrderAmount"));var a=phe.inputReadOnlyText.getValue(bb.selector.query(c,".ap-addDebitOrder-debitOrderMinimumAmount"));if(parseFloat(b)<parseFloat(a)){phe.textBox.setAttribute(bb.selector.query(c,".ap-addDebitOrder-debitOrderAmount"),"customValidation","return false")}else{phe.textBox.setAttribute(bb.selector.query(c,".ap-addDebitOrder-debitOrderAmount"),"customValidation","return true")}};absa.apps.switchUnitTrust.printSwitchlUnitTrust=function(c,e){var a=bb.selector.queryAncestor(c,".ap-unitTrustTransaction-wizard");var d=bb.selector.query(a,"#switchUnitTrustFund-unitTrustAccountHolder");var b="";if(d!=null){if(d.value==""){b="-"}else{b=d.value}}absa.openReport("report/switchUnitTrust.pdf?feIdentifier=SwitchUnitTrustFund&transDateTime="+e+"&unitTrustAccountHolder="+b,"totalInvestmentPortfolio")};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.unitTrustTransactions=absa.apps.unitTrustTransactions||{};absa.apps.unitTrustTransactions.onUnitTrustRadioGroupChange=function(g){var c=bb.selector.queryAncestor(g,".ap-unitTrustTransaction-row");var e=phe.radioGroup.getValue(g);var h=bb.selector.query(c,".ap-unitTrustTransaction-exclusiveMoneyMarketLabel");if(e=="switch"){phe.label.show(h)}else{phe.label.hide(h)}var d=bb.selector.queryAncestor(g,".ap-unitTrustTransaction-wizard");var n=bb.selector.query(d,".ap-unittrustTransaction-detail");var f=phe.hiddenField.getValue(bb.selector.query(d,"[name=unitTrustAccountNumber]"));var o=phe.hiddenField.getValue(bb.selector.query(d,"[name=unitTrustAccountHolder]"));var a=phe.hiddenField.getValue(bb.selector.query(d,"[name=fundName]"));var i=phe.hiddenField.getValue(bb.selector.query(d,"[name=fundAvlUnits]"));var m=phe.hiddenField.getValue(bb.selector.query(d,"[name=fundAvlBalance]"));var b=phe.hiddenField.getValue(bb.selector.query(d,"[name=fundCode]"));var j=phe.hiddenField.getValue(bb.selector.query(d,"[name=fundCodeCommon]"));var l="true";var k="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/unittrustTransaction&mode="+e+"&unitTrustAccountNumber="+f+"&unitTrustAccountHolder="+o+"&fundName="+encodeURIComponent(a)+"&fundCode="+b+"&toggleManageUT="+l+"&fundCodeValue="+j+"&fundAvlBalance="+m+"&fundAvlUnits="+i;phe.common.setAttribute(n,"proxyurl",k);absa.lazyLoadNode(n,true,function(){phe.modal.updatePosition()})};absa.apps.unitTrustTransactions.unitTrustFundInfoPDF=function(a){};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewAccountDetailsAccountTab=absa.apps.viewAccountDetailsAccountTab||{};absa.apps.viewAccountDetailsAccountTab.loadTab=function(a){var b=bb.selector.query(a,".ui-tabHead");phe.tabBox.selectTab(b,false)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewNotifyMeHistoryAccount=absa.apps.viewNotifyMeHistoryAccount||{};absa.apps.viewNotifyMeHistoryAccount.retriveDateData=function(j){var f=bb.selector.queryAncestor(j,".ap-viewNotifyMeHistory-root");var h=bb.selector.query(f,".ap-viewNotifyMeHistory-fromDate");var a=bb.selector.query(f,".ap-viewNotifyMeHistory-toDate");var c=bb.selector.query(f,".ap-viewNotifyMeHistory-account");var k=bb.selector.query(f,".ap-viewNotifyMeHistory-selctCategory");var l=bb.selector.query(f,".ap-viewNotifyMeHistory-table");var d=phe.select.getValue(c);var e=phe.datePicker.getValue(h);var g=phe.datePicker.getValue(a);var b=phe.select.getValue(k);var i="proxy?pipe=genericWebservice&ws=NotifyMeHistWebService&action=viewNotifyMeHistory&view=accounts&mode=jstable&accountNumber="+d+"&notifyMeFromDate="+e+"&notifyMeToDate="+g+"&category="+b;if(h=="From Date"){return}if(a=="To Date"){return}if(absa.apps.viewNotifyMeHistoryAccount.checkDateRange(f)){phe.table.setAttribute(l,"dataFile",i);phe.table.reload(l)}};absa.apps.viewNotifyMeHistoryAccount.checkDateRange=function(a){var c=bb.selector.query(a,".ap-viewNotifyMeHistory-fromDate");var b=bb.selector.query(a,".ap-viewNotifyMeHistory-toDate");var d=absa.date.getDaysDiff(phe.datePicker.getValue(c),phe.datePicker.getValue(b));if(Number(d)<0){phe.datePicker.setAttribute(b,"customValidation","return false");absa.form.validate.checkElement(b);return false}else{phe.datePicker.setAttribute(b,"customValidation","return true");absa.form.validate.checkElement(b);return true}};absa.apps.viewNotifyMeHistoryAccount.smsHistory=function(h){var u=bb.selector.queryAncestor(h,".ap-viewNotifyMeHistory-record");var a=bb.selector.query(u,".ap-viewNotifyMeHistory-dateTime");var k=bb.selector.query(u,".ap-viewNotifyMeHistory-recipientName");var m=bb.selector.query(u,".ap-viewNotifyMeHistory-recipientName");var n=bb.selector.query(u,".ap-viewNotifyMeHistory-billingCycle");var e=bb.selector.query(u,".ap-viewNotifyMeHistory-billingCycle");var s=bb.selector.query(u,".ap-viewNotifyMeHistory-deliveryMethod");var j=bb.selector.query(u,".ap-viewNotifyMeHistory-transType");var l=bb.selector.query(u,".ap-viewNotifyMeHistory-deliveryStatus");var p=bb.selector.query(u,".ap-viewNotifyMeHistory-dateTime");var q=bb.selector.query(u,".ap-viewNotifyMeHistory-recipientName");var g=phe.tableBodyCell.getAttribute(a,"data-dateTime");var w=phe.tableBodyCell.getAttribute(k,"data-recipientID");var x=phe.tableBodyCell.getAttribute(n,"data-sequenceNo");var t=phe.tableBodyCell.getAttribute(j,"data-transtype");var f=phe.tableBodyCell.getAttribute(s,"data-deliveryMethod");var c=phe.tableBodyCell.getAttribute(m,"data-recipientName");var v=phe.tableBodyCell.getAttribute(e,"data-billingCycle");var o=phe.tableBodyCell.getAttribute(l,"data-deliveryStatus");var b=phe.tableBodyCell.getAttribute(p,"data-Date");var i=phe.tableBodyCell.getAttribute(q,"data-accountNumber");g=g.substring(0,2)+g.substring(3,5)+g.substring(6,8)+g.substring(9,11);var r="proxy?pipe=genericWebservice&ws=NotifyMeHistWebService&action=fetchSMSContaintNotifyMe&RecID="+w+"&time="+g+"&SeqNo="+x+"&Category="+t+"&DelMethod="+f+"&RecipName="+c+"&Billingcycle="+v+"&Status="+o+"&sDate="+b+"&sAccNum="+i;var d=absa.locale["Notifications/ViewNotifyMeHistory/Label/NotifyMeMessage"];absa.modal.loadModal(r,d)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewNotifyMeRecipientsList=absa.apps.viewNotifyMeRecipientsList||{};absa.apps.viewNotifyMeRecipientsList.onChangeRecipientButtonClick=function(b,c,a){absa.apps.changeNotifyMeRecipientForAccount.ownerTable=bb.selector.queryAncestor(b,".ap-viewNotifyMeRecipientsForAccount-table");absa.modal.loadModal(c,a,null,function(f){var d=bb.selector.query(f,".ap-changeNotifyMeRecipient-modal");var e=phe.wizard.getCurrentStepIndex(d);if(e=="2"){absa.apps.viewNotifyMeRecipientsList.reloadNotifyMeRecipientsList(absa.apps.changeNotifyMeRecipientForAccount.ownerTable)}})};absa.apps.viewNotifyMeRecipientsList.onChangeHistoryButtonClick=function(c,d,a){var b=bb.selector.queryAncestor(c,"tr");if(phe.tableBodyRow.isExpanded(b)&&b._dataFile==d){phe.tableBodyRow.collapseRow(b)}else{phe.tableBodyRow.expandRow(b,d)}};absa.apps.viewNotifyMeRecipientsList.goToAddNotifyMeRecipient=function(){gadgets.pubsub.publish("goTo:profile/notifyMe/addNotifyMeRecipient")};absa.apps.viewNotifyMeRecipientsList.goToViewNotifyMeRecipients=function(){gadgets.pubsub.publish("goTo:profile/notifyMe/viewNotifyMeRecipients")};absa.apps.viewNotifyMeRecipientsList.goToViewNotifyMeRecipientHistory=function(){};absa.apps.viewNotifyMeRecipientsList.reloadNotifyMeRecipientsList=function(a){phe.table.reload(a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewRewardMemberDetail=absa.apps.viewRewardMemberDetail||{};absa.apps.viewRewardMemberDetail.onEditButtonClick=function(c,e,d,f){var b=bb.selector.queryAncestor(c,".ap-viewMembershipDetails-rootTab");var a="proxy?pipe=genericEmptyResponse&xslFile=Rewards/changeRewardsMembershipDetails&membershipNumber="+e+"&annualFee="+d+"&monthlyFee="+f;b.setAttribute("proxyurl",a);absa.lazyLoadNode(b,true)};absa.apps.viewRewardMemberDetail.onChangeTabhead=function(a,c){var e=bb.selector.queryAncestor(a,".ui-tabBox");var d=bb.selector.query(e,".ap-viewMembershipDetails-rootTab");var b="proxy?pipe=genericWebservice&ws=RewardsNewWebService&action=viewRewardMemberDetail&membershipNumber="+c;d.setAttribute("proxyurl",b)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewTransactionHistory=absa.apps.viewTransactionHistory||{};absa.apps.viewTransactionHistory.onDateFilterButtonClick=function(h,g,a){var c=bb.selector.queryAncestor(h,".ap-viewTransactionHistory");var b=bb.selector.query(c,".ap-viewTransactionHistory-table");var f=bb.selector.query(c,".ap-viewTransactionHistory-datePickerFrom");var e=bb.selector.query(c,".ap-viewTransactionHistory-datePickerTo");absa.apps.viewTransactionHistory.checkDateRange(c);if(absa.form.validate.checkElement(f)&&absa.form.validate.checkElement(e)){var d="";if(g=="transactionHistory"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&mode=table&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}else{if(g=="pendingUnclearedTransactions"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=getPendingUnclearedTransactions&mode=table&unclearedAndPending=true&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}else{if(g=="absaRewards"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getRewardsTransactionHistory&mode=table&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}else{if(g=="absaSavingsPortfolio"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view="+g+"&mode=table&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}else{if(g=="avaf"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=avaf&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}else{d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=creditCardStraight&mode=table&fromAccount="+a+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(e)}}}}}phe.table.setAttribute(b,"dataFile",d);phe.table.reload(b)}};absa.apps.viewTransactionHistory.onToDatePickerChange=function(b){var a=bb.selector.queryAncestor(b,".ap-viewTransactionHistory");absa.apps.viewTransactionHistory.checkDateRange(a)};absa.apps.viewTransactionHistory.checkDateRange=function(a){var c=bb.selector.query(a,".ap-viewTransactionHistory-datePickerFrom");var b=bb.selector.query(a,".ap-viewTransactionHistory-datePickerTo");var d=absa.date.getDaysDiff(phe.datePicker.getValue(c),phe.datePicker.getValue(b));if(Number(d)<0){phe.datePicker.setAttribute(b,"customValidation","return false");absa.form.validate.checkElement(b)}else{phe.datePicker.setAttribute(b,"customValidation","return true");absa.form.validate.checkElement(b)}};absa.apps.viewTransactionHistory.onPrintButtonClick=function(h,g,j){var k="N";if(j==null){j=false}else{if(j==true){k="S"}}var i=bb.selector.queryAncestor(h,".ap-viewTransactionHistory");var r=bb.selector.query(i,".ap-viewTransactionHistory-form");var s=bb.selector.query(i,".ap-viewTransactionHistory-searchBox");var o=phe.searchBox.getValue(s);var u=bb.selector.query(i,".ap-viewTransactionHistory-datePickerFrom");var n=bb.selector.query(i,".ap-viewTransactionHistory-datePickerTo");var l=phe.datePicker.getValue(u);var t=phe.datePicker.getValue(n);var v=r.getAttribute("data-cBal");var b="false";var a="false";var m="";var d=bb.selector.queryAncestor(i,".ap-absaReward");if(d!=null){a="true";var f=bb.selector.query(document.body,".ap-jsp-body");m=f.getAttribute("accessAccount")}var p=bb.selector.queryAncestor(h,".ap-viewTransactionHistory-grid");if(p){b=p.getAttribute("data-ccard")}if(b==null){b="false"}else{if(b=="CreditCardStraight"){b="true"}else{b="false"}}var c=bb.selector.query(i,".ap-viewTransactionHistory-table");var e=phe.table.getAttribute(c,"sortedcolumn");var q=phe.table.getAttribute(c,"sortorder");if(e==null|e==""){e="lineNumber";q="ASC"}else{if(e=="transactionDate"){e="lineNumber"}}absa.apps.viewTransactionHistory.checkDateRange(i);if(absa.form.validate.checkElement(u)&&absa.form.validate.checkElement(n)){if(a=="true"){absa.openReport("report/transactionHistoryRewards.pdf?isCreditCard="+b+"&fromAccount="+m+"&rewardsAccount="+g+"&fromDate="+l+"&toDate="+t+"&sortField="+e+"&sortOrder="+q+"&isRewardAcc="+a+"&cBal="+v+"&query="+o+"&go","transhistory")}else{absa.openReport("report/transactionHistory.pdf?statementType="+k+"&isCreditCard="+b+"&fromAccount="+g+"&fromDate="+l+"&toDate="+t+"&sortField="+e+"&sortOrder="+q+"&isRewardAcc="+a+"&cBal="+v+"&query="+o+"&go","transhistory");if(k=="S"){phe.modal.hideModal()}}}};absa.apps.viewTransactionHistory.onPrintButtonBudgetClick=function(h,j,i,d){var b=bb.selector.queryAncestor(h,".ap-viewTransactionHistory");var g="";var c="true";var e=bb.selector.query(b,".ap-viewTransactionHistory-table");var a=phe.table.getAttribute(e,"sortedcolumn");var f=phe.table.getAttribute(e,"sortorder");if(a==null|a==""){a="lineNumber";f="ASC"}else{if(a=="transactionDate"){a="lineNumber"}}absa.openReport("report/transaction-CreditCard-History.pdf?isCreditCard="+c+"&fromAccount="+j+"&fromDate="+i+"&toDate="+d+"&sortField="+a+"&sortOrder="+f+"&query="+g,"transhistory")};absa.apps.viewTransactionHistory.onToggleRowNumberClick=function(e){var b=bb.selector.queryAncestor(e,".ap-viewTransactionHistory");var d=bb.selector.query(b,".ap-viewTransactionHistory-datePickerFrom");var c=bb.selector.query(b,".ap-viewTransactionHistory-datePickerTo");absa.apps.viewTransactionHistory.checkDateRange(b);if(absa.form.validate.checkElement(d)&&absa.form.validate.checkElement(c)){var a=bb.selector.query(b,".ap-viewTransactionHistory-table");if(bb.html.hasClass(a,"ap-viewTransactionHistory-tableSize10")){phe.button.setAttribute(e,"class","ap-icon-3010");phe.table.setAttribute(a,"rowPacketSize","40");bb.html.replaceClass(a,"ap-viewTransactionHistory-tableSize10","ap-viewTransactionHistory-tableSize30");phe.table.setAttribute(a,"height","900px")}else{phe.button.setAttribute(e,"class","ap-icon-1030");phe.table.setAttribute(a,"rowPacketSize","20");bb.html.replaceClass(a,"ap-viewTransactionHistory-tableSize30","ap-viewTransactionHistory-tableSize10");phe.table.setAttribute(a,"height","300px")}phe.table.reload(a)}};absa.apps.viewTransactionHistory.onToggleRowNumberClickBudget=function(c){var b=bb.selector.queryAncestor(c,".ap-viewTransactionHistory");var a=bb.selector.query(b,".ap-viewTransactionHistory-table");if(bb.html.hasClass(a,"ap-viewTransactionHistory-tableSize10")){phe.button.setAttribute(c,"class","ap-icon-3010");phe.table.setAttribute(a,"rowPacketSize","40");bb.html.replaceClass(a,"ap-viewTransactionHistory-tableSize10","ap-viewTransactionHistory-tableSize30");phe.table.setAttribute(a,"height","900px")}else{phe.button.setAttribute(c,"class","ap-icon-1030");phe.table.setAttribute(a,"rowPacketSize","20");bb.html.replaceClass(a,"ap-viewTransactionHistory-tableSize30","ap-viewTransactionHistory-tableSize10");phe.table.setAttribute(a,"height","300px")}phe.table.reload(a)};absa.apps.viewTransactionHistory.onSearchBoxClick=function(e,b,k){var c=bb.selector.queryAncestor(e,".ap-viewTransactionHistory");var l=bb.selector.query(c,".ap-viewTransactionHistory-form");var j=bb.selector.query(c,".ap-viewTransactionHistory-table");var f=bb.selector.query(c,".ap-viewTransactionHistory-datePickerFrom");var a=bb.selector.query(c,".ap-viewTransactionHistory-datePickerTo");var i=phe.datePicker.getValue(f);var d=phe.datePicker.getValue(a);var g=l.getAttribute("data-accountBits");absa.apps.viewTransactionHistory.checkDateRange(c);if((absa.form.validate.checkElement(f))&&(absa.form.validate.checkElement(a))){var h="";if(b=="CreditCardStraight"){h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=creditCardStraight&mode=table&fromAccount="+k+"&fromDate="+i+"&toDate="+d+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}else{if(b=="pendingUnclearedTransactions"){h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=getPendingUnclearedTransactions&mode=table&fromAccount="+k+"&fromDate="+i+"&toDate="+d+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}else{if(b=="absaRewards"){h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getRewardsTransactionHistory&mode=table&fromAccount="+k+"&fromDate="+i+"&toDate="+d+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}else{if(b=="absaSavingsPortfolio"){h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=absaSavingsPortfolio&mode=table&fromAccount="+k+"&fromDate="+i+"&toDate="+d+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}else{if(b=="avaf"){h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&view=avaf&fromAccount="+k+"&fromDate="+phe.datePicker.getValue(f)+"&toDate="+phe.datePicker.getValue(a)+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}else{h="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getTransactionHistory&mode=table&search=true&fromAccount="+k+"&fromDate="+i+"&toDate="+d+"&accountBits="+g+"&searchValue="+phe.searchBox.getValue(e)}}}}}phe.table.setAttribute(j,"dataFile",h);phe.table.reload(j)}};absa.apps.viewTransactionHistory.onResetSearchButtonClick=function(b,c,d){var a=bb.selector.queryAncestor(b,".ap-viewTransactionHistory-rowFilter");var f=bb.selector.query(a,".ap-viewTransactionHistory-datePickerFrom");var e=bb.selector.query(a,".ap-viewTransactionHistory-datePickerTo");phe.datePicker.setValue(f,c);phe.datePicker.setValue(e,d)};absa.apps.viewTransactionHistory.modal={oDownloadButton:null,hidePopup:function(){phe.modal.hideModal()},showStampedStatementPopup:function(f,a,g){var b=bb.selector.queryAncestor(f,".ap-viewTransactionHistory");var c=bb.selector.query(b,g);var e=bb.selector.query(b,".ap-viewTransactionHistory-datePickerFrom");var d=bb.selector.query(b,".ap-viewTransactionHistory-datePickerTo");this.oDownloadButton=f;absa.apps.viewTransactionHistory.checkDateRange(b);if((absa.form.validate.checkElement(e))&&(absa.form.validate.checkElement(d))){phe.modal.showModal(0.5,c,b,true)}},showDownloadPopup:function(e,f){var a=bb.selector.queryAncestor(e,".ap-viewTransactionHistory");var b=bb.selector.query(a,f);var d=bb.selector.query(a,".ap-viewTransactionHistory-datePickerFrom");var c=bb.selector.query(a,".ap-viewTransactionHistory-datePickerTo");this.oDownloadButton=e;absa.apps.viewTransactionHistory.checkDateRange(a);if((absa.form.validate.checkElement(d))&&(absa.form.validate.checkElement(c))){phe.modal.showModal(0.5,b,a,true)}},showDownloadPopupBudget:function(c,d){this.oDownloadButton=c;var a=bb.selector.queryAncestor(c,".ap-viewTransactionHistory");var b=bb.selector.query(a,d);phe.modal.showModal(0.5,b,a,true)},downloadStatement:function(g,f){var h=bb.selector.queryAncestor(this.oDownloadButton,".ap-viewTransactionHistory");var q=bb.selector.query(h,".ap-viewTransactionHistory-form");var r=bb.selector.query(h,".ap-viewTransactionHistory-searchBox");var m=phe.searchBox.getValue(r);var t=bb.selector.query(h,".ap-viewTransactionHistory-datePickerFrom");var l=bb.selector.query(h,".ap-viewTransactionHistory-datePickerTo");var j=phe.datePicker.getValue(t);var s=phe.datePicker.getValue(l);var u=q.getAttribute("data-cBal");var b=bb.selector.queryAncestor(this.oDownloadButton,".ap-account-gadget-content");var k="CHECKING";if(b){k=b.getAttribute("data-accType");if(k=="currentAccount"){k="CHECKING"}else{if(k=="creditCard"){k="CREDITLINE"}else{if(k=="moneyMarket"){k="MONEYMRKT"}else{k="SAVINGS"}}}}var o=bb.selector.query(h,".ap-viewTransactionHistory-grid");if(o){isCreditCard=o.getAttribute("data-ccard")}if(isCreditCard==null){isCreditCard="false"}else{if(isCreditCard=="CreditCardStraight"){isCreditCard="true"}else{isCreditCard="false"}}var a=bb.selector.query(h,".ap-viewTransactionHistory-table");var c=phe.table.getAttribute(a,"sortedcolumn");var p=phe.table.getAttribute(a,"sortorder");if(c==null|c==""){c="lineNumber";p="ASC"}else{if(c=="transactionDate"){c="lineNumber"}}var n=bb.selector.queryAncestor(g,".ap-downloadTransactionHistory-modal");var i=bb.selector.query(n,".downloadTransactionHistory-select");var e=phe.select.getValue(i)*1;var d="";switch(e){case 1:d="txt";break;case 2:d="ofc";break;case 3:d="ofx";break;case 4:d="pastel";break;case 5:d="qif";break;case 6:d="csv";break;case 7:d="qbo";break;case 8:d="qif";break}c="transactionDate";p="ASC";absa.openReport("report/transactionHistory."+d+"?forceDownload=false&acctType="+k+"&isCreditCard="+isCreditCard+"&fromAccount="+f+"&fromDate="+j+"&toDate="+s+"&sortField="+c+"&sortOrder="+p+"&cBal="+u+"&query="+m,"transhist")},downloadStatementBudget:function(h,j){var c=bb.selector.queryAncestor(this.oDownloadButton,".ap-viewTransactionHistory");var k=bb.selector.queryAncestor(this.oDownloadButton,".ap-account-gadget-content");var g="CHECKING";if(k){g=k.getAttribute("data-accType");if(g=="currentAccount"){g="CHECKING"}else{if(g=="creditCard"){g="CREDITLINE"}else{if(g=="moneyMarket"){g="MONEYMRKT"}else{g="SAVINGS"}}}}var i=bb.selector.query(c,".ap-viewTransactionHistory-grid");if(i){var e=i.getAttribute("data-ccard")}if(e==null){e="false"}else{if(e=="CreditCardStraight"){e="true"}else{e="false"}}var f=bb.selector.queryAncestor(h,".ap-downloadTransactionHistory-modal");var b=bb.selector.query(f,".downloadTransactionHistory-select");var d=phe.select.getValue(b)*1;var a="";switch(d){case 1:a="txt";break;case 2:a="ofc";break;case 3:a="ofx";break;case 4:a="pastel";break;case 5:a="qif";break;case 6:a="csv";break;case 7:a="qbo";break;case 8:a="qif";break}sSortField="transactionDate";sSortOrder="ASC";absa.openReport("report/transactionHistory."+a+"?forceDownload=false&acctType="+g+"&isCreditCard="+e+"&fromAccount="+j+"&fromDate="+fromDate+"&toDate="+toDate+"&sortField="+sSortField+"&sortOrder="+sSortOrder,"transhist")}};absa.apps.viewTransactionHistory.budgetFilter=function(e){var c=bb.selector.queryAncestor(e,".ap-viewTransactionHistory");var b=bb.selector.query(c,".ap-viewTransactionHistory-table");var f=phe.select.getValue(e);var g=bb.selector.query(c,".ap-viewTransactionHistory-fromAccount");var a=phe.hiddenField.getValue(g);var d;if(f=="all"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getBudgetPurchases&mode=table&viewTransactionHistory=true&fromAccount="+a}else{if(f=="settled"){d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getBudgetPurchases&mode=table&filter=true&viewTransactionHistory=true&filterIsSettled=Y&fromAccount="+a}else{d="proxy?pipe=genericWebservice&ws=AccountHistoryWebService&action=getBudgetPurchases&mode=table&filter=true&viewTransactionHistory=true&filterIsSettled=N&fromAccount="+a}}phe.table.setAttribute(b,"dataFile",d);phe.table.reload(b)};absa.apps.viewTransactionHistory.onApplyButtonClick=function(c,b,e){var a;var d;if(e="Overdraft"){a="new_od";d="OVERDRAFT_OFFERS"}phe.modal.hideModal();gadgets.pubsub.publish("goTo:"+b,{productType:a})};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.viewUnclearedAndPendingTransactions=absa.apps.viewUnclearedAndPendingTransactions||{};absa.apps.viewUnclearedAndPendingTransactions.onPrintButtonClick=function(h,j){var c=bb.selector.queryAncestor(h,".ap-viewTransactionHistory");var f=bb.selector.query(c,".ap-viewTransactionHistory-datePickerFrom");var a=bb.selector.query(c,".ap-viewTransactionHistory-datePickerTo");var i=phe.datePicker.getValue(f);var d=phe.datePicker.getValue(a);var e=bb.selector.query(c,".ap-viewTransactionHistory-table");var b=phe.table.getAttribute(e,"sortedcolumn");var g=phe.table.getAttribute(e,"sortorder");if(b==null|b==""){b="lineNumber";g="ASC"}else{if(b=="transactionDate"){b="lineNumber"}}absa.apps.viewTransactionHistory.checkDateRange(c);if(absa.form.validate.checkElement(f)&&absa.form.validate.checkElement(a)){absa.openReport("report/transactionHistory.pdf?fromAccount="+j+"&fromDate="+i+"&toDate="+d+"&sortField="+b+"&sortOrder="+g,"transhistory")}};absa.apps.viewUnclearedAndPendingTransactions.modal={oDownloadButton:null,hidePopup:function(){phe.modal.hideModal()},showDownloadPopup:function(e,f){var a=bb.selector.queryAncestor(e,".ap-viewTransactionHistory");var b=bb.selector.query(a,f);var d=bb.selector.query(a,".ap-viewTransactionHistory-datePickerFrom");var c=bb.selector.query(a,".ap-viewTransactionHistory-datePickerTo");this.oDownloadButton=e;absa.apps.viewTransactionHistory.checkDateRange(a);if((absa.form.validate.checkElement(d))&&(absa.form.validate.checkElement(c))){phe.modal.showModal(0.5,b,a,true)}},showDownloadPopupBudget:function(c,d){this.oDownloadButton=c;var a=bb.selector.queryAncestor(c,".ap-viewTransactionHistory");var b=bb.selector.query(a,d);phe.modal.showModal(0.5,b,a,true)},downloadStatement:function(m,o){var e=bb.selector.queryAncestor(this.oDownloadButton,".ap-viewTransactionHistory");var l="";var i=bb.selector.query(e,".ap-viewTransactionHistory-datePickerFrom");var a=bb.selector.query(e,".ap-viewTransactionHistory-datePickerTo");var n=phe.datePicker.getValue(i);var h=phe.datePicker.getValue(a);var g=bb.selector.query(e,".ap-viewTransactionHistory-table");var d=phe.table.getAttribute(g,"sortedcolumn");var k=phe.table.getAttribute(g,"sortorder");if(d==null|d==""){d="lineNumber";k="ASC"}else{if(d=="transactionDate"){d="lineNumber"}}var j=bb.selector.queryAncestor(m,".ap-downloadTransactionHistory-modal");var c=bb.selector.query(j,".downloadTransactionHistory-select");var f=phe.select.getValue(c)*1;var b="";switch(f){case 1:b="txt";break;case 2:b="ofc";break;case 3:b="ofx";break;case 4:b="pastel";break;case 5:b="qif";break;case 6:b="csv";break;case 7:b="qbo";break;case 8:b="qif";break}absa.openReport("report/transactionHistory."+b+"?fromAccount="+o+"&fromDate="+n+"&toDate="+h+"&sortField="+d+"&sortOrder="+k+"&query="+l,"transhist")}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.unitTrustDecisionTool=absa.apps.unitTrustDecisionTool||{};absa.apps.unitTrustDecisionTool.limits=[];absa.apps.unitTrustDecisionTool.onContinueClickResumeDecision=function(j){var l=bb.selector.queryAncestor(j,".ap-unitTrustDecisionTool-container");var k=bb.selector.queryAncestor(j,".ap-unitTrustDecisionTool-form");var e=bb.selector.query(k,".ap-utCalc-unitTrustAccountNumber");var g=bb.selector.query(k,".ap-utCalc-accountHoldername");var h=bb.selector.query(k,".ap-utCalc-accountBalance");var d=bb.selector.query(k,".ap-utCalc-screen");var i=phe.hiddenField.getValue(e);var f=phe.hiddenField.getValue(g);var a=phe.hiddenField.getValue(h);var c=phe.hiddenField.getValue(d);var b="proxy?pipe=genericWebservice&ws=UnitTrustCalcWebService&action=fetchPendingApp&unitTrustAccountNumber="+i+"&accountHoldername="+f+"&accountBalance="+a+"&screen="+c+"&status=PEND";phe.common.setAttribute(l,"proxyurl",b);absa.lazyLoadNode(l,true)};absa.apps.unitTrustDecisionTool.onContinueClickLanding=function(n){var p=bb.selector.queryAncestor(n,".ap-utDecisionToolResumeSelection-continueButton");var o=bb.selector.queryAncestor(n,".ap-utDecisionToolResumeDecision-form");var q=bb.selector.query(o,".ap-utDecisionTool-resumeDecision");var i=bb.selector.query(o,".ap-utCalcResumeDecision-unitTrustAccountNumber");var k=bb.selector.query(o,".ap-utCalcResumeDecision-accountHoldername");var l=bb.selector.query(o,".ap-utCalcResumeDecision-accountBalance");var h=bb.selector.query(o,".ap-utCalcResumeDecision-screen");var a=bb.selector.query(o,".ap-utCalcResumeDecision-referenceNumber");var c=phe.radioGroup.getValue(q);var m=phe.hiddenField.getValue(i);var j=phe.hiddenField.getValue(k);var b=phe.hiddenField.getValue(l);var g=phe.hiddenField.getValue(h);var f=phe.hiddenField.getValue(a);if(c=="Y"){var e="true"}else{var e="false"}var d="proxy?pipe=genericEmptyResponse&xslFile=decisiontool/utDecisionToolWizard&resume="+e+"&unitTrustAccountNumber="+m+"&accountHoldername="+j+"&accountBalance="+b+"&screen="+g+"&referenceNumber="+f;phe.common.setAttribute(p,"proxyurl",d);absa.lazyLoadNode(p,true)};absa.apps.unitTrustDecisionTool.onQuestionareButtonClick=function(d,a,c){var g=bb.selector.queryAncestor(d,".ap-unitTrustDecisionTool-profilingForm");var b=bb.selector.queryAll(g,".ap-unitTrustDecisionTool-TableBodyRow");if(b.length>0&&a=="next"){if(phe.tableBodyRow.isExpanded(b[0])){phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.collapseRow(b[2]);phe.tableBodyRow.collapseRow(b[3]);phe.tableBodyRow.expandRow(b[1],null)}else{if(phe.tableBodyRow.isExpanded(b[1])){phe.tableBodyRow.collapseRow(b[1]);phe.tableBodyRow.collapseRow(b[3]);phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.expandRow(b[2],null)}else{if(phe.tableBodyRow.isExpanded(b[2])){phe.tableBodyRow.collapseRow(b[2]);phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.collapseRow(b[1]);phe.tableBodyRow.expandRow(b[3],null)}else{if(phe.tableBodyRow.isExpanded(b[3])){phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.collapseRow(b[1]);phe.tableBodyRow.collapseRow(b[2])}}}}}else{if(b.length>0&&a=="back"){if(phe.tableBodyRow.isExpanded(b[1])){phe.tableBodyRow.collapseRow(b[1]);phe.tableBodyRow.collapseRow(b[2]);phe.tableBodyRow.collapseRow(b[3]);phe.tableBodyRow.expandRow(b[0],null)}else{if(phe.tableBodyRow.isExpanded(b[2])){phe.tableBodyRow.collapseRow(b[2]);phe.tableBodyRow.collapseRow(b[3]);phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.expandRow(b[1],null)}else{if(phe.tableBodyRow.isExpanded(b[3])){phe.tableBodyRow.collapseRow(b[3]);phe.tableBodyRow.collapseRow(b[0]);phe.tableBodyRow.collapseRow(b[1]);phe.tableBodyRow.expandRow(b[2],null)}}}}}if(c){try{c.call(d,d)}catch(f){bb.command.trace(null,"Error when calling method:"+f.message||f)}}};absa.apps.unitTrustDecisionTool.onGetResult=function(g){var j=bb.selector.queryAncestor(g,".ap-unitTrustDecisionTool-profilingForm");var c=bb.selector.query(j,".ap-unitTrustDecisionTool-investmentObjUTS");var b=bb.selector.query(j,".ap-unitTrustDecisionTool-investmentPeriodUTS");var f=bb.selector.query(j,".ap-unitTrustDecisionTool-riskLevelUTS");var e=bb.selector.query(j,".ap-unitTrustDecisionTool-upDownSwingsUTS");var h=phe.slider.getValue(c);var a=phe.slider.getValue(b);var i=phe.slider.getValue(f);var d=phe.slider.getValue(e)};absa.apps.unitTrustDecisionTool.onCancelButton=function(k){var h=bb.selector.queryAncestor(k,".ap-unitTrustDecisionTool-tabBox");var l=bb.selector.query(h,".ap-tabBody-unitTrustDecisionTool");var c=bb.selector.query(document.body,".ap-utCalc-screen");var e=bb.selector.query(document.body,".ap-utCalc-unitTrustAccountNumber");var g=bb.selector.query(document.body,".ap-utCalc-accountHoldername");var i=bb.selector.query(document.body,".ap-utCalc-accountBalance");var d=phe.hiddenField.getValue(c);var j=phe.hiddenField.getValue(e);var f=phe.hiddenField.getValue(g);var a=phe.hiddenField.getValue(i);var b="proxy?pipe=genericEmptyResponse&xslFile=decisiontool/utDecisionToolLandingPage&unitTrustAccountNumber="+j+"&accountHoldername="+f+"&accountBalance="+a+"&screen="+d;phe.tabBody.setAttribute(l,"proxyurl",b);phe.tabBox.selectTab(l)};absa.apps.unitTrustDecisionTool.onRadioButtonClick=function(q){var n=bb.selector.queryAncestor(q,".ap-unitTrustDecisionTool-fundSelectionForm");var e=bb.selector.query(n,".ap-unitTrustDecisionTool-saveFundSelection");var i=bb.selector.query(n,".ap-unitTrustDecisionTool-applyFundSelection");var h=bb.selector.query(n,".ap-unitTrustDecisionTool-buyFundSelection");var f=phe.radioGroup.getValue(q);var c=bb.selector.query(n,".ap-unitTrustDecisionTool-fundCode");var o=bb.selector.query(n,".ap-unitTrustDecisionTool-fundName");var l=bb.selector.query(n,".ap-unitTrustDecisionTool-fundCategory");var p=bb.selector.query(n,".ap-unitTrustDecisionTool-minDebitOrder");var m=bb.selector.query(n,".ap-unitTrustDecisionTool-minLumpSum");var b;var a;var g;var k;var d;if(f!=null&&f!=""){var j=f.split(",");b=j[0];a=j[1];g=j[2];k=j[3];d=j[4];phe.hiddenField.setValue(c,b);phe.hiddenField.setValue(o,a);phe.hiddenField.setValue(l,g);phe.hiddenField.setValue(p,k);phe.hiddenField.setValue(m,d)}phe.button.setAttribute(i,"class","ap-button-next ap-unitTrustDecisionTool-applyFundSelection");phe.button.setAttribute(h,"class","ap-button-next ap-unitTrustDecisionTool-buyFundSelection");phe.button.setAttribute(e,"class","ap-button-back ap-unitTrustDecisionTool-saveFundSelection")};absa.apps.unitTrustDecisionTool.onApplyClick=function(e){var n=bb.selector.queryAncestor(e,".ap-unitTrustDecisionTool-fundSelectionForm");var d=bb.selector.query(n,".ap-unitTrustDecisionTool-fundSelectionGrp");var g=phe.radioGroup.getValue(d);var h=bb.selector.query(n,".ap-unitTrustDecisionTool-fundCode");var c=bb.selector.query(n,".ap-unitTrustDecisionTool-fundName");var j=bb.selector.query(n,".ap-unitTrustDecisionTool-fundCategory");var a=bb.selector.query(n,".ap-unitTrustDecisionTool-minDebitOrder");var i=bb.selector.query(n,".ap-unitTrustDecisionTool-minLumpSum");var b=bb.selector.queryAncestor(e,".ap-unitTrustDecisionTool-tabBox");var q=bb.selector.query(b,".ap-tabBody-viewFundFactSheets");var m=bb.selector.query(b,".ap-tabHead-viewFundFactSheets");var l=phe.hiddenField.getValue(h);var k=phe.hiddenField.getValue(c);var p=phe.hiddenField.getValue(j);var f=phe.hiddenField.getValue(a);var r=phe.hiddenField.getValue(i);if(l=="MMF"){gadgets.pubsub.publish("goTo:apply/createAccount/createAccount",{productCode:l,fundName:k})}else{var o="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=validateClient&mode=stepOne&fundName="+encodeURIComponent(k)+"&fundCategory="+p+"&fundCode="+l+"&minDebitOrder="+f+"&minLumpsum="+r;phe.tabBody.setAttribute(q,"proxyurl",o);phe.tabBox.selectTab(m)}};absa.apps.unitTrustDecisionTool.onBuyClick=function(h){var t=bb.selector.queryAncestor(h,".ap-unitTrustDecisionTool-fundSelectionForm");var g=bb.selector.query(t,".ap-unitTrustDecisionTool-fundSelectionGrp");var k=phe.radioGroup.getValue(g);var l=bb.selector.query(t,".ap-unitTrustDecisionTool-fundCode");var e=bb.selector.query(t,".ap-unitTrustDecisionTool-fundName");var p=bb.selector.query(t,".ap-unitTrustDecisionTool-fundCategory");var b=bb.selector.query(t,".ap-unitTrustDecisionTool-minDebitOrder");var n=bb.selector.query(t,".ap-unitTrustDecisionTool-minLumpSum");var j=bb.selector.query(t,".ap-utCalc-unitTrustAccountNumber");var m=bb.selector.query(t,".ap-utCalc-accountHoldername");var f=bb.selector.query(t,".ap-utCalc-accountBalance");var w=bb.selector.query(t,".ap-utCalc-screen");var d=bb.selector.queryAncestor(h,".ap-unitTrustDecisionTool-tabBox");var z=bb.selector.query(d,".ap-tabBody-viewFundFactSheets");var s=bb.selector.query(d,".ap-tabHead-viewFundFactSheets");var r=phe.hiddenField.getValue(l);var q=phe.hiddenField.getValue(e);var v=phe.hiddenField.getValue(p);var i=phe.hiddenField.getValue(b);var y=phe.hiddenField.getValue(n);var o=phe.hiddenField.getValue(j);var c=phe.hiddenField.getValue(m);var x=phe.hiddenField.getValue(f);var a=phe.hiddenField.getValue(w);if(r=="MMF"){gadgets.pubsub.publish("goTo:apply/createAccount/createAccount",{productCode:r,fundName:q})}else{var u="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/buyUnitTrust&mode=buyNewFund&minLumsumAmount="+y+"&fundName="+encodeURIComponent(q)+"&fundCode="+r+"&minDebitOrderAmount="+i+"&unitTrustAccountNumber="+o+"&unitTrustAccountHolder="+c+"&accountBalance="+x+"&screen="+a+"&automaticAnnualIncreasePercentage=";phe.tabBody.setAttribute(z,"proxyurl",u);phe.tabBox.selectTab(s)}};absa.apps.unitTrustDecisionTool.onApplyIconClick=function(k,f){var h=bb.selector.queryAncestor(k,".ap-unitTrustDecisionTool-tabBox");var l=bb.selector.query(h,".ap-tabBody-viewFundFactSheets");var a=bb.selector.query(h,".ap-tabHead-viewFundFactSheets");var c;var b;var g;var i;var d;if(f!=null&&f!=""){var j=f.split(",");c=j[0];b=j[1];g=j[2];i=j[3];d=j[4]}var e="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=validateClient&mode=stepOne&fundName="+encodeURIComponent(b)+"&fundCategory="+g+"&fundCode="+c+"&minDebitOrder="+i+"&minLumpsum="+d;phe.tabBody.setAttribute(l,"proxyurl",e);phe.tabBox.selectTab(a)};absa.apps.unitTrustDecisionTool.onBuyIconClick=function(n,g,m,i,d){var j=bb.selector.queryAncestor(n,".ap-unitTrustDecisionTool-tabBox");var o=bb.selector.query(j,".ap-tabBody-viewFundFactSheets");var b=bb.selector.query(j,".ap-tabHead-viewFundFactSheets");var c;var a;var h;var k;var e;if(g!=null&&g!=""){var l=g.split(",");c=l[0];a=l[1];h=l[2];k=l[3];e=l[4]}var f="proxy?pipe=genericEmptyResponse&xslFile=UnitTrust/buyUnitTrust&mode=buyNewFund&minLumsumAmount="+e+"&fundName="+encodeURIComponent(a)+"&fundCode="+c+"&minDebitOrderAmount="+k+"&unitTrustAccountNumber="+m+"&unitTrustAccountHolder="+i+"&accountBalance="+d+"&screen=BUY&automaticAnnualIncreasePercentage=";phe.tabBody.setAttribute(o,"proxyurl",f);phe.tabBox.selectTab(b)};absa.apps.unitTrustDecisionTool.onSaveButtonOfConfirm=function(j){var B=bb.selector.queryAncestor(j,".ap-unitTrustDecisionTool-confirmForm");var A=bb.selector.query(B,".ap-unitTrustDecisionTool-invstObjReadOnly");var C=bb.selector.query(B,".ap-unitTrustDecisionTool-invstYearsReadOnly");var k=bb.selector.query(B,".ap-unitTrustDecisionTool-returnRiskReadOnly");var r=bb.selector.query(B,".ap-unitTrustDecisionTool-upDownSwingsReadOnly");var e=bb.selector.query(B,".ap-unitTrustDecisionTool-investmentObjUT");var t=bb.selector.query(B,".ap-unitTrustDecisionTool-investmentPeriodUT");var z=bb.selector.query(B,".ap-unitTrustDecisionTool-riskLevelUT");var b=bb.selector.query(B,".ap-unitTrustDecisionTool-upDownSwingsUT");var i=bb.selector.query(B,".ap-unitTrustDecisionTool-confirmSave");var p=bb.selector.query(i,".ap-unitTrustDecisionTool-saveTemporaryMessage");var F=bb.selector.query(B,".ap-unitTrustDecisionTool-screenId");var n=bb.selector.query(B,".ap-unitTrustDecisionTool-utRefNumberConfirm");var l=bb.selector.query(B,".ap-utCalc-unitTrustAccountNumber");var q=bb.selector.query(B,".ap-utCalc-accountHoldername");var h=bb.selector.query(B,".ap-utCalc-accountBalance");var D=bb.selector.query(B,".ap-utCalc-screen");var E=phe.hiddenField.getValue(e);var s=phe.hiddenField.getValue(t);var y=phe.hiddenField.getValue(z);var w=phe.hiddenField.getValue(b);var g=phe.hiddenField.getValue(F);var f=phe.hiddenField.getValue(n);var x=phe.inputReadOnlyText.getAttribute(A,"id");var o=phe.inputReadOnlyText.getAttribute(C,"id");var m=phe.inputReadOnlyText.getAttribute(k,"id");var d=phe.inputReadOnlyText.getAttribute(r,"id");var u=phe.hiddenField.getValue(l);var c=phe.hiddenField.getValue(q);var G=phe.hiddenField.getValue(h);var a=phe.hiddenField.getValue(D);var v="proxy?pipe=genericWebservice&ws=UnitTrustCalcWebService&action=saveForLater&referenceNumber="+f+"&screenId="+g+"&investmentObjUT="+E+"&investmentPeriodUT="+s+"&riskLevelUT="+y+"&upDownSwingsUT="+w+"&unitTrustAccountNumber="+u+"&accountHoldername="+c+"&accountBalance="+G+"&screen="+a;phe.loadingMessage.showLoadingMessage(i);absa.io.makeRequest(v,function(J){phe.loadingMessage.hideLoadingMessage(i);if(!J.errors.length){var L=bb.html.createElementFromString(J.text);var I=bb.selector.query(L,".ap-unitTrustDecisionTool-referenceNumberResponse");refNum=phe.hiddenField.getValue(I);phe.hiddenField.setValue(n,refNum);if(bb.html.hasClass(i,"ap-unitTrustDecisionTool-validateSaveForLater")){var K=bb.selector.queryAll(L,".ui-message");for(var H=0;H<K.length;H++){if(!bb.html.hasClass(K[H],"ui-message-warning")){bIsError=true;break}}if(!bIsError){absa.lazyLoadNode(oDiv,true)}else{oDiv.innerHTML=L.innerHTML}}phe.message.setAttribute(p,"class","ap-unitTrustDecisionTool-saveTemporaryMessage ap-common-show")}else{absa.showIOErrorMessage(i)}})};absa.apps.unitTrustDecisionTool.onSaveButtonOFundSelection=function(g,t){var j=bb.selector.queryAncestor(g,".ap-unitTrustDecisionTool-fundSelectionForm");var v=bb.selector.query(j,".ap-unitTrustDecisionTool-investmentObjUT");var n=bb.selector.query(j,".ap-unitTrustDecisionTool-investmentPeriodUT");var N=bb.selector.query(j,".ap-unitTrustDecisionTool-riskLevelUT");var l=bb.selector.query(j,".ap-unitTrustDecisionTool-upDownSwingsUT");var k=bb.selector.query(j,".ap-unitTrustDecisionTool-fundSelectionSave");var J=bb.selector.query(k,".ap-unitTrustDecisionTool-saveTemporaryMessage");var e=bb.selector.query(j,".ap-unitTrustDecisionTool-screenId");var w=bb.selector.query(j,".ap-unitTrustDecisionTool-utRefNumberFundSelection");var x=bb.selector.query(document.body,".ap-unitTrustDecisionTool-utRefNumberConfirm");var M=bb.selector.query(j,".ap-unitTrustDecisionTool-fundCode");var O=bb.selector.query(j,".ap-unitTrustDecisionTool-fundName");var L=bb.selector.query(j,".ap-unitTrustDecisionTool-fundCategory");var m=bb.selector.query(j,".ap-unitTrustDecisionTool-minDebitOrder");var E=bb.selector.query(j,".ap-unitTrustDecisionTool-minLumpSum");var o=bb.selector.query(j,".ap-unitTrustDecisionTool-fundsTable");var I=bb.selector.query(o,".ap-unitTrustDecisionTool-riskCategory");var b="";if(I!=null){b=phe.tableBodyCell.getAttribute(I,"data-riskProfile")}var B=bb.selector.query(j,".ap-utCalc-unitTrustAccountNumber");var A=bb.selector.query(j,".ap-utCalc-accountHoldername");var i=bb.selector.query(j,".ap-utCalc-accountBalance");var c=bb.selector.query(j,".ap-utCalc-screen");var K=phe.hiddenField.getValue(v);var s=phe.hiddenField.getValue(n);var h=phe.hiddenField.getValue(N);var u=phe.hiddenField.getValue(l);var G=phe.hiddenField.getValue(e);var q=phe.hiddenField.getValue(x);var f=phe.hiddenField.getValue(M);var p=phe.hiddenField.getValue(O);var y=phe.hiddenField.getValue(L);var H=phe.hiddenField.getValue(m);var C=phe.hiddenField.getValue(E);var D=phe.hiddenField.getValue(B);var r=phe.hiddenField.getValue(A);var z=phe.hiddenField.getValue(i);var a=phe.hiddenField.getValue(c);var F="";if(t=="apply"||t=="buy"){if(q!=null&&q!=""){F="COMPLETED";var d="proxy?pipe=genericWebservice&ws=UnitTrustCalcWebService&action=saveForLater&referenceNumber="+q+"&screenId="+G+"&investmentObjUT="+K+"&investmentPeriodUT="+s+"&riskLevelUT="+h+"&upDownSwingsUT="+u+"&fundCode="+f+"&fundName="+encodeURIComponent(p)+"&fundCategory="+encodeURIComponent(y)+"&minDebitOrderAmount="+H+"&minLumpSumAmount="+C+"&riskProfile="+b+"&unitTrustAccountNumber="+D+"&accountHoldername="+r+"&accountBalance="+z+"&screen="+a+"&applicationStatus="+F;absa.io.makeRequest(d,function(P){})}}else{var d="proxy?pipe=genericWebservice&ws=UnitTrustCalcWebService&action=saveForLater&referenceNumber="+q+"&screenId="+G+"&investmentObjUT="+K+"&investmentPeriodUT="+s+"&riskLevelUT="+h+"&upDownSwingsUT="+u+"&fundCode="+f+"&fundName="+encodeURIComponent(p)+"&fundCategory="+encodeURIComponent(y)+"&minDebitOrderAmount="+H+"&minLumpSumAmount="+C+"&riskProfile="+b+"&unitTrustAccountNumber="+D+"&accountHoldername="+r+"&accountBalance="+z+"&screen="+a;phe.loadingMessage.showLoadingMessage(k);absa.io.makeRequest(d,function(R){phe.loadingMessage.hideLoadingMessage(k);if(!R.errors.length){var T=bb.html.createElementFromString(R.text);var Q=bb.selector.query(T,".ap-unitTrustDecisionTool-referenceNumberResponse");refNum=phe.hiddenField.getValue(Q);phe.hiddenField.setValue(x,refNum);if(bb.html.hasClass(k,"ap-unitTrustDecisionTool-validateSaveForLater")){var S=bb.selector.queryAll(T,".ui-message");for(var P=0;P<S.length;P++){if(!bb.html.hasClass(S[P],"ui-message-warning")){bIsError=true;break}}if(!bIsError){absa.lazyLoadNode(oDiv,true)}else{oDiv.innerHTML=T.innerHTML}}phe.message.setAttribute(J,"class","ap-unitTrustDecisionTool-saveTemporaryMessage ap-common-show")}else{absa.showIOErrorMessage(k)}})}};iniializeSliderUT=function(b){var a=bb.selector.queryAncestor(b,".ap-unitTrustDecisionTool-wizard");phe.slider.initialize(a)};absa.apps.unitTrustDecisionTool.onSliderChange=function(b,f){var h=bb.selector.queryAncestor(b,".ap-unitTrustDecisionTool-profilingForm");var c=absa.apps.unitTrustDecisionTool.getSliderSelection(b);var d;if(c>=0&&c<=12){phe.slider.setValue(b,1);d=1}else{if(c>=13&&c<=37){phe.slider.setValue(b,25);d=2}else{if(c>=38&&c<=62){phe.slider.setValue(b,50);d=3}else{if(c>=63&&c<=87){phe.slider.setValue(b,75);d=4}else{if(c>=88&&c<=100){phe.slider.setValue(b,100);d=5}}}}}var a=bb.selector.query(h,".ap-unitTrustDecisionTool-"+f+d);var g=phe.hiddenField.getValue(bb.selector.query(h,".ap-unitTrustDecisionTool-"+f+d));var e;if(f=="InvstObj1"){e=bb.selector.query(h,".ap-unitTrustDecisionTool-invstObjImage")}else{if(f=="InvstPeriod2"){e=bb.selector.query(h,".ap-unitTrustDecisionTool-invstPeriodImage")}else{if(f=="RiskLevel3"){e=bb.selector.query(h,".ap-unitTrustDecisionTool-riskLevelImage")}else{if(f=="UpDownSwings4"){e=bb.selector.query(h,".ap-unitTrustDecisionTool-upDownSwingsImage")}}}}phe.media.setAttribute(e,"src",g)};absa.apps.unitTrustDecisionTool.getSliderSelection=function(a){var f=parseInt(phe.slider.getValue(a));var d=parseInt(phe.slider.getAttribute(a,"keyStep"));var c=parseInt(phe.slider.getAttribute(a,"max"));var b=parseInt(d/(parseInt(c)));var e=parseInt(f/b);return e};absa.apps.unitTrustDecisionTool.onContinueButtonClick=function(c){var m=bb.selector.queryAncestor(c,".ap-unitTrustDecisionTool-profilingForm");var i=bb.selector.query(m,".ap-unitTrustDecisionTool-investmentObjUTS");var o=bb.selector.query(m,".ap-unitTrustDecisionTool-investmentPeriodUTS");var r=bb.selector.query(m,".ap-unitTrustDecisionTool-riskLevelUTS");var e=bb.selector.query(m,".ap-unitTrustDecisionTool-upDownSwingsUTS");var n=absa.apps.unitTrustDecisionTool.getImageIDForNextScreen(phe.slider.getValue(i));var p=absa.apps.unitTrustDecisionTool.getImageIDForNextScreen(phe.slider.getValue(o));var d=absa.apps.unitTrustDecisionTool.getImageIDForNextScreen(phe.slider.getValue(r));var f=absa.apps.unitTrustDecisionTool.getImageIDForNextScreen(phe.slider.getValue(e));var b=bb.selector.query(m,".ap-unitTrustDecisionTool-investmentObjUTH");var h=bb.selector.query(m,".ap-unitTrustDecisionTool-investmentPeriodUTH");var l=bb.selector.query(m,".ap-unitTrustDecisionTool-riskLevelUTH");var a=bb.selector.query(m,".ap-unitTrustDecisionTool-upDownSwingsUTH");var q=phe.hiddenField.setValue(b,n);var g=phe.hiddenField.setValue(h,p);var k=phe.hiddenField.setValue(l,d);var j=phe.hiddenField.setValue(a,f);absa.form.validateAndSubmit(m)};absa.apps.unitTrustDecisionTool.getImageIDForNextScreen=function(a){var b;if(a==1){b=1}else{if(a==25){b=2}else{if(a==50){b=3}else{if(a==75){b=4}else{if(a==100){b=5}}}}}return b};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.applyForUnitTrust=absa.apps.applyForUnitTrust||{};absa.apps.applyForUnitTrust.onChangeInvestmentMethod=function(d,f,h,b,i,j){var e=bb.selector.queryAncestor(d,".ap-applyForUnitTrust-root");var g=bb.selector.query(e,".ap-applyForUnitTrust-form");var c=bb.selector.query(e,".ap-applyForUnitTrust-dynamicDiv");var a="";if(phe.select.getValue(d)=="2"){a="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=retrieveLinkedAccounts&mode=debitOrder&fundCode="+f+"&minDebitOrder="+h+"&empStatus="+i+"&occupation="+j}else{a="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=retrieveLinkedAccounts&mode=lumpSum&fundCode="+f+"&minLumpsum="+b+"&empStatus="+i+"&occupation="+j}c.setAttribute("proxyurl",a);absa.lazyLoadNode(c,true)};absa.apps.applyForUnitTrust.onChangeIncomeDistributionType=function(b,a){var d=bb.selector.queryAncestor(b,"."+a);var c=bb.selector.query(d,".ap-applyForUnitTrust-incomeIntoAccountRow");if(phe.select.getValue(b)=="Income into account"){phe.row.show(c)}else{phe.row.hide(c)}};absa.apps.applyForUnitTrust.onChangeIncomeDistributionTypeForReset=function(b){var c=bb.selector.queryAncestor(b,".ap-applyForUnitTrust-root");var d=bb.selector.query(c,".ap-applyForUnitTrust-investmentMethod");var e="";if(phe.select.getValue(d)=="2"){e=bb.selector.query(c,".ap-applyForUnitTrust-debitOrderGrid")}else{e=bb.selector.query(c,".ap-applyForUnitTrust-lumpSumGrid")}var a=bb.selector.query(e,".ap-applyForUnitTrust-incomeIntoAccountRow");phe.row.setAttribute(a,"class","ap-applyForUnitTrust-incomeIntoAccountRow")};absa.apps.applyForUnitTrust.onSelectingYesRadioGroup=function(g){var h=bb.selector.queryAncestor(g,".ap-applyForUnitTrust-form");var e=bb.selector.query(h,".ap-applyForUnitTrust-RadioGroup1");var c=bb.selector.query(h,".ap-applyForUnitTrust-incomeTaxYes");var a=bb.selector.query(h,".ap-applyForUnitTrust-incomeTaxNo");var i=bb.selector.query(h,".ap-unittrust-DOtable");var f=bb.selector.query(h,".ap-applyForUnitTrust-incomeTaxYesForeign");var d=bb.selector.query(h,".ap-applyForUnitTrust-incomeTaxNoForeign");var b=phe.radioGroup.getValue(g);if(b=="Yes"||b=="Ja"){phe.row.setAttribute(c,"class","ap-applyForUnitTrust-incomeTaxYes");phe.row.setAttribute(a,"class","ap-applyForUnitTrust-incomeTaxNo ap-common-hide");phe.row.setAttribute(f,"class","ap-applyForUnitTrust-incomeTaxYesForeign ap-common-hide");phe.row.setAttribute(d,"class","ap-applyForUnitTrust-incomeTaxNoForeign ap-common-hide");phe.table.setAttribute(i,"class","ap-common-borderTop ap-unittrust-DOtable ap-common-hide");if(b=="Yes"){phe.radioGroup.setValue(e,"Yes")}else{if(b=="Ja"){phe.radioGroup.setValue(e,"Ja")}}}if(b=="No"||b=="Nee"){phe.row.setAttribute(c,"class","ap-applyForUnitTrust-incomeTaxYes ap-common-hide");phe.row.setAttribute(a,"class","ap-applyForUnitTrust-incomeTaxNo");phe.row.setAttribute(f,"class","ap-applyForUnitTrust-incomeTaxYesForeign");phe.table.setAttribute(i,"class","ap-common-borderTop ap-unittrust-DOtable");phe.row.setAttribute(d,"class","ap-applyForUnitTrust-incomeTaxNoForeign ap-common-hide");if(b=="Yes"){phe.radioGroup.setValue(e,"Yes")}else{if(b=="Ja"){phe.radioGroup.setValue(e,"Ja")}}}};absa.apps.applyForUnitTrust.onSelectingYesForForeignRadioGroup=function(d){var e=bb.selector.queryAncestor(d,".ap-applyForUnitTrust-form");var a=bb.selector.query(e,".ap-applyForUnitTrust-incomeTaxYesForeign");var c=bb.selector.query(e,".ap-applyForUnitTrust-incomeTaxNoForeign");var b=phe.radioGroup.getValue(d);if(b=="Yes"||b=="Ja"){phe.row.setAttribute(a,"class","ap-applyForUnitTrust-incomeTaxYesForeign");phe.row.setAttribute(c,"class","ap-applyForUnitTrust-incomeTaxNoForeign ap-common-hide")}if(b=="No"||b=="Nee"){phe.row.setAttribute(a,"class","ap-applyForUnitTrust-incomeTaxYesForeign ap-common-hide");phe.row.setAttribute(c,"class","ap-applyForUnitTrust-incomeTaxNoForeign")}};absa.apps.applyForUnitTrust.onValidateTextBoxIncomeTax=function(f){var e=bb.selector.queryAncestor(f,".ap-applyForUnitTrust-form");var d=bb.selector.query(e,".ap-applyForUnitTrust-saIncomeTaxNumber");var a=bb.selector.query(e,".ap-applyForUnitTrust-reasonNotGiven");var c=phe.textBox.getValue(d);var b=phe.select.getSelectedIndex(a);if(c.length<=0&&b==0){phe.select.setSelectedIndex(a,0);return false}else{if(c.length>0){phe.select.setSelectedIndex(a,0)}phe.select.setAttribute(a,"required","false");return true}};absa.apps.applyForUnitTrust.onValidateTextBoxIncomeTaxForeign=function(f){var e=bb.selector.queryAncestor(f,".ap-applyForUnitTrust-form");var d=bb.selector.query(e,".ap-applyForUnitTrust-foreignTaxNumberId");var a=bb.selector.query(e,".ap-applyForUnitTrust-reasonNotGivenForeign");var c=phe.textBox.getValue(d);var b=phe.select.getSelectedIndex(a);if(c.length<=0&&b==0){phe.select.setSelectedIndex(a,0);return false}else{if(c.length>0){phe.select.setSelectedIndex(a,0)}phe.select.setAttribute(a,"required","false");return true}};absa.apps.applyForUnitTrust.onConfirmClick=function(g){var h=bb.selector.queryAncestor(g,"form");var d=bb.selector.queryAncestor(g,".ap-applyForUnitTrust-root");var b=bb.selector.query(d,".ap-managePersonalDetails-occupationStatus");var j=bb.selector.query(d,".ap-managePersonalDetails-occupation");var f=bb.selector.query(d,".ap-insurance-sourceOfFunds");var a=bb.selector.query(d,".ap-applyForUnitTrust-rbaCheckError");var i=phe.select.getValue(b);var e=phe.select.getValue(f);if(i=="04"||i=="05"||i=="06"||i=="07"||i=="10"){var k=0}else{var k=phe.select.getValue(j)}var c="proxy?pipe=genericWebservice&ws=RbaWebService&action=getRiskProfile&view=unitTrust&productType=UnitTrust&casaRef=0&empStatus="+i+"&occupation="+k+"&sourceOfFund="+e;phe.common.hide(a);absa.io.makeRequest(c,function(n){if(!n.errors.length){var o=bb.html.createElementFromString(n.text);var l=phe.hiddenField.getValue(bb.selector.query(o,".ap-rba-riskRating"));var m=phe.hiddenField.getValue(bb.selector.query(o,".ap-rba-riskAcceptable"));if((m=="true")&&(l=="VL"||l=="L"||l=="M")){absa.apps.applyForUnitTrust.submitApplyUTForm(h)}else{phe.common.show(a)}}else{phe.form.displayIOErrorMessage(h,true)}})};absa.apps.applyForUnitTrust.submitApplyUTForm=function(s){var j=bb.selector.queryAncestor(s,".ap-applyForUnitTrust-root");var g=bb.selector.query(j,".ap-applyForUnitTrust-investmentMethod");var n=bb.selector.query(j,".ap-applyForUnitTrust-investmentMethodHidden");var k=phe.select.getValue(g);absa.apps.applyForUnitTrust.validateForeignTax(s);absa.apps.applyForUnitTrust.validateForeignTaxCountryRepeated(s,d,t);absa.apps.applyForUnitTrust.validateSATax(s,d);var d=false;var t=0;phe.hiddenField.setValue(n,k);phe.message.hide(bb.selector.query(j,".ap-applyForUnitTrust-amountExceeded"));phe.message.hide(bb.selector.query(j,".ap-applyForUnitTrust-limitExceeded"));phe.message.hide(bb.selector.query(j,".ap-applyForUnitTrust-validateLumpsumAmount"));if(absa.form.validate(s)){if(k=="1"){var b=bb.selector.query(j,".ap-applyForUnitTrust-fromAccountHidden");var o=bb.selector.query(j,".ap-applyForUnitTrust-fromAccountLimitHidden");var q=bb.selector.query(j,".ap-applyForUnitTrust-lumpSumAmountText");if(parseFloat(phe.textBox.getValue(q))>parseFloat(phe.hiddenField.getValue(b))){var r=bb.selector.query(j,".ap-applyForUnitTrust-amountExceeded");phe.message.show(r);return false}else{var r=bb.selector.query(j,".ap-applyForUnitTrust-amountExceeded");phe.message.hide(r)}if(parseFloat(phe.textBox.getValue(q))>parseFloat(phe.hiddenField.getValue(o))){var u=bb.selector.query(j,".ap-applyForUnitTrust-limitExceeded");phe.message.show(u);return false}else{var u=bb.selector.query(j,".ap-applyForUnitTrust-limitExceeded");phe.message.hide(u)}if(!absa.apps.applyForUnitTrust.validateForeignTaxCountryRepeated(s,d,t)){return}var b=bb.selector.query(j,".ap-applyForUnitTrust-fromAccountSelect");var e=phe.select.getValue(b);var h=e.indexOf("@");var a=e.indexOf("^");var i=e.indexOf("~");var c=e.indexOf("-");var l=e.substring(c+2,h);var m=e.substring(h+1,a);var f=e.substring(i+1,e.length);var p="proxy?pipe=genericWebservice&ws=CreateUnitTrustAccountWebService&action=validateLumpSumAmount&accNo="+l+"&accType="+f+"&amount="+phe.textBox.getValue(q)+"&holder="+m;absa.io.makeRequest(p,function(v){if(!v.errors.length){phe.form.displayIOErrorMessage(s,false);var x=bb.html.createElementFromString(v.text);var w=bb.selector.query(x,".ap-applyForUnitTrust-status");if(phe.hiddenField.getValue(w)!="true"){var y=bb.selector.query(j,".ap-applyForUnitTrust-validateLumpsumAmount");phe.message.show(y);return false}else{var y=bb.selector.query(j,".ap-applyForUnitTrust-validateLumpsumAmount");phe.message.hide(y)}absa.form.validateAndSubmit(s)}else{phe.form.displayIOErrorMessage(s,true)}})}else{if(!absa.apps.applyForUnitTrust.validateForeignTaxCountryRepeated(s,d,t)){return}absa.form.validateAndSubmit(s)}}};absa.apps.applyForUnitTrust.validateSourceOfFunds=function(e,b,g){var j=e.form||e;var i="";var f=[];var k=bb.selector.queryAll(e,".ap-applyForUnitTrust-sourceOfFunds-chkBox");var c=phe.checkBox.isChecked(k);var d=k.length;var a=bb.selector.query(j,".ap-applyForUnitTrust-sourceOfFunds-div");for(var h=0;h<k.length;h++){if(phe.checkBox.isChecked(k[h])){f.push(k[h])}}if(f.length==0){i=k[0].getAttribute("showMeHow");a.setAttribute("helptext",i);a.focus();bb.html.addClass(e,"ui-form-incorrect-values");bb.html.addClass(a,"ui-incorrect-value ui-form-field");return false}else{if(f.length>5){i=k[0].getAttribute("showMeHow");a.setAttribute("helptext",i);bb.html.addClass(e,"ui-form-incorrect-values");bb.html.addClass(a,"ui-incorrect-value ui-form-field");return false}else{bb.html.removeClass(a,"ui-incorrect-value ui-form-field");bb.html.removeClass(e,"ui-form-incorrect-value");a.removeAttribute("helpText");return true}}return true};absa.apps.applyForUnitTrust.onApplyClick=function(a){var b=bb.selector.queryAncestor(a,".ap-applyForUnitTrust-form");absa.form.validateAndSubmit(b)};absa.apps.applyForUnitTrust.onFromAccountChange=function(c){var a=bb.selector.queryAncestor(c,".ap-applyForUnitTrust-root");var d=bb.selector.query(a,".ap-applyForUnitTrust-fromAccountHidden");var b=phe.select.getValue(c);var e=b.indexOf("^");phe.hiddenField.setValue(d,b.substring(e+1,b.length))};absa.apps.applyForUnitTrust.onValidateTextBoxDebitOrder=function(a,c){var d=bb.selector.queryAncestor(a,".ap-applyForUnitTrust-root");var b=bb.selector.query(d,"."+c);if(parseFloat(phe.textBox.getValue(a))<parseFloat(phe.hiddenField.getValue(b))){return false}return true};absa.apps.applyForUnitTrust.onChangeDebitOrderStartDate=function(c){var d=bb.selector.queryAncestor(c,".ap-applyForUnitTrust-root");var a=bb.selector.query(d,".ap-applyForUnitTrust-debitOrderAllowedDate");var h=phe.textBox.getValue(c);var b=phe.hiddenField.getValue(bb.selector.query(d,".ap-applyForUnitTrust-endDate"));var f=b.substring(5,7);var e=b.substring(0,4);var g=e+"-"+f+"-"+h;phe.hiddenField.setValue(bb.selector.query(d,".ap-applyForUnitTrust-debitOrderMonth"),f);phe.hiddenField.setValue(bb.selector.query(d,".ap-applyForUnitTrust-debitOrderStartDate"),g);phe.hiddenField.setValue(bb.selector.query(d,".ap-applyForUnitTrust-debitOrderDay"),h)};absa.apps.applyForUnitTrust.printapplyUnitTrust=function(a,g){var f=bb.selector.queryAncestor(a,".ap-applyForUnitTrust-form");var d=bb.selector.query(f,".ap-applyForUnitTrust-message");var c=bb.selector.query(f,".ap-applyForUnitTrust-printAccountHolderName");var e=phe.hiddenField.getValue(d);var b=phe.hiddenField.getValue(c);absa.openReport("report/applyUnitTrust.pdf?unitTrustAccountNumber="+e+"&transDateTime="+g+"&unitTrustAccountHolder="+b,"applyUnitTrust")};absa.apps.applyForUnitTrust.viewFundInfo=function(a){window.open("assets"+a,"FundInformation","top=0,left=0,width=800,height=600")};absa.apps.applyForUnitTrust.validateSATax=function(g,c){var k=g.form||g;var a=bb.selector.query(k,".ap-unitTrust-SaRow");var j=bb.selector.query(k,".ap-applyForUnitTrust-incomeTaxYes");var f=bb.selector.query(j,".ap-unitTrust-reasonSA");var e=phe.select.getSelectedIndex(f);var i=bb.selector.query(k,".ap-applyForUnitTrust-saIncomeTaxNumber");var b=phe.textBox.getValue(i);var h=bb.selector.query(a,".ap-applyForUnitTrust-RadioGroup");var d=phe.radioGroup.getValue(h);if(b.length>0&&b.replace(/\s/g,"")==""){phe.textBox.setValue(i,"");phe.select.setAttribute(f,"required","true");return false}else{if(b.length>0||e>0){phe.select.setAttribute(f,"required","false");return true}else{phe.select.setAttribute(f,"required","true");return false}}};absa.apps.applyForUnitTrust.validateForeignTax=function(l){var a=bb.selector.queryAll(l,".ap-uniTrust-tableBodyRow");var c=a.length;for(var g=0;g<c;g++){var d=bb.selector.query(a[g],".ap-identityType");var b=phe.select.getSelectedText(d);var e=bb.selector.query(a[g],".ap-applyForUnitTrust-foreignTaxNumberId");var j=phe.textBox.getValue(e);var m=bb.selector.query(a[g],".ap-applyForUnitTrust-reasonNotGivenForeign");var k=phe.select.getSelectedIndex(m);var f=phe.select.getSelectedIndex(d);var h=j.length;if(g==0&&f==0){phe.select.setAttribute(d,"required","true")}else{if(f==0&&(h!=0||k!=0)){phe.select.setAttribute(d,"required","true")}}if(f!=0&&h==0){phe.select.setAttribute(m,"required","true")}else{if(h!=0&&j.replace(/\s/g,"")==""){phe.textBox.setValue(e,"");phe.select.setAttribute(m,"required","true")}else{phe.select.setAttribute(m,"required","false")}}}};absa.apps.applyForUnitTrust.validateForeignTaxCountryRepeated=function(r,e,q){var n=bb.selector.query(r,".ap-applyForUnitTrust-validateSameCountry");var a=bb.selector.queryAll(r,".ap-uniTrust-tableBodyRow");var f=false;var d=a.length;for(var p=0;p<d;p++){var h=bb.selector.query(a[p],".ap-identityType");var c=phe.select.getSelectedText(h);var o=phe.select.getSelectedIndex(h);var l=p+1;for(var m=l;m<=3;m++){var g=bb.selector.query(a[m],".ap-identityType");var b=phe.select.getSelectedText(g);if((c==b)&&(o!=0)){f=true;phe.message.setAttribute(n,"class","ui-error-message ap-applyForUnitTrust-validateSameCountry ap-common-show");break}else{phe.message.setAttribute(n,"class","ui-error-message ap-applyForUnitTrust-validateSameCountry ap-common-hide")}}if(f==true){break}}if(!f){return true}};absa.apps.applyForUnitTrust.openMoneyMarket=function(a){gadgets.pubsub.publish("goTo:apply/createAccount/createAccount",{fundName:"Money Market Fund"})};absa.apps.applyForUnitTrust.onChangeEmploymentStatus=function(e){var f=bb.selector.queryAncestor(e,"form");var c=bb.selector.queryAncestor(e,".ap-applyForUnitTrust-root");var g=bb.selector.query(c,".ap-managePersonalDetails-occupationStatus");var a=bb.selector.query(c,".ap-managePersonalDetails-occupation");var d=bb.selector.query(c,".ap-applyUnitTrust-occupationRow");var b=phe.select.getValue(g);if(b=="04"||b=="05"||b=="06"||b=="07"||b=="10"){phe.select.setValue(a,"");phe.row.hide(d)}else{phe.select.setValue(a,"06");phe.row.show(d)}};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.createAccount=absa.apps.createAccount||{};absa.apps.createAccount.lastCalculationField="ap-applySaveInvestDebitOrder-endDate";absa.apps.createAccount.isClientCompliant=true;absa.apps.createAccount.applyIconClicked=function(d){var b=bb.selector.queryAncestor(d,".ui-tableBodyRow");phe.tableBodyRow.expandRow(b,null);var c=b.parentNode.rows[b.rowIndex+1];var a=bb.selector.query(c,".ap-applySaveInvest-openAccountNow");if(a){a.click()}};absa.apps.createAccount.openAccountNow=function(g,h,e,d,f,a,b,c){if(absa.CLIENTTYPE=="B"){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ClientComplianceWebService&action=getClientComplianceStatus",function(j){var l=bb.html.createElementFromString(j.text);var i=bb.selector.query(l,".ap-getClientComplianceStatustResponseDiv");var k=i.getAttribute("compliant");if(k=="false"){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&view=clientComplianceStep1&cifKey="+absa.CIFKEY,"FICA Alert")}else{absa.apps.createAccount.followNormalProccess(g,h,e,d,f,a,b,c)}})}else{absa.apps.createAccount.followNormalProccess(g,h,e,d,f,a,b,c)}};absa.apps.createAccount.openAccountNowAfterDecider=function(c,a,j,g,d,i,h,f){var e=document.body.getAttribute("sid");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=hasAllMandatoryCIFDetails";absa.io.makeRequest(b,function(n){if(!n.errors.length){var q=bb.html.createElementFromString(n.text);if(bb.html.hasClass(q,"ap-applyButtonCheck-hasAllMandatoryCIFDetailDiv")){var l=bb.selector.query(q,".ap-applyButtonCheck-hasAllMandatoryCIFDetailId");var k=phe.hiddenField.getValue(l);if(k=="true"){var m=bb.selector.queryAncestor(c,".ap-applySaveInvest-container-expandableExtension");var o=bb.selector.query(m,".ap-applySaveInvest-grid-prodInfo");var p=bb.selector.query(m,".ap-applySaveInvest-container-openAccount");phe.common.hide(o);phe.common.show(p);p.setAttribute("proxyurl","proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=promptCreateAccount&mode=step1&type="+a+"&prodCode="+j+"&prodName="+i+"&catCode="+g+"&minDepAmt="+d+"&annualContrAmount="+h+"&totalContrAmount="+f);absa.lazyLoadNode(p,true,function(r){absa.initializeNewContent(p)})}else{absa.index.oCIFAlertModal=bb.selector.query(document.body,".modalCIFAlertWarning");phe.modal.showModal(0.5,absa.index.oCIFAlertModal,document.body,true)}}}})};absa.apps.createAccount.expandDetailView=function(b){var a=bb.selector.queryAncestor(b,".ui-tableBodyRow");phe.tableBodyRow.expandRow(a)};absa.apps.createAccount.termsConditions=function(b,a,c){absa.openReport("report/applyTermsConditions/TermsAndConditions.pdf?code="+a,"TermsAndConditions")};absa.apps.createAccount.termsConditionsOLD=function(b,a,d){if(a=="09001"|a=="09010"|a=="09005"|a=="09062"|a=="09074"|a=="09060"|a=="09203"|a=="09300"|a=="09301"|a=="09309"|a=="03040"|a=="03041"|a=="03042"|a=="03043"){var c="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveTermsAndConditions&code="+a;absa.modal.loadModal(c,d)}else{absa.openReport("report/applyTermsConditions/TermsAndConditions.pdf?code="+a,"TermsAndConditions")}};absa.apps.createAccount.customValidateCapitalizationFrequency=function(f,n){var p=bb.selector.queryAncestor(f,".ap-applySaveInvest-form1");var g=bb.selector.query(p,".ap-applySaveInvest-capitalizationFrequency");var r=phe.select.getValue(g);var a=bb.selector.query(p,".ap-applySaveInvest-maturityDate");var t=bb.selector.query(p,".ap-applySaveInvest-firstCapitalizationDate");var l=phe.inputReadOnlyText.getValue(t);var h;var i;var o;var m;var s;var e;var d;var q=bb.selector.query(p,".ap-applySaveInvest-hidden-productCode");var b=phe.hiddenField.getValue(q);var j=bb.selector.query(p,".ui-datePicker--input_disabled");var k=true;if(j!=null){k=phe.datePicker.getAttribute(j,"disabled")}else{k=false}if(a!=null){if(!k){h=phe.datePicker.getValue(a)}i=phe.datePicker.getAttribute(a,"data-startFromDate");o=phe.datePicker.getAttribute(a,"data-startToDate");m=phe.datePicker.getAttribute(a,"data-threeMonthsFromNow");sSixMonthsFromNowDate=phe.datePicker.getAttribute(a,"data-sixMonthsFromNow");s=phe.datePicker.getAttribute(a,"data-oneYearFromNow");e=phe.datePicker.getAttribute(a,"data-labelTxtForDisplay1");d=phe.datePicker.getAttribute(a,"data-labelTxtForDisplay2")}else{return true}var c=bb.selector.query(p,".ap-applySaveInvest-minDateDisplay");if(Number(r)==3){if(absa.date.getDaysDiff(i,absa.date.formatDate(new Date(m)))>0){phe.datePicker.setAttribute(a,"fromDate",m);c.innerHTML=e+" "+m.substring(0,10)+" "+d+" "+o.substring(0,10);return true}else{phe.datePicker.setAttribute(a,"fromDate",i);c.innerHTML=e+" "+i.substring(0,10)+" "+d+" "+o.substring(0,10);return true}}else{if(Number(r)==6){if(absa.date.getDaysDiff(i,absa.date.formatDate(new Date(sSixMonthsFromNowDate)))>0){phe.datePicker.setAttribute(a,"fromDate",sSixMonthsFromNowDate);c.innerHTML=e+" "+sSixMonthsFromNowDate.substring(0,10)+" "+d+" "+o.substring(0,10);return true}else{phe.datePicker.setAttribute(a,"fromDate",i);c.innerHTML=e+" "+i.substring(0,10)+" "+d+" "+o.substring(0,10);return true}}else{if(Number(r)==12){if(absa.date.getDaysDiff(i,absa.date.formatDate(new Date(s)))>0){phe.datePicker.setAttribute(a,"fromDate",s);c.innerHTML=e+" "+s.substring(0,10)+" "+d+" "+o.substring(0,10);return true}else{phe.datePicker.setAttribute(a,"fromDate",i);c.innerHTML=e+" "+i.substring(0,10)+" "+d+" "+o.substring(0,10);return true}}else{phe.datePicker.setAttribute(a,"fromDate",i);c.innerHTML=e+" "+i.substring(0,10)+" "+d+" "+o.substring(0,10);return true}}}};absa.apps.createAccount.validateMinimumDepositAmount=function(q,g){var k=bb.selector.queryAncestor(q,".ap-applySaveInvest-grid1");var e=bb.selector.query(k,".ap-applySaveInvest-selectAccount-dropdown");var n=bb.selector.queryAncestor(q,".ap-applySaveInvest-form1");var o=bb.selector.query(n,".ap-applySaveInvest-hidden-productCode");var b=phe.hiddenField.getValue(o);var t=bb.selector.query(e.parentNode.parentNode,".ap-account-"+phe.select.getValue(e));var l=t.getAttribute("available");if(l==""){l=0}var h=phe.textBox.getAttribute(q,"data-minDepositAmount");if(h==""){h=0}var c=bb.selector.query(k,".ap-applySaveInvest-interAccountTransferAvailable");var j=phe.common.getAttribute(c,"interAccountTransferAvailable");var m=phe.textBox.getAttribute(q,"data-msgAvailableIATLimitExceeded");var d=phe.textBox.getAttribute(q,"data-msgAvailableLimitExceeded");var p=phe.textBox.getAttribute(q,"data-msgAvailableAmountExceeded");var r=phe.textBox.getAttribute(q,"data-msgDepositAmount");var i=phe.textBox.getAttribute(q,"data-msgAnnualLimitForTaxFree");if(Number(j)<Number(h)){phe.textBox.setAttribute(q,"customValidationText",m);return false}else{if(Number(l)<Number(h)){phe.textBox.setAttribute(q,"customValidationText",p);return false}else{phe.textBox.setAttribute(q,"customValidationText",r);var s=Number(phe.textBox.getValue(q));if(s<Number(g)){return false}else{if(b=="09062"){phe.textBox.setAttribute(q,"customValidationText",i);var f=bb.selector.query(n,".ap-applySaveInvest-hidden-annualContrAmount");var a=Number(phe.hiddenField.getValue(f));var s=Number(phe.textBox.getValue(q));if(s>a){return false}else{return true}}else{return true}}}}};absa.apps.createAccount.viewDetailedInformation=function(c,b,a){absa.openReport("report/prodinfo/retrieveExtendedProductInfo.pdf?code="+b,"ExtendedProductInformation")};absa.apps.createAccount.selectToAccountForInterestPayment=function(f){var b=phe.select.getValue(f);var h=bb.selector.queryAncestor(f,".ap-applySaveInvest-form1");var d=bb.selector.query(h,".ap-applySaveInvest-containerInterestPaymentInstruction");var e=bb.selector.query(h,".ap-applySaveInvest-hidden-productCode");var c=phe.hiddenField.getValue(e);var a=bb.selector.query(h,".ap-applySaveInvest-containerWarningForIslamicTermDep");if(b=="internal"||b=="external"){var g="";if(b=="internal"){g="proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/interestPaymentInstruction&payTo=internal"}else{g="proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/interestPaymentInstruction&payTo=external"}d.setAttribute("proxyurl",g);absa.lazyLoadNode(d,true,function(i){phe.common.show(d);if(b=="internal"&&c=="03043"){phe.common.show(a)}else{phe.common.hide(a)}})}else{phe.common.hide(d);d.innerHTML=null;phe.common.hide(a)}};absa.apps.createAccount.viewLatestInterestRatesProfitShare=function(b,a,d,c){var e="";if(c){if(a=="03043"){e="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveInterestRateInfo&code="+a+"&mode=start"}else{e="proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/interestRateInfo-islamic&code="+a}}else{if(a=="09308"){e="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveInterestRateInfo&code="+a+"&mode=start"}else{e="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveInterestRateInfo&code="+a+"&mode=start"}}absa.modal.loadModal(e,d)};absa.apps.createAccount.setAccountBalanceForCurrentRow=function(d){var b=bb.selector.queryAncestor(d,".ui-row");var e=bb.selector.queryAll(b,".ap-account-balance div");var a=e.length;for(var c=0;c<a;c++){if(bb.html.hasClass(e[c],"ap-account-"+phe.select.getValue(d))){e[c].style.display="block";e[c].setAttribute("selected","selected")}else{e[c].style.display="none";e[c].removeAttribute("selected")}}};absa.apps.createAccount.selectAccountInRow=function(c,e){absa.apps.createAccount.setAccountBalanceForCurrentRow(c);var d=phe.select.getSelectedText(c);if(d!=null){var b=d.substring(0,d.indexOf(" -"));var a=bb.selector.query(c.parentNode,".ap-selectAccount-accountName");phe.hiddenField.setValue(a,b)}};absa.apps.createAccount.onBankSelect=function(d){var c=bb.selector.queryAncestor(d,".ap-applySaveInvest-form1");var b=bb.selector.query(c,'input[name="beneficiaryBranch"]');var a=bb.selector.query(c,".ap-applySaveInvest-branchCode");var e=bb.selector.query(c,".ap-applySaveInvest-branchName");phe.textBox.setValue(d,bb.string.trim(phe.textBox.getValue(d)));phe.textBox.setValue(b,"");absa.form.validate.checkElement(d);phe.textBox.focus(b);phe.suggestBox.setAttribute(b,"multipleRequest","proxy?pipe=applicationCachedGenericWebservice&ws=BeneficiaryWebService&action=getBranchCodes&bank="+d.value)};absa.apps.createAccount.validateBankSelection=function(a){var c=bb.selector.queryAncestor(a,".ap-applySaveInvest-form");var b=bb.selector.query(c,"[name=beneficiaryBank]");if(!absa.form.validate.checkElement(b)){phe.textBox.focus(b);phe.textBox.setAttribute(a,"required","false");absa.form.validate.checkElement(a);phe.textBox.setAttribute(a,"required","true");phe.helpText.showHelptext(b)}};absa.apps.createAccount.scrollToTop=function(b){var a=bb.selector.queryAncestor(b,".ap-applySaveInvest-root");bb.command.scrollTo(a)};absa.apps.createAccount.preSubmitToStep2=function(a){absa.directMarketing.updateMarketingIndicators(a,absa.apps.createAccount.submitToStep2)};absa.apps.createAccount.submitToStep2=function(C){var A=bb.selector.queryAncestor(C,".ap-applySaveInvest-form1");var aw=false;var an=0;var Z=bb.selector.query(A,".ap-applySaveInvest-hidden-productCode");var z=phe.hiddenField.getValue(Z);var U=bb.selector.queryAll(A,".ap-applySaveInvest-sourceOfFunds-chkBox");var ae="";var y="&sourceOfFunds=";for(var am=0;am<U.length;am++){if(phe.checkBox.isChecked(U[am])){ae+=y+U[am].value}}var d=phe.textBox.getValue(bb.selector.query(A,".ap-applySaveInvest-accName"));var p=phe.select.getValue(bb.selector.query(A,".ap-applySaveInvest-selectAccount-dropdown"));var h=phe.textBox.getValue(bb.selector.query(A,".ap-applySaveInvest-depositAmount"));var N=phe.textBox.getValue(bb.selector.query(A,".ap-applySaveInvest-fromAccRef"));var F=phe.textBox.getValue(bb.selector.query(A,".ap-applySaveInvest-toAccRef"));var n=phe.select.getValue(bb.selector.query(A,".ap-applySaveInvest-capitalizationFrequency"));var ap=phe.select.getValue(bb.selector.query(A,".ap-applySaveInvest-capitalizationDay"));var ac=phe.inputReadOnlyText.getValue(bb.selector.query(A,".ap-applySaveInvest-firstCapitalizationDate"));var at=bb.selector.query(A,".ap-applySaveInvest-maturityDate");var aa="";var V=bb.selector.query(A,".ui-datePicker--input_disabled");var u=true;if(V!=null){u=phe.datePicker.getAttribute(V,"disabled")}else{u=false}if(at!=null&&!u){aa=phe.datePicker.getValue(at)}var al=bb.selector.query(A,".ap-applySaveInvest-termDurationInDays");var E="";if(al!=null){E=phe.select.getValue(al)}var j=bb.selector.query(A,".ap-applySaveInvest-renewAutomatically");var O="";if(j!=null){O=phe.select.getValue(j)}var W=bb.selector.query(A,"[name=beneficiaryAccountNo]");var b="";if(W!=null){b=phe.textBox.getValue(W)}var t=bb.selector.query(A,"[name=beneficiaryBank]");var au="";if(t!=null){au=phe.suggestBox.getValue(t)}var B=bb.selector.query(A,"[name=beneficiaryBranch]");var G="";if(B!=null){G=phe.suggestBox.getValue(B)}var o=bb.selector.query(A,".ap-applySaveInvest-branchCode");var m="";if(o!=null){m=phe.hiddenField.getValue(o)}var T=bb.selector.query(A,".ap-applySaveInvest-branchName");var ad="";if(T!=null){ad=phe.hiddenField.getValue(T)}var ak=bb.selector.query(A,"[name=accountType]");var aq="";if(ak!=null){aq=phe.select.getValue(ak)}var ab=bb.selector.query(A,"[name=beneficiaryReference]");var e="";if(ab!=null){e=phe.textBox.getValue(ab)}var Y=bb.selector.query(A,"[name=occupation]");var ag="";if(Y!=null){ag=phe.textBox.getValue(Y)}var f=bb.selector.query(A,"[name=employmentStatus]");var a="";if(f!=null){a=phe.textBox.getValue(f)}var aj=null;var af=null;var ao=phe.hiddenField.getValue(bb.selector.query(A,".ap-applySaveInvest-hidden-clientType"));var L=phe.hiddenField.getValue(bb.selector.query(A,".ap-applySaveInvest-hidden-applyClientType"));if((L.indexOf(ao)<0)&&((z=="09005")||(z=="09062")||(z=="09060")||(z=="09308"))){aj=bb.selector.query(A,".ap-applySaveInvest-debitOrderRadio");if(absa.apps.createAccount.validateRecPaymentRadio(A)){af=phe.radioGroup.getValue(aj)}else{return}}else{if((L.indexOf(ao)<0)&&((z=="09203")||(z=="09205")||(z=="09207"))){aj=bb.selector.query(A,".ap-applySaveInvest-hidden-debitOrderQuote");af=phe.hiddenField.getValue(aj)}}var ai=bb.selector.query(A,".ap-applySaveInvest-hidden-annualContrAmount");var D=phe.hiddenField.getValue(ai);var R=bb.selector.query(A,".ap-applySaveInvest-hidden-totalContrAmount");var i=phe.hiddenField.getValue(R);if(z){if(z=="09308"||z=="09501"){var J=bb.selector.query(A,".ap-applySaveInvest-depositAmount");var g=phe.textBox.getValue(J);var l=bb.selector.query(A,".ap-applySaveInvest-interestRateGraph-interestRate");var ay=phe.hiddenField.getValue(l);var Q=bb.selector.query(A,".ap-applySaveInvest-hidden-creditRatePlanSelected");var av=bb.selector.query(A,".ap-applySaveInvest-interestRateOptionRadio");if(z=="09501"){var ah=bb.selector.query(A,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(ah){phe.hiddenField.setValue(ah,absa.apps.createAccount.globals.nwithdrawalPerc)}var c=bb.selector.query(A,".ap-applySaveInvest-interestRateGraph-noticePeriod");var s=absa.date.getDateNow();var r=aa.split("-");aa=new Date(r[0],r[1]-1,r[2]);var ax=absa.date.getDaysDiff(s,absa.date.formatDate(new Date(aa)));if(c){phe.hiddenField.setValue(c,ax)}var I=phe.select.getSelectedText(av);phe.hiddenField.setValue(Q,I);var K=phe.select.getValue(av);if(K=="DPL0950104"||K=="DPL0950105"){var v=bb.selector.query(A,".ap-applySaveInvest-hidden-minLimitForUpfrontInterest");var w=phe.hiddenField.getValue(v);if(!isNaN(w)&&Number(g)<w){phe.textBox.setAttribute(J,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(J,"helpText",absa.locale["Common/General/Validation/Amount"]);phe.textBox.focus(J);return}}}else{var K=phe.radioGroup.getValue(av);if(K.toString().length>10){K=K.substr(0,10)}phe.hiddenField.setValue(Q,K);var S=phe.hiddenField.getValue(bb.selector.query(A,".ap-applySaveInvest-hidden-minLimitForInvestorPlus"));if(K=="DPL0930804"&&!isNaN(S)&&Number(g)<S){phe.textBox.setAttribute(J,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(J,"helpText",absa.locale["Common/General/Validation/Amount"]);phe.textBox.focus(J);return}}var P=bb.selector.query(A,".ap-applySaveInvest-noInterestRate");var ar=bb.selector.query(A,".ap-applySaveInvest-insufficiantFunds");var M=bb.selector.query(A,".ap-applySaveInvest-selectAccount-dropdown");var k=phe.select.getValue(M);var X=bb.selector.query(A,".ap-account-"+k);var H=phe.common.getAttribute(X,"available");if(Number(g)>Number(H)){phe.message.setAttribute(ar,"style","");return}else{phe.message.setAttribute(ar,"style","display:none;")}if(Number(ay)<=0){phe.message.setAttribute(P,"style","");return}else{phe.message.setAttribute(P,"style","display:none;")}}}if(!absa.apps.createAccount.validateSourceOfFunds(A,aw,an)){return}if((L.indexOf(ao)<0)&&((z=="09005")||(z=="09062")||(z=="09060")||(z=="09203")||(z=="09205")||(z=="09207")||(z=="09308"))){phe.loadingMessage.showLoadingMessage(A);var q=bb.selector.query(A,".ap-applySaveInvest-toAccount");var x=null;if(phe.select.getValue(q)=="external"){x="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=confirmCreateAccount&view=getValidationMsgs&mode=start&accountName="+d+"&depositAmount="+h+"&fromAccountNo="+p+"&fromAccountReference="+N+"&toAccountReference="+F+"&capitalizationFrequency="+n+"&capitalizationDay="+ap+"&nextCapDate="+ac+"&maturityDate="+aa+"&termDurationInDays="+E+"&renewAutomatically="+O+"&beneficiaryAccountNo="+b+"&beneficiaryBank="+au+"&autoCode="+m+"&autoBranch="+ad+"&accountType="+aq+"&beneficiaryReference="+e+"&debitOrderQuote="+af+"&annualContrAmount="+D+"&totalContrAmount="+i+"&employmentStatus="+a+"&occupation="+ag;x+=ae}else{if(phe.select.getValue(q)=="internal"){x="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=confirmCreateAccount&view=getValidationMsgs&mode=start&accountName="+d+"&depositAmount="+h+"&fromAccountNo="+p+"&fromAccountReference="+N+"&toAccountReference="+F+"&capitalizationFrequency="+n+"&capitalizationDay="+ap+"&nextCapDate="+ac+"&maturityDate="+aa+"&termDurationInDays="+E+"&renewAutomatically="+O+"&beneficiaryAccountNo="+b+"&beneficiaryBank="+au+"&beneficiaryBranch="+G+"&accountType="+aq+"&beneficiaryReference="+e+"&debitOrderQuote="+af+"&annualContrAmount="+D+"&totalContrAmount="+i+"&employmentStatus="+a+"&occupation="+ag;x+=ae}else{au="Absa";G="632005";x="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=confirmCreateAccount&view=getValidationMsgs&mode=start&accountName="+d+"&depositAmount="+h+"&fromAccountNo="+p+"&fromAccountReference="+N+"&toAccountReference="+F+"&capitalizationFrequency="+n+"&capitalizationDay="+ap+"&nextCapDate="+ac+"&maturityDate="+aa+"&termDurationInDays="+E+"&renewAutomatically="+O+"&beneficiaryAccountNo="+b+"&beneficiaryBank="+au+"&beneficiaryBranch="+G+"&accountType="+aq+"&beneficiaryReference="+e+"&debitOrderQuote="+af+"&annualContrAmount="+D+"&totalContrAmount="+i+"&employmentStatus="+a+"&occupation="+ag;x+=ae}}if(absa.form.validate(A)){absa.io.makeRequest(x,function(aB){phe.loadingMessage.hideLoadingMessage(A);var aA=bb.html.createElementFromString(aB.text);if(aA!=null){var az=bb.selector.query(A,".ap-applySaveInvest-validation");if(az!=null){az.parentNode.replaceChild(aA,az)}}else{if(af=="Y"){phe.form.setAttribute(A,"action","proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/promptCreateAccountDebitOrder");absa.form.validateAndSubmit(A)}else{phe.form.setAttribute(A,"action","proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=confirmCreateAccount&mode=start");if(absa.form.validate(A)){phe.wizard.selectStepAbsolute(C,1)}absa.form.validateAndSubmit(A)}}})}else{phe.loadingMessage.hideLoadingMessage(A)}}else{absa.form.validateAndSubmit(A)}};absa.apps.createAccount.submitToStep2BROKEN=function(D,a){if(a==null){a=false}var B=bb.selector.queryAncestor(D,".ap-applySaveInvest-form1");var ax=false;var ao=0;var aa=bb.selector.query(B,".ap-applySaveInvest-hidden-productCode");var A=phe.hiddenField.getValue(aa);var V=bb.selector.queryAll(B,".ap-applySaveInvest-sourceOfFunds-chkBox");var af="";var z="&sourceOfFunds=";for(var an=0;an<V.length;an++){if(phe.checkBox.isChecked(V[an])){af+=z+V[an].value}}var e=phe.textBox.getValue(bb.selector.query(B,".ap-applySaveInvest-accName"));var q=phe.select.getValue(bb.selector.query(B,".ap-applySaveInvest-selectAccount-dropdown"));var i=phe.textBox.getValue(bb.selector.query(B,".ap-applySaveInvest-depositAmount"));var O=phe.textBox.getValue(bb.selector.query(B,".ap-applySaveInvest-fromAccRef"));var G=phe.textBox.getValue(bb.selector.query(B,".ap-applySaveInvest-toAccRef"));var o=phe.select.getValue(bb.selector.query(B,".ap-applySaveInvest-capitalizationFrequency"));var aq=phe.select.getValue(bb.selector.query(B,".ap-applySaveInvest-capitalizationDay"));var ad=phe.inputReadOnlyText.getValue(bb.selector.query(B,".ap-applySaveInvest-firstCapitalizationDate"));var au=bb.selector.query(B,".ap-applySaveInvest-maturityDate");var ab="";var W=bb.selector.query(B,".ui-datePicker--input_disabled");var v=true;if(W!=null){v=phe.datePicker.getAttribute(W,"disabled")}else{v=false}if(au!=null&&!v){ab=phe.datePicker.getValue(au)}var am=bb.selector.query(B,".ap-applySaveInvest-termDurationInDays");var F="";if(am!=null){F=phe.select.getValue(am)}var k=bb.selector.query(B,".ap-applySaveInvest-renewAutomatically");var P="";if(k!=null){P=phe.select.getValue(k)}var X=bb.selector.query(B,"[name=beneficiaryAccountNo]");var c="";if(X!=null){c=phe.textBox.getValue(X)}var u=bb.selector.query(B,"[name=beneficiaryBank]");var av="";if(u!=null){av=phe.suggestBox.getValue(u)}var C=bb.selector.query(B,"[name=beneficiaryBranch]");var H="";if(C!=null){H=phe.suggestBox.getValue(C)}var p=bb.selector.query(B,".ap-applySaveInvest-branchCode");var n="";if(p!=null){n=phe.hiddenField.getValue(p)}var U=bb.selector.query(B,".ap-applySaveInvest-branchName");var ae="";if(U!=null){ae=phe.hiddenField.getValue(U)}var al=bb.selector.query(B,"[name=accountType]");var ar="";if(al!=null){ar=phe.select.getValue(al)}var ac=bb.selector.query(B,"[name=beneficiaryReference]");var f="";if(ac!=null){f=phe.textBox.getValue(ac)}var Z=bb.selector.query(B,"[name=occupation]");var ah="";if(Z!=null){ah=phe.textBox.getValue(Z)}var g=bb.selector.query(B,"[name=employmentStatus]");var b="";if(g!=null){b=phe.textBox.getValue(g)}var ak=null;var ag=null;var ap=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-clientType"));var N=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-applyClientType"));if((N.indexOf(ap)<0)&&((A=="09005")||(A=="09062")||(A=="09060")||(A=="09308"))){ak=bb.selector.query(B,".ap-applySaveInvest-debitOrderRadio");if(absa.apps.createAccount.validateRecPaymentRadio(B)){ag=phe.radioGroup.getValue(ak)}else{return}}else{if((N.indexOf(ap)<0)&&((A=="09203")||(A=="09205")||(A=="09207"))){ak=bb.selector.query(B,".ap-applySaveInvest-hidden-debitOrderQuote");ag=phe.hiddenField.getValue(ak)}}var aj=bb.selector.query(B,".ap-applySaveInvest-hidden-annualContrAmount");var E=phe.hiddenField.getValue(aj);var S=bb.selector.query(B,".ap-applySaveInvest-hidden-totalContrAmount");var j=phe.hiddenField.getValue(S);if(A){if(A=="09308"||A=="09501"){var K=bb.selector.query(B,".ap-applySaveInvest-depositAmount");var h=phe.textBox.getValue(K);var m=bb.selector.query(B,".ap-applySaveInvest-interestRateGraph-interestRate");var az=phe.hiddenField.getValue(m);var R=bb.selector.query(B,".ap-applySaveInvest-hidden-creditRatePlanSelected");var aw=bb.selector.query(B,".ap-applySaveInvest-interestRateOptionRadio");if(A=="09501"){var ai=bb.selector.query(B,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(ai){phe.hiddenField.setValue(ai,absa.apps.createAccount.globals.nwithdrawalPerc)}var d=bb.selector.query(B,".ap-applySaveInvest-interestRateGraph-noticePeriod");var t=absa.date.getDateNow();var s=ab.split("-");ab=new Date(s[0],s[1]-1,s[2]);var ay=absa.date.getDaysDiff(t,absa.date.formatDate(new Date(ab)));if(d){phe.hiddenField.setValue(d,ay)}var J=phe.select.getSelectedText(aw);phe.hiddenField.setValue(R,J);var L=phe.select.getValue(aw);if(L=="DPL0950104"||L=="DPL0950105"){var w=bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitForUpfrontInterest");var x=phe.hiddenField.getValue(w);if(!isNaN(x)&&Number(h)<x){phe.textBox.setAttribute(K,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(K,"helpText",absa.locale["Common/General/Validation/Amount"]);phe.textBox.focus(K);return}}}else{var L=phe.radioGroup.getValue(aw);if(L.toString().length>10){L=L.substr(0,10)}phe.hiddenField.setValue(R,L);var T=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitForInvestorPlus"));if(L=="DPL0930804"&&!isNaN(T)&&Number(h)<T){phe.textBox.setAttribute(K,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(K,"helpText",absa.locale["Common/General/Validation/Amount"]);phe.textBox.focus(K);return}}var Q=bb.selector.query(B,".ap-applySaveInvest-noInterestRate");var at=bb.selector.query(B,".ap-applySaveInvest-insufficiantFunds");var M=bb.selector.query(B,".ap-applySaveInvest-selectAccount-dropdown");var l=phe.select.getValue(M);var Y=bb.selector.query(B,".ap-account-"+l);var I=phe.common.getAttribute(Y,"available");if(Number(h)>Number(I)){phe.message.setAttribute(at,"style","");return}else{phe.message.setAttribute(at,"style","display:none;")}if(Number(az)<=0){phe.message.setAttribute(Q,"style","");return}else{phe.message.setAttribute(Q,"style","display:none;")}}}if(!absa.apps.createAccount.validateSourceOfFunds(B,ax,ao)){return}if((N.indexOf(ap)<0)&&((A=="09005")||(A=="09062")||(A=="09060")||(A=="09203")||(A=="09205")||(A=="09207")||(A=="09308"))){phe.loadingMessage.showLoadingMessage(B);var r=bb.selector.query(B,".ap-applySaveInvest-toAccount");var y="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=confirmCreateAccount&view=getValidationMsgs&mode=start&accountName="+e+"&depositAmount="+i+"&fromAccountNo="+q+"&fromAccountReference="+O+"&toAccountReference="+G+"&capitalizationFrequency="+o+"&capitalizationDay="+aq+"&nextCapDate="+ad+"&maturityDate="+ab+"&termDurationInDays="+F+"&renewAutomatically="+P+"&beneficiaryAccountNo="+c+"&accountType="+ar+"&beneficiaryReference="+f+"&debitOrderQuote="+ag+"&annualContrAmount="+E+"&totalContrAmount="+j+"&occupation="+ah+"&employmentStatus="+b;if(phe.select.getValue(r)=="external"){y+="&beneficiaryBank="+av+"&autoCode="+n+"&autoBranch="+ae+af}else{if(phe.select.getValue(r)=="internal"){y+="&beneficiaryBank="+av+"&beneficiaryBranch="+H+af}else{av="Absa";H="632005";y+="&beneficiaryBank="+av+"&beneficiaryBranch="+H+af}}if(absa.form.validate(B)){absa.io.makeRequest(y,function(aC){phe.loadingMessage.hideLoadingMessage(B);var aD=bb.html.createElementFromString(aC.text);if(aD!=null){var aA=bb.selector.query(B,".ap-applySaveInvest-validation");if(aA!=null){var aB=aD.getAttribute("data-issuesCount");if(aB==null){aB="0"}if(Number(aB)>0){aA.parentNode.replaceChild(aD,aA);phe.loadingMessage.hideLoadingMessage(B)}else{absa.form.validateAndSubmit(B)}}else{absa.form.validateAndSubmit(B)}}else{if(ag=="Y"){phe.form.setAttribute(B,"action","proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/promptCreateAccountDebitOrder");absa.form.validateAndSubmit(B)}else{phe.form.setAttribute(B,"action","proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/promptCreateAccountDebitOrder");if(absa.form.validate(B)){phe.wizard.selectStepRelative(D,1);absa.form.submit(B)}}}})}else{phe.loadingMessage.hideLoadingMessage(B)}}else{absa.form.validateAndSubmit(B)}};absa.apps.createAccount.checkIfShouldAutoSubmit=function(a){var b=bb.selector.query(a,".ap-applySaveInvest-debitOrderQuote-hidden");if(b!=null){if(b=="N"){absa.form.validateAndSubmit(a)}}};absa.apps.createAccount.validateSourceOfFunds=function(c,b,e){var i=c.form||c;var g="";var d=[];var h=bb.selector.queryAll(i,".ap-applySaveInvest-sourceOfFunds-chkBox");var a=bb.selector.query(i,".ap-applySaveInvest-sourceOfFunds-div");for(var f=0;f<h.length;f++){if(phe.checkBox.isChecked(h[f])){d.push(h[f])}}if(d.length==0){g=h[0].getAttribute("showMeHow");a.setAttribute("helptext",g);a.focus();bb.html.addClass(c,"ui-form-incorrect-values");bb.html.addClass(a,"ui-incorrect-value ui-form-field");return false}else{if(d.length>5){g=h[0].getAttribute("showMeHow");a.setAttribute("helptext",g);bb.html.addClass(c,"ui-form-incorrect-values");bb.html.addClass(a,"ui-incorrect-value ui-form-field");return false}else{bb.html.removeClass(a,"ui-incorrect-value ui-form-field");bb.html.removeClass(c,"ui-form-incorrect-value");a.removeAttribute("helpText");return true}}};absa.apps.createAccount.onChangeSourceOfFundsValidation=function(a,c){var e="";var b=[];var f=bb.selector.queryAncestor(a,"."+c+"-sourceOfFunds-div");var g=bb.selector.queryAll(f,"."+c+"-sourceOfFunds-chkBox");for(var d=0;d<g.length;d++){if(phe.checkBox.isChecked(g[d])){b.push(g[d])}}if(b.length==0){e=g[0].getAttribute("showMeHow");f.setAttribute("helptext",e);bb.html.addClass(f,"ui-incorrect-value ui-form-field");return false}else{if(b.length>5){e=g[0].getAttribute("showMeHow");f.setAttribute("helptext",e);bb.html.addClass(f,"ui-incorrect-value ui-form-field");return false}else{bb.html.removeClass(f,"ui-incorrect-value ui-form-field");f.removeAttribute("helpText");return true}}};absa.apps.createAccount.validateRecPaymentRadio=function(c){if(bb.browser.ie){phe.helpText.hideHelptext()}var a=bb.selector.query(c,".ap-applySaveInvest-debitOrderRadio");var b=phe.radioGroup.isAnyRadioItemsChecked(a);if(!b){phe.common.show(bb.selector.query(c,".ap-applySaveInvest-recPaymentRadioItemNotChoose"));return false}return true};absa.apps.createAccount.addAccount=function(g,d){var c=bb.html.createElementFromString(d.text);if(d.status==200){var f=[];var b=bb.selector.query(c,".ap-applySaveInvest-hiddenAccName");var e=bb.selector.query(c,".ap-applySaveInvest-hiddenAccNewlyCreatedAccount");if(b!=null){var a=phe.hiddenField.getValue(b);var h=phe.hiddenField.getValue(e);if(h!=""&a!=""){absa.index.addAccountGadget(h,a,"retail")}}}};absa.apps.createAccount.onStepOneResetButtonClick=function(f){var o=bb.selector.queryAncestor(f,".ap-applySaveInvest-form1");var i=bb.selector.query(o,".ap-applySaveInvest-selectAccount-dropdown");var n=bb.selector.query(o,".ap-applySaveInvest-capitalizationFrequency");var h=bb.selector.query(o,".ap-applySaveInvest-axisTableA");var a=bb.selector.query(o,".ap-applySaveInvest-containerInterestPaymentInstruction");var q=bb.selector.query(o,".ap-applySaveInvest-capitalizationDayRow");var b=phe.hiddenField.getValue(bb.selector.query(o,".ap-applySaveInvest-hidden-minLimitForInvestorPlus"));var k=phe.hiddenField.getValue(bb.selector.query(o,".ap-applySaveInvest-hidden-valueOfCreditRatePlan"));var r=0;var m=0;var l=phe.select.getValue(n);if(a){phe.common.hide(a)}phe.form.reset(o);var j=bb.selector.query(o,".ap-applySaveInvest-sourceOfFunds-div");j.removeAttribute("helpText");bb.html.removeClass(j,"ui-incorrect-value ui-form-field");var p=bb.selector.query(o,".ap-applySaveInvest-hidden-productCode");var c=phe.hiddenField.getValue(p);if(c=="09308"){var e=bb.selector.query(h,".ui-axisTableBody");phe.axisTable.empty(e);var d="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=axisTableData&interestRateOption="+k+"&code="+c+"&amount="+b+"&withdrawalPerc="+m+"&noticeDays="+r;var g=bb.selector.query(o,".ap-applySaveInvest-divAxisTableData");phe.loadingMessage.showLoadingMessage(g);absa.io.makeRequest(d,function(s){phe.loadingMessage.hideLoadingMessage(g);g=bb.selector.query(o,".ap-applySaveInvest-divAxisTableData");g.innerHTML=s.text})}absa.apps.createAccount.updateInterestRateDisplay(h,0);if(l=="00"){phe.row.show(q)}absa.apps.createAccount.updateInterestRateDisplay(h,0);absa.apps.createAccount.selectAccountInRow(i);absa.apps.createAccount.customValidateCapitalizationFrequency(n,"capFrequency")};absa.apps.createAccount.globals=absa.apps.createAccount.globals||{};absa.apps.createAccount.globals.nOldRange=0;absa.apps.createAccount.globals.nNoticePeriod=0;absa.apps.createAccount.globals.nwithdrawalPerc=0;absa.apps.createAccount.globals.nOldDepositAmountRange=0;absa.apps.createAccount.globals.nOldAmountRange=0;absa.apps.createAccount.globals.bFromCreditRatePlanSelectEvent=false;absa.apps.createAccount.onResetAxisTableSelection=function(a){var d=phe.axisTable.getAttribute(a,"selectedRowValue");var c=phe.axisTable.getAttribute(a,"selectedColValue");var b=bb.selector.queryAncestor(a,".ui-grid");var f=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(f){phe.hiddenField.setValue(f,d)}var e=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,c)}absa.apps.createAccount.updateInterestRateDisplay(a,0)};absa.apps.createAccount.onSelectRowCallback=function(b){var d=phe.axisTable.getAttribute(b,"selectedRowValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(e){phe.hiddenField.setValue(e,d)}var a=phe.axisTable.getSelectedCellValue(b);absa.apps.createAccount.updateInterestRateDisplay(b,a)};absa.apps.createAccount.onSelectColCallback=function(b){var d=phe.axisTable.getAttribute(b,"selectedColValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,d)}var a=phe.axisTable.getSelectedCellValue(b);absa.apps.createAccount.updateInterestRateDisplay(b,a)};absa.apps.createAccount.onResetAxisTableSelectionForDynamicFixedDeposit=function(a){var d=phe.axisTable.getAttribute(a,"selectedRowValue");var c=phe.axisTable.getAttribute(a,"selectedColValue");var b=bb.selector.queryAncestor(a,".ui-grid");var f=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(f){phe.hiddenField.setValue(f,c)}var e=bb.selector.query(b,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(e){phe.hiddenField.setValue(e,d)}absa.apps.createAccount.updateInterestRateDisplay(a,0)};absa.apps.createAccount.onSelectColCallbackForDynamicFixedDeposit=function(b){var d=phe.axisTable.getAttribute(b,"selectedColValue");var c=bb.selector.queryAncestor(b,".ui-grid");var e=bb.selector.query(c,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(e){phe.hiddenField.setValue(e,d)}absa.apps.createAccount.globals.nwithdrawalPerc=d;var a=phe.axisTable.getSelectedCellValue(b);absa.apps.createAccount.updateInterestRateDisplay(b,a)};absa.apps.createAccount.onSelectRowCallbackForDynamicFixedDeposit=function(h){var o=bb.selector.queryAncestor(h,".ap-applySaveInvest-form1");var a=phe.axisTable.getAttribute(h,"selectedRowValue");var m=bb.selector.queryAncestor(h,".ui-grid");var g=bb.selector.query(m,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(g){phe.hiddenField.setValue(g,a)}absa.apps.createAccount.globals.nNoticePeriod=a;var p=phe.axisTable.getSelectedCellValue(h);absa.apps.createAccount.updateInterestRateDisplay(h,p);var e=bb.selector.query(o,".ap-applySaveInvest-hidden-createAccountForm1");if(e){var j=bb.selector.query(o,".ap-applySaveInvest-maturityDateLabelCell");var d=bb.selector.query(o,".ap-applySaveInvest-maturityDate");phe.datePicker.setAttribute(d,"disabled","false");var n=bb.selector.query(o,".ap-applySaveInvest-capitalizationDay");phe.select.setAttribute(n,"disabled","false");var l=bb.selector.query(o,".ap-applySaveInvest-minDateDisplay");sTxt1=phe.datePicker.getAttribute(d,"data-labelTxtForDisplay1");sTxt2=phe.datePicker.getAttribute(d,"data-labelTxtForDisplay2");phe.cell.setAttribute(j,"class","ap-applySaveInvest-maturityDateLabelCell");var f=a.split("-");var k=f[0];var b=f[1];var i=new Date();var c=new Date();i.setDate(i.getDate()+parseInt(k));c.setDate(c.getDate()+parseInt(b));phe.datePicker.setValue(d,"");phe.datePicker.setAttribute(d,"toDate",absa.date.formatDate(new Date(c)));phe.datePicker.setAttribute(d,"fromDate",absa.date.formatDate(new Date(i)));phe.datePicker.setAttribute(d,"data-startToDate",absa.date.formatDate(new Date(c)));phe.datePicker.setAttribute(d,"data-startFromDate",absa.date.formatDate(new Date(i)));l.innerHTML=sTxt1+" "+absa.date.formatDate(new Date(i)).substring(0,10)+" "+sTxt2+" "+absa.date.formatDate(new Date(c)).substring(0,10);k="";b=""}};absa.apps.createAccount.onDepositAmountTextBoxAxisTableChange=function(e,t){var B=bb.selector.queryAncestor(e,".ap-applySaveInvest-form1");var s=phe.textBox.getValue(e);if(t=="9308"){var F=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitForInvestorPlus"));var w=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitFromProductCat"));var d=phe.radioGroup.getValue(bb.selector.query(B,".ap-applySaveInvest-interestRateOptionRadio"));if(d.toString().length>10){d=d.substr(0,10)}if((d=="DPL0930804"&&!isNaN(F))){phe.textBox.setAttribute(e,"data-min",F)}else{phe.textBox.setAttribute(e,"data-min",w)}}var h=phe.textBox.getAttribute(e,"data-min");var m=phe.textBox.getAttribute(e,"data-max");if(isNaN(s)){bb.html.addClass(e,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(e,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(s)<Number(h))){bb.html.addClass(e,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(e,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(s)>Number(m))){bb.html.addClass(e,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(e,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{bb.html.removeClass(e,"ui-incorrect-value");var z=bb.selector.queryAncestor(e,".ui-grid");var q=bb.selector.query(z,".ap-applySaveInvest-axisTableA");var C=phe.textBox.getAttribute(e,"data-nbrOfRanges");var k=phe.textBox.getAttribute(e,"data-fromAmountRanges");var u=phe.textBox.getAttribute(e,"data-toAmountRanges");var i=k.split(",");var b=u.split(",");var v=0;var l=new Number(s);for(var p=0;p<i.length;p++){var r=new Number(i[p]);var f=new Number(b[p]);if(l>=r&l<=f){v=r;break}}var a=false;if(Number(v)!=Number(absa.apps.createAccount.globals.nOldRange)){a=true}var D=0;var y=0;var E=0;var c=bb.selector.query(q,"th.hlt-head");var g=bb.selector.query(q,"td.hlt-head");if(g){var A=bb.selector.query(g.parentNode,"td.hlt-col");if(c!=null){D=c.getAttribute("value")}if(g!=null){y=g.getAttribute("value")}if(A!=null){E=A.getAttribute("value")}absa.apps.createAccount.updateInterestRateDisplay(e,E)}if(a){var n=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-productCode"));var j="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=axisTableData&interestRateOption="+d+"&code="+n+"&amount="+s+"&withdrawalPerc="+y+"&noticeDays="+D;var o=bb.selector.query(B,".ap-applySaveInvest-divAxisTableData");phe.loadingMessage.showLoadingMessage(o);absa.io.makeRequest(j,function(x){phe.loadingMessage.hideLoadingMessage(o);o=bb.selector.query(B,".ap-applySaveInvest-divAxisTableData");o.innerHTML=x.text;absa.apps.createAccount.globals.nOldRange=Number(v)})}}}}};absa.apps.createAccount.onDepositAmountTextBoxChange=function(b,o){var r=bb.selector.queryAncestor(b,".ap-applySaveInvest-form1");var m=phe.select.getValue(bb.selector.query(r,".ap-applySaveInvest-interestRateOptionRadio"));var n=phe.textBox.getValue(b);var d=phe.textBox.getAttribute(b,"data-min");var g=phe.textBox.getAttribute(b,"data-max");var i=bb.selector.query(r,".ap-applySaveInvest-hidden-minLimitForUpfrontInterest");var j=phe.hiddenField.getValue(i);if((m=="DPL0950104"||m=="DPL0950105")&&!isNaN(j)){d=j}if(isNaN(n)){bb.html.addClass(b,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(b,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(n)<Number(d))){phe.textBox.setAttribute(b,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(b,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(n)>Number(g))){phe.textBox.setAttribute(b,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(b,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{b.removeAttribute("helpText");bb.html.removeClass(b,"ui-incorrect-value");phe.helpText.hideHelptext();var s=phe.textBox.getAttribute(b,"data-nbrOfRanges");var f=phe.textBox.getAttribute(b,"data-fromAmountRanges");var p=phe.textBox.getAttribute(b,"data-toAmountRanges");var e=f.split(",");var a=p.split(",");var q=0;var h=new Number(n);for(var k=0;k<e.length;k++){var l=new Number(e[k]);var c=new Number(a[k]);if(h>=l&h<=c){q=l;break}}o="0"+o;if(Number(q)!=Number(absa.apps.createAccount.globals.nOldDepositAmountRange)||absa.apps.createAccount.globals.bFromCreditRatePlanSelectEvent){absa.apps.createAccount.globals.nOldDepositAmountRange=Number(q);absa.apps.createAccount.globals.bFromCreditRatePlanSelectEvent=false;absa.apps.createAccount.onChangeTermRange(r,o)}}}}};absa.apps.createAccount.onDepositAmountTextBoxChangeForRates=function(b,n){var q=bb.selector.queryAncestor(b,".ap-applySaveInvest-form1");var i=bb.selector.query(q,".ap-applySaveInvest-interestRateOptionRadio");var l=phe.select.getValue(i);var m=phe.textBox.getValue(b);var d=phe.textBox.getAttribute(b,"data-min");var g=phe.textBox.getAttribute(b,"data-max");bb.html.removeClass(b,"ui-incorrect-value");if(isNaN(m)){bb.html.addClass(b,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(b,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(m)<Number(d))){phe.textBox.setAttribute(b,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(b,"helpText",absa.locale["Common/General/Validation/Amount"]);return}else{if((Number(m)>Number(g))){phe.textBox.setAttribute(b,"class","ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");return}else{b.removeAttribute("helpText");phe.helpText.hideHelptext();var r=phe.textBox.getAttribute(b,"data-nbrOfRanges");var f=phe.textBox.getAttribute(b,"data-fromAmountRanges");var o=phe.textBox.getAttribute(b,"data-toAmountRanges");var e=f.split(",");var a=o.split(",");var p=0;var h=new Number(m);for(var j=0;j<e.length;j++){var k=new Number(e[j]);var c=new Number(a[j]);if(h>=k&h<=c){p=k;break}}n="0"+n;if(Number(p)!=Number(absa.apps.createAccount.globals.nOldAmountRange)){absa.apps.createAccount.globals.nOldAmountRange=Number(p);absa.apps.createAccount.onChangeTermRange(q,n)}return}}}};absa.apps.createAccount.onDaysRangeButtonClick=function(b,e){var l=bb.selector.queryAncestor(b,".ap-applySaveInvest-form1");var f=bb.selector.query(l,".ap-applySaveInvest-interestRateOptionRadio");var c=phe.select.getValue(f);var m=bb.selector.query(l,".ap-applySaveInvest-depositAmount");var k=phe.textBox.getValue(m);var j=bb.selector.queryAncestor(m,".ui-grid");var h=bb.selector.query(j,".ap-applySaveInvest-axisTableA");var g=bb.selector.query(h,".ui-axisTableBody");var i=bb.selector.query(l,".ap-applySaveInvest-termRange");var d=phe.select.getSelectedIndex(i);var a="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveDynamicFixedDepositInterestRateInfo&mode=axisTableData&code="+e+"&depositAmount="+k+"&prodCode="+e+"&interestRateOption="+c+"&daysRange="+d;phe.axisTable.setAttribute(g,"dataFile",a);phe.axisTable.reload(g)};absa.apps.createAccount.updateInterestRateDisplay=function(c,a){var e=bb.selector.queryAncestor(c,".ap-applySaveInvest-noticeSelectGrid");var b=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-txt");var d=bb.selector.query(e,".ap-applySaveInvest-interestRateGraph-interestRate");phe.hiddenField.setValue(d,a);b.innerHTML=new Number(a).toFixed(2)};absa.apps.createAccount.onDepositAmountSliderBlur=function(a){var c=phe.slider.getValue(a);var e=bb.selector.queryAncestor(a,".ap-applySaveInvest-noticeSelectGrid");var d=bb.selector.query(e,".ap-applySaveInvest-withdrawalPerc");var g=phe.slider.getValue(d);var f=bb.selector.query(e,".ap-applySaveInvest-noticePeriod");var b=phe.slider.getValue(f);absa.apps.createAccount.updateInterestYouWillEarn(a,c,g,b)};absa.apps.createAccount.onWithdrawalPercSliderBlur=function(b){var d=phe.slider.getValue(b);var e=bb.selector.queryAncestor(b,".ap-applySaveInvest-noticeSelectGrid");var a=bb.selector.query(e,".ap-applySaveInvest-depositAmount");var g=phe.textBox.getValue(a);var f=bb.selector.query(e,".ap-applySaveInvest-noticePeriod");var c=phe.slider.getValue(f);absa.apps.createAccount.updateInterestYouWillEarn(b,g,d,c)};absa.apps.createAccount.onNoticePeriodSliderBlur=function(b){var c=phe.slider.getValue(b);var e=bb.selector.queryAncestor(b,".ap-applySaveInvest-noticeSelectGrid");var a=bb.selector.query(e,".ap-applySaveInvest-depositAmount");var g=phe.textBox.getValue(a);var d=bb.selector.query(e,".ap-applySaveInvest-withdrawalPerc");var f=phe.slider.getValue(d);absa.apps.createAccount.updateInterestYouWillEarn(b,g,f,c)};absa.apps.createAccount.updateInterestYouWillEarn=function(a,e,d,b){var c="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=getInterestRate&amount="+e+"&withdrawalPerc="+d+"&noticeDays="+b;absa.io.makeRequest(c,function(i){if(!i.errors.length){var f=bb.html.createElementFromString(i.text);var h=f.getAttribute("interestRate");var g=f.getAttribute("noticeDays");var l=bb.selector.queryAncestor(a,".ap-applySaveInvest-noticeSelectGrid");var j=bb.selector.query(l,".ap-applySaveInvest-interestRateGraph-txt");var k=bb.selector.query(l,".ap-applySaveInvest-interestRateGraph-interestRate");phe.hiddenField.setValue(k,h);j.innerHTML=h}else{absa.showIOErrorMessage(oContentBody)}})};absa.apps.createAccount.oBankRadioGroup=function(e){var d=phe.radioGroup.getValue(e);var f=bb.selector.queryAncestor(e,".ap-applySaveInvestDebitOrder-form");var b=bb.selector.query(f,".ap-applySaveInvestDebitOrder-confirmButton");var a=bb.selector.query(f,".ap-applySaveInvestDebitOrder-detail");var c="proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/promptCreateAccountDebitOrder&bankQuote="+d;if((d=="internal")||(d=="external")){b.onclick=function(){absa.apps.createAccount.checkAbsaListed(b)};phe.button.setAttribute(b,"type","button")}var g=phe.common.getAttribute(a,"proxyurl")?phe.common.getAttribute(a,"proxyurl"):"";phe.common.setAttribute(a,"proxyurl",c);absa.lazyLoadNode(a,true);phe.common.setAttribute(a,"proxyurl",g)};absa.apps.createAccount.checkAbsaListed=function(c){var e=bb.selector.queryAncestor(c,".ap-applySaveInvestDebitOrder-form");if(absa.form.validate(e)){phe.loadingMessage.showLoadingMessage(e,"Processing");var d=bb.selector.query(e,".ap-applySaveInvestDebitOrder-beneficiaryAccountNumber");var b="proxy?pipe=genericWebservice&ws=BeneficiaryWebService&action=searchAbsaListedBeneficiary&searchTypeAbsaListed=exact&view=addRecurringPayment&mode=addRecurringPayment&field=accountnumber&searchString="+phe.textBox.getValue(d);var a=bb.selector.query(e,".ap-applySaveInvestDebitOrder-absaListed-modal");absa.io.makeRequest(b,function(g){phe.loadingMessage.hideLoadingMessage(e);if(!g.errors.length){phe.form.displayErrorMessage(e,false);phe.form.displayIOErrorMessage(e,false);var i=bb.html.createElementFromString(g.text);var f=bb.selector.query(i,".ap-noResult");if(f){absa.form.validateAndSubmit(e)}else{var h=bb.selector.query(a,".ap-addRecurringPayment-modal");if(h){h.parentNode.removeChild(h)}a.appendChild(i);absa.initializeNewContent(i);phe.modal.showModal(0.5,a,absa.gadgets.createAccount.gadget.body,true)}}else{phe.form.displayIOErrorMessage(e,true)}})}};absa.apps.createAccount.submitForm=function(h){var f=bb.selector.queryAncestor(h,".ap-applySaveInvestDebitOrder-form");var d=bb.selector.query(f,".ap-applySaveInvestDebitOrder-bankRadio");var b=bb.selector.query(f,".ap-applySaveInvestDebitOrder-firstPaymentHidden");var g=phe.hiddenField.getValue(b);var i=bb.selector.query(f,".ap-applySaveInvestDebitOrder-date13MonthsInFuture-hidden");var e=phe.hiddenField.getValue(i);var c=bb.selector.query(f,".ap-applySaveInvestDebitOrder-maturityDate-hidden");var a=phe.hiddenField.getValue(c);if(d){absa.apps.createAccount.checkAbsaListed(h)}else{if(absa.form.validate(f)){if(absa.date.getDaysDiff(g,e)>=0){if(a!=""){if(absa.date.getDaysDiff(g,a)>0){phe.message.hide(bb.selector.query(f,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"));absa.form.validateAndSubmit(f)}else{phe.message.show(bb.selector.query(f,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"))}}else{phe.message.hide(bb.selector.query(f,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"));absa.form.validateAndSubmit(f)}}else{phe.message.show(bb.selector.query(f,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"))}}}};absa.apps.createAccount.getPaymentCalculationValues=function(a){return{startDate:phe.datePicker.getValue(bb.selector.query(a,".ap-applySaveInvestDebitOrder-startDate")),firstPaymentDate:bb.selector.query(a,".ap-applySaveInvestDebitOrder-firstPaymentDate"),firstPaymentHidden:bb.selector.query(a,".ap-applySaveInvestDebitOrder-firstPaymentHidden"),endDate:phe.datePicker.getValue(bb.selector.query(a,".ap-applySaveInvestDebitOrder-endDate")),frequency:phe.select.getValue(bb.selector.query(a,".ap-applySaveInvestDebitOrder-paymentFrequency")),numberPayments:phe.textBox.getValue(bb.selector.query(a,".ap-applySaveInvestDebitOrder-numberOfPayments")),dayOfDebit:absa.apps.createAccount.getDayOfDebit(a)}};absa.apps.createAccount.getDayOfDebit=function(d){var b=bb.selector.query(d,".ap-applySaveInvestDebitOrder-dayOfDebitLabel");var c=phe.label.getAttribute(b,"for");var a=bb.selector.query(d,"[id="+c+"]");if(c=="applySaveInvestDebitOrder-dayOfDebit-yearly"){return phe.datePicker.getValue(a)}else{return phe.select.getValue(a)}};absa.apps.createAccount.getIncrement=function(a){var b;switch(a){case"1W":b=7;break;case"2W":b=14;break;case"1M":b=1;break;case"2M":b=2;break;case"3M":b=3;break;case"4M":b=4;break;case"6M":b=6;break;case"1ME":b=1;break}return b};absa.apps.createAccount.onNumberPaymentsChanged=function(d){var f=bb.selector.queryAncestor(d,".ap-applySaveInvestDebitOrder-form");var c=absa.apps.createAccount.getPaymentCalculationValues(f);var a=bb.selector.query(f,".ap-applySaveInvestDebitOrder-startDate");var e=bb.selector.query(f,".ap-applySaveInvestDebitOrder-endDate");var g=absa.apps.createAccount.getIncrement(c.frequency);absa.apps.createAccount.lastCalculationField="ap-applySaveInvestDebitOrder-numberOfPayments";if(absa.form.validate.checkElement(a)&&absa.form.validate.checkElement(d)){phe.datePicker.setValue(e,absa.apps.createAccount.calculateEndDate(c.startDate,c.numberPayments,c.dayOfDebit,g,c.firstPaymentDate,c.firstPaymentHidden))}else{phe.datePicker.setValue(e,phe.datePicker.getAttribute(e,"fromdate"))}var b="2099-12-31";if(absa.date.getDaysDiff(phe.datePicker.getValue(e),b)<0){phe.message.show(bb.selector.query(f,".ap-createDebitOrder-RecurringPaymentEnddateValidation"))}else{phe.message.hide(bb.selector.query(f,".ap-createDebitOrder-RecurringPaymentEnddateValidation"))}absa.form.validate.checkElement(e);absa.form.validate.checkElement(d)};absa.apps.createAccount.calculateEndDate=function(f,k,j,a,d,b){var c=new Date(f.substr(0,4),f.substr(5,2)-1,f.substr(8,2));var l;var g;if(a==7||a==14){var i=absa.apps.createAccount.getNextDate(c,j,a,d,b);l=new Date(i.getFullYear(),i.getMonth(),i.getDate()+a*(k-1));g=l.getMonth()}else{if(a==1||a==2||a==3||a==4||a==6){absa.apps.createAccount.getNextDateMonthly(c,j,d,b);var e=new Date(c.getFullYear(),c.getMonth(),1);g=e.getMonth()+a*k;l=new Date(e.getFullYear(),g,j)}else{absa.apps.createAccount.showFirstPaymentDate(j,"false",d,b);g=j.substr(5,2);k=new Number(k);k=k-1;l=new Date(new Number(j.substr(0,4))+k,j.substr(5,2)-1,j.substr(8,2))}}while(g<l.getMonth()){l=new Date(l.getFullYear(),l.getMonth(),l.getDate()-1)}var h=new Number(l.getMonth());h=h+1;if(h<10){if(l.getDate()<10){l=l.getFullYear()+"-0"+h+"-0"+l.getDate()}else{l=l.getFullYear()+"-0"+h+"-"+l.getDate()}}else{if(l.getDate()<10){l=l.getFullYear()+"-"+h+"-0"+l.getDate()}else{l=l.getFullYear()+"-"+h+"-"+l.getDate()}}return l};absa.apps.createAccount.getNextDate=function(b,e,f,a,d){var c;if(b.getDay()<e){c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+(e-b.getDay()))}else{if(b.getDay()==e){c=new Date(b.getFullYear(),b.getMonth(),b.getDate())}else{c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+f-(b.getDay()-e))}}absa.apps.createAccount.showFirstPaymentDate(c,"true",a,d);return c};absa.apps.createAccount.getNextDateMonthly=function(b,e,a,d){var c;if(b.getDate()<e){c=new Date(b.getFullYear(),b.getMonth(),e);while(c.getMonth()!=b.getMonth()){c=new Date(b.getFullYear(),b.getMonth(),e-1)}}else{if(b.getDate()==e){c=new Date(b.getFullYear(),b.getMonth(),b.getDate())}else{c=new Date(b.getFullYear(),b.getMonth()+1,e)}}absa.apps.createAccount.showFirstPaymentDate(c,"true",a,d);return c};absa.apps.createAccount.showFirstPaymentDate=function(b,e,a,c){if(e=="true"){var d=new Number(b.getMonth());d=d+1;if(d<10){if(b.getDate()<10){b=b.getFullYear()+"-0"+d+"-0"+b.getDate()}else{b=b.getFullYear()+"-0"+d+"-"+b.getDate()}}else{if(b.getDate()<10){b=b.getFullYear()+"-"+d+"-0"+b.getDate()}else{b=b.getFullYear()+"-"+d+"-"+b.getDate()}}}phe.inputReadOnlyText.setValue(a,phe.inputReadOnlyText.getAttribute(a,"name")+": "+b);phe.inputReadOnlyText.show(a);phe.hiddenField.setValue(c,b)};absa.apps.createAccount.onPaymentFrequencyChanged=function(h){absa.apps.createAccount.setDayOfDebitDropdown(h);var f=bb.selector.queryAncestor(h,".ap-applySaveInvestDebitOrder-form");var d=absa.apps.createAccount.getPaymentCalculationValues(f);var a=bb.selector.query(f,".ap-applySaveInvestDebitOrder-startDate");var e=bb.selector.query(f,".ap-applySaveInvestDebitOrder-endDate");var c=bb.selector.query(f,".ap-applySaveInvestDebitOrder-numberOfPayments");var g=absa.apps.createAccount.getIncrement(d.frequency);if(absa.form.validate.checkElement(a)){if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-numberOfPayments"){if(absa.form.validate.checkElement(c)){phe.datePicker.setValue(e,absa.apps.createAccount.calculateEndDate(d.startDate,d.numberPayments,d.dayOfDebit,g,d.firstPaymentDate,d.firstPaymentHidden))}}else{if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-endDate"){if(absa.form.validate.checkElement(e)){phe.textBox.setValue(c,absa.apps.createAccount.calculatePayments(d.startDate,d.endDate,d.dayOfDebit,g,d.firstPaymentDate,d.firstPaymentHidden))}}else{phe.textBox.setValue(c,"");phe.datePicker.setValue(e,phe.datePicker.getAttribute(e,"fromdate"))}}}var b="2099-12-31";if(absa.date.getDaysDiff(phe.datePicker.getValue(e),b)<0){phe.message.show(bb.selector.query(f,".ap-createDebitOrder-RecurringPaymentEnddateValidation"))}else{phe.message.hide(bb.selector.query(f,".ap-createDebitOrder-RecurringPaymentEnddateValidation"))}absa.form.validate.checkElement(e);absa.form.validate.checkElement(c)};absa.apps.createAccount.calculatePayments=function(g,f,j,a,d,b){var h=0;var c=new Date(g.substr(0,4),g.substr(5,2)-1,g.substr(8,2));endDate=new Date(f.substr(0,4),f.substr(5,2)-1,f.substr(8,2));if(a==7||a==14){var i=absa.apps.createAccount.getNextDate(c,j,a,d,b);i=new Date(i.getFullYear(),i.getMonth(),i.getDate());while(i<=endDate){h++;i=new Date(i.getFullYear(),i.getMonth(),i.getDate()+a)}}else{if(a==1||a==2||a==3||a==4||a==6){var e=new Date(c.getFullYear(),c.getMonth()+a,1);var k=absa.apps.createAccount.getNextDateMonthly(c,j,d,b);if(k.getDate()>=c.getDate()){h=1}while(e<=endDate){h++;e=new Date(e.getFullYear(),e.getMonth()+a,e.getDate())}if((e.getMonth()-a)==endDate.getMonth()&&j>endDate.getDate()){h--}}else{var i=new Date(j.substr(0,4),parseInt(j.substr(5,2))-1,j.substr(8,2));var c=new Date(g.substr(0,4),parseInt(g.substr(5,2))-1,g.substr(8,2));if(i<c){i=new Date(i.getFullYear()+1,i.getMonth(),i.getDate())}else{i=new Date(i.getFullYear(),i.getMonth(),i.getDate())}absa.apps.createAccount.showFirstPaymentDate(i,"true",d,b);h=0;while(i<=endDate){h++;i=new Date(i.getFullYear()+1,i.getMonth(),i.getDate())}}}return h};absa.apps.createAccount.onEndDateChanged=function(d){var e=bb.selector.queryAncestor(d,".ap-applySaveInvestDebitOrder-form");var c=absa.apps.createAccount.getPaymentCalculationValues(e);var a=bb.selector.query(e,".ap-applySaveInvestDebitOrder-startDate");var b=bb.selector.query(e,".ap-applySaveInvestDebitOrder-numberOfPayments");var f=absa.apps.createAccount.getIncrement(c.frequency);absa.apps.createAccount.lastCalculationField="ap-applySaveInvestDebitOrder-endDate";if(absa.form.validate.checkElement(a)&&absa.form.validate.checkElement(d)){phe.textBox.setValue(b,absa.apps.createAccount.calculatePayments(c.startDate,c.endDate,c.dayOfDebit,f,c.firstPaymentDate,c.firstPaymentHidden))}else{phe.textBox.setValue(b,"")}absa.form.validate.checkElement(d);absa.form.validate.checkElement(b)};absa.apps.createAccount.onDayOfDebitChanged=function(a){absa.apps.createAccount.setDayOfDebitHidden(a,"false");var f=bb.selector.queryAncestor(a,".ap-applySaveInvestDebitOrder-form");var d=absa.apps.createAccount.getPaymentCalculationValues(f);var b=bb.selector.query(f,".ap-applySaveInvestDebitOrder-startDate");var e=bb.selector.query(f,".ap-applySaveInvestDebitOrder-endDate");var c=bb.selector.query(f,".ap-applySaveInvestDebitOrder-numberOfPayments");var g=absa.apps.createAccount.getIncrement(d.frequency);if(absa.form.validate.checkElement(b)&&absa.form.validate.checkElement(a)){if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-numberOfPayments"){if(absa.form.validate.checkElement(c)){phe.datePicker.setValue(e,absa.apps.createAccount.calculateEndDate(d.startDate,d.numberPayments,d.dayOfDebit,g,d.firstPaymentDate,d.firstPaymentHidden))}}else{if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-endDate"){if(absa.form.validate.checkElement(e)){phe.textBox.setValue(c,absa.apps.createAccount.calculatePayments(d.startDate,d.endDate,d.dayOfDebit,g,d.firstPaymentDate,d.firstPaymentHidden))}}else{phe.textBox.setValue(c,"");phe.datePicker.setValue(e,phe.datePicker.getAttribute(e,"fromdate"))}}}absa.form.validate.checkElement(e);absa.form.validate.checkElement(c)};absa.apps.createAccount.setDayOfDebitHidden=function(a,d){var c=bb.selector.queryAncestor(a,".ap-applySaveInvestDebitOrder-form");var b=bb.selector.query(c,".ap-applySaveInvestDebitOrder-dayOfDebitHidden");if(d=="true"){phe.hiddenField.setValue(b,phe.datePicker.getValue(a))}else{phe.hiddenField.setValue(b,phe.select.getValue(a))}};absa.apps.createAccount.setDayOfDebitDropdown=function(f){var g=bb.selector.queryAncestor(f,".ap-applySaveInvestDebitOrder-form");var e=bb.selector.query(g,".ap-applySaveInvestDebitOrder-weekly");var c=bb.selector.query(g,".ap-applySaveInvestDebitOrder-monthly");var h=bb.selector.query(g,".ap-applySaveInvestDebitOrder-yearly");var a=bb.selector.query(g,".ap-applySaveInvestDebitOrder-dayOfDebitLabel");var d=phe.select.getValue(f);var b=bb.selector.query(g,".ap-applySaveInvestDebitOrder-startDate");switch(d){case"1W":case"2W":if(phe.label.getAttribute(a,"for")!=phe.select.getAttribute(e,"id")){phe.select.setSelectedIndex(e,0);phe.select.hide(c);phe.datePicker.hide(h);phe.select.show(e);phe.label.setAttribute(a,"for",phe.select.getAttribute(e,"id"));absa.apps.createAccount.setDayOfDebitHidden(e,"false")}break;case"1M":case"2M":case"3M":case"4M":case"6M":if((phe.label.getAttribute(a,"for")!=phe.select.getAttribute(c,"id"))||(phe.select.getAttribute(c,"disabled")=="true")){phe.label.setAttribute(a,"for",phe.select.getAttribute(c,"id"));phe.select.hide(e);phe.datePicker.hide(h);phe.select.show(c);phe.select.setSelectedIndex(c,0);absa.apps.createAccount.setDayOfDebitHidden(c,"false");phe.select.setAttribute(c,"disabled","")}break;case"1ME":phe.label.setAttribute(a,"for",phe.select.getAttribute(c,"id"));phe.select.hide(e);phe.datePicker.hide(h);phe.select.show(c);phe.select.setSelectedIndex(c,30);absa.apps.createAccount.setDayOfDebitHidden(c,"false");phe.select.setAttribute(c,"disabled","true");break;case"1Y":phe.datePicker.setValue(h,phe.datePicker.getValue(b));phe.label.setAttribute(a,"for",phe.datePicker.getAttribute(h,"id"));phe.datePicker.setAttribute(h,"fromDate",phe.datePicker.getValue(b));phe.label.setAttribute(a,"for",phe.datePicker.getAttribute(h,"id"));phe.select.hide(e);phe.select.hide(c);phe.datePicker.show(h);absa.apps.createAccount.setDayOfDebitHidden(h,"true");break}};absa.apps.createAccount.onStartDateChanged=function(i){absa.apps.createAccount.setToDate(i);var k=bb.selector.queryAncestor(i,".ap-applySaveInvestDebitOrder-form");var b=bb.selector.query(k,".ap-applySaveInvestDebitOrder-paymentFrequency");var j=phe.select.getValue(b);if("1Y"==j){var g=bb.selector.query(k,".ap-applySaveInvestDebitOrder-yearly");var c=phe.datePicker.getValue(g);var f=phe.datePicker.getValue(i);if(absa.date.getDaysDiff(c,f)>0){absa.apps.createAccount.setDayOfDebitDropdown(b)}}var h=absa.apps.createAccount.getPaymentCalculationValues(k);var d=bb.selector.query(k,".ap-applySaveInvestDebitOrder-endDate");var e=bb.selector.query(k,".ap-applySaveInvestDebitOrder-numberOfPayments");var a=absa.apps.createAccount.getIncrement(h.frequency);if(absa.form.validate.checkElement(i)){if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-numberOfPayments"){if(absa.form.validate.checkElement(e)){phe.datePicker.setValue(d,absa.apps.createAccount.calculateEndDate(h.startDate,h.numberPayments,h.dayOfDebit,a,h.firstPaymentDate,h.firstPaymentHidden))}}else{if(absa.apps.createAccount.lastCalculationField=="ap-applySaveInvestDebitOrder-endDate"){if(absa.form.validate.checkElement(d)){phe.textBox.setValue(e,absa.apps.createAccount.calculatePayments(h.startDate,h.endDate,h.dayOfDebit,a,h.firstPaymentDate,h.firstPaymentHidden))}}else{phe.textBox.setValue(e,"");phe.datePicker.setValue(d,phe.datePicker.getAttribute(d,"fromdate"))}}}absa.form.validate.checkElement(d);absa.form.validate.checkElement(e)};absa.apps.createAccount.setToDate=function(h){var i=bb.selector.queryAncestor(h,".ap-applySaveInvestDebitOrder-form");var e=bb.selector.query(i,".ap-applySaveInvestDebitOrder-endDate");var c=new Date(phe.datePicker.getValue(h).substr(0,4),phe.datePicker.getValue(h).substr(5,2)-1,phe.datePicker.getValue(h).substr(8,2));var j=c.getFullYear()+10;var a=phe.datePicker.getValue(h).substr(0,4);var g=phe.datePicker.getValue(h).substr(5,2);var f=phe.datePicker.getValue(h).substr(8,2);var d=j+"-"+g+"-"+f;var b=a+"-"+g+"-"+f;phe.datePicker.setAttribute(e,"fromdate",b)};absa.apps.createAccount.onCapFrequencyChanged=function(u){var o=bb.selector.queryAncestor(u,".ap-applySaveInvest-form1");var t=bb.selector.query(o,".ap-applySaveInvest-capitalizationDay");var m=bb.selector.query(o,".ap-applySaveInvest-maturityDate");var g=bb.selector.query(o,".ap-applySaveInvest-maturityDateRow");var d=bb.selector.query(o,".ap-applySaveInvest-firstCapitalizationDate");var b=bb.selector.query(o,".ap-applySaveInvest-firstCapitalizationDateLabel");var a=bb.selector.query(o,".ap-applySaveInvest-capitalizationDayRow");var p=bb.selector.query(o,".ap-applySaveInvest-hidden-productCode");var e=phe.hiddenField.getValue(p);var s=new Date();var q=phe.select.getValue(u);var k="";if(t!=null){k=phe.select.getValue(t)}var v="";var l="";var f="";var r="";var h="";var n="";var i=bb.selector.query(o,".ui-datePicker--input_disabled");var j=true;if(i!=null){j=phe.datePicker.getAttribute(i,"disabled")}else{j=false}if(m!=null){if(!j){v=phe.datePicker.getValue(m)}h=phe.datePicker.getAttribute(m,"data-startFromDate");n=phe.datePicker.getAttribute(m,"data-startToDate");l=phe.datePicker.getAttribute(m,"data-threeMonthsFromNow");f=phe.datePicker.getAttribute(m,"data-sixMonthsFromNow");r=phe.datePicker.getAttribute(m,"data-oneYearFromNow")}switch(q){case"00":if(v!=null&v!=""){var c=absa.apps.createAccount.formatDate(new Date(v.substr(0,4),v.substr(5,2)-1,v.substr(8,2)));phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b)}else{if(d!=null){phe.inputReadOnlyText.setValue(d,"")}}phe.row.hide(a);if((e=="09005")||(e=="09062")||(e=="09060")||(e=="09308")||(e=="09500")){phe.row.hide(g)}if((e=="09500")&d!=null){phe.inputReadOnlyText.setValue(d,absa.date.addToDate(absa.date.getDateNow(),parseInt(phe.select.getValue(bb.selector.query(o,".ap-applySaveInvest-termDurationInDays"))),0,0,true))}if(absa.date.getDaysDiff(h,v)<0){phe.datePicker.setValue(m,"")}break;case"01":var c=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(k),parseInt(q)));if(e=="03040"||e=="03041"||e=="09203"||e=="03043"){if(v!=null&v!=""){if(absa.date.getDaysDiff(phe.inputReadOnlyText.getValue(d),v)<0){phe.inputReadOnlyText.setValue(d,v);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if(absa.date.getDaysDiff(h,v)<0){phe.datePicker.setValue(m,"")}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if((e=="09005")||(e=="09062")||(e=="09060")||(e=="09308")){phe.row.hide(g)}break;case"03":var c=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(k),parseInt(q)));if(e=="03040"||e=="03041"||e=="09203"||e=="03043"){if(v!=null&v!=""){if(absa.date.getDaysDiff(phe.inputReadOnlyText.getValue(d),v)<0){phe.inputReadOnlyText.setValue(d,v);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if(absa.date.getDaysDiff(l,v)<0){phe.datePicker.setValue(m,"")}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if((e=="09005")||(e=="09062")||(e=="09060")||(e=="09308")){phe.row.hide(g)}break;case"06":var c=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(k),parseInt(q)));if(e=="03040"||e=="03041"||e=="09203"||e=="03043"){if(v!=null&v!=""){if(absa.date.getDaysDiff(phe.inputReadOnlyText.getValue(d),v)<0){phe.inputReadOnlyText.setValue(d,v);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if(absa.date.getDaysDiff(f,v)<0){phe.datePicker.setValue(m,"")}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if((e=="09005")||(e=="09062")||(e=="09060")||(e=="09308")){phe.row.hide(g)}break;case"12":var c=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(k),parseInt(q)));if(e=="03040"||e=="03041"||e=="09203"||e=="03043"){if(v!=null&v!=""){if(absa.date.getDaysDiff(phe.inputReadOnlyText.getValue(d),v)<0){phe.inputReadOnlyText.setValue(d,v);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if(absa.date.getDaysDiff(r,v)<0){phe.datePicker.setValue(m,"")}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}}else{phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}if((e=="09005")||(e=="09062")||(e=="09060")||(e=="09308")){phe.row.hide(g)}break}};absa.apps.createAccount.onTermDurationChanged=function(a){var f=bb.selector.queryAncestor(a,".ap-applySaveInvest-form1");var i=bb.selector.query(f,".ap-applySaveInvest-termDurationInDays");var h=bb.selector.query(f,".ap-applySaveInvest-capitalizationFrequency");var c=bb.selector.query(f,".ap-applySaveInvest-firstCapitalizationDate");var b=bb.selector.query(f,".ap-applySaveInvest-firstCapitalizationDateLabel");var d=bb.selector.query(f,".ap-applySaveInvest-hidden-productCode");var g=phe.hiddenField.getValue(d);var e=phe.select.getValue(h);switch(e){case"00":if(c!=null){phe.inputReadOnlyText.setValue(c,absa.date.addToDate(absa.date.getDateNow(),parseInt(phe.select.getValue(i)),0,0,true))}break;default:break}};absa.apps.createAccount.onCapDayChanged=function(k){var m=bb.selector.queryAncestor(k,".ap-applySaveInvest-form1");var o=bb.selector.query(m,".ap-applySaveInvest-capitalizationFrequency");var d=bb.selector.query(m,".ap-applySaveInvest-maturityDate");var b=bb.selector.query(m,".ap-applySaveInvest-maturityDateRow");var g=bb.selector.query(m,".ap-applySaveInvest-firstCapitalizationDate");var c=bb.selector.query(m,".ap-applySaveInvest-firstCapitalizationDateLabel");var l=bb.selector.query(m,".ap-applySaveInvest-capitalizationDayDiv");var i=bb.selector.query(m,".ap-applySaveInvest-hidden-productCode");var n=phe.hiddenField.getValue(i);var h=new Date();var j=phe.select.getValue(o);var a="";if(k!=null){a=phe.select.getValue(k)}if(d!=null){var f=phe.datePicker.getValue(d)}switch(j){case"00":if(f!=null&f!=""){var e=absa.apps.createAccount.formatDate(new Date(f.substr(0,4),f.substr(5,2)-1,f.substr(8,2)));if(e!=null&g!=null){phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c)}}else{if(g!=null){phe.inputReadOnlyText.setValue(g,"")}}phe.row.hide(l);phe.row.show(b);break;case"01":var e=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(a),parseInt(j)));if(n=="03040"||n=="03041"||n=="09203"||n=="09501"){if(f!=null&f!=""){if(absa.date.getDaysDiff(e,f)<0){phe.inputReadOnlyText.setValue(g,f);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.select.setValue(k,parseInt(f.substr(8,2),10));phe.row.show(l)}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}if((n=="09005")||(n=="09062")||(n=="09060")||(n=="09308")){phe.row.hide(b)}break;case"03":var e=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(a),parseInt(j)));if(n=="03040"||n=="03041"||n=="09203"||n=="09501"){if(f!=null&f!=""){if(absa.date.getDaysDiff(e,f)<0){phe.inputReadOnlyText.setValue(g,f);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.select.setValue(k,parseInt(f.substr(8,2),10));phe.row.show(l)}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}if((n=="09005")||(n=="09062")||(n=="09060")||(n=="09308")){phe.row.hide(b)}break;case"06":var e=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(a),parseInt(j)));if(n=="03040"||n=="03041"||n=="09203"||n=="09501"){if(f!=null&f!=""){if(absa.date.getDaysDiff(e,f)<0){phe.inputReadOnlyText.setValue(g,f);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.select.setValue(k,parseInt(f.substr(8,2),10));phe.row.show(l)}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}if((n=="09005")||(n=="09062")||(n=="09060")||(n=="09308")){phe.row.hide(b)}break;case"12":var e=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(a),parseInt(j)));if(n=="03040"||n=="03041"||n=="09203"||n=="09501"){if(f!=null&f!=""){if(absa.date.getDaysDiff(e,f)<0){phe.inputReadOnlyText.setValue(g,f);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.select.setValue(k,parseInt(f.substr(8,2),10));phe.row.show(l)}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}}else{phe.inputReadOnlyText.setValue(g,e);phe.inputReadOnlyText.show(g);phe.inputReadOnlyText.show(c);phe.row.show(l)}if((n=="09005")||(n=="09062")||(n=="09060")||(n=="09308")){phe.row.hide(b)}break}};absa.apps.createAccount.onMatDateChanged=function(h){var l=bb.selector.queryAncestor(h,".ap-applySaveInvest-form1");var p=bb.selector.query(l,".ap-applySaveInvest-capitalizationDay");var q=bb.selector.query(l,".ap-applySaveInvest-capitalizationFrequency");var k=bb.selector.query(l,".ap-applySaveInvest-maturityDate");var g=bb.selector.query(l,".ap-applySaveInvest-maturityDateRow");var d=bb.selector.query(l,".ap-applySaveInvest-firstCapitalizationDate");var f=phe.inputReadOnlyText.getValue(d);var b=bb.selector.query(l,".ap-applySaveInvest-firstCapitalizationDateLabel");var a=bb.selector.query(l,".ap-applySaveInvest-capitalizationDayDiv");var m=bb.selector.query(l,".ap-applySaveInvest-hidden-productCode");var e=phe.hiddenField.getValue(m);var o=new Date();var n=phe.select.getValue(q);var j="";if(p!=null){j=phe.select.getValue(p)}var r;if(null!=k){var i=phe.datePicker.getValue(k);r=bb.string.trim(i);if(!absa.date.isValidDate(r)){return false}}switch(n){case"00":if(r!=null&r!=""){var c=absa.apps.createAccount.formatDate(new Date(r.substr(0,4),r.substr(5,2)-1,r.substr(8,2)));if(d!=null&c!=null){phe.inputReadOnlyText.setValue(d,c);phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b)}}else{if(d!=null){phe.inputReadOnlyText.setValue(d,"")}}phe.row.hide(a);phe.row.show(g);break;default:if(f!=null&r!=null){if(absa.date.getDaysDiff(f,r)<0){phe.inputReadOnlyText.setValue(d,r);phe.select.setValue(p,parseInt(r.substr(8,2),10));phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{var c=absa.apps.createAccount.formatDate(absa.date.getNextCapDate(new Date(),parseInt(j),parseInt(n)));if(absa.date.getDaysDiff(c,r)<0){phe.inputReadOnlyText.setValue(d,r);phe.select.setValue(p,parseInt(r.substr(8,2),10));phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}else{phe.inputReadOnlyText.setValue(d,c);phe.select.setValue(p,parseInt(c.substr(8,2),10));phe.inputReadOnlyText.show(d);phe.inputReadOnlyText.show(b);phe.row.show(a)}}}break}};absa.apps.createAccount.formatDate=function(c){var a=c.getDate();if(a<10){a="0"+a}var b=c.getMonth()+1;if(b<10){b="0"+b}var e=c.getFullYear();return e+"-"+b+"-"+a};absa.apps.createAccount.dODisabledBackButton=function(c,a,b){a=a||window.event;if(a){bb.html.handlePreventDefault(a)}absa.apps.createAccount.flushDebitOrderStep(c);phe.wizard.selectStepRelative(c,parseInt("-2"));if(b){try{b.call(c,c)}catch(d){}}};absa.apps.createAccount.flushDebitOrderStep=function(d){var a=bb.selector.queryAncestor(d,".ui-wizard");var b=bb.selector.query(a,".ui-wizard-body-wrapper");var c=bb.selector.queryAll(b,".ui-wizard-body");c[1].innerHTML=null};absa.apps.createAccount.reloadInterestTable=function(c){var a=bb.selector.query(window.document,".ap-applySaveInvest-primeLinkedInterestTable");var e=bb.selector.query(window.document,".ap-applySaveInvest-termDurationInDays");var b=bb.selector.query(window.document,".ap-applySaveInvest-capitalizationFrequency");var d="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrievePrimeLinkedInterestRateInfo&code=09500&termId="+phe.select.getValue(e)+"&capitalizationFrequency="+phe.select.getValue(b);phe.table.setAttribute(a,"dataFile",d);phe.table.reload(a)};absa.apps.createAccount.getProducts=function(f){var h=bb.selector.queryAncestor(f,".ap-applySaveInvest-root-expandableTable");var j=bb.selector.query(h,".ap-saveInvest-recommendedProducts");var g=bb.selector.queryAll(h,".ap-applySaveInvest-helpMeChooseSelect");var b=bb.selector.query(j,".ui-message");if(b){b.parentNode.removeChild(b)}if(j){j.innerHTML=""}var k=true;var c="&option=";for(var d=0;g.length>d;d++){var a=phe.select.getValue(g[d]);if(a==="0"){k=false;break}c+=a;if(d==(g.length-1)){break}else{c+="&option="}}if(k){j.setAttribute("proxyurl","proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=getProductsByOptions"+c);absa.lazyLoadNode(j,true,function(i){absa.initializeNewContent(j)})}else{var e=phe.message.createElement("error");j.appendChild(e);phe.message.setMessage(e,absa.locale["Apply/General/Error/PleaseAnswerAllQuestions"])}};absa.apps.createAccount.addToCompare=function(e,i,h){var k=bb.selector.queryAncestor(e,".ap-saveInvest-recommendedProducts");var f=bb.selector.query(k,".ap-saveInvest-compareProductsButton");var b=bb.selector.query(k,".ap-saveInvest-compareProductsButtonDisabled");var d=bb.selector.queryAll(k,".ap-saveInvest-productToCompare");var g=phe.message.createElement("error");if(phe.checkBox.isChecked(e)){var j=bb.selector.query(k,".ap-saveInvest-compareCheckBoxContainer");if(d.length==3){var g=phe.message.createElement("error");var c=bb.selector.query(k,".ui-message");if(!c){k.appendChild(g);phe.message.setMessage(g,absa.locale["Apply/General/Error/CannotCompareMoreThan"]);g.focus()}phe.checkBox.setAttribute(e,"checked","false")}else{if(d.length==0){phe.button.setAttribute(f,"class","ap-button-finish ap-saveInvest-compareProductsButton ap-common-floatRight");phe.button.setAttribute(b,"class","ap-button-finish ap-saveInvest-compareProductsButtonDisabled ap-common-floatRight ap-common-hide")}var a=bb.html.createElementFromString('<span class="ap-saveInvest-productToCompare ap-saveInvest-product-'+i+'"><input class="ui-hiddenField ap-saveInvest-productCode" type="hidden" value="'+i+'" /><input class="ui-form-field ui-checkBox" checked="true" onclick="absa.apps.createAccount.removeSelectedProduct(this,\''+i+'\')" value="" type="checkbox" messageref=".ui-form-field-errorMessage"></input><span>'+h+"</span> </span>");j.appendChild(a);f.focus()}}else{if(d.length==1){phe.button.setAttribute(f,"class","ap-button-finish ap-saveInvest-compareProductsButton ap-common-floatRight ap-common-hide");phe.button.setAttribute(b,"class","ap-button-finish ap-saveInvest-compareProductsButtonDisabled ap-common-floatRight ")}var c=bb.selector.query(k,".ui-message");if(c){c.parentNode.removeChild(c)}var a=bb.selector.query(k,".ap-saveInvest-product-"+i);a.parentNode.removeChild(a);f.focus()}};absa.apps.createAccount.removeSelectedProduct=function(e,j){var i=bb.selector.queryAncestor(e,".ap-applySaveInvest-root-expandableTable");var g=bb.selector.query(i,".ap-saveInvest-ProductBox-"+j);var f=bb.selector.query(g,".ui-checkBox");phe.checkBox.setAttribute(f,"checked","false");var k=bb.selector.queryAncestor(e,".ap-saveInvest-recommendedProducts");var h=bb.selector.query(k,".ap-saveInvest-compareProductsButton");var b=bb.selector.query(k,".ap-saveInvest-compareProductsButtonDisabled");var d=bb.selector.queryAll(k,".ap-saveInvest-productToCompare");if(d.length==1){phe.button.setAttribute(h,"class","ap-button-finish ap-saveInvest-compareProductsButton ap-common-floatRight ap-common-hide");phe.button.setAttribute(b,"class","ap-button-finish ap-saveInvest-compareProductsButtonDisabled ap-common-floatRight ");var c=bb.selector.query(k,".ui-message");if(c){c.parentNode.removeChild(c)}}var a=bb.selector.queryAncestor(e,".ap-saveInvest-product-"+j);a.parentNode.removeChild(a)};absa.apps.createAccount.compareAllProducts=function(f,h){var j=bb.selector.queryAncestor(f,".ap-saveInvest-recommendedProducts");var d=bb.selector.query(j,".ap-saveInvest-RecommendedProducts");var e=bb.selector.queryAll(d,".ap-saveInvest-helpMeChoose-ProductCode");if(absa.apps.createAccount.numberOfProductsValid(e,j)){var b=[],g=[];for(var c=0;c<e.length;c++){var a=phe.hiddenField.getValue(e[c]);b.push(a);g.push(bb.selector.query(d,".ap-saveInvest-ProductBox-"+a))}absa.apps.createAccount.showCompareModal(b,g,h)}};absa.apps.createAccount.compareProducts=function(f,h){var j=bb.selector.queryAncestor(f,".ap-saveInvest-recommendedProducts");var b=bb.selector.query(j,".ui-message");if(b){b.parentNode.removeChild(b)}var d=bb.selector.queryAll(j,".ap-saveInvest-productToCompare");var c=[],g=[];for(var e=0;e<d.length;e++){var a=phe.hiddenField.getValue(bb.selector.query(d[e],".ap-saveInvest-productCode"));c.push(a);g.push(bb.selector.query(j,".ap-saveInvest-ProductBox-"+a))}if(absa.apps.createAccount.numberOfProductsValid(c,j)){absa.apps.createAccount.showCompareModal(c,g,h)}};absa.apps.createAccount.numberOfProductsValid=function(a,c){if(a.length===2||a.length===3){return true}var b=phe.message.createElement("error");c.appendChild(b);phe.message.setMessage(b,absa.locale["Apply/General/Error/CannotCompareMoreThan"]);b.focus();return false};absa.apps.createAccount.generateProductQueryString=function(c,a,b){return"&productCode"+c+"="+a+"&productName"+c+"="+phe.hiddenField.getValue(bb.selector.query(b,".ap-saveInvest-helpMeChoose-ProductName-"+a))+"&productMinDep"+c+"="+phe.hiddenField.getValue(bb.selector.query(b,".ap-saveInvest-helpMeChoose-OpeningAmount-"+a))+"&productMinInt"+c+"="+phe.hiddenField.getValue(bb.selector.query(b,".ap-saveInvest-helpMeChoose-MinInterest-"+a))+"&productMaxInt"+c+"="+phe.hiddenField.getValue(bb.selector.query(b,".ap-saveInvest-helpMeChoose-MaxInterest-"+a))};absa.apps.createAccount.showCompareModal=function(c,d,a){var e="proxy?pipe=genericEmptyResponse&xslFile=CreateAccount/compareProducts";for(var b=0;b<c.length;b++){e+=absa.apps.createAccount.generateProductQueryString(b+1,c[b],d[b])}absa.modal.loadModal(e,a)};absa.apps.createAccount.onHelpMeChooseApplyClick=function(d){var b=bb.selector.queryAncestor(d,".ap-applySaveInvest-root-expandableTable");var c=bb.selector.queryAncestor(d,".ap-saveInvest-ProductBox");var a=phe.hiddenField.getValue(bb.selector.query(c,".ap-saveInvest-helpMeChoose-ProductCode"));absa.apps.createAccount.expandProductRow(b,a)};absa.apps.createAccount.expandProductRow=function(c,b){var a=bb.selector.query(c,".ap-applySaveInvest-productListing-tableBodyExpandableExtension");var d=bb.selector.query(c,".ap-applySaveInvest-productListing-tableRow");phe.tableBodyRow.expandRow(d,phe.tableBodyRowExpandableExtention.getAttribute(a,"dataFileView"),function(e){absa.apps.createAccount.expandDetailView(bb.selector.query(c,".ap-applySaveInvest-button-"+b))})};absa.apps.createAccount.onCompareApplyClick=function(c,a){phe.modal.hideModal();var b=bb.selector.query(window.document,".ap-applySaveInvest-root-expandableTable");absa.apps.createAccount.expandProductRow(b,a)};absa.apps.createAccount.onDebitOrderStepSubmit=function(g){var h=bb.selector.queryAncestor(g,".ap-applySaveInvestDebitOrder-form");var c=bb.selector.query(h,".ap-applySaveInvestDebitOrder-firstPaymentHidden");var f=phe.hiddenField.getValue(c);var d=bb.selector.query(h,".ap-applySaveInvestDebitOrder-date13MonthsInFuture-hidden");var b=phe.hiddenField.getValue(d);var a=bb.selector.query(h,".ap-applySaveInvestDebitOrder-maturityDate-hidden");var e=phe.hiddenField.getValue(a);if(absa.form.validate(h)){if(absa.date.getDaysDiff(f,b)>=0){if(e!=""){if(absa.date.getDaysDiff(f,e)>0){phe.message.hide(bb.selector.query(h,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"));absa.form.validateAndSubmit(h)}else{phe.message.show(bb.selector.query(h,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"))}}else{phe.message.hide(bb.selector.query(h,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"));absa.form.validateAndSubmit(h)}}else{phe.message.show(bb.selector.query(h,".ap-createRenewalInstr-firstPaymentDateExceeds13Mnth"))}}};var optionRemoved;absa.apps.createAccount.refreshQuestionPanel=function(d,a){if(a=="501"){if(d.options[d.selectedIndex].value==601){var c=bb.selector.queryAncestor(d,".ap-saveInvest-Questions");var h=bb.selector.queryAll(c,".ap-applySaveInvest-helpMeChooseSelectRow");for(var f=0;f<h.length;f++){var i=bb.selector.query(h[f],".ap-applySaveInvest-helpMeChooseSelect");for(var e=0;e<i.length;e++){if(i[e].value=="608"){optionRemoved=i[e];i.remove(e)}}}}else{var c=bb.selector.queryAncestor(d,".ap-saveInvest-Questions");var h=bb.selector.queryAll(c,".ap-applySaveInvest-helpMeChooseSelectRow");for(var f=0;f<h.length;f++){var i=bb.selector.query(h[f],".ap-applySaveInvest-helpMeChooseSelect");var g=false;var b=false;for(var e=0;e<i.length;e++){if(i[e].value=="607"){g=true}if(i[e].value=="608"){b=true}}if(g&&!(b)){phe.select.addOption(i,"Immediate","608")}}}}};absa.apps.createAccount.selectRenewAutomatically=function(c,e){if(e=="09501"){var l=bb.selector.queryAncestor(c,".ap-applySaveInvest-form1");var a=bb.selector.query(l,".ap-applySaveInvest-automaticallyReinvest-row");var k=bb.selector.query(l,".ap-applySaveInvest-renewAutomatically");var n=phe.select.getValue(k);var h=bb.selector.query(l,".ap-applySaveInvest-automaticallyReinvest");var i=bb.selector.query(l,".ap-applySaveInvest-toAccount-thisAccount");var m=bb.selector.query(l,".ap-applySaveInvest-toAccount-absaAccount");var d=bb.selector.query(l,".ap-applySaveInvest-toAccount");var j=bb.selector.query(l,".ap-applySaveInvest-containerInterestPaymentInstruction");var b=absa.locale["Apply/General/Label/ThisAccount"];var f=absa.locale["Apply/General/Label/AbsaAccount"];var g=absa.locale["Apply/General/Label/AccountAtAnotherBank"];if(n=="Y"){phe.row.show(a);phe.select.setSelectedIndex(h,0);phe.select.setAttribute(h,"required","true")}else{phe.row.hide(a);phe.select.setAttribute(h,"required","false")}}};absa.apps.createAccount.onChangeDFDRatePlan=function(a,b){absa.apps.createAccount.globals.bFromCreditRatePlanSelectEvent=true;absa.apps.createAccount.onChangeTermRange(a,b)};absa.apps.createAccount.onChangeTermRange=function(r,v){var C=bb.selector.queryAncestor(r,".ap-applySaveInvest-form1");var E=bb.selector.query(C,".ap-applySaveInvest-interestRateOptionRadio");var j=phe.select.getValue(E);var t=bb.selector.query(C,".ap-applySaveInvest-axisTableA");var l=bb.selector.query(t,".ui-axisTableBody");var w=bb.selector.query(C,".ap-applySaveInvest-termRange");var f=bb.selector.query(C,".ap-applySaveInvest-depositAmount");var B=phe.textBox.getValue(f);var d=phe.textBox.getAttribute(f,"data-min");var h=phe.textBox.getAttribute(f,"data-max");var p=bb.selector.query(C,".ap-applySaveInvest-depositAmount");var b=phe.hiddenField.getValue(p);var g=bb.selector.query(C,".ap-applySaveInvest-capitalizationFrequency");var n=bb.selector.query(C,".ap-applySaveInvest-hidden-minLimitForUpfrontInterest");var A=phe.hiddenField.getValue(n);var H=absa.locale["Apply/General/Label/Monthly"];var s=absa.locale["Apply/General/Label/Quarterly"];var D=absa.locale["Apply/General/Label/HalfYearly"];var G=absa.locale["Apply/General/Label/Yearly"];var F=absa.locale["Apply/General/Label/Maturity"];var k=bb.selector.query(C,".ap-applySaveInvest-minimumDepositAmount");var I=bb.selector.query(C,".ap-applySaveInvest-hidden-minLimitFromProductCat");var o=bb.selector.query(C,".ap-applySaveInvest-minimumDepositAmountReadOnly");var u=phe.hiddenField.getValue(k);var x=phe.hiddenField.getValue(I);var m=phe.inputReadOnlyText.getValue(o);if(j=="DPL0950104"||j=="DPL0950105"){d=A;phe.hiddenField.setValue(k,A);phe.inputReadOnlyText.setValue(o,absa.util.formatCurrency(A));if(w.length>3){w.selectedIndex=0;for(var z=0;z<w.length;z++){if(w.options[z].value=="4"||w.options[z].value=="5"){w.remove(z);z=0}}}}else{phe.hiddenField.setValue(k,x);phe.inputReadOnlyText.setValue(o,absa.util.formatCurrency(x.toString().replace(/\s/g,"")));if(w.length<=3){w.options[3]=new Option("578-1459","4","",false);w.options[4]=new Option("1460-1857","5","",false)}}if((j=="DPL0950106"||j=="DPL0950107")){if(g.length<2){g.selectedIndex=0;g.options[0]=new Option(H,"01","",false);g.options[1]=new Option(s,"03","",false);g.options[2]=new Option(D,"06","",false);g.options[3]=new Option(G,"12","",false);g.options[4]=new Option(F,"00","",false)}}else{if(j=="DPL0950105"){if(g.length>1){for(var z=1;z<5;z++){g.remove(1)}}g.options[0]=new Option(F,"00","",false);g.selectedIndex=0}else{if(g.length>1){for(var z=1;z<5;z++){g.remove(1)}g.selectedIndex=0}else{g.options[0]=new Option(H,"01","",false);g.selectedIndex=0}}}absa.apps.createAccount.onCapFrequencyChanged(g);absa.apps.createAccount.updateInterestRateDisplay(t,0);var c=phe.select.getValue(w);var a=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(a){phe.hiddenField.setValue(a,0)}var y=bb.selector.query(C,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(y){phe.hiddenField.setValue(y,0)}if(Number(b)>=Number(d)&&Number(b)<Number(h)){bb.html.removeClass(f,"ui-incorrect-value");f.removeAttribute("helpText");phe.helpText.hideHelptext();var e="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveDynamicFixedDepositInterestRateInfo&mode=axisTableDataForDynamicFixedDeposit&code="+v+"&depositAmount="+b+"&prodCode="+v+"&interestRateOption="+j+"&daysRange="+c;var q=bb.selector.query(C,".ap-applySaveInvest-interestRate1");phe.loadingMessage.showLoadingMessage(q);absa.io.makeRequest(e,function(i){phe.loadingMessage.hideLoadingMessage(q);q=bb.selector.query(C,".ap-applySaveInvest-interestRate1");q.innerHTML=i.text})}else{bb.html.addClass(f,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(f,"helpText",absa.locale["Common/General/Validation/Amount"])}};absa.apps.createAccount.validateRenewalAmount=function(a){var e=bb.selector.queryAncestor(a,".ap-applySaveInvest-form1");var c=phe.textBox.getValue(a);var d=phe.textBox.getAttribute(a,"data-min");var b=phe.textBox.getAttribute(a,"data-max");if(isNaN(c)){return false}else{if((Number(c)<Number(d))){return false}}};absa.apps.createAccount.onNoticeDepositRateOptionChange=function(r,u){absa.apps.createAccount.globals.bFromCreditRatePlanSelectEvent=true;var B=bb.selector.queryAncestor(r,".ap-applySaveInvest-form1");var k=phe.radioGroup.getValue(bb.selector.query(B,".ap-applySaveInvest-interestRateOptionRadio"));var s=bb.selector.query(B,".ap-applySaveInvest-axisTableA");var h=bb.selector.query(B,".ap-applySaveInvest-depositAmount");var j=phe.textBox.getAttribute(h,"data-max");var e=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-depositAmount"));var i=bb.selector.query(B,".ap-applySaveInvest-capitalizationFrequency");var l=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitForInvestorPlus"));var m=bb.selector.query(B,".ap-applySaveInvest-minimumDepositAmount");var o=bb.selector.query(B,".ap-applySaveInvest-minimumDepositAmountReadOnly");var t=phe.hiddenField.getValue(m);var v=(phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-minLimitFromProductCat"))).toString().replace(/\s/g,"");var n=phe.inputReadOnlyText.getValue(o);var p=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-hidden-productCode"));var f=0;var d=bb.selector.query(B,".ap-ip-saveInvest");var y=bb.selector.query(B,".ap-ns-saveInvest");if(k=="DPL0930804"){f=l;phe.hiddenField.setValue(m,l);phe.inputReadOnlyText.setValue(o,absa.util.formatCurrency(l));phe.textBox.setValue(h,l);var e=phe.hiddenField.getValue(bb.selector.query(B,".ap-applySaveInvest-depositAmount"));phe.textBox.setAttribute(h,"data-min",l);phe.row.setAttribute(d,"class","ap-ip-saveInvest");phe.row.setAttribute(y,"class","ap-ns-saveInvest ap-common-hide")}else{f=v;phe.hiddenField.setValue(m,v);phe.inputReadOnlyText.setValue(o,absa.util.formatCurrency(v));phe.textBox.setValue(h,v);phe.textBox.setAttribute(h,"data-min",v);phe.row.setAttribute(y,"class","ap-ns-saveInvest");phe.row.setAttribute(d,"class","ap-ip-saveInvest ap-common-hide")}var A=phe.textBox.getValue(h);phe.hiddenField.setValue(bb.selector.query(B,".ap-applySaveInvest-depositAmount"),A);if(i!=null&&i!=""){absa.apps.createAccount.onCapFrequencyChanged(i)}var b=bb.selector.query(B,".ap-applySaveInvest-interestRateGraph-withdrawalPerc");if(b){phe.hiddenField.setValue(b,0)}var x=bb.selector.query(B,".ap-applySaveInvest-interestRateGraph-noticePeriod");if(x){phe.hiddenField.setValue(x,0)}var C=0;var w=0;var D=0;var a=bb.selector.query(s,"th.hlt-head");var c=bb.selector.query(s,"td.hlt-head");if(c){var z=bb.selector.query(c.parentNode,"td.hlt-col");if(a!=null){C=a.getAttribute("value")}if(c!=null){w=c.getAttribute("value")}if(z!=null){D=z.getAttribute("value")}absa.apps.createAccount.updateInterestRateDisplay(s,0)}absa.apps.createAccount.globals.nOldRange=0;if(Number(e)>=Number(f)&&Number(e)<Number(j)){bb.html.removeClass(h,"ui-incorrect-value");h.removeAttribute("helpText");phe.helpText.hideHelptext();var g="proxy?pipe=genericWebservice&ws=CreateAccountWebService&action=retrieveNoticeSelectInterestRateInfo&mode=axisTableData&interestRateOption="+k+"&code="+p+"&amount="+A+"&withdrawalPerc="+w+"&noticeDays="+C;var q=bb.selector.query(B,".ap-applySaveInvest-divAxisTableData");phe.loadingMessage.showLoadingMessage(q);absa.io.makeRequest(g,function(E){phe.loadingMessage.hideLoadingMessage(q);q=bb.selector.query(B,".ap-applySaveInvest-divAxisTableData");q.innerHTML=E.text})}else{bb.html.addClass(h,"ap-applySaveInvest-depositAmount ap-common-alignRight ui-incorrect-value");phe.textBox.setAttribute(h,"helpText",absa.locale["Common/General/Validation/Amount"])}};absa.apps.createAccount.followNormalProccess=function(f,h,k,o,d,j,a,i){var m=false;if(absa.ENABLEDSP=="true"){try{if(absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES.substring(absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES.length,absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES.length+1)!=","){absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES=absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES+","}var t=absa.DIGITALSALESPLATFORMSAVEINVESTPRODUCTCODES;var g=new RegExp(k+"~[a-z+A-Z]{2,10}-[a-zA-Z]{1,3}:[A-Z]{1,11}");var l=g.exec(t);var c=new RegExp("-[a-zA-Z]{1,3}:");var p=c.exec(l[0]);var b=new RegExp(":[a-zA-Z]{1,15}");var n=b.exec(l[0]);var r=new RegExp(absa.CLIENTTYPE);var q=new RegExp(absa.SBU);if(r.test(p)&&q.test(n)){m=true}}catch(s){}}if(m){absa.index.onSwitchToDSP(f,"product="+k+"&productCode="+k+"&categoryCode="+o+"&pricingSchemeCode="+o)}else{absa.apps.createAccount.openAccountNowAfterDecider(f,h,k,o,d,j,a,i)}};absa.apps.deleteSavingGoal=absa.apps.deleteSavingGoal||{};absa.apps.deleteSavingGoal.onClickOfDoneButton=function(d,b){if(b=="SaveAndInvest"){var c=bb.selector.query(document.body,".ap-gadget-lazyContent");absa.lazyLoadNode(c,true)}else{if(b=="Accounts"){var c=bb.selector.queryAll(document.body,".ap-accountDetail-savingGoal");for(var a=0;a<c.length;a++){absa.lazyLoadNode(c[a],true)}}}phe.modal.hideModal()};absa.apps.deleteSavingGoal.onClickOfMCloseButton=function(){var c=arguments[0];var a=bb.selector.query(c,".ap-deleteSavingGoalSavingAccounts-wizard");var b=phe.wizard.getCurrentStepIndex(a);if(b=="1"){var e=bb.selector.queryAll(document.body,".ap-accountDetail-savingGoal");for(var d=0;d<e.length;d++){absa.lazyLoadNode(e[d],true)}}};absa.apps.deleteSavingGoal.onClickOfDoneSaveAndInvestButton=function(c){var a=bb.selector.query(document.body,".ap-viewSavingGoal-tableData");var b="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSavingGoal&mode=table";a.setAttribute("dataFile",b);phe.table.reload(a);phe.modal.hideModal()};absa.apps.deleteSavingGoal.onClickOfMCloseSaveAndIncestmentsButton=function(d){var a=bb.selector.query(d,".ap-deleteSavingGoalSavingAccounts-wizard");var c=phe.wizard.getCurrentStepIndex(a);if(c=="1"){var b=bb.selector.query(document.body,".ap-viewSavingGoal-tableData");var e="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSavingGoal&mode=table";b.setAttribute("dataFile",e);phe.table.reload(b)}};absa.apps.addSavingGoal=absa.apps.addSavingGoal||{};absa.apps.addSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount=function(i,b){var m=bb.selector.queryAncestor(i,".ap-addSavingGoal");var c=bb.selector.query(m,".ap-addSavingGoal-goalStartDate");var e=bb.selector.query(m,".ap-addSavingGoal-goalEndDate");var r=phe.datePicker.getValue(c);var q=phe.datePicker.getValue(e);var g;if(r.substr(5,2)=="08"){g=new Date(r.substr(0,4),7,q.substr(8,2))}else{if(r.substr(5,2)=="09"){g=new Date(r.substr(0,4),8,q.substr(8,2))}else{g=new Date(r.substr(0,4),parseInt(r.substr(5,2)),q.substr(8,2))}}var s=g.getDate();var l=bb.selector.query(m,".ap-addSavingGoal-monthsToSave");var h=parseInt(g.getMonth())+parseInt(phe.slider.getValue(l));var u=g.getFullYear();var t=new Date(u,h,s);if(s!=t.getDate()){var k=t.getMonth()-1;while(t.getMonth()>k){t=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1)}}var q=phe.datePicker.getFormattedValue(t);if(phe.slider.getValue(l)<=120){phe.datePicker.setValue(e,q)}else{phe.datePicker.setValue(e,"")}var d=phe.textBox.getValue(bb.selector.query(m,".ap-addSavingGoal-goalAmount"));var p=0;if(d==""){p=0}else{p=d}var v=phe.slider.getValue(bb.selector.query(m,".ap-addSavingGoal-monthsToSave"));var f=phe.slider.getValue(bb.selector.query(m,".ap-addSavingGoal-monthlyAmount"));var j=bb.selector.query(m,".ap-addSavingGoal-monthlyAmount");if(b==1){phe.slider.setAttribute(j,"max",parseFloat(p))}if(p>=0&&v>0&&(b==1||b==2)){var o=parseFloat(p)/v;var n=absa.apps.addSavingGoal.roundNumber(o);phe.slider.setValue(bb.selector.query(m,".ap-addSavingGoal-monthlyAmount"),n)}else{if(p>=0&&f>0&&b==3){var a=parseFloat(p)/parseFloat(f);phe.slider.setValue(bb.selector.query(m,".ap-addSavingGoal-monthsToSave"),Math.round(a));if(Math.round(a)>120){return false}else{return true}}}};absa.apps.addSavingGoal.onChangeOfGoalStartAndEndDate=function(n){var g=bb.selector.queryAncestor(n,".ap-addSavingGoal");var i=bb.selector.query(g,".ap-addSavingGoal-goalStartDate");var o=bb.selector.query(g,".ap-addSavingGoal-goalEndDate");var d=bb.selector.query(g,".ap-addSavingGoal-monthsToSave");var l=phe.datePicker.getValue(i);phe.datePicker.setAttribute(bb.selector.query(g,".ap-addSavingGoal-goalEndDate"),"fromDate",l);var t=phe.datePicker.getValue(o);if(l!=""&t!=""){var b=parseInt(l.substring(0,4),10);var h=parseInt(l.substring(5,7),10);var q=parseInt(l.substring(8,10),10);var e=parseInt(t.substring(0,4),10);var s=parseInt(t.substring(5,7),10);var f=parseInt(t.substring(8,10),10);var m=new Date(b,h,q);var r=new Date(e,s,f);var p=m.getTime();var a=r.getTime();var k=a-p;var c=parseInt((k)/(1000*60*60));if(m>r){phe.datePicker.setAttribute(bb.selector.query(g,".ap-addSavingGoal-goalStartDate"),"customValidation","return false")}else{phe.datePicker.setAttribute(bb.selector.query(g,".ap-addSavingGoal-goalStartDate"),"customValidation","return true")}var j=parseInt(m.valueOf())-parseInt(r.valueOf());if(j==0||j>0){phe.datePicker.setAttribute(bb.selector.query(g,".ap-addSavingGoal-goalEndDate"),"customValidation","return false")}else{phe.datePicker.setAttribute(bb.selector.query(g,".ap-addSavingGoal-goalEndDate"),"customValidation","return true")}if(parseInt(c/720)>0){phe.slider.setValue(d,parseInt(c/720));absa.apps.addSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount(n,2)}else{if(s>h){phe.slider.setValue(d,1);absa.apps.addSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount(n,2)}else{phe.slider.setValue(d,0)}}d.focus()}};absa.apps.addSavingGoal.roundNumber=function(b){var a=b*1000;a=Math.round(a/10)+"";while(a.length<3){a="0"+a}len=a.length;a=a.substring(0,len-2)+"."+a.substring(len-2,len);return a};absa.apps.addSavingGoal.onClickOfDoneButton=function(f,c){if(c=="SaveAndInvest"){var a=bb.selector.query(document.body,".ap-viewSavingGoal-tableData");var e="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSavingGoal&mode=table";a.setAttribute("dataFile",e);phe.table.reload(a)}else{if(c=="Accounts"){var d=bb.selector.queryAll(document.body,".ap-accountDetail-savingGoal");for(var b=0;b<d.length;b++){absa.lazyLoadNode(d[b],true)}}}phe.modal.hideModal()};absa.apps.addSavingGoal.onModalLoad=function(b){var a=bb.selector.query(b,".ap-addSavingGoal-monthlyAmount");if(a){var c=bb.selector.query(a,".ui-slider--input");c.value=c.getAttribute("value")}};absa.apps.addSavingGoal.onClickOfMCloseButton=function(){var c=arguments[0];var a=bb.selector.query(c,".ap-addSavingGoal-wizard");var b=phe.wizard.getCurrentStepIndex(a);if(b=="1"){var e=bb.selector.queryAll(document.body,".ap-accountDetail-savingGoal");for(var d=0;d<e.length;d++){absa.lazyLoadNode(e[d],true)}}};absa.apps.addSavingGoal.onClickOfMCloseSaveAndIncestmentsButton=function(d){var a=bb.selector.query(d,".ap-addSavingGoal-wizard");var c=phe.wizard.getCurrentStepIndex(a);if(c=="1"){var b=bb.selector.query(document.body,".ap-viewSavingGoal-tableData");var e="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSavingGoal&mode=table";b.setAttribute("dataFile",e);phe.table.reload(b)}};absa.apps.changeSavingGoal=absa.apps.changeSavingGoal||{};absa.apps.changeSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount=function(i,b){var m=bb.selector.queryAncestor(i,".ap-changeSavingGoal");var c=bb.selector.query(m,".ap-changeSavingGoal-goalStartDate");var e=bb.selector.query(m,".ap-changeSavingGoal-goalEndDate");var r=phe.datePicker.getValue(c);var q=phe.datePicker.getValue(e);if(r.substr(5,2)=="08"){var g=new Date(r.substr(0,4),7,q.substr(8,2))}else{if(r.substr(5,2)=="09"){var g=new Date(r.substr(0,4),8,q.substr(8,2))}else{var g=new Date(r.substr(0,4),parseInt(r.substr(5,2))-1,q.substr(8,2))}}var s=g.getDate();var l=bb.selector.query(m,".ap-changeSavingGoal-monthsToSave");var h=parseInt(g.getMonth())+parseInt(phe.slider.getValue(l));var u=g.getFullYear();var t=new Date(u,h,s);if(s!=t.getDate()){var k=t.getMonth()-1;while(t.getMonth()>k){t=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1)}}var q=phe.datePicker.getFormattedValue(t);if(phe.slider.getValue(l)<=120){phe.datePicker.setValue(e,q)}else{phe.datePicker.setValue(e,"")}var d=phe.textBox.getValue(bb.selector.query(m,".ap-changeSavingGoal-goalAmount"));if(d==""){var p=0}else{var p=d}var v=phe.slider.getValue(bb.selector.query(m,".ap-changeSavingGoal-monthsToSave"));var f=phe.slider.getValue(bb.selector.query(m,".ap-changeSavingGoal-monthlyAmount"));var j=bb.selector.query(m,".ap-changeSavingGoal-monthlyAmount");if(b==1){phe.slider.setAttribute(j,"max",parseFloat(p))}if(p>=0&&v>0&&(b==1||b==2)){var o=parseFloat(p)/v;var n=absa.apps.changeSavingGoal.amountFormat(o);phe.slider.setValue(bb.selector.query(m,".ap-changeSavingGoal-monthlyAmount"),n)}else{if(p>=0&&f>0&&b==3){var a=parseFloat(p)/parseFloat(f);phe.slider.setValue(bb.selector.query(m,".ap-changeSavingGoal-monthsToSave"),Math.round(a));if(Math.round(a)>120){return false}else{return true}}}};absa.apps.changeSavingGoal.amountFormat=function(b){var a=b*1000;a=Math.round(a/10)+"";while(a.length<3){a="0"+a}len=a.length;a=a.substring(0,len-2)+"."+a.substring(len-2,len);return a};absa.apps.changeSavingGoal.onChangeOfGoalStartAndEndDate=function(n){var g=bb.selector.queryAncestor(n,".ap-changeSavingGoal");var i=bb.selector.query(g,".ap-changeSavingGoal-goalStartDate");var o=bb.selector.query(g,".ap-changeSavingGoal-goalEndDate");var d=bb.selector.query(g,".ap-changeSavingGoal-monthsToSave");var l=phe.datePicker.getValue(i);phe.datePicker.setAttribute(bb.selector.query(g,".ap-changeSavingGoal-goalEndDate"),"fromDate",l);var t=phe.datePicker.getValue(o);if(l!=""&t!=""){var b=parseInt(l.substring(0,4),10);var h=parseInt(l.substring(5,7),10);var q=parseInt(l.substring(8,10),10);var e=parseInt(t.substring(0,4),10);var s=parseInt(t.substring(5,7),10);var f=parseInt(t.substring(8,10),10);var m=new Date(b,h,q);var r=new Date(e,s,f);var p=m.getTime();var a=r.getTime();var k=a-p;var c=parseInt((k)/(1000*60*60));if(m>r){phe.datePicker.setAttribute(bb.selector.query(g,".ap-changeSavingGoal-goalStartDate"),"customValidation","return false")}else{phe.datePicker.setAttribute(bb.selector.query(g,".ap-changeSavingGoal-goalStartDate"),"customValidation","return true")}var j=parseInt(m.valueOf())-parseInt(r.valueOf());if(j==0||j>0){phe.datePicker.setAttribute(bb.selector.query(g,".ap-changeSavingGoal-goalEndDate"),"customValidation","return false")}else{phe.datePicker.setAttribute(bb.selector.query(g,".ap-changeSavingGoal-goalEndDate"),"customValidation","return true")}if(parseInt(c/720)>0){phe.slider.setValue(d,parseInt(c/720));absa.apps.changeSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount(n,2)}else{if(s>h){phe.slider.setValue(d,1);absa.apps.changeSavingGoal.onChangeOfGoalAmountMonthsToSaveMonthlyAmount(n,2)}else{phe.slider.setValue(d,0)}}d.focus()}};absa.apps.changeSavingGoal.onClickOfMCloseButton=function(){var c=arguments[0];var a=bb.selector.query(c,".ap-changeSavingGoal-wizard");var b=phe.wizard.getCurrentStepIndex(a);if(b=="1"){var e=bb.selector.queryAll(document.body,".ap-accountDetail-savingGoal");for(var d=0;d<e.length;d++){absa.lazyLoadNode(e[d],true)}}};absa.apps.changeSavingGoal.onClickOfMCloseSaveAndIncestmentsButton=function(d){var a=bb.selector.query(d,".ap-changeSavingGoal-wizard");var c=phe.wizard.getCurrentStepIndex(a);if(c=="1"){var b=bb.selector.query(document.body,".ap-viewSavingGoal-tableData");var e="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=viewSavingGoal&mode=table";b.setAttribute("dataFile",e);phe.table.reload(b)}};absa.apps=absa.apps||{};absa.viewUnitTrustEStatement=absa.viewUnitTrustEStatement||{};absa.viewUnitTrustEStatement.onViewEstatementClick=function(c){var b=bb.selector.queryAncestor(c,".ui-tableBodyRow");var a="proxy?pipe=genericWebservice&ws=NotificationWebService&action=viewEStatement&view=addEStatementForAccount";var e=bb.selector.query(b,".ap-viewUnitTrust-accountNameInputContainer");var d=bb.selector.query(b,".ap-viewunittrust-unitTrustAccountNumber");a+="&accountNumber="+phe.hiddenField.getValue(d);if(phe.tableBodyRow.isExpanded(b)&&b._dataFile==a){phe.tableBodyRow.collapseRow(b)}else{phe.tableBodyRow.expandRow(b,a)}b._dataFile=a};absa.apps.onlineShareTrading=absa.apps.onlineShareTrading||{};absa.apps.onlineShareTrading.onRefreshSharesClick=function(c){var b=bb.selector.queryAncestor(c,".ap-onlineShareTrading");var a=bb.selector.query(b,".ap-onlineShareTrading-table");phe.table.reload(a)};var absa=window.absa||{};absa.apps=absa.apps||{};absa.apps.submitClaimsRetrenchment=absa.apps.submitClaimsRetrenchment||{};absa.apps.submitClaimsRetrenchment.setEmplDate=function(d){var g=bb.selector.queryAncestor(d,".ap-submitClaims-Retrenchment-SetUpForm");var h=bb.selector.query(g,".ap-submitClaimRetrenchment-employmentStartDate");var c=bb.selector.query(g,".ap-submitClaimRetrenchment-lastAttendanceDate");var a=bb.selector.query(g,".ap-submitClaimRetrenchment-dateOfOccurance");var b=phe.datePicker2.getValue(h);var e=phe.datePicker2.getValue(c);var f=phe.datePicker2.getValue(a)};absa.apps.submitClaimsRetrenchment.setEmplEndDate=function(d){var g=bb.selector.queryAncestor(d,".ap-submitClaims-Retrenchment-SetUpForm");var c=bb.selector.query(g,".ap-submitClaimRetrenchment-lastAttendanceDate");var a=bb.selector.query(g,".ap-submitClaimRetrenchment-dateOfOccurance");var h=bb.selector.query(g,".ap-submitClaimRetrenchment-employmentStartDate");var b=phe.datePicker2.getValue(h);var f=phe.datePicker2.getValue(a);var e=phe.datePicker2.getValue(c);if(b>e){phe.datePicker2.setAttribute(h,"customValidationText",absa.locale["AFS/Retrenchment/Label/StartDate"]);phe.datePicker2.setAttribute(h,"customValidation","return false");absa.form.validate.checkElement(h)}else{phe.datePicker2.setAttribute(h,"customValidation","return true");absa.form.validate.checkElement(h);phe.datePicker2.setAttribute(c,"customValidation","return true");absa.form.validate.checkElement(c)}};absa.apps.submitClaimsRetrenchment.onChangeLastAttendanceDate=function(d){var g=bb.selector.queryAncestor(d,".ap-submitClaims-Retrenchment-SetUpForm");var h=bb.selector.query(g,".ap-submitClaimRetrenchment-employmentStartDate");var c=bb.selector.query(g,".ap-submitClaimRetrenchment-lastAttendanceDate");var a=bb.selector.query(g,".ap-submitClaimRetrenchment-dateOfOccurance");var b=phe.datePicker2.getValue(h);var e=phe.datePicker2.getValue(c);var f=phe.datePicker2.getValue(a);if(e<b){phe.datePicker2.setAttribute(c,"customValidationText",absa.locale["AFS/Retrenchment/Label/LastAttendanceDate"]);phe.datePicker2.setAttribute(c,"customValidation","return false");absa.form.validate.checkElement(c)}else{phe.datePicker2.setAttribute(c,"customValidation","return true");absa.form.validate.checkElement(c);phe.datePicker2.setAttribute(h,"customValidation","return true");absa.form.validate.checkElement(h)}};absa.apps.submitClaimsRetrenchment.dateAltAddressValidate=function(f){var o=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var q=bb.selector.query(o,".ap-submitClaimRetrenchment-employmentStartDate");var h=bb.selector.query(o,".ap-submitClaimRetrenchment-lastAttendanceDate");var c=bb.selector.query(o,".ap-submitClaimRetrenchment-dateOfOccurance");var i=bb.selector.query(o,".ap-retrenchment-warning");var b=bb.selector.query(o,".ap-workaddressline1-textbox");var a=bb.selector.query(o,".ap-workaddressline2-textbox");var s=bb.selector.query(o,".ap-applyMotorVehicle-workSuburb");var g=bb.selector.query(o,".ap-applyMotorVehicle-workcity");var d=bb.selector.query(o,".ap-workcity-postcode");var p=phe.datePicker2.getValue(q);var n=phe.datePicker2.getValue(h);var m=phe.datePicker2.getValue(c);var k=phe.textBox.getValue(b);var j=phe.textBox.getValue(a);var l=phe.suggestBox.getValue(s);var r=phe.textBox.getValue(g);var e=phe.textBox.getValue(d);if(k!=""||j!=""||l!=""||r!=""||e!=""){phe.textBox.setAttribute(b,"required","true");phe.suggestBox.setAttribute(s,"required","true");phe.textBox.setAttribute(g,"required","true");phe.textBox.setAttribute(d,"required","true")}else{phe.textBox.setAttribute(b,"required","false");phe.suggestBox.setAttribute(s,"required","false");phe.textBox.setAttribute(g,"required","false");phe.textBox.setAttribute(d,"required","false")}if((absa.date.getDaysDiff(p,n)<0)||(absa.date.getDaysDiff(p,m)<0)||(absa.date.getDaysDiff(m,n)<0)){phe.message.setAttribute(i,"class","ap-retrenchment-warning ap-common-show")}else{phe.message.setAttribute(i,"class","ap-retrenchment-warning ap-common-hide");absa.form.validateAndSubmit(o)}};absa.apps.submitClaimsRetrenchment.selectClaimType=function(j,l,f,n,b){if(n=="0"){var k=bb.selector.queryAncestor(j,".ap-lifeRetrenchment");var o=bb.selector.query(k,".ap-submitClaims-Life-SetUpForm-Retrenchment");var i=bb.selector.query(o,".ap-submitClaims-claimCategory");var c=bb.selector.query(o,".ap-submitClaims-descriptionOfLoss");var a=bb.selector.query(o,".ap-retrenchment-callMeBack");var g=bb.selector.query(o,".ap-retrenchment-policyType");var m=bb.selector.query(o,".ap-retrenchment-policyStartDate");var h=bb.selector.query(o,".ap-retrenchment-mode");var p=phe.hiddenField.getValue(a);var e=phe.hiddenField.getValue(g);var r=phe.select.getValue(i);var q=phe.hiddenField.getValue(h);var d=phe.hiddenField.getValue(m);if(q=="CPP"){e="CPP"}if("3"==r||"Retrenchment"==r||"Uitdiensstelling"==r){phe.textBox.setAttribute(c,"required","false");var s="proxy?pipe=genericEmptyResponse&xslFile=Keystone/ManagePolicy/submitClaimsLifeRetrenchment&policyNumber="+l+"&insuranceType="+f+"&mode="+q+"&callMeBack="+p+"&claimType="+r+"&policyType="+e+"&policyStartDate="+d+"&accountHolderName="+b;k.setAttribute("proxyurl",s);absa.lazyLoadNode(k,true)}}};absa.apps.submitClaimsRetrenchment.selectClaimTypeRet=function(e,l,f,i,d,m,k,a){var c=bb.selector.queryAncestor(e,".ap-retrenchment");var g=bb.selector.query(c,".ap-submitClaims-Retrenchment-SetUpForm");var h=bb.selector.query(g,".ap-submitClaims-claimCategory");var b=phe.select.getValue(h);if("3"!=b||"Retrenchment"!=b||"Uitdiensstelling"!=b){var j="proxy?pipe=genericEmptyResponse&xslFile=Keystone/ManagePolicy/submitClaimsBasicFNOLRetr&policyNumber="+l+"&insuranceType="+f+"&mode="+i+"&callMeBack="+d+"&claimType="+b+"&policyType="+m+"&policyStartDate="+k+"&accountHolderName="+a;c.setAttribute("proxyurl",j);absa.lazyLoadNode(c,true)}};absa.apps.submitClaimsRetrenchment.onDisciplinaryActions=function(c){var a=bb.selector.queryAncestor(c,".ap-submitClaims-Retrenchment-SetUpForm");var d=bb.selector.query(a,".ap-submitClaimRetrenchment-disciplinaryActions");var e=phe.radioGroup.getValue(d);var b=bb.selector.query(a,".ap-submitClaimRetrenchment-disciplinaryActionsRow");if(e=="Yes"||e=="Ja"){phe.row.setAttribute(b,"class","ap-submitClaimRetrenchment-disciplinaryActionsRow")}else{phe.row.setAttribute(b,"class","ap-submitClaimRetrenchment-disciplinaryActionsRow ap-common-hide")}};absa.apps.submitClaimsRetrenchment.onUploadRadioClick=function(b){var f=bb.selector.queryAncestor(b,".ap-submitClaims-Retrenchment-uploadPage");var e=bb.selector.query(f,".ap-liferetrenchment-uploaddocument");var d=phe.radioGroup.getValue(e);var c=bb.selector.query(f,".ap-liferetrenchment-email");var a=bb.selector.query(f,".ap-submitClaimRetrenchment-submitButton");if(d=="No"||d=="Nee"){phe.row.setAttribute(c,"class","ap-liferetrenchment-email")}else{phe.row.setAttribute(c,"class","ap-liferetrenchment-email ap-common-hide")}phe.button.setAttribute(a,"disabled","false")};absa.apps.submitClaimsRetrenchment.onSurburbWorkSelect=function(f){var g=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(g,".ap-applyMotorVehicle-workSuburb");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(g,".ap-applyMotorVehicle-workcity");var c=bb.selector.query(g,".ap-workcity-postcode");phe.suggestBox.setValue(d,"");phe.inputReadOnlyText.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=firstCall&language=E&area="+a;absa.io.makeRequest(b,function(i){if(!i.errors.length){var m=bb.html.createElementFromString(i.text);var o=bb.selector.query(m,".ap-postalcodeLookup-TotalCities");var k=bb.selector.query(o,".ap-postalCodeLookUp-totalCities");var p=phe.hiddenField.getValue(k);if(p==1){var h=bb.selector.query(o,".ap-postalCodeLookUp-city");var j=phe.hiddenField.getValue(h);phe.suggestBox.setAttribute(d,"readOnly","true");phe.suggestBox.setAttribute(d,"forceItem","false");phe.suggestBox.setValue(d,j);var n=bb.selector.query(o,".ap-postalCodeLookUp-postalCode");var l=phe.hiddenField.getValue(n);phe.textBox.setAttribute(n,"readOnly","true");phe.textBox.setValue(c,l)}else{phe.suggestBox.setValue(d,"");phe.textBox.focus(d);phe.textBox.setValue(c,"");phe.suggestBox.setAttribute(d,"readOnly","");phe.suggestBox.setAttribute(d,"forceItem","true");phe.suggestBox.setAttribute(d,"multipleRequest","proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=secondCall&language=E&area="+a)}}})};absa.apps.submitClaimsRetrenchment.onSurburbWorkSelect1=function(f){var g=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(g,".ap-applyMotorVehicle-workSuburbTemp");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(g,".ap-applyMotorVehicle-workcityTemp");var c=bb.selector.query(g,".ap-city-postcodeTemp");phe.suggestBox.setValue(d,"");phe.inputReadOnlyText.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=firstCall&language=E&area="+a;absa.io.makeRequest(b,function(i){if(!i.errors.length){var m=bb.html.createElementFromString(i.text);var o=bb.selector.query(m,".ap-postalcodeLookup-TotalCities");var k=bb.selector.query(o,".ap-postalCodeLookUp-totalCities");var p=phe.hiddenField.getValue(k);if(p==1){var h=bb.selector.query(o,".ap-postalCodeLookUp-city");var j=phe.hiddenField.getValue(h);phe.suggestBox.setAttribute(d,"readOnly","true");phe.suggestBox.setAttribute(d,"forceItem","false");phe.suggestBox.setValue(d,j);var n=bb.selector.query(o,".ap-postalCodeLookUp-postalCode");var l=phe.hiddenField.getValue(n);phe.textBox.setAttribute(n,"readOnly","true");phe.textBox.setValue(c,l)}else{phe.suggestBox.setValue(d,"");phe.textBox.focus(d);phe.textBox.setValue(c,"");phe.suggestBox.setAttribute(d,"readOnly","");phe.suggestBox.setAttribute(d,"forceItem","true");phe.suggestBox.setAttribute(d,"multipleRequest","proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=secondCall&language=E&area="+a)}}})};absa.apps.submitClaimsRetrenchment.onSurburbWorkSelect2=function(f){var g=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(g,".ap-applyMotorVehicle-workSuburbTemp1");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(g,".ap-applyMotorVehicle-workcityTemp1");var c=bb.selector.query(g,".ap-city-postcodeTemp1");phe.suggestBox.setValue(d,"");phe.inputReadOnlyText.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=firstCall&language=E&area="+a;absa.io.makeRequest(b,function(i){if(!i.errors.length){var m=bb.html.createElementFromString(i.text);var o=bb.selector.query(m,".ap-postalcodeLookup-TotalCities");var k=bb.selector.query(o,".ap-postalCodeLookUp-totalCities");var p=phe.hiddenField.getValue(k);if(p==1){var h=bb.selector.query(o,".ap-postalCodeLookUp-city");var j=phe.hiddenField.getValue(h);phe.suggestBox.setAttribute(d,"readOnly","true");phe.suggestBox.setAttribute(d,"forceItem","false");phe.suggestBox.setValue(d,j);var n=bb.selector.query(o,".ap-postalCodeLookUp-postalCode");var l=phe.hiddenField.getValue(n);phe.textBox.setAttribute(n,"readOnly","true");phe.textBox.setValue(c,l)}else{phe.suggestBox.setValue(d,"");phe.textBox.focus(d);phe.textBox.setValue(c,"");phe.suggestBox.setAttribute(d,"readOnly","");phe.suggestBox.setAttribute(d,"forceItem","true");phe.suggestBox.setAttribute(d,"multipleRequest","proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=secondCall&language=E&area="+a)}}})};absa.apps.submitClaimsRetrenchment.onCityWorkSelect=function(f){var h=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(h,".ap-applyMotorVehicle-workSuburb");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(h,".ap-applyMotorVehicle-workcity");var g=phe.textBox.getValue(d);var c=bb.selector.query(h,".ap-workcity-postcode");phe.textBox.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=thirdCall&language=E&area="+a+"&city="+g;absa.io.makeRequest(b,function(k){if(!k.errors.length){var m=bb.html.createElementFromString(k.text);var j=bb.selector.query(m,".ap-postalcodeLookup-postalCodeForMultipleCities");var l=bb.selector.query(j,".ap-postalCodeLookUp-postalCodeForMultipleCities");var i=phe.hiddenField.getValue(l);phe.textBox.setValue(c,i)}})};absa.apps.submitClaimsRetrenchment.onCityWorkSelect1=function(f){var h=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(h,".ap-applyMotorVehicle-workSuburbTemp");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(h,".ap-applyMotorVehicle-workcityTemp");var g=phe.textBox.getValue(d);var c=bb.selector.query(h,".ap-city-postcodeTemp");phe.textBox.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=thirdCall&language=E&area="+a+"&city="+g;absa.io.makeRequest(b,function(k){if(!k.errors.length){var m=bb.html.createElementFromString(k.text);var j=bb.selector.query(m,".ap-postalcodeLookup-postalCodeForMultipleCities");var l=bb.selector.query(j,".ap-postalCodeLookUp-postalCodeForMultipleCities");var i=phe.hiddenField.getValue(l);phe.textBox.setValue(c,i)}})};absa.apps.submitClaimsRetrenchment.onCityWorkSelect2=function(f){var h=bb.selector.queryAncestor(f,".ap-submitClaims-Retrenchment-SetUpForm");var e=bb.selector.query(h,".ap-applyMotorVehicle-workSuburbTemp1");var a=phe.inputReadOnlyText.getValue(e);var d=bb.selector.query(h,".ap-applyMotorVehicle-workcityTemp1");var g=phe.textBox.getValue(d);var c=bb.selector.query(h,".ap-city-postcodeTemp1");phe.textBox.setValue(c,"");var b="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=postalCodeLookupAFS&mode=thirdCall&language=E&area="+a+"&city="+g;absa.io.makeRequest(b,function(k){if(!k.errors.length){var m=bb.html.createElementFromString(k.text);var j=bb.selector.query(m,".ap-postalcodeLookup-postalCodeForMultipleCities");var l=bb.selector.query(j,".ap-postalCodeLookUp-postalCodeForMultipleCities");var i=phe.hiddenField.getValue(l);phe.textBox.setValue(c,i)}})};absa.apps.submitClaimsRetrenchment.onEmailRadioButtonClick=function(i){var h=bb.selector.queryAncestor(i,".ap-submitClaims-Retrenchment-uploadPage");var e=bb.selector.query(h,".ap-liferetrenchment-emailrow1");var c=bb.selector.query(h,".ap-liferetrenchment-emailrow2");var b=bb.selector.query(h,".ap-liferetrenchment-emailrow3");phe.row.show(e);phe.row.show(c);phe.row.show(b);var a=bb.selector.query(h,".ap-submitClaimRetrenchment-submitButton");var d=bb.selector.query(h,".ap-retrechment");var g=bb.selector.query(h,".ap-retrechment1");var f=bb.selector.query(h,".ap-retrechment2");phe.common.hide(d);phe.common.show(g);phe.common.hide(f)};absa.apps.submitClaimsRetrenchment.onUploadRadioClick=function(p,l){var n=bb.selector.queryAncestor(p,".ap-submitClaims-Retrenchment-uploadPage");var b=bb.selector.query(n,".ap-submitClaims-caseId");var o=bb.selector.query(n,".ap-submitClaimRetrenchment-submitButtonDoc");var c=bb.selector.query(n,".ap-submitClaimRetrenchment-submitButton");var h=bb.selector.query(n,".ap-liferetrenchment-emailrow1");var g=bb.selector.query(n,".ap-liferetrenchment-emailrow2");var e=bb.selector.query(n,".ap-liferetrenchment-emailrow3");phe.row.hide(h);phe.row.hide(g);phe.row.hide(e);var f=bb.selector.query(n,".ap-retrechment");var k=bb.selector.query(n,".ap-retrechment1");var j=bb.selector.query(n,".ap-retrechment2");phe.common.hide(f);phe.common.hide(k);phe.common.show(j);var m=absa.index.bcmsUploadDocument.isBrowserCompatible();if(m==false){var i=bb.selector.query(window.document,".ap-bcmsUploadIncorrectBrowser");phe.modal.showModal(0.5,i,document.body,true);return}else{var d=bb.selector.query(n,".ap-submitClaims-error");phe.common.hide(d);var a="proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getCaseByRefNumberRetrenchment&claimNumber="+l;absa.io.makeRequest(a,function(s){if(!s.errors.length){var v=bb.html.createElementFromString(s.text);var r=bb.selector.query(v,".ap-claimCase");var q=bb.selector.query(v,".ap-submitClaims-caseId");phe.hiddenField.setValue(b,phe.hiddenField.getValue(q));if(r){var t=r.getAttribute("theData");if(t=="~"){phe.common.show(d)}else{var u="AOL_RETRENCHMENT";absa.openDocHandler(t,null,null,null,u);return}}}else{phe.common.show(d)}})}};absa.apps.submitClaimsRetrenchment.submitRetrenchment=function(u,aF){var C=bb.selector.queryAncestor(u,".ap-submitClaims-Retrenchment-uploadPage");var f=bb.selector.query(C,".ap-submitRetrenchmentClaims-errorContent");var V=bb.selector.query(C,".ap-submitClaims-submitClaimError");phe.common.hide(V);var am=bb.selector.query(C,".ap-submitClaimsRet-policyNumber");var r=bb.selector.query(C,".ap-submitClaimsRet-insuranceType");var aj=bb.selector.query(C,".ap-submitClaimsRet-claimType");var aw=bb.selector.query(C,".ap-submitClaimsRet-lifeAssured");var K=bb.selector.query(C,".ap-submitClaimsRet-dateOfOccurance");var I=bb.selector.query(C,".ap-submitClaims-contactNumber");var z=bb.selector.query(C,".ap-submitClaims-contactNumAlt");var af=bb.selector.query(C,".ap-submitClaimsRet-emailAddress");var h=bb.selector.query(C,".ap-submitClaimsRet-emailAddressAlt");var T=bb.selector.query(C,".ap-submitClaimsRet-address1");var q=bb.selector.query(C,".ap-submitClaimsRet-workaddress1");var S=bb.selector.query(C,".ap-submitClaimsRet-address2");var n=bb.selector.query(C,".ap-submitClaimsRet-workaddress2");var aD=bb.selector.query(C,".ap-submitClaimsRet-suburb");var ac=bb.selector.query(C,".ap-submitClaimsRet-workSuburb");var m=bb.selector.query(C,".ap-submitClaimsRet-workcity");var j=bb.selector.query(C,".ap-submitClaimsRet-workcity1");var O=bb.selector.query(C,".ap-submitClaimsRet-postalAddress");var L=bb.selector.query(C,".ap-submitClaimsRet-postalAddAlt");var ar=bb.selector.query(C,".ap-submitClaimsRet-nameOfEmployer");var N=bb.selector.query(C,".ap-submitClaimsRet-natureOfEmployment");var aE=bb.selector.query(C,".ap-submitClaimsRet-natuerofBusiness");var A=bb.selector.query(C,".ap-submitClaimsRet-employmentStartDate");var az=bb.selector.query(C,".ap-submitClaimsRet-employerTelephoneNumber");var w=bb.selector.query(C,".ap-submitClaimsRet-lastAttendanceDate");var aa=bb.selector.query(C,".ap-submitClaimsRet-reasonForRetrenchment");var ab=bb.selector.query(C,".ap-submitClaimsRet-disciplinaryActions");var p=bb.selector.query(C,".ap-submitClaimsRet-disciplinaryActionsTxt");var M=bb.selector.query(C,".ap-submitClaimsRet-address121");var ai=bb.selector.query(C,".ap-submitClaimsRet-workaddress121");var X=bb.selector.query(C,".ap-submitClaimsRet-address212");var ax=bb.selector.query(C,".ap-submitClaimsRet-workaddress212");var e=bb.selector.query(C,".ap-submitClaimsRet-suburbEph");var i=bb.selector.query(C,".ap-submitClaimsRet-workSuburbEph");var ao=bb.selector.query(C,".ap-submitClaimsRet-workcity212");var Y=bb.selector.query(C,".ap-submitClaimsRet-workcity121");var b=bb.selector.query(C,".ap-submitClaimsRet-postalAddress12");var ae=bb.selector.query(C,".ap-submitClaimsRet-postalAddAlt21");var D=phe.hiddenField.getValue(am);var P=phe.hiddenField.getValue(r);var aq=phe.hiddenField.getValue(aj);var at=phe.hiddenField.getValue(aw);var ap=phe.hiddenField.getValue(K);var ak=phe.hiddenField.getValue(I);var U=phe.hiddenField.getValue(z);var F=phe.hiddenField.getValue(af);var J=phe.hiddenField.getValue(h);var R=phe.hiddenField.getValue(T);var aC=phe.hiddenField.getValue(q);var Q=phe.hiddenField.getValue(S);var aB=phe.hiddenField.getValue(n);var k=phe.hiddenField.getValue(aD);var o=phe.hiddenField.getValue(ac);var a=phe.hiddenField.getValue(m);var B=phe.hiddenField.getValue(j);var av=phe.hiddenField.getValue(O);var d=phe.hiddenField.getValue(L);var au=phe.hiddenField.getValue(ar);var G=phe.hiddenField.getValue(N);var t=phe.hiddenField.getValue(aE);var y=phe.hiddenField.getValue(A);var ad=phe.hiddenField.getValue(az);var x=phe.hiddenField.getValue(w);var g=phe.hiddenField.getValue(aa);var Z=phe.hiddenField.getValue(ab);var aA=phe.hiddenField.getValue(p);var c=phe.hiddenField.getValue(M);var al=phe.hiddenField.getValue(ai);var l=phe.hiddenField.getValue(X);var ay=phe.hiddenField.getValue(ax);var v=phe.hiddenField.getValue(e);var H=phe.hiddenField.getValue(i);var an=phe.hiddenField.getValue(ao);var W=phe.hiddenField.getValue(Y);var E=phe.hiddenField.getValue(b);var ah=phe.hiddenField.getValue(ae);var s="proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=submitClaimsRetrenchment&claimType="+aq+"&lifeAssured="+at+"&dateOfOccurance="+ap+"&contactNumber="+ak+"&contactNumAlt="+U+"&emailAddress="+F+"&emailAddressAlt="+J+"&address1="+R+"&address2="+Q+"&workaddress1="+aC+"&workaddress2="+aB+"&suburb="+k+"&workSuburb="+o+"&workcity="+a+"&workcity1="+B+"&postalAddress="+av+"&postalAddAlt="+d+"&nameOfEmployer="+au+"&natureOfEmployment="+G+"&natuerofBusiness="+t+"&employmentStartDate="+y+"&employerTelephoneNumber="+ad+"&lastAttendanceDate="+x+"&reasonForRetrenchment="+g+"&disciplinaryActions="+Z+"&disciplinaryActionsTxt="+aA+"&address121="+c+"&address212="+l+"&suburbEph="+v+"&workcity212="+an+"&postalAddress12="+E+"&workaddress121="+al+"&workaddress212="+ay+"&workSuburbEph="+H+"&workcity121="+W+"&postalAddAlt21="+ah+"&policyNumber="+D+"&insuranceType="+P+"&flag=true";var ag="";phe.loadingMessage.showLoadingMessage(f);absa.io.makeRequest(s,function(aL){phe.loadingMessage.hideLoadingMessage(f);if(!aL.errors.length){var aN=bb.html.createElementFromString(aL.text);var aG=bb.selector.query(aN,".ap-claimSuccessRet");var aK=bb.selector.query(aG,".ap-submitClaims-result");var aH=phe.hiddenField.getValue(aK);if(aH=="true"){if(aF=="true"){var aI=bb.selector.query(C,".ap-submitClaims-caseId");var aJ=phe.hiddenField.getValue(aI);var aM="proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getDocumentsForCase&caseId="+aJ;absa.io.makeRequest(aM,function(aQ){if(!aQ.errors.length){var aR=bb.html.createElementFromString(aQ.text);var aO=bb.selector.query(aR,".ap-fnolClaimCaseStatus");var aP=aO.getAttribute("theData");ag=aO.getAttribute("docNames");phe.form.setAttribute(C,"action","proxy?pipe=genericEmptyResponse&xslFile=Keystone/ManagePolicy/submitClaimsLifeRetrenchmentResult&docNames="+ag);absa.form.validateAndSubmit(C)}else{phe.common.show(V)}})}phe.form.setAttribute(C,"action","proxy?pipe=genericEmptyResponse&xslFile=Keystone/ManagePolicy/submitClaimsLifeRetrenchmentResult&docNames="+ag);absa.form.validateAndSubmit(C)}else{phe.common.show(V)}}else{phe.common.show(V)}})};absa.apps.submitClaimsRetrenchment.sameEmploymentPostalAddress=function(m){var p=bb.selector.queryAncestor(m,".ap-submitClaims-Retrenchment-SetUpForm");var f=bb.selector.query(p,".ap-retrenchment-addressCheckboxEmployer");var q=bb.selector.query(p,".ap-postaladdressEmp-add1");var o=bb.selector.query(p,".ap-postaladdressEmp-add2");var j=bb.selector.query(p,".ap-applyMotorVehicle-workSuburbTemp");var n=bb.selector.query(p,".ap-applyMotorVehicle-workcityTemp");var l=bb.selector.query(p,".ap-city-postcodeTemp");var g=bb.selector.query(p,".ap-workaddressline1Emp-textbox");var e=bb.selector.query(p,".ap-workaddressline2Emp-textbox");var a=bb.selector.query(p,".ap-applyMotorVehicle-workSuburbTemp1");var c=bb.selector.query(p,".ap-applyMotorVehicle-workcityTemp1");var h=bb.selector.query(p,".ap-city-postcodeTemp1");var d=phe.textBox.getValue(q);var b=phe.textBox.getValue(o);var k=phe.suggestBox.getValue(j);var r=phe.suggestBox.getValue(n);var i=phe.textBox.getValue(l);if(phe.checkBox.isChecked(f)){phe.textBox.setValue(g,d);phe.textBox.setValue(e,b);phe.suggestBox.setValue(a,k);phe.suggestBox.setValue(c,r);phe.textBox.setValue(h,i)}else{phe.textBox.setValue(g,"");phe.textBox.setValue(e,"");phe.suggestBox.setValue(a,"");phe.suggestBox.setValue(c,"");phe.textBox.setValue(h,"")}};absa.apps.submitClaimsRetrenchment.onClickOfReset=function(e){var f=bb.selector.queryAncestor(e,"form");var g=bb.selector.query(f,".ap-submitClaimRetrenchment-employmentStartDate");var b=bb.selector.query(f,".ap-submitClaimRetrenchment-lastAttendanceDate");var a=phe.datePicker2.getValue(g);var d=phe.datePicker2.getValue(b);var c=bb.selector.query(f,".ap-retrenchment-warning");phe.datePicker2.setAttribute(b,"customValidation","return true");phe.datePicker2.setAttribute(g,"customValidation","return true");phe.message.setAttribute(c,"class","ap-retrenchment-warning ap-common-hide");absa.form.validate.checkElement(g);absa.form.validate.checkElement(b);f.reset()};