window.name="AOL";var absa=window.absa||{};absa.index=absa.index||{};absa.index.viewQuote=absa.index.viewQuote||{};absa.index.countFuneralApply=0;absa.index.countFuneralManage=0;absa.index.countUPApply=0;absa.index.countUPManage=0;absa.index.accountsBalances={};absa.index.savingsAccountsBalances={};absa.index.investmentAccountsBalances={};absa.index.insurancePremiumBalances={};absa.index.insuranceBalanceCallsCompleted=0;absa.index.insuranceBalanceCallsRequired=1;absa.index.ficController={};absa.index.ficController.status=0;absa.index.ficController.callback=null;absa.index.clientComplianceController={};absa.index.showHideOffersSpoofContainer=0;absa.index.hideGadgetOnApplyClick=1;absa.index.plInitialised=0;absa.index.odInitialised=0;absa.index.ficController.check=function(f,i){var e='{"fica":{'+absa.FICRULES_WARN+","+absa.FICRULES_LOCK+"}}";var h=JSON.parse(e);var j="BYYY";var g="warn";absa.index.ficController.callback=i;if(absa.index.ficController.status==0){var d=true;var c={};c[gadgets.io.RequestParameters.TIMEOUT]=10000;absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ProfileWebService&action=getFICStatus",function(u){d=false;if(!u.errors.length){var E=bb.html.createElementFromString(u.text);var A=bb.selector.query(E,".ap-fic-errorMessage");if(A){var o=bb.selector.query(window.document,".ap-ficErrorModal");var w=bb.selector.query(o,".ap-fic-errorMessage");w.parentNode.replaceChild(A,w);phe.modal.showModal(0.5,o,document.body,true);i(true)}else{var m=bb.selector.query(window.document,".ap-ficModal-A");var l=bb.selector.query(window.document,".ap-ficModal-B");var n=bb.selector.query(E,".ap-ficStatus-results");if(n!=null){var x=phe.common.getAttribute(n,"data-ficListingCode")||phe.common.getAttribute(n,"data-ficlistingcode");var H=(Number(x)*1);var q=phe.common.getAttribute(n,"data-ficListingSiteCode")||phe.common.getAttribute(n,"data-ficlistingsitecode");var G=phe.common.getAttribute(n,"data-ficListingName")||phe.common.getAttribute(n,"data-ficlistingname");var t=phe.common.getAttribute(n,"data-ficListingReason1")||phe.common.getAttribute(n,"data-ficlistingreason1");var s=phe.common.getAttribute(n,"data-ficListingReason2")||phe.common.getAttribute(n,"data-ficlistingreason2");if(H==0&G!=""){var z=bb.selector.queryAll(l,".ap-ficModal-title-A");var y=bb.selector.queryAll(l,".ap-ficModal-title-B");var B=bb.selector.query(l,".ap-ficModal-msg-locked");if(G.indexOf("RESTRICTIVE CONTROL")==0){for(a in z){phe.common.hide(z[a])}for(a in y){phe.common.show(y[a])}phe.common.show(B);g="lock";absa.FICA="LOCK"}else{for(a in z){phe.common.show(z[a])}for(a in y){phe.common.hide(y[a])}phe.common.hide(B);g="warn";absa.FICA="WARN"}var F=absa.SBU;if(F.length>1){F=F.substring(0,1)}if(h.fica[g][absa.CLIENTTYPE+F]!=null){j=h.fica[g][absa.CLIENTTYPE+F]}else{if(h.fica[g][absa.CLIENTTYPE]!=null){j=h.fica[g][absa.CLIENTTYPE]}}var p=j.substring(0,1);var r=j.substring(1,2);var J=j.substring(2,3);var C=j.substring(3,4);var k=false;var D=l;if(p.toLowerCase()=="a"){D=m}var I=bb.selector.query(D,".ap-fic-reason");if(I!=null){var v=bb.selector.query(I,".ui-message-body");v.innerHTML=G+" <br /> "+t+" : "+s}if(f.toLowerCase()=="payments"){if(r.toLowerCase()=="y"){k=true}}else{if(f.toLowerCase()=="apply"){if(J.toLowerCase()=="y"){k=true}}else{if(f.toLowerCase()=="logoff"){if(C.toLowerCase()=="y"){k=true}}}}if(k){phe.modal.showModal(0.5,D,document.body,true)}else{i(false)}}else{absa.FICA="OK";i(false)}}}}else{setTimeout(i,1)}},c);setTimeout(function(){if(d){setTimeout(i,1)}},10500)}else{setTimeout(i,1)}};absa.index.callbackLoadBalances=function(c){absa.util.observer.publish("load-balances","")};absa.index.applyAccountNow=function(d){var e=document.body.getAttribute("sid");var c="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=hasAllMandatoryCIFDetails";absa.io.makeRequest(c,function(h){if(!h.errors.length){var j=bb.html.createElementFromString(h.text);if(bb.html.hasClass(j,"ap-applyButtonCheck-hasAllMandatoryCIFDetailDiv")){var g=bb.selector.query(j,".ap-applyButtonCheck-hasAllMandatoryCIFDetailId");var f=phe.hiddenField.getValue(g);if(f=="true"){var i=bb.selector.queryAncestor(d,".ap-tranAcc-form");absa.form.validateAndSubmit(i)}else{absa.index.oCIFAlertModal=bb.selector.query(document.body,".modalCIFAlertWarning");phe.modal.showModal(0.5,absa.index.oCIFAlertModal,document.body,true)}}}})};absa.index.hasReadQuote=function(e){var f=bb.selector.queryAncestor(e,".ui-form");if(f!=null){var d=bb.selector.queryAll(f,".ap-acceptRejectButtons");if(d!=null&&d.length>0){for(var c=0;c<d.length;c++){if(phe.checkBox.isChecked(e)){phe.button.enableButton(d[c])}else{phe.button.disableButton(d[c])}}}}};absa.index._executeFunctionByName=function(h,e,j){var c=[].slice.call(j).splice(2);var g=h.split(".");var f=g.pop();f=f.replace("()","");for(var d=0;d<g.length;d++){g[d]=g[d].replace("()","");e=e[g[d]]}return e[f].apply(window,c)};absa.index.viewQuote.retryCount=0;absa.index.viewQuote.receiveMsgFromIFrame=function(f){var d=f.source;var c=bb.selector.query(d.parent.document.body,".ap-hasReadQuote-chkBox");if(c){phe.checkBox.setAttribute(c,"disabled","false")}};absa.index.bcmsUploadDocument={};absa.index.bcmsUploadDocument.isBrowserCompatible=function(){var d=(function(){var h=absa.BROWSERINFO,g,i=h.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1])){g=/\brv[ :]+(\d+)/g.exec(h)||[];return"IE"}if(i[1]==="Chrome"){g=h.match(/\b(OPR|Edge)\/(\d+)/);if(g!=null){return g[1]}}i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return i[0]})();var f=(function(){var h=absa.BROWSERINFO,g,i=h.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1])){g=/\brv[ :]+(\d+)/g.exec(h)||[];return(g[1]||"")}if(i[1]==="Chrome"){g=h.match(/\b(OPR|Edge)\/(\d+)/);if(g!=null){return g[2]}}i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];if((g=h.match(/version\/(\d+)/i))!=null){i.splice(1,1,g[1])}return i[1]})();if(isNaN(f)){f=0}var e=bb.selector.query(window.document,".ap-bcmsUploadIncorrectBrowser-browser");var c=bb.selector.query(window.document,".ap-bcmsUploadIncorrectBrowser-version");e.innerHTML=d;c.innerHTML=f;if((d.indexOf("IE")>-1)|(d.indexOf("MSIE")>-1)){if(Number(f)>=10){return true}else{return false}}else{if(d.indexOf("Firefox")>-1){if(Number(f)>=41){return true}else{return false}}else{if(d.indexOf("Chrome")>-1){if(Number(f)>=39){return true}else{return false}}else{if((d.indexOf("OPR")>-1)|(d.indexOf("Opera")>-1)){if(Number(f)>=29){return true}else{return false}}else{return true}}}}};absa.index.ficController.onModalCloseButtonClick=function(d){var c=bb.selector.queryAncestor(d,".ap-ficModal");absa.index.ficController.updateUserAcceptance(c,"false")};absa.index.ficController.onAccept=function(e){var c=bb.selector.queryAncestor(e,".ap-ficModal");var d=bb.selector.query(c,".ap-fic-checkBox");if(absa.form.validate.checkElement(d)){absa.index.ficController.updateUserAcceptance(c,"true")}};absa.index.ficController.updateUserAcceptance=function(d,c){phe.loadingMessage.showLoadingMessage(d);var e="proxy?pipe=genericWebservice&ws=ProfileWebService&action=userAcceptFICStatusNotification&userVerification="+c;absa.io.makeRequest(e,function(i){var j=bb.html.createElementFromString(i.text);var g=bb.selector.query(j,".ap-fic-errorMessage");phe.loadingMessage.hideLoadingMessage(d);if(g){phe.modal.hideModal();var f=bb.selector.query(window.document,".ap-ficErrorModal");var h=bb.selector.query(f,".ap-fic-errorMessage");h.parentNode.replaceChild(g,h);phe.modal.showModal(0.5,f,document.body,true)}else{absa.index.ficController.status=1;phe.modal.hideModal();absa.index.ficController.callback(false)}})};absa.index.ficController.onErrorClose=function(c){phe.modal.hideModal();absa.index.ficController.callback(false)};absa.index.clientComplianceController.displayOptions=function(h,n){var p=bb.selector.queryAncestor(h,".ui-form");var g=phe.radioGroup.getValue(h);var s=bb.selector.query(p,".clientComplianceStep1-instructions");var r=bb.selector.query(p,".clientComplianceStep1-cellPhone");var j=bb.selector.query(p,".clientComplianceStep1-email");var e=bb.selector.query(p,".clientComplianceModal-next");var i=bb.selector.query(p,".clientComplianceModal-warning");var o=bb.selector.query(p,".clientComplianceModal-close");var m=bb.selector.query(p,".ap-retailCompliance-addressAddressLine1");var l=bb.selector.query(p,".ap-retailCompliance-addressAddressLine2");var k=bb.selector.query(p,".ap-retailCompliance-Suburb");var t=bb.selector.query(p,".ap-retailCompliance-city");var c=bb.selector.query(p,".ap-retailCompliance-country");var d=bb.selector.query(p,".ap-retailCompliance-postalCode");var q=bb.selector.query(p,".ap-retailCompliance-source");var f=n.split(",");if(g=="Y"){phe.common.show(s);phe.common.show(r);phe.common.show(j);phe.common.show(e);phe.common.hide(i);phe.common.hide(o)}else{if(g=="C"){phe.common.show(e);phe.common.hide(i);phe.common.hide(o);phe.hiddenField.setValue(m,f[0]);phe.hiddenField.setValue(l,f[1]);phe.hiddenField.setValue(k,f[2]);phe.hiddenField.setValue(t,f[3]);phe.hiddenField.setValue(c,f[4]);phe.hiddenField.setValue(d,f[5]);phe.hiddenField.setValue(q,f[6])}else{if(g=="G"){phe.common.show(e);phe.common.hide(i);phe.common.hide(o);phe.hiddenField.setValue(m,f[0]);phe.hiddenField.setValue(l,f[1]);phe.hiddenField.setValue(k,f[2]);phe.hiddenField.setValue(t,f[3]);phe.hiddenField.setValue(c,f[4]);phe.hiddenField.setValue(d,f[5]);phe.hiddenField.setValue(q,f[6])}else{phe.common.hide(s);phe.common.hide(r);phe.common.hide(j);phe.common.hide(e);phe.common.show(i);phe.common.show(o)}}}};absa.index.clientComplianceController.finishButton=function(d){var f=bb.selector.queryAncestor(d,"form");if(f){f.reset();if(f._trackUnconfirmedChanges){f._changed=false}}var e=bb.selector.queryAncestor(d,".p-gadget");var c=bb.getControllerFromView(e);if(c){c.minimize();e.focus()}};absa.index.clientComplianceController.onModalCloseButtonClick=function(c){phe.modal.hideModal()};absa.index.clientComplianceController.openRetailComplianceWin=function(i){var f=bb.selector.queryAncestor(i,".ap-ficaDocHandler-reloadContent");var h=f.getAttribute("proxyurl");var g=h.indexOf("&caseId=");h=h.substring(0,g!=-1?g:h.length);var e=absa.index.bcmsUploadDocument.isBrowserCompatible();if(e==false){var c=bb.selector.query(window.document,".ap-bcmsUploadIncorrectBrowser");phe.modal.showModal(0.5,c,document.body,true);return}else{var d=bb.selector.queryAncestor(i,".ap-ficaDocHandler");var j=bb.selector.query(d,".ap-ficaDocHandler-error");phe.common.hide(j);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BCMSWebService&action=createRetailRefreshCase",function(k){if(!k.errors.length){var n=bb.html.createElementFromString(k.text);var m=bb.selector.query(n,".ap-ficaCase");if(m){var l=m.getAttribute("theData");f.setAttribute("proxyurl",h+"&caseId="+l);if(l=="~"){phe.common.show(j)}else{absa.openDocHandler(l);return}}}else{phe.common.show(j)}})}};absa.index.clientComplianceController.reloadContent=function(c){var d=bb.selector.query(c,".ap-ficaDocHandler-reloadContent");if(d){absa.lazyLoadNode(d,true)}};absa.index.init=function(){absa.index.initCrossContainerNavigation();absa.index.initNetworthUpdateListeners();if((absa.VCLBIS.indexOf(absa.CLIENTTYPE)>-1)&(absa.VCLSBU.indexOf(absa.SBU)>-1)){absa.index.getVCLGadgetsToShow()}var k=navigator.userAgent.toLowerCase(),i=k.indexOf("ipad")>-1,e=k.indexOf("android")>-1;if(e||i){if(e){bb.html.addClass(document.documentElement,"android");absa.touch.android=true}if(i){bb.html.addClass(document.documentElement,"ipad");absa.touch.iPad=true}bb.html.addClass(document.documentElement,"touch");absa.touch.enabled=true}portal._getGadgetWidth=function c(l,m){return m.colSpan?portal._calculateColSpanWidth(l,m):l.pixWidth};portal._getNodeWidth=function g(l){return l.offsetWidth};absa.intercept.init();setTimeout(function(){absa.n2fa.init()},1000);absa.simSwopHold.initSimSwopHold();gadgets.pubsub.subscribe("showHide:offersSpoofContainer",function(r){if((bb.string.trim(r.toUpperCase())=="SHOW")||(bb.string.trim(r.toUpperCase())=="ADD")||(bb.string.trim(r.toUpperCase())=="TRUE")||(bb.string.trim(r.toUpperCase())=="1")){absa.index.showHideOffersSpoofContainer=absa.index.showHideOffersSpoofContainer+1}else{if((absa.index.hideGadgetOnApplyClick==0)&&(absa.index.plInitialised==1)&&(absa.index.odInitialised==1)&&(bb.string.trim(r.toUpperCase())=="HIDE")){absa.index.showHideOffersSpoofContainer=absa.index.showHideOffersSpoofContainer-2}else{absa.index.showHideOffersSpoofContainer=absa.index.showHideOffersSpoofContainer-1}}if(bb.string.trim(absa.ENABLESPOOFCONTAINER)=="false"){phe.common.hide(document.getElementById("ap-container-footer-l2-spoof1"));phe.common.hide(document.getElementById("ap-container-footer-l5-spoof1"))}else{if(absa.index.showHideOffersSpoofContainer>0){var p=document.getElementById("ap-container-footer-l2-spoof1");var o=document.getElementById("ap-container-footer-l5-spoof1");var n=bb.selector.queryAll(p,".gadget-placeholders");for(var l=0;l<n.length;l++){var q=n[l].getAttribute("id");if(q!=null){if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(q)>-1){bb.html.setStyle(n[l],"display","none !important")}}}var m=bb.selector.queryAll(o,".gadget-placeholders");for(var l=0;l<m.length;l++){var q=m[l].getAttribute("id");if(q!=null){if(absa.SPOOFCONTAINERGADGETSTOHIDE.indexOf(q)>-1){bb.html.setStyle(m[l],"display","none !important")}}}phe.common.show(p);phe.common.show(o)}else{phe.common.hide(document.getElementById("ap-container-footer-l2-spoof1"));phe.common.hide(document.getElementById("ap-container-footer-l5-spoof1"))}}});if(absa.GOTO!=""){if((absa.GOTO.length>1)&(absa.GOTO.indexOf("dsp-")<0)){setTimeout(function(){gadgets.pubsub.publish("goTo:"+absa.GOTO,{});setTimeout(function(){absa.GOTO=""},3000)},2000)}else{if((absa.GOTO.length>1)&(absa.GOTO.indexOf("dsp-")>-1)){var j=absa.GOTO.substring(4,absa.GOTO.length);var h="";if(j!=null&&j.indexOf(":")>-1){h=j.substring((j.indexOf(":")+1));j=j.substring(0,j.indexOf(":"))}var f=false;var d="";if(j=="03041"){d="Bonus Deposit"}else{if(j=="09205"){d="Future Plan"}else{if(j=="09203"){d="Target Save"}else{if(j=="09308"){d="Notice Select"}else{if(j=="09005"){d="Depositor Plus"}else{if(j=="09060"){d="TruSave"}else{if(j=="09062"){d="Tax Free Savings"}else{if(j=="09501"){d="Dynamic Fixed Deposit"}else{if(j=="03040"){d="Fixed Deposit"}else{if(j=="03043"){d="Islamic Term Deposit"}else{if(j=="09207"){d="Islamic Target Save"}else{if(j=="cheqflexi"|(j=="11048"&h.toUpperCase()=="CQT01S11")){d="cheqflexi";f=true}else{if(j=="cheqgold"|(j=="11032"&h.toUpperCase()=="CQT01S03")){d="cheqgold";f=true}else{if(j=="cheqplatinum"|(j=="11032"&h.toUpperCase()=="CQT01S04")){d="cheqplatinum";f=true}else{if(j=="cheqgoldgraduate"){d="cheqgoldgraduate";f=true}else{if(j=="cheqstudentsilver"|j=="11017"){d="cheqstudentsilver";f=true}else{if(j=="cheqislamicflexi"|(j=="11029"&h.toUpperCase()=="CQT01S11")){d="cheqislamicflexi";f=true}else{if(j=="cheqislamicgold"|(j=="11029"&h.toUpperCase()=="CQT01S03")){d="cheqislamicgold";f=true}else{if(j=="cheqislamicplatinum"|(j=="11029"&h.toUpperCase()=="CQT01S04")){d="cheqislamicplatinum";f=true}else{if(j=="private banking account"|j=="exceller"|j=="11003"){d="exceller";f=true}else{if(j=="islamic private banking account"|j=="marhaba"|j=="11047"){d="marhaba";f=true}}}}}}}}}}}}}}}}}}}}}if(f==true){absa.index.dspChecks(d)}else{sData={};sData.productCode=j;sData.fundName=d;absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:createAccount/createAccount",sData)})}}}}};absa.index.getVCLGadgetsToShow=function(){var c="proxy?pipe=genericWebservice&ws=OffersWebService&action=displayInsuranceGadgets";absa.io.makeRequest(c,function(d){if(!d.errors.length){var e=bb.html.createElementFromString(d.text);if(e){absa.VCL_LIFEPRODUCTS=phe.hiddenField.getValue(bb.selector.query(e,".ap-myAbsaOffers-lifeProductValue"));absa.VCL_SHORTTERMPRODUCTS=phe.hiddenField.getValue(bb.selector.query(e,".ap-myAbsaOffers-shortTermProductValue"));gadgets.pubsub.publish("showInsuranceProduct:offersInsuranceGadget","")}}})};absa.index.initCrossContainerNavigation=function(){gadgets.pubsub.subscribe("goTo:profile/ficDocHandler",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:ficDocHandler",c)})});gadgets.pubsub.subscribe("goTo:profile/linkUnlinkAccounts/linkUnlinkRetail",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:linkUnlinkAccounts/linkUnlinkRetail",c)})});gadgets.pubsub.subscribe("goTo:profile/linkUnlinkAccounts/linkUnlinkOST",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:linkUnlinkAccounts/linkUnlinkOST",c)})});gadgets.pubsub.subscribe("goTo:profile/linkUnlinkAccounts/linkUnlinkAims",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:linkUnlinkAccounts/linkUnlinkAims",c)})});gadgets.pubsub.subscribe("goTo:profile/linkUnlinkAccounts/linkUnlinkPolicies",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:linkUnlinkAccounts/linkUnlinkPolicies",c)})});gadgets.pubsub.subscribe("goTo:profile/notifyMe/addNotifyMeRecipient",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:notifyMe/addNotifyMeRecipient")})});gadgets.pubsub.subscribe("goTo:profile/notifyMe/viewNotifyMeRecipients",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:notifyMe/viewNotifyMeRecipients")})});gadgets.pubsub.subscribe("goTo:profile/notifyMe/notifyMeHistory",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:notifyMe/notifyMeHistory")})});gadgets.pubsub.subscribe("goTo:profile/manageServices/manageServices",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageServices/manageServices")})});gadgets.pubsub.subscribe("goTo:profile/manageServices/changeBillingAccount",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageServices/changeBillingAccount",c)})});gadgets.pubsub.subscribe("goTo:profile/manageServices/viewCostSummary",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageServices/viewCostSummary",c)})});gadgets.pubsub.subscribe("goTo:profile/managePersonalDetails/managePersonalDetails",function(c){var d=false;absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:managePersonalDetails/managePersonalDetails",c);d=true});if(!d){gadgets.pubsub.publish("goTo:managePersonalDetails/managePersonalDetails",c)}});gadgets.pubsub.subscribe("goTo:profile/manageUsers/mainUsers",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageUsers/mainUsers")})});gadgets.pubsub.subscribe("goTo:profile/manageUsers/operators",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageUsers/operators")})});gadgets.pubsub.subscribe("goTo:profile/manageUsers/addOperator",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageUsers/addOperator")})});gadgets.pubsub.subscribe("goTo:profile/manageEstatements/manageEstatements",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:manageEstatements/manageEstatements")})});gadgets.pubsub.subscribe("goTo:profile/onlineBankingAlert/onlineBankingAlertManage",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:onlineBankingAlert/onlineBankingAlertManage")})});gadgets.pubsub.subscribe("goTo:profile/onlineBankingAlert/onlineBankingAlertHistory",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:onlineBankingAlert/onlineBankingAlertHistory")})});gadgets.pubsub.subscribe("goTo:profile/additionalServices/viewTaxCertificate",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:additionalServices/viewTaxCertificate")})});gadgets.pubsub.subscribe("goTo:profile/devices/linkDelinkDevices",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:devices/linkDelinkDevices")})});gadgets.pubsub.subscribe("goTo:apply/applyForUnitTrust/applyForUnitTrust",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:applyForUnitTrust/applyForUnitTrust")})});gadgets.pubsub.subscribe("goTo:apply/iPayroll/iPayroll",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:iPayroll/iPayroll")})});gadgets.pubsub.subscribe("goTo:apply/createAccount/createAccount",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:createAccount/createAccount",c)})});gadgets.pubsub.subscribe("goTo:apply/exchangeTradedProducts/discretionaryIvestments",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:exchangeTradedProducts/discretionaryIvestments",c)})});gadgets.pubsub.subscribe("goTo:apply/exchangeTradedProducts/retirementAnnuity",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:exchangeTradedProducts/retirementAnnuity",c)})});gadgets.pubsub.subscribe("goTo:apply/taxFreeInvestmentAccount/aimsRR",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:taxFreeInvestmentAccount/aimsRR",c)})});gadgets.pubsub.subscribe("goTo:apply/loanAndAssetFinance/loanAndAssetFinance",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:loanAndAssetFinance/loanAndAssetFinance")})});gadgets.pubsub.subscribe("goTo:apply/loanAndAssetFinance/loanAndAssetFinance/personalLoan",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:loanAndAssetFinance/loanAndAssetFinance/personalLoan",c)})});gadgets.pubsub.subscribe("goTo:apply/otherProducts/otherProducts",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:otherProducts/otherProducts")})});gadgets.pubsub.subscribe("goTo:apply/applyForRewards/applyForRewards",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:applyForRewards/applyForRewards")})});gadgets.pubsub.subscribe("goTo:apply/insurance/applyInsurance",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:insurance/applyInsurance",c)})});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqflexi",function(c){absa.index.dspChecks("cheqflexi")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqgold",function(c){absa.index.dspChecks("cheqgold")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqplatinum",function(c){absa.index.dspChecks("cheqplatinum")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqgoldgraduate",function(c){absa.index.dspChecks("cheqgoldgraduate")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqstudentsilver",function(c){absa.index.dspChecks("cheqstudentsilver")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqislamicflexi",function(c){absa.index.dspChecks("cheqislamicflexi")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqislamicgold",function(c){absa.index.dspChecks("cheqislamicgold")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/cheqislamicplatinum",function(c){absa.index.dspChecks("cheqislamicplatinum")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/exceller",function(c){absa.index.dspChecks("exceller")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/marhaba",function(c){absa.index.dspChecks("marhaba")});gadgets.pubsub.subscribe("goTo:apply/transactionalSolutions/overdraftOffers",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:transactionalSolutions/overdraftOffers",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/overdraftOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/overdraftOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/avafOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/avafOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/creditLimitsOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:creditLimits/viewCreditLimits",c)})});gadgets.pubsub.subscribe("goTo:apply/applyForCreditCard/applyForCreditCard",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:applyForCreditCard/applyForCreditCard",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/creditCardOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/creditCardOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/homeLoanOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/homeLoanOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/homeLoanFurtherAdvanceOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/homeLoanFurtherAdvanceOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/homeLoanSwitchOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/homeLoanSwitchOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/offers/savingsAndInvestmentsOffer",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:offers/savingsAndInvestmentsOffer",c)})});gadgets.pubsub.subscribe("goTo:apply/internationalProducts/internationalProducts",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:internationalProducts/internationalProducts",c)})});gadgets.pubsub.subscribe("goTo:payments/mainBeneficiaries/paySingleBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:mainBeneficiaries/paySingleBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/mainBeneficiaries/payBeneficiaryGroup",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:mainBeneficiaries/payBeneficiaryGroup",c)})});gadgets.pubsub.subscribe("goTo:payments/mainBeneficiaries/viewOrManageBeneficiariesOrGroups",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:mainBeneficiaries/viewOrManageBeneficiariesOrGroups",c)})});gadgets.pubsub.subscribe("goTo:payments/mainBeneficiaries/addBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:mainBeneficiaries/addBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/payIFTBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/payIFTBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/onceOffIFTPayment",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/onceOffIFTPayment",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/addIFTWUBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/addIFTWUBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/manageIFTBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/manageIFTBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/receiptsIFT",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/receiptsIFT",c)})});gadgets.pubsub.subscribe("goTo:payments/internationalFundsTransfer/receiptsHistory",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:internationalFundsTransfer/receiptsHistory",c)})});gadgets.pubsub.subscribe("goTo:payments/bankOnMe/addBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:bankOnMe/addBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/mainBeneficiaries/payMultipleBeneficiaries",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:mainBeneficiaries/payMultipleBeneficiaries",c)})});gadgets.pubsub.subscribe("goTo:payments/payOnceOff/payOnceOffBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:payOnceOff/payOnceOffBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/payOnceOff/payOnceOffHistory",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:payOnceOff/payOnceOffHistory",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/sendSingleCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/sendSingleCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/addCashSendBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/addCashSendBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/sendMultipleCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/sendMultipleCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/sendOnceOffCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/sendOnceOffCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/viewUnredeemedTransactions",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/viewUnredeemedTransactions",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSend/viewAndManageCashSendBeneficiaries",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSend/viewAndManageCashSendBeneficiaries",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/registerCashSendPlusUser",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/registerCashSendPlusUser",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/sendSingleCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/sendSingleCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/addCashSendBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/addCashSendBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/sendMultipleCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/sendMultipleCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/sendOnceOffCashSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/sendOnceOffCashSend",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/viewUnredeemedTransactions",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/viewUnredeemedTransactions",c)})});gadgets.pubsub.subscribe("goTo:payments/cashSendPlus/viewAndManageCashSendBeneficiaries",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:cashSendPlus/viewAndManageCashSendBeneficiaries",c)})});gadgets.pubsub.subscribe("goTo:payments/interAccountTransfer/performInterAccountTransfer",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:interAccountTransfer/performInterAccountTransfer",c)})});gadgets.pubsub.subscribe("goTo:payments/interAccountTransfer/interAccountTransferHistory",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:interAccountTransfer/interAccountTransferHistory",c)})});gadgets.pubsub.subscribe("goTo:payments/prepaidBeneficiaries/paySinglePrepaidBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:prepaidBeneficiaries/paySinglePrepaidBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/prepaidBeneficiaries/payMultiplePrepaidBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:prepaidBeneficiaries/payMultiplePrepaidBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/prepaidBeneficiaries/addPrepaidBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:prepaidBeneficiaries/addPrepaidBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/prepaidBeneficiaries/payOnceOffPrepaidBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:prepaidBeneficiaries/payOnceOffPrepaidBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/prepaidBeneficiaries/viewPrepaidBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:prepaidBeneficiaries/viewPrepaidBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/payTrafficFine/payTrafficFine",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:payTrafficFine/payTrafficFine",c)})});gadgets.pubsub.subscribe("goTo:payments/recurringPayments/addRecurringPayment",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:recurringPayments/addRecurringPayment",c)})});gadgets.pubsub.subscribe("goTo:payments/recurringPayments/viewRecurringPayments",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:recurringPayments/viewRecurringPayments",c)})});gadgets.pubsub.subscribe("goTo:payments/westernUnion/westernUnionSend",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionSend",c)})});gadgets.pubsub.subscribe("goTo:payments/westernUnion/westernUnionAddBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionAddBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/westernUnion/westernUnionRecieve",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionRecieve",c)})});gadgets.pubsub.subscribe("goTo:payments/westernUnion/westernUnionRecieptHistory",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionRecieptHistory",c)})});gadgets.pubsub.subscribe("goTo:payments/westernUnion/westernUnionViewBeneficiaries",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionViewBeneficiaries",c)})});gadgets.pubsub.subscribe("goTo:payments/futureDatedTransactions/futureDatedTransactionBeneficiary",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:futureDatedTransactions/futureDatedTransactionBeneficiary",c)})});gadgets.pubsub.subscribe("goTo:payments/futureDatedTransactions/futureDatedTransactionOnceOff",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:futureDatedTransactions/futureDatedTransactionOnceOff",c)})});gadgets.pubsub.subscribe("goTo:payments/futureDatedTransactions/futureDatedTransactionInterAccount",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:futureDatedTransactions/futureDatedTransactionInterAccount",c)})});gadgets.pubsub.subscribe("goTo:payments/creditCardBudgets/payOrSettleCreditCardBudget",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:creditCardBudgets/payOrSettleCreditCardBudget",c)})});gadgets.pubsub.subscribe("goTo:payments/creditCardBudgets/CreateCreditCardBudget",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:creditCardBudgets/CreateCreditCardBudget",c)})});gadgets.pubsub.subscribe("goTo:payments/stopPayments/addStopPayment",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:stopPayments/addStopPayment",c)})});gadgets.pubsub.subscribe("goTo:payments/stopPayments/viewStopPayments",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:stopPayments/viewStopPayments",c)})});gadgets.pubsub.subscribe("goTo:payments/authorisations/authorisationspayments",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:authorisations/authorisationspayments",c)})});gadgets.pubsub.subscribe("goTo:payments/authorisations/authorisationsaccounts",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:authorisations/authorisationsaccounts",c)})});gadgets.pubsub.subscribe("goTo:payments/authorisations/authorisationsprofile",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:authorisations/authorisationsprofile",c)})});gadgets.pubsub.subscribe("goTo:payments/authorisations/authorisationstax_uif",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:authorisations/authorisationstax_uif",c)})});gadgets.pubsub.subscribe("goTo:payments/authorisations/authorisationsiPayRoll",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:authorisations/authorisationsiPayRoll",c)})});gadgets.pubsub.subscribe("goTo:saveinvest/dashboard/pricewatch",function(c){absa.index.goTo("saveinvest",function(){gadgets.pubsub.publish("goTo:dashboard/pricewatch",c)})});gadgets.pubsub.subscribe("goTo:saveinvest/dashboard/educationCentre",function(c){absa.index.goTo("saveinvest",function(){gadgets.pubsub.publish("goTo:dashboard/educationCentre",c)})});gadgets.pubsub.subscribe("goTo:accounts/offers/overdraftOffer",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:offers/overdraftOffer",c)})});gadgets.pubsub.subscribe("goTo:accounts/offers/avafOffer",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:offers/avafOffer",c)})});gadgets.pubsub.subscribe("goTo:accounts/offers/creditLimitsOffer",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:creditLimits/viewCreditLimits",c)})});gadgets.pubsub.subscribe("goTo:accounts/offers/creditCardOffer",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:offers/creditCardOffer",c)})});gadgets.pubsub.subscribe("goTo:accounts/unitTrust",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:unitTrust",c)})});gadgets.pubsub.subscribe("goTo:accounts",function(c){absa.index.goTo("accounts",function(){gadgets.pubsub.publish("goTo:accounts",c)})});gadgets.pubsub.subscribe("goTo:payments",function(c){absa.index.goTo("payments",function(){gadgets.pubsub.publish("goTo:payments",c)})});gadgets.pubsub.subscribe("goTo:saveinvest",function(c){absa.index.goTo("saveinvest",function(){gadgets.pubsub.publish("goTo:saveinvest",c)})});gadgets.pubsub.subscribe("goTo:apply",function(c){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:apply",c)})});gadgets.pubsub.subscribe("goTo:insurance",function(c){absa.index.goTo("insurance",function(){gadgets.pubsub.publish("goTo:insurance",c)})});gadgets.pubsub.subscribe("goTo:insurance/insurancelandingpage",function(c){absa.index.goTo("insurance",function(){gadgets.pubsub.publish("goTo:insurancelandingpage/"+c.policyNumber,c)})});gadgets.pubsub.subscribe("goTo:profile",function(c){absa.index.goTo("profile",function(){gadgets.pubsub.publish("goTo:profile",c)})})};absa.index.dspChecks=function(d){if(absa.TRANSACTIONALUSER=="false"|absa.CLIENTTYPE=="B"){var c=bb.selector.query(window.document,".ap-dspCannotApplyModal");phe.modal.showModal(0.5,c,document.body,true)}else{absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:transactionalSolutions/dsp",d)})}};absa.index.transactionalSolutionsUpgrade=function(h,e,f){var g="";var d="";if(f=="upgradeConfirm"){d=f}if(h=="cheqplatinum"){g="11032"}else{g="11029"}var c='{"productName":"'+h+'", "qualifyForUpgrade":"'+e+'", "productCode":"'+g+'", "upgradeAction":"'+d+'"}';var i=JSON.parse(c);if(h=="cheqplatinum"&e=="Y"){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:transactionalSolutions/dsp",i)})}else{if(h=="cheqislamicplatinum"&e=="Y"){absa.index.goTo("apply",function(){gadgets.pubsub.publish("goTo:transactionalSolutions/dsp",i)})}}};absa.index.initNetworthUpdateListeners=function(){absa.util.observer.subscribe("load-balances",function(){var c=document.getElementById("index-netWorth");if(c!=null){c.innerHTML="<img class='loading' src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />";setTimeout(function(){if(bb.selector.query(c,".loading")){c.innerHTML=absa.locale["Portfolio/ViewAccountBalance/Label/BalanceUnavailable"]}},absa.TIMEOUT_BALANCE)}});absa.util.observer.subscribe("absasavings-balances",function(g){for(var d=0;d<g.length;d++){var j=g[d];if(j.accountType=="termDeposit"||j.accountType=="noticeDeposit"){absa.index.savingsAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="savingsAccount"&&j.ProductType.toUpperCase()!="MM"){absa.index.savingsAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="unitTrustAccount"||j.accountType=="onlineShareTrading"||j.accountType=="onlineShareTradingPrivate"||j.accountType=="aims"){absa.index.investmentAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="savingsAccount"&&j.ProductType.toUpperCase()=="MM"){absa.index.investmentAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="passiveInvest"&&j.ProductType.toUpperCase()=="IN"){absa.index.investmentAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="wim"&&j.ProductType.toUpperCase()=="WM"){absa.index.investmentAccountsBalances[j.accountNo]=j.balance}if(j.accountType=="cia"){absa.index.investmentAccountsBalances[j.accountNo]=j.balance}}var f=0,h;for(h in absa.index.savingsAccountsBalances){f+=parseFloat(absa.index.savingsAccountsBalances[h])}var c=document.getElementById("absaSavings-Networth");try{c.innerHTML=absa.util.formatCurrency(f);c._balanceSet=true}catch(e){c.innerHTML=""}f=0;for(h in absa.index.investmentAccountsBalances){f+=parseFloat(absa.index.investmentAccountsBalances[h])}c=document.getElementById("absaInvestment-Networth");if(g[0].userType=="O"){c.innerHTML=""}else{c.innerHTML=absa.util.formatCurrency(f)}c._balanceSet=true});absa.util.observer.subscribe("balances",function(f){for(var d=0;d<f.length;d++){var h=f[d];absa.index.accountsBalances[h.accountNo]=h.balance}var e=0,g;for(g in absa.index.accountsBalances){e+=parseFloat(absa.index.accountsBalances[g])}var c=document.getElementById("index-netWorth");if(absa.index.balanceCallsCompleted==absa.index.balanceCallsRequired){c.innerHTML=absa.util.formatCurrency(e)}});absa.util.observer.subscribe("insurancebalances",function(f){var g="false";for(var e=0;e<f.length;e++){var d=f[e];absa.index.insurancePremiumBalances[d.policyNumber]=d.premiumAmount;if(typeof absa.index.insurancePremiumBalances[d.policyNumber]=="undefined"){g="true"}}var c=0,j;if(g=="false"){for(j in absa.index.insurancePremiumBalances){c+=parseFloat(absa.index.insurancePremiumBalances[j])}}var h=document.getElementById("index-insurance");h.innerHTML=absa.util.formatCurrency(c)})};absa.index.loadedContainers=[];absa.index.containerTemplateNamesMapping={profile:"l7",apply:"l5",saveinvest:"l4",payments:"l3",accounts:"l2",insurance:"l3010079"};absa.index.goTo=function(c,e){var d=function(){var g=bb.document.getElementById("portal"),k=absa.index.containerTemplateNamesMapping[c];oContainer=g.getContainersByTemplateId(k)[0];if(g.getProperty("activeContainer")!=oContainer){var i=false;var h=g.getProperty("containers");for(var f=0,j=h.length;(f<j)&&!i;f++){if(h[f]._._templateId==k&&h[f]._._gLoadedEventFired!=null){i=true;break}}if(i){e()}else{g.addEventListener("gadgetsLoaded",function(l){g.removeEventListener("gadgetsLoaded",arguments.callee,false);absa.index.loadedContainers.push(k);e()},false)}document.location.hash=c;g.activateContainer(oContainer)}else{e()}};absa.unconfirmedChanges.cancelNavigation(document.body,d)};absa.index.onNavigationTabClick=function(d,c){var e=function(){location.hash=c;if(absa.ENABLETAGGING=="true"){if(c=="apply"){absa.analytics.tracktabs("ISF | Top Navigation | Apply")}}};absa.unconfirmedChanges.cancelNavigation(document.body,e)};absa.index.doLogout=function(f){if(f==null){f=2}var d=function(){window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);absa.NONCE=null;try{document.domain="absa.co.za"}catch(g){}window.location.href=absa.CONTEXT+"/j_spring_security_logout?uniq="+new Date().getTime()};if(f==2){d()}else{var e=document.body.getAttribute("sid");var c="proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=hasAllMandatoryCIFDetails";absa.io.makeRequest(c,function(i){if(!i.errors.length){var j=bb.html.createElementFromString(i.text);if(bb.html.hasClass(j,"ap-applyButtonCheck-hasAllMandatoryCIFDetailDiv")){var h=bb.selector.query(j,".ap-applyButtonCheck-hasAllMandatoryCIFDetailId");var g=phe.hiddenField.getValue(h);if(g=="true"||g==""){absa.index.ficController.status=0;absa.index.ficController.check("Logoff",function(k){d()})}else{absa.index.oCIFAlertModal=bb.selector.query(document.body,".modalLogOutCIFAlert");phe.modal.showModal(0.5,absa.index.oCIFAlertModal,document.body,true)}}}})}};absa.index.doLogoutIE=function(){if(bb.browser.ie){window.location.href=absa.CONTEXT+"/j_spring_security_logout?uniq="+new Date().getTime()}};absa.index.checkCount=function(){if(absa.NONCE=="777"){absa.index.doLogout()}};absa.index.onLogonAIMSButtonClick=function(c){var d="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getAIMSLogons";absa.io.makeRequest(d,function(f){var g=bb.html.createElementFromString(f.text);var e=bb.selector.query(window.document,".ap-AIMSLogonModal");oContentContainer=bb.selector.query(e,".ap-AIMS-accountsContent");oContentContainer.parentNode.replaceChild(g,oContentContainer);phe.modal.showModal(0.5,e,document.body,true)})};absa.index.onLogonOSTButtonClick=function(c){var d="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getOSTLogons";absa.io.makeRequest(d,function(f){var g=bb.html.createElementFromString(f.text);var e=bb.selector.query(window.document,".ap-OSTLogonModal");phe.modal.showModal(0.5,e,document.body,true);oContentContainer=bb.selector.query(e,".ap-OST-accountsContent");oContentContainer.parentNode.replaceChild(g,oContentContainer);phe.modal.showModal(0.5,e,document.body,true)})};absa.index.onLogonOSTLinkClick=function(c,e){var d="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getOSTLogonURL";absa.io.makeRequest(d,function(l){var u=bb.html.createElementFromString(l.text);var k=bb.selector.query(u,".ap-OST-accountsContent");var p=phe.grid.getAttribute(k,"data-count");if(p==0){gadgets.pubsub.publish("goTo:profile/linkUnlinkAccounts/linkUnlinkOST")}else{if(p==1){var v=bb.selector.query(k,".ap-OST-urls-1");var g=absa.URL_OST_LOGINLINK;var m=phe.radioItem.getAttribute(v,"data-url");var s=document.getElementById("ostFormLink");s.elements.ostTokenLink.value=m;s.elements.param1.value=c;s.elements.account.value=e;s.action=g;s.submit();s.elements.ostTokenLink.value="";s.elements.param1.value="";s.elements.account.value="";var t=phe.radioItem.getAttribute(v,"userName");var j="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getOSTLogonsLog&accessAccountNumber="+t;absa.io.makeRequest(j,function(i){})}else{if(p>1){var r=bb.selector.query(window.document,".ap-OSTLogonModal");var o=bb.selector.query(u,".OSTRadioGroup");for(var n=1;n<=p;n++){var f=".ap-OST-urls-"+n;var v=bb.selector.query(o,f);var q=phe.radioItem.getAttribute(v,"data-url");phe.radioItem.setAttribute(v,"data-url",q)}phe.modal.showModal(0.5,r,document.body,true);oContentContainer=bb.selector.query(r,".ap-OST-accountsContent");oButton=bb.selector.query(r,".ap-OST-login");var h="absa.index.onLogonOSTModalButtonClick(this,'"+c+"','"+e+"')";phe.button.setAttribute(oButton,"onclick",h);oContentContainer.parentNode.replaceChild(u,oContentContainer);phe.modal.showModal(0.5,r,document.body,true);var h="absa.index.onLogonOSTModalButtonClick(this,null,null)";phe.button.setAttribute(oButton,"onclick",h)}}}})};absa.index.onLogonAIMSModalButtonClick=function(i){var e=bb.selector.queryAncestor(i,".ap-AIMSLogonModal");var h=bb.selector.query(e,".ap-AIMS-radioGroup");var d=".ap-AIMS-urls-"+phe.radioGroup.getValue(h);var j=bb.selector.query(h,d);var c=phe.radioGroup.getAttribute(j,"data-url");window.open(c);phe.modal.hideModal();var g=phe.radioGroup.getAttribute(j,"userName");var f="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getAIMSLogonsLog&accessAccountNumber="+g;absa.io.makeRequest(f,function(k){var l=bb.html.createElementFromString(k.text);oContentContainer.parentNode.replaceChild(l,oContentContainer)})};absa.index.onLogonOSTModalButtonClick=function(m,h,k){var j=bb.selector.queryAncestor(m,".ap-OSTLogonModal");var i=bb.selector.query(j,".OSTRadioGroup");var d=".ap-OST-urls-"+phe.radioGroup.getValue(i);var f=bb.selector.query(i,d);var g=phe.radioGroup.getAttribute(f,"data-url");if(!h){var c=absa.URL_OST_LOGINURL;var o=document.getElementById("ostForm");o.elements.ostToken.value=g;o.action=c;o.submit();o.elements.ostToken.value=""}else{var c=absa.URL_OST_LOGINLINK;var l=document.getElementById("ostFormLink");l.elements.ostTokenLink.value=g;l.elements.param1.value=h;l.elements.account.value=k;l.action=c;l.submit();l.elements.ostTokenLink.value="";l.elements.param1.value="";l.elements.account.value=""}phe.modal.hideModal();var n=phe.radioGroup.getAttribute(f,"userName");var e="proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getOSTLogonsLog&accessAccountNumber="+n;absa.io.makeRequest(e,function(p){var q=bb.html.createElementFromString(p.text);oContentContainer.parentNode.replaceChild(q,oContentContainer)})};absa.index.RegisterAIMS=function(d){var c=absa.URL_AIMS;window.open(c)};absa.index.RegisterOST=function(d){var c=absa.URL_OST;window.open(c)};absa.index.showInterceptModal=function(){if(absa.SHOWINTERCEPTMODAL=="true"){if(absa.CLIENTTYPE!="S"){absa.index.interceptIbModal=bb.selector.query(document.body,".modalIntercept");phe.modal.showModal(0.5,absa.index.interceptIbModal,document.body,true)}}};absa.index.onMyAbsaButtonClick=function(c){url=absa.MYABSAURL+document.body.getAttribute("sid")+"&nonce="+absa.NONCE;window.open(url)};absa.index.oLogoffModal;absa.index.oDisplayTimer;absa.index._timer1;absa.index._timer2;absa.index._countDownSeconds=60;absa.index._doSrvCallEvery=0;absa.index._doSrvCallEveryKeyUp=0;absa.index._bIsLogoffModalDisplaying=false;absa.index._timeA=new Date().getTime();absa.index._timeB=(new Date().getTime()+60000);absa.index.resetTimerFromIO=function(){absa.index._doSrvCallEveryKeyUp=0;absa.index._doSrvCallEvery=0;absa.index._timeA=new Date().getTime();absa.index._timeB=(absa.index._timeA+60000);clearInterval(absa.index._timer1);clearInterval(absa.index._timer2);absa.index._timer1=setInterval(function(){absa.index.removeTime()},absa.TIMEOUT_LOGOFF)};absa.index.resetTimer=function(){if(absa.index._doSrvCallEvery>=4){absa.index._timeA=new Date().getTime();if(absa.index._timeA>absa.index._timeB){clearInterval(absa.index._timer1);clearInterval(absa.index._timer2);absa.index._timer1=setInterval(function(){absa.index.removeTime()},absa.TIMEOUT_LOGOFF);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=SecurityWebService&action=sessionKeepAlive",function(c){absa.index._countDownSeconds=60;absa.index._bIsLogoffModalDisplaying=false})}}absa.index.checkTheFrame();absa.index._doSrvCallEvery++};absa.index.resetTimerKeyUp=function(){if(absa.index._doSrvCallEveryKeyUp>=10){absa.index._timeA=new Date().getTime();if(absa.index._timeA>absa.index._timeB){clearInterval(absa.index._timer1);clearInterval(absa.index._timer2);absa.index._timer1=setInterval(function(){absa.index.removeTime()},absa.TIMEOUT_LOGOFF);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=SecurityWebService&action=sessionKeepAlive",function(c){absa.index._countDownSeconds=60;absa.index._bIsLogoffModalDisplaying=false})}}absa.index._doSrvCallEveryKeyUp++};absa.index.resetTimer2=function(){clearInterval(absa.index._timer1);clearInterval(absa.index._timer2);absa.index._timer1=setInterval(function(){absa.index.removeTime()},absa.TIMEOUT_LOGOFF);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=SecurityWebService&action=sessionKeepAlive",function(c){absa.index._countDownSeconds=60;absa.index._bIsLogoffModalDisplaying=false})};absa.index.removeTime=function(){absa.index._doSrvCallEveryKeyUp=0;absa.index._doSrvCallEvery=0;absa.index._timeA=new Date().getTime();absa.index._timeB=(absa.index._timeA+60000);absa.index.oLogoffModal=bb.selector.query(document.body,".modalLogoffWarning");phe.modal.showModal(0.5,absa.index.oLogoffModal,document.body,true);absa.index._bIsLogoffModalDisplaying=true;absa.index.oDisplayTimer=bb.selector.query(document.body,".ui-modal-content .ap-popup-body-timer");absa.index.doCountdown(absa.index._countDownSeconds)};absa.index.doCountdown=function(c){absa.index._countDownSeconds=(Number(c)-1);if(absa.index._countDownSeconds<=0){absa.index.doLogout()}else{absa.index.oDisplayTimer.innerHTML="<b>"+absa.index._countDownSeconds+"&nbsp;</b>";absa.index._timer2=setTimeout(function(){absa.index.doCountdown(absa.index._countDownSeconds)},1000)}};absa.index._blurTime;absa.index.doBlurMe=function(){absa.index._blurTime=new Date().getTime()};absa.index.doFocusMe=function(){if(false){var c=new Date().getTime();diffMillis=c-absa.index._blurTime;if(isNaN(diffMillis)){absa.index.resetTimer2()}else{if(diffMillis>=(absa.TIMEOUT_LOGOFF+45000)){absa.index.doLogout()}else{if((diffMillis>=absa.TIMEOUT_LOGOFF)&(diffMillis<(absa.TIMEOUT_LOGOFF+45000))){absa.index._countDownSeconds=Math.floor((((absa.TIMEOUT_LOGOFF+60000)-diffMillis)/1000));absa.index.removeTime()}else{if(diffMillis<absa.TIMEOUT_LOGOFF){absa.index.resetTimer2()}}}}}absa.index.checkTheFrame()};absa.index.onSwitchToFeatureStore=function(d){if(d==null){return false}window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);var g=bb.selector.query(document.body,".ap-jsp-body");var e="";var c=g.getAttribute("sid");var f=g.getAttribute("lang");if(f=="af"){f="A"}else{f="E"}var h=bb.selector.queryAncestor(d,".ap-accountbar");if(h!=null){e=h.getAttribute("accountno")}document.write("<div style='display:hidden'>");document.write("<form novalidate name='fsForm' id='fsForm' method='POST' action='"+absa.FEATURESTOREURL+"' target='_top'>");document.write("<input type='hidden' name='fsid' value='0'>");document.write("<input type='hidden' name='esessionid' value='"+c+"'>");document.write("<input type='hidden' name='page' value='default'>");document.write("<input type='hidden' name='accNumber' value='"+e+"'>");document.write("<input type='hidden' name='src' value='AOL'>");document.write("<input type='hidden' name='lang' value='"+f+"'>");document.write("</form>");document.write("<script language='javascript'>function doFS_Login(){ var fsF = document.getElementById('fsForm'); fsF.submit(); } doFS_Login();<\/script>");document.write("</div>");return false};absa.index.expressURL="";absa.index.onSwitchToExpress=function(d,e){if(!e){e="go"}absa.index.expressURL="switchToExpress?nonce="+absa.NONCE+"&"+e;var c=bb.selector.query(document.body,".modalSwitchToExpress");phe.modal.showModal("0.5",c,document.body,true)};absa.index.onSwitchToExpressGO=function(c){window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.location=absa.index.expressURL};absa.index.doOverdraftCheckToDSP=function(f,e,d){var c=bb.selector.queryAncestor(f,".ui-form");if(absa.ENABLEDSP.toLowerCase()=="true"){absa.index.onSwitchToDSP(f,"product="+e+"&productCode="+e+"&pricingSchemeCode="+d)}else{absa.form.validateAndSubmit(c)}};absa.index.dspURL="";absa.index.onSwitchToDSP=function(d,e){if(!e){e="go"}absa.index.dspURL="switchToDSP?nonce="+absa.NONCE+"&"+e;var c=bb.selector.query(document.body,".modalSwitchToDSP");phe.modal.showModal("0.5",c,document.body,true)};absa.index.onSwitchToDSPGO=function(c){window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.location=absa.index.dspURL};absa.index.doCustomerSelfUpgrade=function(g,e){var c=bb.selector.queryAncestor(g,".ui-form");var f=bb.selector.query(c,".ap-transactionalSolutions-overdraft");var d="";d=phe.radioGroup.getValue(f);if(d==null){d=phe.hiddenField.getValue(f)}var h=bb.selector.queryAncestor(g,".ui-form");phe.form.setAttribute(h,"action","proxy?pipe=genericEmptyResponse&xslFile=Offers/CustomerSelfUpgradeOffers/customerSelfUpgradeOffersConfirm");absa.form.validateAndSubmit(h)};absa.util.observer.subscribe("load-saveinvest-balances",function(){absa.util.observer.publish("load-absasavings-balances",{});absa.util.observer.publish("load-otherinvestment-balances",{});setTimeout(function(){absa.index.calculateSaveInvestTotal()},2000)});var counter=0;var flag=false;absa.index.calculateSaveInvestTotal=function(){var j;var g=document.getElementById("absaOther-Networth");var f=document.getElementById("absaInvestment-Networth");var d=document.getElementById("absaSavings-Networth");var e=document.getElementById("totalInvestmentValue");if(g._userType=="O"){e.innerHTML=""}else{if(!g._balanceSet||!f._balanceSet||!d._balanceSet){j=setTimeout(function(){absa.index.calculateSaveInvestTotal()},1000);e.innerHTML="<img src='static/style/resources/ajax-loader.gif' alt='Loading' width='20' height='20' />";counter++}else{var c=d.innerHTML;if(c!=null){c=c.substring(2)}var k=g.innerHTML;if(k!=null){k=k.substring(2)}var h=f.innerHTML;if(h!=null){h=h.substring(2)}var i=parseFloat(c.replace(/,/g,""))+parseFloat(k.replace(/,/g,""))+parseFloat(h.replace(/,/g,""));e.innerHTML=absa.util.formatCurrency(i);if(!flag){j=setTimeout(function(){absa.index.calculateSaveInvestTotal()},1000)}counter++}}if(counter==40){flag=true;clearTimeout(j)}};absa.util.observer.subscribe("load-absasavings-balances",function(){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=Retail",function(g){if(!g.errors.length){var i;try{i=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("absasavings-balances",i)}catch(h){}}else{var i={};i.result="error";absa.util.observer.publish("absasavings-balances",i)}});var c=bb.selector.query(document.body,".ap-currencyInvestmentAccount");if(c){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=CIA",function(g){if(!g.errors.length){var i;try{i=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("absasavings-balances",i)}catch(h){}}else{var i={};i.result="error";absa.util.observer.publish("absasavings-balances",i)}})}var d=bb.selector.query(document.body,".ap-ostAccount");if(d){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=OST",function(g){if(!g.errors.length){var i;try{i=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("absasavings-balances",i)}catch(h){}}else{var i={};i.result="error";absa.util.observer.publish("absasavings-balances",i)}})}var f=bb.selector.query(document.body,".ap-unitTrustAccount");if(f){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=UnitTrust",function(g){if(!g.errors.length){var i;try{i=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("absasavings-balances",i)}catch(h){}}else{var i={};i.result="error";absa.util.observer.publish("absasavings-balances",i)}})}var e=bb.selector.query(document.body,".ap-aimsAccount");if(e){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=AIMS",function(g){if(!g.errors.length){var i;try{i=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("absasavings-balances",i)}catch(h){}}else{var i={};i.result="error";absa.util.observer.publish("absasavings-balances",i)}})}});absa.util.observer.subscribe("load-otherinvestment-balances",function(){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=SaveInvestWebService&action=getBalanceOtherInvestments",function(c){if(!c.errors.length){var f;try{f=JSONRequest.parse(absa.util.stripTag(c.text));absa.util.observer.publish("otherinvestment-balances",f);var g=document.getElementById("absaOther-Networth");g._balanceSet=true;g._userType=f[1].userType;if(f[1].userType=="O"){g.innerHTML=""}else{if(f[0].total.length>0){g.innerHTML=absa.util.formatCurrency(f[0].total)}else{g.innerHTML=absa.util.formatCurrency("0.00")}}absa.index.calculateSaveInvestTotal()}catch(d){}}else{var f={};f.result="error";absa.util.observer.publish("otherinvestment-balances",f)}})});absa.index.printTotalInvestmentPortfolio=function(){var d=document.getElementsByName("printtotal");for(var e=0;e<d.length;e++){if(d[e].checked){var c=parseInt(d[e].value);switch(c){case 1:absa.openReport("report/totalInvestmentPortfolio.pdf?reportType=1","totalInvestmentPortfolio");break;case 2:absa.openReport("report/totalInvestmentPortfolio.pdf?reportType=3","totalInvestmentPortfolio");break;case 3:absa.openReport("report/totalInvestmentPortfolio.pdf?reportType=2","totalInvestmentPortfolio");break;case 4:absa.openReport("report/totalInvestmentPortfolio.pdf?reportType=4","totalInvestmentPortfolio");break}}}};absa.index.showHideSavingGadget=function(){var d=bb.selector.query(document.body,".p-portal");var c=bb.selector.query(document.body,".ap-savingsGoal");var e=bb.selector.query(document.body,".ap-savingGoalbutton");if(bb.html.hasClass(d,"hideSavingPortfolioGadget")){bb.html.removeClass(e,"ap-icon-savgingsGoals");bb.html.addClass(e,"ap-icon-checkerFlag");bb.html.removeClass(d,"hideSavingPortfolioGadget");bb.html.addClass(c,"ap-savingsGoalGadget")}else{bb.html.removeClass(e,"ap-icon-checkerFlag");bb.html.addClass(e,"ap-icon-savgingsGoals");bb.html.addClass(d,"hideSavingPortfolioGadget");bb.html.removeClass(c,"ap-savingsGoalGadget")}};absa.util.observer.subscribe("load-insurance-balances",function(){var c=bb.selector.query(document.body,".ap-insurance-premium");if(c){absa.index.insuranceBalanceCallsRequired++}absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ViewPolicyInformationWebService&action=getLinkPolicies&cache=no",function(g){absa.index.insuranceBalanceCallsCompleted++;if(!g.errors.length){var j;try{var f=bb.html.createElementFromString(g.text);j=JSONRequest.parse(absa.util.stripTag(g.text));absa.util.observer.publish("insurancebalances",j);var h=bb.selector.query(document.body,".ap-insurances-bar");var d=bb.selector.query(h,".ap-insurances-dateTime");d.innerHTML=j[0].lastRefreshed}catch(i){}}else{var j={};j.result="error";absa.util.observer.publish("insurancebalances",j)}})});absa.index.balanceCallsCompleted=0;absa.index.balanceCallsRequired=1;absa.util.observer.subscribe("load-balances",function(){var d=bb.selector.query(document.body,".ap-ostAccount");var e=bb.selector.query(document.body,".ap-aimsAccount");var f=bb.selector.query(document.body,".ap-unitTrustAccount");var g=bb.selector.query(document.body,".ap-absaReward");var c=bb.selector.query(document.body,".ap-currencyInvestmentAccount");absa.index.balanceCallsCompleted=0;absa.index.balanceCallsRequired=1;if(d){absa.index.balanceCallsRequired++}if(f){absa.index.balanceCallsRequired++}if(g){absa.index.balanceCallsRequired++}if(e){absa.index.balanceCallsRequired++}if(c){absa.index.balanceCallsRequired++}absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=Retail",function(i){absa.index.balanceCallsCompleted++;if(!i.errors.length){var l;try{l=JSONRequest.parse(absa.util.stripTag(i.text));absa.util.observer.publish("balances",l);var k=bb.selector.query(document.body,".ap-refreshBalances-bar");var h=bb.selector.query(k,".ap-refreshBalances-dateTime");if(h!=null){h.innerHTML=l[0].lastRefreshed}}catch(j){}}else{var l={};l.result="error";absa.util.observer.publish("balances",l)}});if(c){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=CIA",function(i){absa.index.balanceCallsCompleted++;if(!i.errors.length){var l;try{l=JSONRequest.parse(absa.util.stripTag(i.text));absa.util.observer.publish("balances",l);var k=bb.selector.query(document.body,".ap-refreshBalances-bar");var h=bb.selector.query(k,".ap-refreshBalances-dateTime");if(h!=null){h.innerHTML=l[0].lastRefreshed}}catch(j){}}else{var l={};l.result="error";absa.util.observer.publish("balances",l)}})}if(d){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=OST",function(h){absa.index.balanceCallsCompleted++;if(!h.errors.length){var j;try{j=JSONRequest.parse(absa.util.stripTag(h.text));absa.util.observer.publish("balances",j)}catch(i){}}else{var j={};j.result="error";absa.util.observer.publish("balances",j)}})}if(e){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=AIMS",function(h){absa.index.balanceCallsCompleted++;if(!h.errors.length){var j;try{j=JSONRequest.parse(absa.util.stripTag(h.text));absa.util.observer.publish("balances",j)}catch(i){}}else{var j={};j.result="error";absa.util.observer.publish("balances",j)}})}if(f){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=UnitTrust",function(h){absa.index.balanceCallsCompleted++;if(!h.errors.length){var j;try{j=JSONRequest.parse(absa.util.stripTag(h.text));absa.util.observer.publish("balances",j)}catch(i){}}else{var j={};j.result="error";absa.util.observer.publish("balances",j)}})}if(g){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=BalancesAndStatementsWebService&action=getBalances&accountGroup=Rewards",function(h){absa.index.balanceCallsCompleted++;if(!h.errors.length){var j;try{j=JSONRequest.parse(absa.util.stripTag(h.text));absa.util.observer.publish("balances",j)}catch(i){}}else{var j={};j.result="error";absa.util.observer.publish("balances",j)}})}absa.util.observer.publish("refresh-limits",{})});absa.index.refreshUpdaters=function(h,d){if(d==null){d=""}else{d="&goto="+d}if(!h){h=false}if(typeof h=="string"){try{h=new Boolean(h)}catch(f){h=false}}if(h==true){absa.showPleaseWait();window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE)}var g=Math.floor(Math.random()*500000);var c="proxy?pipe=refreshUpdaters";absa.io.makeRequest(c,function(e){var i=bb.html.createElementFromString(e.text);if(h==true){setTimeout(function(){if(bb.browser.ie){window.location.assign(absa.CONTEXT+"/index.jsp?axob="+absa.AXOB+""+d+"&uniq="+g)}else{window.location.href=absa.CONTEXT+"/index.jsp?axob="+absa.AXOB+""+d+"&uniq="+g}},2000)}})};absa.index.reloadEntireSite=function(f){window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);var e=bb.selector.queryAncestor(f,".ap-changePreferredLang-reloadSite-modal");if(e){var d=bb.selector.query(e,".ap-changePreferredLang-reloadSite-modalBody");if(d){phe.loadingMessage.showLoadingMessage(d);var c="proxy?pipe=genericWebservice&ws=SecurityWebService&action=getUserPrincipal&view=preferredLanguage";absa.io.makeRequest(c,function(i){var g=bb.html.createElementFromString(i.text);if(g){var h=g.getAttribute("userPreferredLanguage")}absa.index.refreshUpdaters(true)})}}};absa.index.addedAIMS=0;absa.index.addedOST=0;absa.index.addedUNITTRUST=0;absa.index.addAccountGadget=function(f,m,k,j){var p=["ost","1","onlineShareTrading","1","onlineShareTradingPrivate","1","onlineShareTradingDetail","1","telephoneShareTrading","1","aims","1","unitTrustAccount","1","savingsAccount","2","termDeposit","2","noticeDeposit","2","retail","2","cia","1"];absa.index.refreshUpdaters(false);if(j==null){j=true}if(f!=""){if(absa.index.isAccountGadgetOnPageAlready(f,k)==false){if(k==null){k="retail"}var g=false;if(k.toLowerCase()=="ost"|k.toLowerCase()=="onlinesharetrading"){if(absa.index.addedOST<1){g=true}absa.index.addedOST=1}else{if(k.toLowerCase()=="aims"){if(absa.index.addedAIMS<1){g=true}absa.index.addedAIMS=1}else{if(k.toLowerCase()=="unittrustaccount"){if(absa.index.addedUNITTRUST<1){g=true}absa.index.addedUNITTRUST=1}else{g=true}}}if(g){var q=bb.document.getElementById("portal");var h=q.getProperty("containers");var o=q.getContainersByTemplateId("l2")[0];var l=q.getContainersByTemplateId("l4")[0];var n=o.getProperty("gadgets");var e=l.getProperty("gadgets");var c="gadgets/accountsBalance/index.html";var i="gadgets/saveInvestSavingsPortfolio/index.html";var d="";if(k.toLowerCase()=="absareward"){d="proxy?pipe=genericWebservice&ws=SecurityWebService&action=getUserPrincipal&view=accounts&accountTypeName=absaReward&mode=absarewards"}else{d="proxy?pipe=genericWebservice&ws=SecurityWebService&action=getUserPrincipal&view=accounts&accountNo="+f+"&mode=linkunlink"}absa.io.makeRequest(d,function(E){var M=bb.html.createElementFromString(E.text);var J=M.getAttribute("userClientType");if(J!=""){var S=M.getAttribute("accNo");if(S!=""){var I=M.getAttribute("accId");var u=M.getAttribute("accName");var y=M.getAttribute("accType");var B=M.getAttribute("accAllowPayment");var r=M.getAttribute("accPowerOfAttorney");var H=M.getAttribute("accViewAccInfo");var v=M.getAttribute("accEStatements");var O=M.getAttribute("accNotifyMe");var t=M.getAttribute("accPricingOptions");var s=M.getAttribute("accATViewAccInfo");var K=M.getAttribute("accATEStatements");var A=M.getAttribute("accATNotifyMe");var T=M.getAttribute("accATPricingOptions");if(J=="B"|J=="b"){v="false";K="false"}var P={selectedTab:"first",gadgetIndex:"-1",balanceAvailable:"true",account:'{ "accountName":"'+u+'", "displayName":"'+u+'", "clientType":"'+J+'", "accountNo":"'+S+'", "allowPayment":"'+B+'", "id":"'+I+'","powerOfAttorney": "'+r+'","options":{ "viewAccountInformation":'+H+',"pricingOption":'+t+',"eStatements":'+v+',"notifyMe":'+O+' }, "accountType":{ "name":"'+y+'", "options":{ "viewAccountInformation":'+s+', "pricingOption":'+T+', "eStatements":'+K+',"notifyMe":'+A+" } } }"};var D="g300013";var C="g3010025";var w={};var R={col:0,pos:0,unmanaged:"false"};var Q=q.createGadget(c,P,w,D);Q.preferences=[[],[]];q.addGadget(Q,o,R,n.length);Q.minimize();absa.initializeNewContent(Q);var N=q.createGadget(i,P,w,C);N.preferences=[[],[]];var G={col:0,pos:0,unmanaged:"true"};for(var F=0;F<p.length;F=F+2){var L=p[F];var z=p[(F+1)];if(z=="1"){G={col:0,pos:0,unmanaged:"true"}}else{G={col:0,pos:0,unmanaged:"false"}}if(k.toLowerCase()==L.toLowerCase()){q.addGadget(N,l,G,e.length);N.minimize();absa.initializeNewContent(N)}}if(j){absa.index.refreshUpdaters(false);setTimeout(function(){absa.util.observer.publish("load-balances","")},2000);setTimeout(function(){absa.util.observer.publish("load-saveinvest-balances","")},2000)}}}})}}else{if(j){absa.index.refreshUpdaters(false);setTimeout(function(){absa.util.observer.publish("load-balances","")},2000);setTimeout(function(){absa.util.observer.publish("load-saveinvest-balances","")},2000)}}}};absa.index.removeGadgetsByTemplateId=function(d){if(d.substring(0,1)!="g"){d="g"+d}try{var e=bb.document.getElementById("portal");var h=e.getGadgetsByTemplateId(d);for(var f=h.length;f>=0;f--){var c=h[f];if(c!=undefined){e.removeGadget(c)}}return true}catch(g){return false}};absa.index.removeAccountGadget=function(g,k){try{if(k==null){k="retail"}var c=false;var l=bb.document.getElementById("portal");var e=l.getGadgetsByTemplateId("g300013");for(var h=0;h<e.length;h++){var j=JSONRequest.parse(e[h].getPreference("account"));if(j.accountNo==g){l.removeGadget(e[h]);c=true}}var d=l.getGadgetsByTemplateId("g3010025");for(var h=0;h<d.length;h++){var j=JSONRequest.parse(d[h].getPreference("account"));if(j.accountNo==g){l.removeGadget(d[h]);c=true}}if(k=="aims"){absa.index.addedAIMS=0}else{if(k=="onlineShareTrading"){absa.index.addedOST=0}}return c}catch(f){return absa.index.removeAccountGadgetSafe(g,k)}};absa.index.removeAccountGadgetSafe=function(e,h){try{if(h==null){h="retail"}var c=false;var m=bb.document.getElementById("portal");if(typeof m!="undefined"){var f=m.getProperty("containers");var k=f[0];if(k!=null){if(typeof k!="undefined"){var l=k.getProperty("gadgets");if(l!=null){if(typeof l!="undefined"){for(var i=0;i<l.length;i++){if(typeof l[i]!="undefined"){try{var g=JSONRequest.parse(l[i].getPreference("account"));if(g.accountNo==e){m.removeGadget(l[i]);c=true}}catch(d){}}}}}}}var j=f[2];if(j!=null){if(typeof j!="undefined"){var l=j.getProperty("gadgets");if(l!=null){if(typeof l!="undefined"){for(var i=0;i<l.length;i++){if(typeof l[i]!="undefined"){try{var g=JSONRequest.parse(l[i].getPreference("account"));if(g.accountNo==e){m.removeGadget(l[i]);c=true}}catch(d){}}}}}}}}if(h=="aims"){absa.index.addedAIMS=0}else{if(h=="onlineShareTrading"){absa.index.addedOST=0}}return c}catch(d){return false}};absa.index.isAccountGadgetOnPageAlready=function(j,k){try{var h=false;var c=bb.document.getElementById("portal");var e=c.getGadgetsByTemplateId("g300013");for(var d=0;d<e.length;d++){var g=JSONRequest.parse(e[d].getPreference("account"));if(g.accountNo==j){if(k.toLowerCase().indexOf("unittrust")>-1){if(g.accountNo=="999999999"){h=true}}else{if(g.accountNo==j){h=true}}}}return h}catch(f){return absa.index.isAccountGadgetOnPageAlreadySafe(j,k)}};absa.index.isAccountGadgetOnPageAlreadySafe=function(d,g){try{if(g==null){g="retail"}var k=false;var l=bb.document.getElementById("portal");if(typeof l!="undefined"){var e=l.getProperty("containers");var i=e[0];if(i!=null){if(typeof i!="undefined"){var j=i.getProperty("gadgets");if(j!=null){if(typeof j!="undefined"){for(var h=0;h<j.length;h++){if(typeof j[h]!="undefined"){try{var f=JSONRequest.parse(j[h].getPreference("account"));if(f.accountNo!=null&&f.accountNo!="null"){if(g.toLowerCase().indexOf("unittrust")>-1){if(f.accountNo=="999999999"){k=true}}else{if(f.accountNo==d){k=true}}}}catch(c){}}}}}}}}return k}catch(c){return false}};absa.index.loadContainerGadgets=function(e){var d=bb.document.getElementById("portal");var h=d.getProperty("containers");var g=h[0].getProperty("gadgets");for(var f=0;f<g.length;f++){if(g[f].getProperty("templateId")=="g300013"){g[f].load()}}var c=h[2].getProperty("gadgets");for(var f=0;f<c.length;f++){if(c[f].getProperty("templateId")=="g3010025"){c[f].load()}}if(e!=null){setTimeout(function(){e()},"500")}};absa.index.rearrangeAccounts=absa.index.rearrangeAccounts||{};absa.index.rearrangeAccounts.onRearrangeAccountsClick=function(d){var c="proxy?pipe=genericEmptyResponse&xslFile=Accounts/rearrangeAccounts";absa.modal.loadModal(c,absa.locale["Accounts/RearrangeAccounts/Label/ModalTitle"])};absa.index.rearrangeAccounts.onRearrangeAccountsResetClick=function(e){var d=bb.selector.queryAncestor(e,".ap-rearrangeAccounts");var c=bb.selector.query(d,".ap-rearrangeAccounts-table");phe.rearrangeTable.resetPosition(c)};absa.index.rearrangeAccounts.sortByAccNameORNum=function(g,d,e){var f=bb.selector.queryAncestor(g,".ap-rearrangeAccounts");var c=bb.selector.query(f,".ap-rearrangeAccounts-table");phe.loadingMessage.showLoadingMessage(c);setTimeout(function(){var i=bb.selector.queryAll(c,".ui-tableBodyRow");if(i!=null&&i.length>1){i.sort(function(k,j){var l=0;h=k.getAttribute(e);b=j.getAttribute(e);if(d.toUpperCase().indexOf("ASC")>-1){if(h!=null&b!=null){if(isNaN(h)){if(h.toUpperCase()<b.toUpperCase()){l=-1}else{if(h.toUpperCase()>b.toUpperCase()){l=1}}}else{l=(Number(h)-Number(b))}}}else{if(h!=null&b!=null){if(isNaN(h)){if(h.toUpperCase()<b.toUpperCase()){l=1}else{if(h.toUpperCase()>b.toUpperCase()){l=-1}}}else{l=(Number(b)-Number(h))}}}return l});for(var h=0;h<i.length;h++){phe.rearrangeTable.changePosition(i[h],(h+1))}phe.loadingMessage.hideLoadingMessage(c)}else{phe.loadingMessage.hideLoadingMessage(c)}},1500)};absa.index.rearrangeAccounts.onRearrangeAccountsSaveClick=function(k){var j=[];var g=bb.selector.queryAncestor(k,".ap-rearrangeAccounts");var f=bb.selector.queryAll(g,".ap-rearrangeAccounts-id");var h="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=updateAccountSequence";for(var e=0;e<f.length;e++){j.push(phe.hiddenField.getValue(f[e]))}var c=gadgets.io.encodeValues({accounts:j});var d={};d[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;d[gadgets.io.RequestParameters.POST_DATA]=c;phe.loadingMessage.showLoadingMessage(g);absa.io.makeRequest(h,function(n){if(!n.errors.length){var q=bb.html.createElementFromString(n.text);var l=bb.selector.queryAll(q,".ui-message-error");var m=bb.selector.query(q,".ui-message-help");var i=bb.selector.query(q,".ui-message-warning");if(l[1]||m||i){var p=bb.selector.query(g,".ui-formFoot");var o=bb.selector.query(g,".ap-rearrangeAccounts-message");if(o){p.removeChild(o)}p.insertBefore(q,p.firstChild)}else{phe.modal.hideModal()}phe.loadingMessage.hideLoadingMessage(g);absa.index.rearrangeAccounts.rearrangeAccounts(g,j)}else{absa.showIOErrorMessage(g)}},d)};absa.index.rearrangeAccounts.rearrangeAccounts=function(m,l){var c=bb.selector.queryAll(m,".ap-rearrangeAccounts-id");var o=document.getElementById("portal");var n=bb.selector.queryAll(o,".ap-retailAccount");var d=[];for(var h=0;h<l.length;h++){var e={};e.position=h;for(var g=0;g<n.length;g++){if(n[g].getAttribute("accountNo")==l[h]){var k=bb.selector.query(n[g],".p-gadget-content");var f=k.getAttribute("id");e.gadgetId=f;break}}d.push(e)}absa.gadgets.positionRefresh(d)};absa.index.addInsuranceGadget=function(g){var h=true;absa.index.refreshUpdaters(false);if(h==null){h=true}if(g!=null){if(absa.index.isInsuranceGadgetOnPageAlready(g)==false){var e=true;if(e){var k=bb.document.getElementById("portal");var f=k.getProperty("containers");var j=k.getContainersByTemplateId("l3010079")[0];var i=j.getProperty("gadgets");var c="gadgetsinsuranceindex.html";var d="";d="proxy?pipe=genericWebservice&ws=ViewPolicyInformationWebService&action=getLinkPolicies&cache=no&view=linkUnlink&policyNo="+g+"&mode=linkunlink";absa.io.makeRequest(d,function(v){var C=bb.html.createElementFromString(v.text);var t=bb.selector.query(C,".ap-getLinkPolcies-policyDetails");var w=phe.grid.getAttribute(t,"policyNumber");var M=w;if(M!=""){var q=phe.grid.getAttribute(t,"policyDesc");var H=phe.grid.getAttribute(t,"policyStatus");var O=phe.grid.getAttribute(t,"policyCoverAmt");var B=phe.grid.getAttribute(t,"policyPremiumAmt");var D=phe.grid.getAttribute(t,"policyType");var y=phe.grid.getAttribute(t,"commencementDate");var n=phe.grid.getAttribute(t,"insuranceProductCode");var o=phe.grid.getAttribute(t,"insuranceProductType");var J=phe.grid.getAttribute(t,"businessSourceIndicator");var E=phe.grid.getAttribute(t,"referenceNumber");var p=phe.grid.getAttribute(t,"processingType");var s=phe.grid.getAttribute(t,"outstandingPremiumAmount");var x=phe.grid.getAttribute(t,"statusDescription");var A=phe.grid.getAttribute(t,"planCode");var G=phe.grid.getAttribute(t,"payArrears");var z=phe.grid.getAttribute(t,"managePolicyQuicklink");var Q=phe.grid.getAttribute(t,"managePolicy");var r=phe.grid.getAttribute(t,"manageClaims");var l=phe.grid.getAttribute(t,"activatePolicy");var F=phe.grid.getAttribute(t,"renewDate");var L=phe.grid.getAttribute(t,"iBenefitBonus");var P=phe.grid.getAttribute(t,"payoutDate");var I={selectedTab:"first",gadgetIndex:"-1",balanceAvailable:"true",insurance:'{ "policyNumber":"'+M+'", "policyDesc":"'+q+'", "policyStatus":"'+H+'", "policyCoverAmt":"'+O+'", "policyPremiumAmt":"'+B+'","policyType": "'+D+'","commencementDate": "'+y+'","insuranceProductCode": "'+n+'","insuranceProductType": "'+o+'","businessSourceIndicator": "'+J+'","referenceNumber": "'+E+'","processingType": "'+p+'","outstandingPremiumAmount": "'+s+'","statusDescription": "'+x+'","planCode": "'+A+'", "renewDate": "'+F+'", "iBenefitBonus": "'+L+'","payoutDate": "'+P+'","insurancePolicyHeaderOptions":{ "payArrears":'+G+',"managePolicyQuicklink":'+z+',"managePolicy":'+Q+',"manageClaims":'+r+',"activatePolicy":'+l+"}}"};var u="g3010108";var m={};var N={col:0,pos:0,unmanaged:"false"};var K=k.createGadget(c,I,m,u);k.addGadget(K,j,N,i.length);K.minimize();absa.initializeNewContent(K);if(h){absa.index.refreshUpdaters(false);setTimeout(function(){absa.util.observer.publish("load-insurance-balances","")},2000)}}})}}else{absa.index.refreshUpdaters(false);setTimeout(function(){absa.util.observer.publish("load-insurance-balances","")},2000)}}};absa.index.isInsuranceGadgetOnPageAlready=function(g){var h=false;var c=bb.document.getElementById("portal");try{var f=c.getGadgetsByTemplateId("g3010108");for(var d=0;d<f.length;d++){var k=JSONRequest.parse(f[d].getPreference("insurance"));if(k.policyNumber==g){h=true}}}catch(j){}return h};absa.index.removeInsuranceGadget=function(h){var f=false;var d=bb.document.getElementById("portal");try{var c=d.getGadgetsByTemplateId("g3010108");for(var g=0;g<c.length;g++){var k=JSONRequest.parse(c[g].getPreference("insurance"));if(k.policyNumber==h){d.removeGadget(c[g]);f=true}}}catch(j){}return f};absa.index.checkKeyDown=function(c){var e=false;if(c.keyCode===8){var f=c.srcElement||c.target;if((f.tagName.toUpperCase()==="INPUT"||f.tagName.toUpperCase()==="TEXTAREA")&&(f.type.toUpperCase()==="TEXT"||f.type.toUpperCase()==="TEL"||f.type.toUpperCase()==="EMAIL"||f.type.toUpperCase()==="PASSWORD"||f.type.toUpperCase()==="FILE"||f.tagName.toUpperCase()==="TEXTAREA"||f.tagName.toUpperCase()==="NUMBER"||f.tagName.toUpperCase()==="AMOUNT")){if(f.readOnly||f.disabled){e=true}}else{e=true}if(e){try{c.preventDefault()}catch(g){return false}}}};absa.index.paySingle=absa.index.paySingle||{};absa.index.paySingle.doPayBen=function(e){var d="proxy?pipe=genericEmptyResponse&xslFile=Payments/PaySingleBeneficiary/paySingleBeneficiaryQuickLinks";var c=absa.locale["Payments/PaySingleBeneficiary/Label/TabHeader"];absa.modal.loadModal(d,c,function(){var g=bb.selector.query(window.document,".ap-paySingle-quickLinks");if(g){var f=bb.selector.queryAncestor(g,".ui-modal");absa.modal.addModalHeaderButton(f,"ap-icon-colorPalette",absa.index.paySingle.changeFontColor,"Common/General/Label/ChangeFontColor");absa.modal.addModalHeaderButton(f,"ap-icon-stretch",absa.index.paySingle.stetchModal,"Common/General/Label/StretchModal");absa.modal.addModalHeaderButton(f,"ap-icon-bold",absa.index.paySingle.boldFont,"Common/General/Label/Bold");absa.modal.addModalHeaderButton(f,"ap-icon-shrinkFont",absa.index.paySingle.growShrinkFont,"Common/General/Label/ShrinkFont");absa.modal.addModalHeaderButton(f,"ap-icon-growFont",absa.index.paySingle.growShrinkFont,"Common/General/Label/GrowFont");var h=bb.selector.query(g,".ap-paySingle-searchBen");if(h){h.focus()}}},function(){absa.util.observer.publish("load-balances","")},"","850")};absa.index.paySingle.growShrinkFont=function(d){var g=bb.selector.queryAncestor(d,".ui-modal");if(g){var i="ap-paySingle-quickLinks";var j=bb.selector.query(g,"."+i);if(j){var f=12;var c=phe.common.getAttribute(j,"fontSize");if(c==null){c="11"}var k=phe.common.getAttribute(d,"class");if(k.indexOf("-growFont")>-1){f=Number(c)+1}else{f=Number(c)-1}var h="11";var e="ap-common-fontSize11px";switch(f){case 7:phe.common.setAttribute(g,"style","width:840px");h="7";e="ap-common-fontSize7px";break;case 8:phe.common.setAttribute(g,"style","width:840px");h="8";e="ap-common-fontSize8px";break;case 9:phe.common.setAttribute(g,"style","width:840px");h="9";e="ap-common-fontSize9px";break;case 10:phe.common.setAttribute(g,"style","width:840px");h="10";e="ap-common-fontSize10px";break;case 11:phe.common.setAttribute(g,"style","width:890px");h="11";e="ap-common-fontSize11px";break;case 12:phe.common.setAttribute(g,"style","width:936px");h="12";e="ap-common-fontSize12px";break;case 13:phe.common.setAttribute(g,"style","width:960px");h="13";e="ap-common-fontSize13px";break;case 14:phe.common.setAttribute(g,"style","width:1010px");h="14";e="ap-common-fontSize14px";break;case 15:phe.common.setAttribute(g,"style","width:1066px");h="15";e="ap-common-fontSize15px";break;default:phe.common.setAttribute(g,"style","width:890px");h="11";e="ap-common-fontSize11px";break}phe.common.setAttribute(j,"fontSize",h);phe.common.setAttribute(j,"class",i+" "+e);phe.modal.updatePosition()}}};absa.index.paySingle.boldFont=function(g){var d=bb.selector.queryAncestor(g,".ui-modal");if(d){var f="ap-paySingle";var e=bb.selector.query(d,"."+f);if(e){var c=phe.common.getAttribute(e,"class");if(c.indexOf("-fontBold")>-1){phe.common.setAttribute(e,"class",f+" ap-common-fontNormal")}else{phe.common.setAttribute(e,"class",f+" ap-common-fontBold")}}}};absa.index.paySingle.stetchModal=function(f){var d=bb.selector.queryAncestor(f,".ui-modal");if(d){var e=bb.html.getStyle(d,"width");if(e){var c=0;if(e.indexOf("px")>-1){c=Number(e.substring(0,e.indexOf("px")))}else{c=Number(e)}c=c+50;if(c>1600){c=900}phe.common.setAttribute(d,"style","width:"+c+"px")}else{phe.common.setAttribute(d,"style","width:890px")}phe.modal.updatePosition()}};absa.index.paySingle.changeFontColor=function(g){var c=bb.selector.queryAncestor(g,".ui-modal");if(c){var e="ap-paySingle-inner";var d=bb.selector.query(c,"."+e);if(d){var f=phe.common.getAttribute(d,"fontColor");if(f!=null){switch(f){case"1":phe.common.setAttribute(d,"fontColor","2");bb.html.replaceClass(d,"ap-common-fontColor1","ap-common-fontColor2");break;case"2":phe.common.setAttribute(d,"fontColor","3");bb.html.replaceClass(d,"ap-common-fontColor2","ap-common-fontColor3");break;case"3":phe.common.setAttribute(d,"fontColor","4");bb.html.replaceClass(d,"ap-common-fontColor3","ap-common-fontColor4");break;case"4":phe.common.setAttribute(d,"fontColor","5");bb.html.replaceClass(d,"ap-common-fontColor4","ap-common-fontColor5");break;case"5":phe.common.setAttribute(d,"fontColor","6");bb.html.replaceClass(d,"ap-common-fontColor5","ap-common-fontColor6");break;case"6":phe.common.setAttribute(d,"fontColor","7");bb.html.replaceClass(d,"ap-common-fontColor6","ap-common-fontColor7");break;case"7":phe.common.setAttribute(d,"fontColor","8");bb.html.replaceClass(d,"ap-common-fontColor7","ap-common-fontColor8");break;case"8":phe.common.setAttribute(d,"fontColor","9");bb.html.replaceClass(d,"ap-common-fontColor8","ap-common-fontColor9");break;case"9":phe.common.setAttribute(d,"fontColor","1");bb.html.replaceClass(d,"ap-common-fontColor9","ap-common-fontColor1");break;default:phe.common.setAttribute(d,"fontColor","1");bb.html.replaceClass(d,"ap-common-fontColor9","ap-common-fontColor1");break}}else{phe.common.setAttribute(d,"fontColor","2");bb.html.addClass(d,"ap-common-fontColor2")}}}};absa.index.paySingle.setDefaultFocusStep1=function(){absa.index.paySingle.resetGlobalVars();setTimeout(function(){var d=bb.selector.query(window.document,".ap-paySingle-form1");if(d){var c=bb.selector.query(window.document,".ap-paySingle-amount");c.focus()}},50)};absa.index.paySingle.setDefaultFocusStep2=function(){absa.index.paySingle.resetGlobalVars();setTimeout(function(){var d=bb.selector.query(window.document,".ap-paySingle-form2");if(d){var c=bb.selector.query(window.document,".ap-paySingle-btn-back-step2");c.focus()}},50)};absa.index.paySingle.setDefaultFocusStep3=function(){setTimeout(function(){var d=bb.selector.query(window.document,".ap-paySingle-form3");if(d){var c=bb.selector.query(d,".ap-paySingle-btn-payAnother");c.focus()}},50)};absa.index.paySingle.payAnother=function(c){absa.index.paySingle.doPayBen(c)};absa.index.paySingle.paySame=function(d){phe.wizard.selectStepAbsolute(d,0);var e=bb.selector.query(document.body,".ap-paySingle-form1");var c=bb.selector.query(e,".ap-paySingle-amount");phe.textBox.setValue(c,"");c.focus()};absa.index.paySingle.addBeneficiaryOrGroup=function(e){var c=bb.selector.queryAncestor(e,".ui-tabBox");var d=bb.selector.query(c,".ap-tabHead-addBeneficiary");phe.tabBox.selectTab(d,false)};absa.index.paySingle.onFinishButtonClick=function(c){absa.wizard.finishButton(c);absa.util.observer.publish("load-balances","")};absa.index.paySingle.reloadTab=function(d){var c=bb.selector.queryAncestor(d,".ap-payBeneficiary");var e=phe.tabBox.getCurrentTabBody(c);absa.lazyLoadNode(e,true)};absa.index.paySingle.doCustomValidation=function(n){var q=bb.selector.queryAncestor(n,".ap-paySingle-form");var k=bb.selector.query(q,".ap-paySingle-amount");var i=bb.selector.query(q,".ap-accountDropdown");var r=bb.selector.query(q,".ap-paymentTime");var p=bb.selector.query(q,".ap-account-"+i.value);var e=p.getAttribute("available");if(e==""){e=0}var l=p.getAttribute("paymentLimit");if(l==""){l=0}var o=p.getAttribute("paymentUsage");if(o==""){o=0}var s=p.getAttribute("futureDatedLimit");if(s==""){s=0}var j=phe.textBox.getAttribute(n,"data-msgAvailableAmountExceeded");var h=phe.textBox.getAttribute(n,"data-msgPaymentLimitExceeded");var f=phe.textBox.getAttribute(n,"data-msgFuturePaymentLimitExceeded");var d=phe.textBox.getAttribute(n,"data-msgInsufficientFundsInTheDebitAccount");var c=phe.textBox.getAttribute(n,"data-msgAmountEnteredExceedsAvailableBalance");var g=phe.amountField.parseFormatedNumber(phe.textBox.getValue(k));var m=phe.timePicker.getValue(r);if(Number(g)>Number(e)&&m=="Now"){phe.textBox.setAttribute(n,"customValidationText",c);return false}else{if(Number(g)>Number(l)){phe.textBox.setAttribute(n,"customValidationText",h);return false}else{return true}}};absa.index.paySingle.selectAccount=function(e){var l=bb.selector.queryAncestor(e,".ap-form");var c=bb.selector.queryAll(l,".ap-balance");var f;var m;for(var g=0;g<c.length;g++){if(bb.html.hasClass(c[g],"ap-account-"+e.value)){phe.common.show(c[g]);phe.common.setAttribute(c[g],"selected","selected");var d=bb.selector.query(l,".ap-account-"+e.value);var j=bb.selector.query(l,".ap-fromAccountName");var h=bb.selector.query(l,".ap-fromAccountBalance");if(d.getAttribute("data-accname")!=""){phe.hiddenField.setValue(j,d.getAttribute("data-accname"))}else{phe.textBox.setValue(j,phe.common.getAttribute(d,"data-acctypename"))}phe.hiddenField.setValue(h,d.getAttribute("data-available"));f=d.getAttribute("data-available");m=d.getAttribute("data-paymentlimit")}else{c[g].style.display="none";c[g].removeAttribute("selected")}}var k=bb.selector.query(l,".ap-paySingle-amount");absa.form.validate.checkElement(k)};absa.index.paySingle.submitForm=function(c){var d=bb.selector.query(c,".ap-accountDropdown");absa.index.paySingle.selectAccount(d)};absa.index.paySingle.getPaymentDetails=function(m){var o=bb.selector.queryAncestor(m,".ap-form");var k="";var i="";var d="";var g="";var f=bb.selector.query(o,".ap-benID");var j=bb.selector.query(o,".ap-benCifKey");var c=bb.selector.query(o,".ap-benEft");var p=bb.selector.query(o,".ap-benTieb");var h=bb.selector.query(o,".ap-searchBen");g=phe.textBox.getValue(f);d=phe.textBox.getValue(j);i=phe.textBox.getValue(c);k=phe.textBox.getValue(p);var e="proxy?pipe=genericWebservice&ws=BeneficiaryWebService&action=getBeneficiaryDetails&view=paySingleBeneficiaryQuickLinks&eftNumber="+i+"&cifkey="+encodeURIComponent(d)+"&tiebNumber="+k+"&id="+g;var n=bb.selector.query(o,".ap-paymentDetails");var l=phe.common.getAttribute(n,"proxyurl")?phe.common.getAttribute(n,"proxyurl"):"";phe.common.setAttribute(n,"proxyurl",e);absa.lazyLoadNode(n,true,function(){var s=bb.selector.query(o,".ap-benSummary");var u=bb.selector.query(o,".ap-benLastTransaction");var q=bb.selector.query(o,".ap-benLastTransaction-tooltip");var t=bb.selector.query(o,".ap-displayedBeneficiarySummary");var r=bb.selector.query(o,".ap-paySingle-addBeneficiaryLink");phe.common.hide(r);var v=""+phe.hiddenField.getValue(s)+" | "+phe.hiddenField.getValue(u);if(v!=null){phe.common.show(t);t.setAttribute("tooltip",phe.hiddenField.getValue(q));t.innerHTML=v}});phe.common.setAttribute(n,"proxyurl",l)};absa.index.paySingle.getDate=function(h){var d=absa.index.paySingle.getTodaysDate(h);var f=absa.index.paySingle.getNextHour(h);var i=bb.selector.queryAncestor(h,".ap-form");var e=bb.selector.query(i,".ap-paymentTime");var c=phe.datePicker.getValue(h);var g=bb.selector.query(i,".ap-paySingle-amount");if(d==c){phe.timePicker.setAttribute(e,"min","Now")}else{absa.index.paySingle.removeIIP(h);phe.timePicker.setAttribute(e,"min","0")}absa.form.validate.checkElement(g)};absa.index.paySingle.timeChange=function(d){var e=bb.selector.queryAncestor(d,".ap-form");var c=bb.selector.query(e,".ap-paymentDate");absa.index.paySingle.removeIIP(c);absa.index.paySingle.onPaymentTimeChange(d)};absa.index.paySingle.getTodaysDate=function(h){var k=bb.selector.queryAncestor(h,".ap-form");var f=bb.selector.query(k,".ap-payments-Time");var j=new Date(parseInt(f.value,10));var g=j.getFullYear();var i=(j.getMonth()+1).toString();if(i.length==1){i="0"+i}var e=j.getDate().toString();if(e.length==1){e="0"+e}var c=g+"-"+i+"-"+e;return c};absa.index.paySingle.getNextHour=function(h){var g=bb.selector.queryAncestor(h,".ap-form");var c=bb.selector.query(g,".ap-payments-Time");var f=new Date(parseInt(c.value,10));var e=f.getHours()+1;return e};absa.index.paySingle.showCharges=function(f){var e=bb.selector.queryAncestor(f,".ap-form");var d=bb.selector.queryAncestor(f,".ui-tab-body-selected");var c=bb.selector.query(e,".ap-paySingle-charges");phe.modal.showModal("0.5",c,d,true)};absa.index.paySingle.removeIIP=function(e){var g=bb.selector.queryAncestor(e,".ap-form");var d=bb.selector.query(g,".ap-iip");var c=bb.selector.query(g,".ap-iip-terms");var f=bb.selector.query(g,".ap-iipCheckbox");if(d){phe.radioGroup.setValue(d,"false");phe.checkBox.setAttribute(f,"required","false");phe.row.hide(c)}};absa.index.paySingle.toggleIIP=function(f){var h=bb.selector.queryAncestor(f,".ap-form");var c=bb.selector.query(h,".ap-paymentDate");var e=bb.selector.query(h,".ap-iip-terms");var g=bb.selector.query(h,".ap-iipCheckbox");var d=absa.index.paySingle.getTodaysDate(c);if(phe.radioGroup.getValue(f)=="true"){phe.checkBox.setAttribute(g,"required","true");phe.datePicker.setValue(c,d);absa.index.paySingle.getDate(c);phe.row.show(e)}else{phe.checkBox.setAttribute(g,"required","false");absa.index.paySingle.getDate(c);phe.row.hide(e)}};absa.index.paySingle.printNoticeOfPayment=function(f,h,g){var j=bb.selector.queryAncestor(f,".ap-form");var e=bb.selector.query(j,".ap-fromAccountName");var d=bb.selector.query(j,".ap-fromAccountHolder");var c=phe.hiddenField.getValue(e);if(c==""){c="N/A"}var i=phe.hiddenField.getValue(d);if(i==""){i="N/A"}var k="false";absa.openReport("report/noticeOfPayment.pdf?task=go&payId="+h+"&benId="+g+"&fromAccountName="+c+"&fromAccountHolder="+i+"&isBenProof="+k,"abc")};absa.index.paySingle.populate=function(g,j){var i=bb.selector.query(g,".ap-paySingle-form");var h=bb.selector.query(i,".ap-paySingle-searchBen");var c=bb.selector.query(i,".ap-benID");var d=bb.selector.query(i,".ap-benCifKey");var e=bb.selector.query(i,".ap-benEft");var f=bb.selector.query(i,".ap-benTieb");phe.suggestBox.setValue(h,j.beneficiaryId+" - "+j.beneficiaryName+" - "+j.accountNumber);phe.hiddenField.setValue(c,j.beneficiaryId);phe.hiddenField.setValue(d,j.beneficiaryCifKey);phe.hiddenField.setValue(e,j.beneficiaryEft);phe.hiddenField.setValue(f,j.beneficiaryTieb);absa.index.paySingle.getPaymentDetails(c)};absa.index.paySingle.iipRetry=function(i,j){var g=bb.selector.queryAncestor(i,".ap-paySingle");var h=bb.selector.query(g,".ap-paySingle-formFooter-step3");var e=bb.selector.queryAll(h,".ui-message");for(var d=0;d<e.length;d++){phe.common.hide(e[d])}if(bb.browser.ie&&bb.browser.version<=6){g.style.height=g.offsetHeight+"px"}phe.loadingMessage.showLoadingMessage(g);var c=bb.selector.query(g,".ap-paySingle-formRetryPayment");var f=bb.selector.query(g,".ap-paySingle-result");if(j==null|j=="iip"){phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-immediatePayment"),"true");phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-iipReferenceNo"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-iipReferenceNoSAVED")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-paymentDate"),absa.date.getDateNow());phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-paymentTime"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-paymentTime")))}else{phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-immediatePayment"),"false");phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-iipReferenceNo"),"");phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-paymentDate"),absa.date.getDateNow());phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-paymentTime"),"")}phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-amountField"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-amountField")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benReference"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benReference")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-myReference"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-myReference")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-iipReference"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-iipReference")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-iipReferenceNo"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-iipReferenceNo")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-iipReferenceNoSAVED"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-iipReferenceNoSAVED")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-personalNote"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-personalNote")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-payId"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-payId")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benName"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benName")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benAccNo"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benAccNo")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benAccNoAtInstitution"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benAccNoAtInstitution")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benAccType"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benAccType")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benStatus"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benStatus")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benEFTNumber"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benEFTNumber")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benTIEBNumber"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benTIEBNumber")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benCIFKey"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benCIFKey")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benIEBI"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benIEBI")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benImmediatePaymentAvailable"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benImmediatePaymentAvailable")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benBankId"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benBankId")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benBankName"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benBankName")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benBranchNo"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benBranchNo")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benBranchId"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benBranchId")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benBranchName"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benBranchName")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-benID"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-benID")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-fromAccountNo"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-fromAccountNo")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-fromAccountName"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-fromAccountName")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyType"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyType")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyEmail"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyEmail")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyFaxCode"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyFaxCode")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyFax"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyFax")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyFaxNumber"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyFaxNumber")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notMyCell"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notMyCell")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenType"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenType")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenName"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenName")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenFax"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenFax")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenFaxCode"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenFaxCode")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenFaxNumber"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenFaxNumber")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenCell"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenCell")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenEmail"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenEmail")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenEmailComments"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenEmailComments")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenEmailContact"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenEmailContact")));phe.hiddenField.setValue(bb.selector.query(c,".ap-paySingle-notBenPaymentMadeBy"),phe.hiddenField.getValue(bb.selector.query(f,".ap-paySingle-notBenPaymentMadeBy")));bb.selector.query(c,".ap-paySingle-btnSubmit").click()};absa.index.paySingle.iipCancelPayment=function(g,d){var f=bb.selector.queryAncestor(g,".ap-paySingle");var e=bb.selector.queryAll(f,".ap-paySingle-perform-benId_"+d);for(var c=0;c<e.length;c++){phe.common.hide(e[c])}};absa.index.paySingle.onRetryResponseCallback=function(g,c){var e=bb.selector.queryAncestor(g,".ap-paySingle");if(c.status==200){var f=bb.selector.query(g,".ap-paySingle-benID");var d=bb.selector.query(e,"#ap-paySingle-perform-result_"+f.value);if(d){d.innerHTML=c.text}}else{}phe.loadingMessage.hideLoadingMessage(e)};absa.index.paySingle.onPaymentTimeChange=function(d){var e=bb.selector.queryAncestor(d,".ap-paySingle-form");var c=bb.selector.query(e,".ap-paySingle-amount");absa.form.validate.checkElement(c)};absa.index.paySingle.beforeSubmitStep2=function(c){phe.button.hide(c);var d=bb.selector.queryAncestor(c,".ui-form");absa.form.validateAndSubmit(d)};absa.index.paySingle.globals=absa.index.paySingle.globals||{};absa.index.paySingle.globals.oIIPRetries=0;absa.index.paySingle.resetGlobalVars=function(){absa.index.paySingle.globals.oIIPRetries=0};absa.index.paySingle.validateCallbackSuccess=function(e){var d=bb.selector.queryAncestor(e,".ap-paySingle");var f=bb.selector.query(e,".iipErrors");var c=bb.selector.queryAll(e,".iipError");if((f!=null)&&(c.length>0)){if(absa.index.paySingle.globals.oIIPRetries<7){phe.loadingMessage.showLoadingMessage(d,absa.locale["Common/General/Label/AwaitingResponseFromOtherInstitution"]+" : "+(absa.index.paySingle.globals.oIIPRetries+1)+"/7");setTimeout(function(){absa.index.paySingle.globals.oIIPRetries=absa.index.paySingle.globals.oIIPRetries+1;absa.index.paySingle.iipRetry(f,"iip")},10000)}else{absa.index.paySingle.resetGlobalVars();phe.loadingMessage.hideLoadingMessage(d)}}else{absa.index.paySingle.setDefaultFocusStep3();absa.index.paySingle.resetGlobalVars();phe.loadingMessage.hideLoadingMessage(d);absa.util.observer.publish("load-balances","")}};absa.index.paySingle.validateCallbackFailure=function(c){absa.index.paySingle.resetGlobalVars();absa.index.paySingle.setDefaultFocusStep3()};absa.index.cardPin=absa.index.cardPin||{};absa.index.cardPin.extractPinFromPinBlock=function(f,e,k){if(f.length==16){if(e.length==16){if(k.length==6){var l=absa.index.cardPin.get8BitByteArray(f);var j=absa.index.cardPin.get8BitByteArray(e);var d=absa.index.cardPin.get8BitByteArray(k);var n=[];for(var g=0;g<l.length;g++){n[g]=(l[g]^j[g])}var c=[];for(var g=0;g<l.length;g++){c[g]=(n[g]^d[g])}var m="";var o=0;for(var g=0;g<l.length;g++){if(g==0){o=parseInt(c[g],16)}else{var h=c[g];if(h<10){m=m+"0"+h.toString(16)}else{if(h.toString(16)=="f"||h.toString(16)=="F"){m=m+"0"}else{m=m+h.toString(16)}}}}if(m.length>=o){szReturn=m.substring(0,o)}else{szReturn="ERROR"}return szReturn}else{return"Invalid RefNo"}}else{return"Invalid PinBlock"}}else{return"Invalid PAN Number"}};absa.index.cardPin.get8BitByteArray=function(f){var d=[];for(var e=0;e<f.length;e=e+2){var c=f.substring(e,(e+2));d.push(parseInt(c,16))}if(f.length==6){d.push(parseInt("00",16));d.push(parseInt("00",16));d.push(parseInt("00",16));d.push(parseInt("00",16));d.push(parseInt("00",16))}return d};absa.index.checkTheFrame=function(){if(top!=self){top.location.replace(self.location.href)}var c=parent.frames.DocHandler;if(c!=null){c.close();absa.openDocHandler.window=null}else{if(absa.openDocHandler.window!=null){absa.openDocHandler.window.close();absa.openDocHandler.window=null}}};absa.index.cifAlertContinue=function(c){gadgets.pubsub.publish("goTo:profile/managePersonalDetails/managePersonalDetails",{cifKeyValue:c})};absa.index.dspRedirectBack=function(){if(absa.DIGITALSALESPLATFORMUSEGOTOSITEPIPE=="true"){phe.loadingMessage.showLoadingMessage(document.body);top.location.href=location.origin+absa.CONTEXT+"/proxy?pipe=gotoSite&newUrl="+absa.DIGITALSALESPLATFORMURL}else{window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("unload",absa.index.doLogout,false):window.detachEvent("onunload",absa.index.doLogout);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);window.removeEventListener?window.removeEventListener("beforeunload",absa.index.doLogoutIE,false):window.detachEvent("onbeforeunload",absa.index.doLogoutIE);var f=bb.selector.query(document.body,".ap-jsp-body");var d="";var c=f.getAttribute("sid");var e=f.getAttribute("lang");if(e=="af"){e="A"}else{e="E"}document.write("<div style='display:hidden'>");document.write("<form novalidate name='dspForm' id='dspForm' method='POST' action='"+absa.DIGITALSALESPLATFORMURL+"' target='_top'>");document.write("<input type='hidden' name='src' value='AOL'>");document.write("<input type='hidden' name='lang' value='"+e+"'>");document.write("</form>");document.write("<script language='javascript'>function doDSP_Login(){ var dspF = document.getElementById('dspForm'); dspF.submit(); } doDSP_Login();<\/script>");document.write("</div>");return false}};absa.index.genderAlertContinue=function(){gadgets.pubsub.publish("goTo:westernUnion/westernUnionViewBeneficiaries","")};absa.index.later=function(){var c=bb.selector.query(window.document,".ap-sendWUTransfer-form");phe.tabBox.reloadTab(c)};absa.index.genericModalChkBox=function(i,d,e){var h=phe.checkBox.isChecked(d);var c;if(i=="A"){c={uniqCode:absa.GENMODALA_UNIQCODE}}else{c={uniqCode:absa.GENMODALB_UNIQCODE}}if(h){c.theValue="Y";if(i=="A"){absa.GENMODALA_HASCLIENTINDICATEDYET="true"}else{absa.GENMODALB_HASCLIENTINDICATEDYET="true"}}else{c.theValue="N";if(i=="A"){absa.GENMODALA_HASCLIENTINDICATEDYET="false"}else{absa.GENMODALB_HASCLIENTINDICATEDYET="false"}}var g={};g[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;g[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(c);var f="";if(e){f="proxy?pipe=genericEmptyResponse&xslFile=genericModal-updateReadConfirm"}else{f="proxy?pipe=genericEmptyResponse&xslFile=genericModal-updateDontShowAgain"}absa.io.makeRequest(f,function(j){if(!j.errors.length){}},g)};absa.index.genericModalBtnJSFunc=function(l,h){if(absa.index._genericModalCloseBtnCanWeContinue(h)){if(l=="A"){absa.index.genericModalA_CloseBtn(h)}else{absa.index.genericModalB_CloseBtn(h)}var d=h;var j=bb.selector.query(h,".ap-jsFunctionTxt");var e=bb.string.trim(j.value);if(e!=""&&e.length>13){var f=(e.indexOf("(")+1);var i=e.indexOf(")");var m=e.substring(f,i);var g=m.split(",");if(g.length==1){if(g[0]==""){g[0]=d;m="oBtn"}else{g.unshift(d);m="oBtn, "+m}}else{g.unshift(d);m="oBtn, "+m}f=(e.indexOf("{")+1);i=e.indexOf("}");var c=e.substring(f,i);var k=new Function(m,c);if(k){k.apply(null,g)}}}};absa.index.genericModalA_CloseBtn=function(c){if(absa.index._genericModalCloseBtnCanWeContinue("A",c)){phe.modal.onCloseModalButtonClick(c)}};absa.index.genericModalB_CloseBtn=function(c){if(absa.index._genericModalCloseBtnCanWeContinue("B",c)){phe.modal.onCloseModalButtonClick(c)}};absa.index._genericModalCloseBtnCanWeContinue=function(f,c){var e=bb.selector.queryAncestor(c,".ap-genericModal-form");if(f=="A"){if(absa.GENMODALA_READCONFIRM=="true"){var d=bb.selector.query(e,".ap-genericModalA-chkBox-readConfirm");if(absa.form.validate.checkElement(d)){return true}else{return false}}else{return true}}else{if(absa.GENMODALB_READCONFIRM=="true"){var d=bb.selector.query(e,".ap-genericModalB-chkBox-readConfirm");if(absa.form.validate.checkElement(d)){return true}else{return false}}else{return true}}};absa.index.n2faDontHaveMySurecheckDevice=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=doNotHaveMySurecheck2Device",absa.locale["2FA/General/Label/MoreInfoTitle"],"","",absa.LANG,"600",true);return false};absa.index.n2faMoreInfoModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=moreInfo",absa.locale["2FA/General/Label/MoreInfoTitle"],"","",absa.LANG,"600",true);return false};absa.index.n2faNoSmartPhoneModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=dontHaveASmartPhone",absa.locale["Common/General/Label/AbsaOnline"],"","",absa.LANG,"500",true)};absa.index.n2faDontWantSureCheck2Modal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=dontWantSureCheck",absa.locale["2FA/General/Label/SimSwapFraudProtection"],"","",absa.LANG,"480",true);return false};absa.index.n2faWantSureCheck2Modal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=wantSureCheck",absa.locale["2FA/General/Label/SimSwapFraudProtection"],"","",absa.LANG,"480",true);return false};absa.index.n2faGetSureCheck2Modal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/start&mode=step1",absa.locale["2FA/General/Label/SimSwapFraudProtection"],"","",absa.LANG,"570",true);return false};absa.index.n2faCloseModalContinueBanking=function(c){phe.modal.onCloseModalButtonClick(c);absa.index.refreshUpdaters(true)};absa.index.n2faLaunchModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=launch",absa.locale["2FA/General/Label/SureCheck2"],"","",absa.LANG,"468",false);return false};absa.index.n2faGracePeriodModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=gracePeriod",absa.locale["2FA/General/Label/SureCheck2Reminder"],"","",absa.LANG,"494",false);return false};absa.index.n2faMustUpgradeModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=mustUpgrade",absa.locale["2FA/General/Label/SimSwapFraudProtection"],"","",absa.LANG,"470",true);return false};absa.index.n2faCantInstallAppModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=cantInstallApp",absa.locale["2FA/General/Label/SimSwapFraudProtection"],"","",absa.LANG,"470",true);return false};absa.index.n2faNoSmartphoneUpgradeReminderModal=function(){absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=noSmartphoneUpgradeReminder",absa.locale["2FA/General/Label/UpgradeToSureCheck2Now"],"","",absa.LANG,"470",true);return false};absa.index.n2faResizeModal=function(){alert("its here")};absa.index.n2faCloseModal=function(c){var d=bb.selector.queryAncestor(c,".ui-form");if(absa.form.validate(d)){absa.index.n2faRegisterPollCount=999;phe.modal.hideModal();absa.intercept.checkIfIEUpgradeNeeded()}else{return false}};absa.index.n2faCloseModalForceIt=function(c){absa.index.n2faRegisterPollCount=999;phe.modal.onCloseModalButtonClick(c)};absa.index.n2faCloseModalNoSmartphone=function(f){var g=bb.selector.queryAncestor(f,".ui-form");if(absa.form.validate(g)){var d=bb.selector.query(g,".ap-n2fa-noSmartphoneError");phe.loadingMessage.showLoadingMessage(g,absa.locale["Common/General/Label/PleaseWait"]+"...");var c={};c.pipe="genericWebservice";c.ws="SecurityWebService";c.action="updateSecondFactorState";c.secondFactorState="14";c.snoozed="true";var e={};e[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;e[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(c);absa.io.makeRequest("proxy",function(m){if(!m.errors.length){phe.loadingMessage.hideLoadingMessage(g);var o=bb.html.createElementFromString(m.text);var i=bb.selector.query(o,".ap-n2fa-updateSecondFactorState");if(i){var k=i.getAttribute("result");var n=i.getAttribute("resultCode");var j=i.getAttribute("resultKey");var l=i.getAttribute("resultDefaultMessage");if(k=="success"){phe.modal.onCloseModalButtonClick(f)}else{var h=bb.selector.query(d,".ui-message-body");h.innerHTML=l;phe.common.show(d)}}else{phe.common.show(d)}phe.loadingMessage.hideLoadingMessage(g)}else{var h=bb.selector.query(d,".ui-message-body");h.innerHTML=m.errors[0];phe.common.show(d);phe.loadingMessage.hideLoadingMessage(g);return false}},e)}else{return false}};absa.index.n2faSendDownloadLink=function(c){var j=bb.selector.queryAncestor(c,".ui-form");phe.loadingMessage.showLoadingMessage(j,absa.locale["Common/General/Label/PleaseWait"]+"...");var i=bb.selector.query(j,".ap-n2fa-sendDownloadLink-grid");var d=bb.selector.query(j,".ap-n2fa-cellNo");var g=bb.selector.query(j,".ap-n2fa-downloadLnkHasBeenSent");var e=bb.selector.query(j,".ap-n2fa-downloadLnkFailure");phe.common.hide(g);phe.common.hide(e);if(absa.form.validate.checkElement(d)){var k=phe.textBox.getValue(d);k=bb.string.trim(k);var h=k.replace(/\*/g,"0");var l={};l.cellphone=h;var f={};f[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;f[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(l);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=sendAppDownloadLink",function(n){absa.hidePleaseWait();if(!n.errors.length){var s=bb.html.createElementFromString(n.text);var o=bb.selector.query(s,".ap-n2fa-sendAppDownloadLnk-success");if(o){var p=phe.common.getAttribute(o,"data-success");if(p=="true"){phe.common.show(g)}else{var r=bb.selector.query(s,".error");if(r){var m=phe.common.getAttribute(r,"data-error-msg");var q=bb.selector.query(e,".ui-message-body");q.innerHTML=m}phe.common.show(e)}}}else{phe.common.show(e)}phe.loadingMessage.hideLoadingMessage(j)},f)}};absa.index.n2faRegisterPollCount=0;absa.index.n2faRegisterQRCodeScanned=0;absa.index.n2faRegisterPollCountMAX=18;absa.index.n2faRegisterPolling=function(c){var d=bb.selector.queryAncestor(c,".ui-modal");if(d){var e=bb.selector.query(c,".ui-wizard-body-selected");var f=bb.selector.query(e,".ui-form");if(bb.html.hasClass(f,"ap-n2fa-getSureCheck-form-step2")){d.setAttribute("style","width:620px;");phe.modal.updatePosition();setTimeout(function(){absa.index.n2faRegisterPollCount=0;absa.index.n2faRegisterPollingLoop(c)},10000)}}};absa.index.bShowScanCodeExpired2FA=false;absa.index.doPollAgain2FA=false;absa.index.n2faRegisterPollingLoop=function(c){absa.index.bShowScanCodeExpired2FA=false;var j=bb.selector.query(c,".ui-form");if(j==null){j=bb.selector.queryAncestor(c,".ui-form")}if(absa.index.n2faRegisterPollCount<=absa.index.n2faRegisterPollCountMAX){absa.index.n2faRegisterPollCount++;var f=bb.selector.queryAncestor(j,".ui-modalBody");if(f!=null){f.focus()}var e=bb.selector.query(j,".ap-n2fa-qrCode");var g=e.getAttribute("uniquenumber");var d=bb.selector.query(j,".ap-n2fa-getSureCheck-referenceNumber");var i=phe.hiddenField.getValue(d);absa.index.doPollAgain2FA=false;absa.io.makeRequest("proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=getSecondFactorEnrollmentState&mode=polling&referenceNumber="+encodeURI(i),function(k){if(!k.errors.length){var s=bb.html.createElementFromString(k.text);var l=bb.selector.query(s,".ap-n2fa-enrollmentState-polling");if(l){var p=phe.common.getAttribute(l,"data-state");var u=phe.common.getAttribute(l,"data-nickname");if(u.length>0){var m=phe.common.getAttribute(l,"data-manufacturer");var n=phe.common.getAttribute(l,"data-model");var o=phe.common.getAttribute(l,"data-primaryDevice");var t=phe.form.getAttribute(j,"action");t+="&nickname="+u+"&manufacturer="+m+"&model="+n+"&isPrimaryDevice="+o;var t=phe.form.setAttribute(j,"action",encodeURI(t))}if(p!=null){switch(p){case"50":absa.index.doPollAgain2FA=true;break;case"60":if(absa.index.n2faRegisterQRCodeScanned==0){absa.index.n2faRegisterQRCodeScanned=999;absa.index.n2faRegisterPollCountMAX=30;absa.index.n2faRegisterPollCount=0}phe.loadingMessage.showLoadingMessageSureCheck2(c,g);absa.index.doPollAgain2FA=true;break;case"70":phe.loadingMessage.showLoadingMessageSureCheck2(c,g);absa.index.doPollAgain2FA=true;break;case"75":phe.loadingMessage.showLoadingMessage(j,absa.locale["2FA/General/Label/DeviceRegistrationSecondary"]+" ...");var r=bb.selector.queryAncestor(j,".ui-modal");if(r){r.setAttribute("style","width:860px;");phe.modal.updatePosition()}absa.form.validateAndSubmit(j);break;case"80":phe.loadingMessage.showLoadingMessage(j,absa.locale["2FA/General/Label/DeviceRegistrationSecondary"]+" ...");var r=bb.selector.queryAncestor(j,".ui-modal");if(r){r.setAttribute("style","width:860px;");phe.modal.updatePosition()}absa.form.validateAndSubmit(j);break;case"90":phe.loadingMessage.showLoadingMessage(j,absa.locale["2FA/General/Label/DeviceRegistrationPrimary"]+" ...");var r=bb.selector.queryAncestor(j,".ui-modal");if(r){r.setAttribute("style","width:860px;");phe.modal.updatePosition()}var q=bb.selector.query(j,".ap-n2fa-getSureCheck-isPrimaryDevice");if(q){phe.hiddenField.setValue(q,"true")}absa.form.validateAndSubmit(j);break;case"95":phe.loadingMessage.showLoadingMessage(j,absa.locale["2FA/General/Label/DeviceRegistrationPending"]+" ...");var r=bb.selector.queryAncestor(j,".ui-modal");if(r){r.setAttribute("style","width:860px;");phe.modal.updatePosition()}phe.common.setAttribute(j,"action","proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/start&mode=error");absa.form.validateAndSubmit(j);break;case"999":phe.loadingMessage.hideLoadingMessage(j);absa.index.bShowScanCodeExpired2FA=true;absa.index.doPollAgain2FA=false;break;default:}}}if(absa.index.doPollAgain2FA){setTimeout(function(){absa.index.n2faRegisterPollingLoop(c)},10000)}}else{setTimeout(function(){absa.index.n2faRegisterPollingLoop(c)},10000)}})}else{if(absa.index.n2faRegisterPollCountMAX==18){absa.index.bShowScanCodeExpired2FA=true;absa.index.doPollAgain2FA=false}else{absa.index.doLogout()}}if(absa.index.bShowScanCodeExpired2FA){absa.index.n2faRegisterPollCount=0;var e=bb.selector.query(j,".ap-n2fa-qrCode");var h=bb.selector.query(j,".ap-n2fa-qrCodeExpired-grid");phe.common.hide(e);phe.common.show(h)}};absa.index.n2faCloseLoadingStartAgain=function(c){var f=bb.selector.queryAncestor(c,".ui-wizard-body-selected");if(f!=null){phe.loadingMessage.hideLoadingMessage(f)}absa.index.bShowScanCodeExpired2FA=true;absa.index.doPollAgain2FA=false;absa.index.n2faRegisterPollCount=19;absa.index.n2faRegisterPollCountMAX=18;var g=bb.selector.query(f,".ui-form");var d=bb.selector.query(g,".ap-n2fa-qrCode");var e=bb.selector.query(g,".ap-n2fa-qrCodeExpired-grid");phe.common.hide(d);phe.common.show(e)};absa.index.n2faGenerateNewQRCode=function(f){absa.index.n2faRegisterPollCount=0;var g=bb.selector.queryAncestor(f,".ui-form");var c=bb.selector.query(g,".ap-n2fa-qrCode");var e=bb.selector.query(g,".ap-n2fa-qrCodeExpired-grid");phe.common.hide(e);phe.common.show(c);absa.wizard.backButton(f);var d=bb.selector.query(document.body,".ap-n2fa-getSureCheck-form-step1");absa.form.validateAndSubmit(d)};absa.index.createCookie=function(e,f,g){var c="";if(g){var d=new Date();d.setTime(d.getTime()+(g*24*60*60*1000));c="; expires="+d.toGMTString()}else{c=""}document.cookie=e+"="+f+c+"; secure; path=/"};absa.index.readCookie=function(e){var g=e+"=";var d=document.cookie.split(";");for(var f=0;f<d.length;f++){var h=d[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return h.substring(g.length,h.length)}}return null};absa.index.eraseCookie=function(c){createCookie(c,"",-1)};absa.index.rbaEmploymentStatusChange=function(d,f,c){if(f==null|f==""){f=0}if(c==null|c==""){c=0}var h=bb.selector.queryAncestor(d,".ui-form");if(h!=null){var g=bb.selector.query(h,".rba-employmentStatus");if(g!=null){var k=phe.select.getValue(g);var e=bb.selector.query(h,".ap-applySaveInvest-rbaOccupation-row");if(e!=null){var i=bb.selector.query(e,".rba-occupation");if(i!=null){if(Number(k)==1|Number(k)==2|Number(k)==3|Number(k)==8|Number(k)==9){phe.common.show(e);phe.select.setAttribute(i,"required","true");if(Number(k)==Number(f)){for(var j=0;j<phe.select.getLength(i);j++){if(Number(i.options[j].value)==Number(c)){phe.select.setSelectedIndex(i,j)}}}}else{phe.select.setSelectedIndex(i,0);phe.select.setAttribute(i,"required","false");phe.common.hide(e)}absa.form.validate.checkElement(i)}}}}};absa.index.taxFreeSavingsAmountChk=function(d,c){if(phe.textBox.getValue(d)!=""){var e=phe.textBox.getValue(d);if(c==true&&Number(e)>Number(absa.TAXFREESAVINGSLUMPSUM)){return false}else{if(c==false&&Number(e)>Number(absa.TAXFREESAVINGSMONTHLY)){return false}}}return true};document.addEventListener?document.addEventListener("click",absa.index.resetTimer,false):document.attachEvent("onclick",absa.index.resetTimer);document.addEventListener?document.addEventListener("keyup",absa.index.resetTimerKeyUp,false):document.attachEvent("onkeyup",absa.index.resetTimerKeyUp);window.addEventListener?window.addEventListener("load",absa.index.resetTimer,false):window.attachEvent("onload",absa.index.resetTimer);window.addEventListener?window.addEventListener("unload",absa.index.doLogout,false):window.attachEvent("onunload",absa.index.doLogout);window.addEventListener?window.addEventListener("beforeunload",absa.index.doLogoutIE,false):window.attachEvent("onbeforeunload",absa.index.doLogoutIE);window.addEventListener?window.addEventListener("blur",absa.index.doBlurMe,false):window.attachEvent("onblur",absa.index.doBlurMe);window.addEventListener?window.addEventListener("focus",absa.index.doFocusMe,false):window.attachEvent("onfocus",absa.index.doFocusMe);document.addEventListener?document.addEventListener("keydown",absa.index.checkKeyDown,false):document.attachEvent("onkeydown",absa.index.checkKeyDown);window.addEventListener?window.addEventListener("message",absa.index.viewQuote.receiveMsgFromIFrame,false):window.attachEvent("onmessage",absa.index.viewQuote.receiveMsgFromIFrame);